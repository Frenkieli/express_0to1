module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=require("joi")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("mysql")},function(e,t){e.exports=require("express-validation")},function(e,t){e.exports=require("jsonwebtoken")},function(e,t){e.exports=require("bcrypt")},function(e,t){e.exports=require("http-status")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("cors")},function(e,t){e.exports=require("morgan")},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}),f=e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}),y=(e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}),m=e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}),b=e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})});var g=(e,t)=>{h().then(e=>{t.send(e)}).catch(e=>t.send(e))},w=(e,t)=>{const n=e.body;f(n).then(e=>{t.send(e)}).catch(e=>t.send(e))},v=(e,t)=>{const n=e.params.article_id,r=e.body;y(r,n).then(e=>{t.send(e)}).catch(e=>t.send(e))},_=(e,t)=>{const n=e.params.article_id;m(n).then(e=>{t.send(e)}).catch(e=>t.send(e))},x=(e,t)=>{b(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))},E=n(13),S=n.n(E),O=n(1),P=n.n(O),k={createArticle:{body:{user_id:P.a.number().required(),article_title:P.a.string().required(),article_tag:P.a.string().required(),article_content:P.a.string().min(20).required()}},createUser:{body:{user_name:P.a.string().required(),user_mail:P.a.string().email().trim().required(),user_password:P.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const j=o.a.Router();j.route("/").get(g).post(u()(k.createArticle),w),j.route("/:article_id").put(v).delete(_),j.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},x),j.get("/supertest",S.a);var q=j,T=n(6),M=n.n(T),N=n(7),C=n.n(N);class A extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var L={LoginError1:class extends A{constructor(e="信箱尚未註冊！",t=C.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends A{constructor(e="您輸入的密碼有誤！",t=C.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const D=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var R=e=>new Promise((t,n)=>{D.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}),I=()=>new Promise((e,t)=>{D.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}),U=(e,t)=>new Promise((n,r)=>{D.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}),z=e=>new Promise((t,n)=>{D.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}),H=e=>new Promise((t,n)=>{D.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new L.LoginError1);else{const r=s[0].user_password,o=e.user_password;M.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new L.LoginError2)})}o.release()})})});var F=(e,t)=>{const n={user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:M.a.hashSync(e.body.user_password,10)};R(n).then(e=>{t.send(e)}).catch(e=>t.send(e))},Q=(e,t)=>{I().then(e=>{t.send(e)}).catch(e=>t.send(e))},B=(e,t)=>{const n=e.params.user_id,r=e.body;U(r,n).then(e=>{t.send(e)}).catch(e=>t.send(e))},V=(e,t)=>{const n=e.params.user_id;z(n).then(e=>{t.send(e)}).catch(e=>t.send(e))},$=(e,t,n)=>{const r=e.body;H(r).then(e=>{t.send(e)}).catch(e=>{n(e)})};const Y=o.a.Router();Y.route("/").get(Q).post(u()(k.createUser),F),Y.route("/:user_id").put(B).delete(V),Y.route("/login").post($);var W=Y;const K=o.a.Router();K.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),K.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),K.use("/article",q),K.use("/user",W);var J=K,G=n(8),Z=n.n(G),X=n(9),ee=n.n(X),te=n(10),ne=n.n(te);const re=o()();re.use(Z.a.json()),re.use(Z.a.urlencoded({extended:!0})),re.use((e,t,n,r)=>{let o,s,i;if(e instanceof expressValidation.ValidationError){return"query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new L.APIError(o,i,!0,s))}return r(e)}),re.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),re.use(ee()()),re.use(ne()("dev")),re.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),re.use("/api",J);t.a=re},function(e,t){e.exports=require("dotenv")},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=require("chai")},function(e,t){e.exports=require("supertest")},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(13),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});const k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(9),A=n.n(C),L=n(10),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(12)},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(16)},function(e,t){e.exports=n(17)},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(13),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(9),A=n.n(C),L=n(10),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(12)},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(16)},function(e,t){e.exports=n(17)},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(13),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(9),A=n.n(C),L=n(10),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(12)},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(16)},function(e,t){e.exports=n(17)},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(13),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(9),A=n.n(C),L=n(10),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(12)},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(16)},function(e,t){e.exports=n(17)},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(13),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(9),A=n.n(C),L=n(10),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(12)},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(16)},function(e,t){e.exports=n(17)},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(13),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(9),A=n.n(C),L=n(10),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(12)},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(16)},function(e,t){e.exports=n(17)},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(13),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(9),A=n.n(C),L=n(10),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(12)},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(16)},function(e,t){e.exports=n(17)},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(13),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(9),A=n.n(C),L=n(10),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(12)},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(16)},function(e,t){e.exports=n(17)},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(13),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(9),A=n.n(C),L=n(10),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(12)},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(16)},function(e,t){e.exports=n(17)},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(13),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(9),A=n.n(C),L=n(10),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(12)},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(16)},function(e,t){e.exports=n(17)},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(13),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(9),A=n.n(C),L=n(10),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(12)},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(16)},function(e,t){e.exports=n(17)},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(13),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(9),A=n.n(C),L=n(10),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(12)},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(16)},function(e,t){e.exports=n(17)},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(13),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(9),A=n.n(C),L=n(10),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(12)},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(16)},function(e,t){e.exports=n(17)},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(13),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(9),A=n.n(C),L=n(10),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(12)},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(16)},function(e,t){e.exports=n(17)},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(13),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(9),A=n.n(C),L=n(10),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(12)},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(16)},function(e,t){e.exports=n(17)},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(13),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(9),A=n.n(C),L=n(10),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(12)},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(16)},function(e,t){e.exports=n(17)},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(13),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(9),A=n.n(C),L=n(10),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(12)},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(16)},function(e,t){e.exports=n(17)},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(13),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(9),A=n.n(C),L=n(10),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(12)},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(16)},function(e,t){e.exports=n(17)},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(13),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(9),A=n.n(C),L=n(10),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(12)},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(16)},function(e,t){e.exports=n(17)},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(13),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(9),A=n.n(C),L=n(10),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(12)},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(16)},function(e,t){e.exports=n(17)},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(13),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(9),A=n.n(C),L=n(10),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(12)},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(16)},function(e,t){e.exports=n(17)},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(13),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(9),A=n.n(C),L=n(10),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(12)},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(16)},function(e,t){e.exports=n(17)},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=(n(13),n(1)),f=n.n(h),y={createArticle:{body:{user_id:f.a.number().required(),article_title:f.a.string().required(),article_tag:f.a.string().required(),article_content:f.a.string().min(20).required()}},createUser:{body:{user_name:f.a.string().required(),user_mail:f.a.string().email().trim().required(),user_password:f.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const m=o.a.Router();m.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(y.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),m.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),m.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))});var b=m,g=n(6),w=n.n(g),v=n(7),_=n.n(v);class x extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var E={LoginError1:class extends x{constructor(e="信箱尚未註冊！",t=_.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends x{constructor(e="您輸入的密碼有誤！",t=_.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const S=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),O=o.a.Router();O.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{S.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(y.createUser),(e,t)=>{(e=>new Promise((t,n)=>{S.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:w.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),O.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{S.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{S.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),O.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{S.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new E.LoginError1);else{const r=s[0].user_password,o=e.user_password;w.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new E.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var P=O;const k=o.a.Router();k.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),k.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),k.use("/article",b),k.use("/user",P);var j=k,q=n(8),T=n.n(q),M=n(9),N=n.n(M),C=n(10),A=n.n(C);const L=o()();L.use(T.a.json()),L.use(T.a.urlencoded({extended:!0})),L.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new E.APIError(o,i,!0,s))):r(e)}),L.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),L.use(N()()),L.use(A()("dev")),L.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),L.use("/api",j),t.a=L},function(e,t){e.exports=n(12)},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(16)},function(e,t){e.exports=n(17)},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(13),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(9),A=n.n(C),L=n(10),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(12)},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(16)},function(e,t){e.exports=n(17)},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(13),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(9),A=n.n(C),L=n(10),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(12)},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(16)},function(e,t){e.exports=n(17)},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(13),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(9),A=n.n(C),L=n(10),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(12)},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(16)},function(e,t){e.exports=n(17)},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(13),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(9),A=n.n(C),L=n(10),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(12)},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(16)},function(e,t){e.exports=n(17)},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(12).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(13),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(9),A=n.n(C),L=n(10),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(12)},function(e,t,n){const{expect:r}=n(16),o=n(17);n(18);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(11);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(15)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(16)},function(e,t){e.exports=n(17)},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(14).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(42),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(10),A=n.n(C),L=n(11),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(10)},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(9);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(13)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(12)},function(e,t){
/*!
 * Chai - flag utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t,n){var r=e.__flags||(e.__flags=Object.create(null));if(3!==arguments.length)return r[t];r[t]=n}},function(e,t,n){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=[];
/*!
 * Chai version
 */t.version="4.2.0",
/*!
 * Assertion Error
 */
t.AssertionError=n(31);
/*!
 * Utils for plugins (not exported)
 */
var o=n(44);t.use=function(e){return~r.indexOf(e)||(e(t,o),r.push(e)),t},
/*!
 * Utility Functions
 */
t.util=o;
/*!
 * Configuration
 */
var s=n(18);t.config=s;
/*!
 * Primary `Assertion` prototype
 */
var i=n(61);t.use(i);
/*!
 * Core Assertions
 */
var a=n(62);t.use(a);
/*!
 * Expect interface
 */
var c=n(63);t.use(c);
/*!
 * Should interface
 */
var u=n(64);t.use(u);
/*!
 * Assert interface
 */
var l=n(65);t.use(l)},function(e,t){
/*!
 * Chai - transferFlags utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t,n){var r=e.__flags||(e.__flags=Object.create(null));for(var o in t.__flags||(t.__flags=Object.create(null)),n=3!==arguments.length||n,r)(n||"object"!==o&&"ssfi"!==o&&"lockSsfi"!==o&&"message"!=o)&&(t.__flags[o]=r[o])}},function(e,t){e.exports={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"]}},function(e,t,n){var r=n(18);
/*!
 * Chai - isProxyEnabled helper
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */e.exports=function(){return r.useProxy&&"undefined"!=typeof Proxy&&"undefined"!=typeof Reflect}},function(e,t){var n=Object.getOwnPropertyDescriptor((function(){}),"length");
/*!
 * Chai - addLengthGuard utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */e.exports=function(e,t,r){return n.configurable?(Object.defineProperty(e,"length",{get:function(){if(r)throw Error("Invalid Chai property: "+t+'.length. Due to a compatibility issue, "length" cannot directly follow "'+t+'". Use "'+t+'.lengthOf" instead.');throw Error("Invalid Chai property: "+t+'.length. See docs for proper usage of "'+t+'".')}}),e):e}},function(e,t,n){var r=n(18),o=n(15),s=n(35),i=n(19),a=["__flags","__methods","_obj","assert"];e.exports=function(e,t){return i()?new Proxy(e,{get:function e(n,i){if("string"==typeof i&&-1===r.proxyExcludedKeys.indexOf(i)&&!Reflect.has(n,i)){if(t)throw Error("Invalid Chai property: "+t+"."+i+'. See docs for proper usage of "'+t+'".');var c=null,u=4;throw s(n).forEach((function(e){if(!Object.prototype.hasOwnProperty(e)&&-1===a.indexOf(e)){var t=function(e,t,n){if(Math.abs(e.length-t.length)>=n)return n;for(var r=[],o=0;o<=e.length;o++)r[o]=Array(t.length+1).fill(0),r[o][0]=o;for(var s=0;s<t.length;s++)r[0][s]=s;for(o=1;o<=e.length;o++){var i=e.charCodeAt(o-1);for(s=1;s<=t.length;s++)Math.abs(o-s)>=n?r[o][s]=n:r[o][s]=Math.min(r[o-1][s]+1,r[o][s-1]+1,r[o-1][s-1]+(i===t.charCodeAt(s-1)?0:1))}return r[e.length][t.length]}(i,e,u);t<u&&(c=e,u=t)}})),null!==c?Error("Invalid Chai property: "+i+'. Did you mean "'+c+'"?'):Error("Invalid Chai property: "+i)}return-1!==a.indexOf(i)||o(n,"lockSsfi")||o(n,"ssfi",e),Reflect.get(n,i)}}):e}},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t,n){var r;r=function(){"use strict";var e="function"==typeof Promise,t="object"==typeof self?self:global,n="undefined"!=typeof Symbol,r="undefined"!=typeof Map,o="undefined"!=typeof Set,s="undefined"!=typeof WeakMap,i="undefined"!=typeof WeakSet,a="undefined"!=typeof DataView,c=n&&void 0!==Symbol.iterator,u=n&&void 0!==Symbol.toStringTag,l=o&&"function"==typeof Set.prototype.entries,d=r&&"function"==typeof Map.prototype.entries,p=l&&Object.getPrototypeOf((new Set).entries()),h=d&&Object.getPrototypeOf((new Map).entries()),f=c&&"function"==typeof Array.prototype[Symbol.iterator],y=f&&Object.getPrototypeOf([][Symbol.iterator]()),m=c&&"function"==typeof String.prototype[Symbol.iterator],b=m&&Object.getPrototypeOf(""[Symbol.iterator]());return function(n){var c=typeof n;if("object"!==c)return c;if(null===n)return"null";if(n===t)return"global";if(Array.isArray(n)&&(!1===u||!(Symbol.toStringTag in n)))return"Array";if("object"==typeof window&&null!==window){if("object"==typeof window.location&&n===window.location)return"Location";if("object"==typeof window.document&&n===window.document)return"Document";if("object"==typeof window.navigator){if("object"==typeof window.navigator.mimeTypes&&n===window.navigator.mimeTypes)return"MimeTypeArray";if("object"==typeof window.navigator.plugins&&n===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"==typeof window.HTMLElement)&&n instanceof window.HTMLElement){if("BLOCKQUOTE"===n.tagName)return"HTMLQuoteElement";if("TD"===n.tagName)return"HTMLTableDataCellElement";if("TH"===n.tagName)return"HTMLTableHeaderCellElement"}}var l=u&&n[Symbol.toStringTag];if("string"==typeof l)return l;var d=Object.getPrototypeOf(n);return d===RegExp.prototype?"RegExp":d===Date.prototype?"Date":e&&d===Promise.prototype?"Promise":o&&d===Set.prototype?"Set":r&&d===Map.prototype?"Map":i&&d===WeakSet.prototype?"WeakSet":s&&d===WeakMap.prototype?"WeakMap":a&&d===DataView.prototype?"DataView":r&&d===h?"Map Iterator":o&&d===p?"Set Iterator":f&&d===y?"Array Iterator":m&&d===b?"String Iterator":null===d?"Object":Object.prototype.toString.call(n).slice(8,-1)}},e.exports=r()},function(e,t,n){var r=n(34),o=n(35),s=n(49),i=n(18);e.exports=function(e,t,n,r){return c({showHidden:t,seen:[],stylize:function(e){return e}},e,void 0===n?2:n)};var a=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&"nodeType"in e&&1===e.nodeType&&"string"==typeof e.nodeName};function c(e,n,y){if(n&&"function"==typeof n.inspect&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var m=n.inspect(y,e);return"string"!=typeof m&&(m=c(e,m,y)),m}var b=function(e,t){switch(typeof t){case"undefined":return e.stylize("undefined","undefined");case"string":var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string");case"number":return 0===t&&1/t==-1/0?e.stylize("-0","number"):e.stylize(""+t,"number");case"boolean":return e.stylize(""+t,"boolean");case"symbol":return e.stylize(t.toString(),"symbol")}if(null===t)return e.stylize("null","null")}(e,n);if(b)return b;if(a(n)){if("outerHTML"in n)return n.outerHTML;try{if(document.xmlVersion)return(new XMLSerializer).serializeToString(n);var g=document.createElementNS("http://www.w3.org/1999/xhtml","_");g.appendChild(n.cloneNode(!1));var w=g.innerHTML.replace("><",">"+n.innerHTML+"<");return g.innerHTML="",w}catch(e){}}var v,_,x=s(n),E=e.showHidden?o(n):x;if(0===E.length||h(n)&&(1===E.length&&"stack"===E[0]||2===E.length&&"description"===E[0]&&"stack"===E[1])){if("function"==typeof n)return _=(v=r(n))?": "+v:"",e.stylize("[Function"+_+"]","special");if(d(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(p(n))return e.stylize(Date.prototype.toUTCString.call(n),"date");if(h(n))return u(n)}var S,O,P="",k=!1,j=!1,q=["{","}"];if("object"==typeof(S=n)&&/\w+Array]$/.test(f(S))&&(j=!0,q=["[","]"]),function(e){return Array.isArray(e)||"object"==typeof e&&"[object Array]"===f(e)}(n)&&(k=!0,q=["[","]"]),"function"==typeof n&&(P=" [Function"+(_=(v=r(n))?": "+v:"")+"]"),d(n)&&(P=" "+RegExp.prototype.toString.call(n)),p(n)&&(P=" "+Date.prototype.toUTCString.call(n)),h(n))return u(n);if(0===E.length&&(!k||0==n.length))return q[0]+P+q[1];if(y<0)return d(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");if(e.seen.push(n),k)O=function(e,t,n,r,o){for(var s=[],i=0,a=t.length;i<a;++i)Object.prototype.hasOwnProperty.call(t,String(i))?s.push(l(e,t,n,r,String(i),!0)):s.push("");return o.forEach((function(o){o.match(/^\d+$/)||s.push(l(e,t,n,r,o,!0))})),s}(e,n,y,x,E);else{if(j)return function(e){for(var t="[ ",n=0;n<e.length;++n){if(t.length>=i.truncateThreshold-7){t+="...";break}t+=e[n]+", "}return-1!==(t+=" ]").indexOf(",  ]")&&(t=t.replace(",  ]"," ]")),t}(n);O=E.map((function(t){return l(e,n,y,x,t,k)}))}return e.seen.pop(),function(e,t,n){return e.reduce((function(e,t){return e+t.length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(O,P,q)}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,n,r,o,s){var i,a,u=Object.getOwnPropertyDescriptor(t,o);if(u&&(u.get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special"))),r.indexOf(o)<0&&(i="["+o+"]"),a||(e.seen.indexOf(t[o])<0?(a=c(e,t[o],null===n?null:n-1)).indexOf("\n")>-1&&(a=s?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),void 0===i){if(s&&o.match(/^\d+$/))return a;(i=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+a}function d(e){return"object"==typeof e&&"[object RegExp]"===f(e)}function p(e){return"object"==typeof e&&"[object Date]"===f(e)}function h(e){return"object"==typeof e&&"[object Error]"===f(e)}function f(e){return Object.prototype.toString.call(e)}},function(e,t,n){"use strict";const r=n(67)("superagent"),o=n(68),s=n(71),i=n(72),a=n(23).parse,c=n(23).format,u=n(23).resolve;let l=n(22);const d=n(29),p=n(38),h=n(74).unzip,f=n(76),y=n(77),m=n(40),b=n(24),g=n(78),w=n(41),v=n(39),_=n(28),x=n(79),E=n(80),S=n(30);function O(e,n){return"function"==typeof n?new t.Request("GET",e).end(n):1==arguments.length?new t.Request("GET",e):new t.Request(e,n)}function P(){}function k(e){const t=`node-superagent/${x.version}`;e._header={"user-agent":t},e.header={"User-Agent":t}}function j(e,t){d.call(this),"string"!=typeof t&&(t=c(t)),this._agent=!1,this._formData=null,this.method=e,this.url=t,k(this),this.writable=!0,this._redirects=0,this.redirects("HEAD"===e?0:5),this.cookies="",this.qs={},this._query=[],this.qsRaw=this._query,this._redirectList=[],this._streamRequest=!1,this.once("end",this.clearTimeout.bind(this))}function q(e){return/[\/+]json($|[^-\w])/.test(e)}function T(e){return~[301,302,303,305,307,308].indexOf(e)}(t=e.exports=O).Request=j,t.agent=n(82),t.Response=i,y.define({"application/x-www-form-urlencoded":["form","urlencoded","form-data"]},!0),t.protocols={"http:":b,"https:":m},t.serialize={"application/x-www-form-urlencoded":w.stringify,"application/json":JSON.stringify},t.parse=n(84),_.inherits(j,d),E(j.prototype),j.prototype.attach=function(e,t,n){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");let o=n||{};"string"==typeof n&&(o={filename:n}),"string"==typeof t?(o.filename||(o.filename=t),r("creating `fs.ReadStream` instance for file: %s",t),t=g.createReadStream(t)):!o.filename&&t.path&&(o.filename=t.path),this._getFormData().append(e,t,o)}return this},j.prototype._getFormData=function(){return this._formData||(this._formData=new s,this._formData.on("error",e=>{this.emit("error",e),this.abort()})),this._formData},j.prototype.agent=function(e){return arguments.length?(this._agent=e,this):this._agent},j.prototype.type=function(e){return this.set("Content-Type",~e.indexOf("/")?e:y.lookup(e))},j.prototype.accept=function(e){return this.set("Accept",~e.indexOf("/")?e:y.lookup(e))},j.prototype.query=function(e){return"string"==typeof e?this._query.push(e):f(this.qs,e),this},j.prototype.write=function(e,t){const n=this.request();return this._streamRequest||(this._streamRequest=!0),n.write(e,t)},j.prototype.pipe=function(e,t){return this.piped=!0,this.buffer(!1),this.end(),this._pipeContinue(e,t)},j.prototype._pipeContinue=function(e,t){return this.req.once("response",n=>{if(T(n.statusCode)&&this._redirects++!=this._maxRedirects)return this._redirect(n)._pipeContinue(e,t);if(this.res=n,this._emitResponse(),!this._aborted){if(this._shouldUnzip(n)){const r=v.createUnzip();r.on("error",t=>{t&&"Z_BUF_ERROR"===t.code?e.emit("end"):e.emit("error",t)}),n.pipe(r).pipe(e,t)}else n.pipe(e,t);n.once("end",()=>{this.emit("end")})}}),e},j.prototype.buffer=function(e){return this._buffer=!1!==e,this},j.prototype._redirect=function(e){let t=e.headers.location;if(!t)return this.callback(new Error("No location header for redirect"),e);r("redirect %s -> %s",this.url,t),t=u(this.url,t),e.resume();let n=this.req._headers;const o=a(t).host!==a(this.url).host;return 301!=e.statusCode&&302!=e.statusCode||(n=p.cleanHeader(this.req._headers,o),this.method="HEAD"==this.method?"HEAD":"GET",this._data=null),303==e.statusCode&&(n=p.cleanHeader(this.req._headers,o),this.method="GET",this._data=null),delete n.host,delete this.req,delete this._formData,k(this),this._endCalled=!1,this.url=t,this.qs={},this._query.length=0,this.set(n),this.emit("redirect",e),this._redirectList.push(this.url),this.end(this._callback),this},j.prototype.auth=function(e,t,n){1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(n=t,t=""),n||(n={type:"basic"});var r=function(e){return new Buffer(e).toString("base64")};return this._auth(e,t,n,r)},j.prototype.ca=function(e){return this._ca=e,this},j.prototype.key=function(e){return this._key=e,this},j.prototype.pfx=function(e){return"object"!=typeof e||Buffer.isBuffer(e)?this._pfx=e:(this._pfx=e.pfx,this._passphrase=e.passphrase),this},j.prototype.cert=function(e){return this._cert=e,this},j.prototype.request=function(){if(this.req)return this.req;const e={};try{const e=w.stringify(this.qs,{indices:!1,strictNullHandling:!0});e&&(this.qs={},this._query.push(e)),this._finalizeQueryString()}catch(e){return this.emit("error",e)}let n=this.url;const r=this._retries;if(0!=n.indexOf("http")&&(n=`http://${n}`),n=a(n),!0===/^https?\+unix:/.test(n.protocol)){n.protocol=`${n.protocol.split("+")[0]}:`;const t=n.path.match(/^([^/]+)(.+)$/);e.socketPath=t[1].replace(/%2F/g,"/"),n.path=t[2]}e.method=this.method,e.port=n.port,e.path=n.path,e.host=n.hostname,e.ca=this._ca,e.key=this._key,e.pfx=this._pfx,e.cert=this._cert,e.passphrase=this._passphrase,e.agent=this._agent;const o=t.protocols[n.protocol],s=this.req=o.request(e);if(s.setNoDelay(!0),"HEAD"!=e.method&&s.setHeader("Accept-Encoding","gzip, deflate"),this.protocol=n.protocol,this.host=n.host,s.once("drain",()=>{this.emit("drain")}),s.once("error",e=>{this._aborted||this._retries===r&&(this.response||this.callback(e))}),n.auth){const e=n.auth.split(":");this.auth(e[0],e[1])}this.username&&this.password&&this.auth(this.username,this.password);for(const e in this.header)this.header.hasOwnProperty(e)&&s.setHeader(e,this.header[e]);if(this.cookies)if(this.header.hasOwnProperty("cookie")){const e=new S.CookieJar;e.setCookies(this.header.cookie.split(";")),e.setCookies(this.cookies.split(";")),s.setHeader("Cookie",e.getCookies(S.CookieAccessInfo.All).toValueString())}else s.setHeader("Cookie",this.cookies);return s},j.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();const n=this._callback||P;if(this.clearTimeout(),this.called)return console.warn("superagent: double callback bug");if(this.called=!0,!e)try{if(!this._isResponseOK(t)){let n="Unsuccessful HTTP response";t&&(n=b.STATUS_CODES[t.status]||n),(e=new Error(n)).status=t?t.status:void 0}}catch(t){e=t}if(!e)return n(null,t);e.response=t,this._maxRetries&&(e.retries=this._retries-1),e&&this.listeners("error").length>0&&this.emit("error",e),n(e,t)},j.prototype._isHost=function(e){return Buffer.isBuffer(e)||e instanceof d||e instanceof s},j.prototype._emitResponse=function(e,t){const n=new i(this);return this.response=n,n.redirects=this._redirectList,void 0!==e&&(n.body=e),n.files=t,this.emit("response",n),n},j.prototype.end=function(e){return this.request(),r("%s %s",this.method,this.url),this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||P,this._end()},j.prototype._end=function(){let e=this._data;const n=this.req;let s=this._buffer;const i=this.method;if(this._setTimeouts(),"HEAD"!=i&&!n._headerSent){if("string"!=typeof e){let r=n.getHeader("Content-Type");r&&(r=r.split(";")[0]);let o=t.serialize[r];!o&&q(r)&&(o=t.serialize["application/json"]),o&&(e=o(e))}e&&!n.getHeader("Content-Length")&&n.setHeader("Content-Length",Buffer.isBuffer(e)?e.length:Buffer.byteLength(e))}n.once("response",e=>{if(r("%s %s -> %s",this.method,this.url,e.statusCode),this._responseTimeoutTimer&&clearTimeout(this._responseTimeoutTimer),this.piped)return;const i=this._maxRedirects,a=p.type(e.headers["content-type"]||"")||"text/plain",c=a.split("/")[0],u="multipart"==c,l=T(e.statusCode);let d=this._parser;const f=this._responseType;if(this.res=e,l&&this._redirects++!=i)return this._redirect(e);if("HEAD"==this.method)return this.emit("end"),void this.callback(null,this._emitResponse());if(this._shouldUnzip(e)&&h(n,e),!d)if(f)d=t.parse.image,s=!0;else if(u){const e=new o.IncomingForm;d=e.parse.bind(e),s=!0}else!function(e){const t=e.split("/")[0];return"image"==t||"video"==t}(a)?t.parse[a]?d=t.parse[a]:"text"==c?(d=t.parse.text,s=!1!==s):q(a)?(d=t.parse["application/json"],s=!1!==s):s&&(d=t.parse.text):(d=t.parse.image,s=!0);(void 0===s&&function(e){const t=e.split("/"),n=t[0],r=t[1];return"text"==n||"x-www-form-urlencoded"==r}(a)||q(a))&&(s=!0);let y=!1;if(s){let t=this._maxResponseSize||2e8;e.on("data",n=>{if((t-=n.byteLength||n.length)<0){const t=Error("Maximum response size reached");t.code="ETOOLARGE",y=!1,e.destroy(t)}})}if(d)try{y=s,d(e,(e,t,n)=>{if(!this.timedout)return e&&!this._aborted?this.callback(e):void(y&&(this.emit("end"),this.callback(null,this._emitResponse(t,n))))})}catch(e){return void this.callback(e)}if(this.res=e,s)e.once("error",e=>{y=!1,this.callback(e,null)}),y||e.once("end",()=>{r("end %s %s",this.method,this.url),this.emit("end"),this.callback(null,this._emitResponse())});else{if(r("unbuffered %s %s",this.method,this.url),this.callback(null,this._emitResponse()),u)return;e.once("end",()=>{r("end %s %s",this.method,this.url),this.emit("end")})}}),this.emit("request",this);const a=()=>{const e=n.getHeader("Content-Length");let t=0;const r=new d.Transform;return r._transform=(n,r,o)=>{t+=n.length,this.emit("progress",{direction:"upload",lengthComputable:!0,loaded:t,total:e}),o(null,n)},r},c=this._formData;if(c){const e=c.getHeaders();for(const t in e)r('setting FormData header: "%s: %s"',t,e[t]),n.setHeader(t,e[t]);c.getLength((e,t)=>{r("got FormData Content-Length: %s",t),"number"==typeof t&&n.setHeader("Content-Length",t),c.pipe(a()).pipe(n)})}else Buffer.isBuffer(e)?(e=>{const t=new d.Readable,n=e.length,r=n%16384,o=n-r;for(let n=0;n<o;n+=16384){const r=e.slice(n,n+16384);t.push(r)}if(r>0){const n=e.slice(-r);t.push(n)}return t.push(null),t})(e).pipe(a()).pipe(n):n.end(e);return this},j.prototype._shouldUnzip=e=>204!==e.statusCode&&304!==e.statusCode&&"0"!==e.headers["content-length"]&&/^\s*(?:deflate|gzip)\s*$/.test(e.headers["content-encoding"]),-1==l.indexOf("del")&&(l=l.slice(0)).push("del"),l.forEach(e=>{const t=e;e=(e="del"==e?"delete":e).toUpperCase(),O[t]=(t,n,r)=>{const o=O(e,t);return"function"==typeof n&&(r=n,n=null),n&&("GET"===e||"HEAD"===e?o.query(n):o.send(n)),r&&o.end(r),o}})},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){!function(){"use strict";function e(t,n,r,o){return this instanceof e?(this.domain=t||void 0,this.path=n||"/",this.secure=!!r,this.script=!!o,this):new e(t,n,r,o)}function n(e,t,r){return e instanceof n?e:this instanceof n?(this.name=null,this.value=null,this.expiration_date=1/0,this.path=String(r||"/"),this.explicit_path=!1,this.domain=t||null,this.explicit_domain=!1,this.secure=!1,this.noscript=!1,e&&this.parse(e,t,r),this):new n(e,t,r)}e.All=Object.freeze(Object.create(null)),t.CookieAccessInfo=e,t.Cookie=n,n.prototype.toString=function(){var e=[this.name+"="+this.value];return this.expiration_date!==1/0&&e.push("expires="+new Date(this.expiration_date).toGMTString()),this.domain&&e.push("domain="+this.domain),this.path&&e.push("path="+this.path),this.secure&&e.push("secure"),this.noscript&&e.push("httponly"),e.join("; ")},n.prototype.toValueString=function(){return this.name+"="+this.value};var r=/[:](?=\s*[a-zA-Z0-9_\-]+\s*[=])/g;function o(){var e,t;return this instanceof o?(e=Object.create(null),this.setCookie=function(r,o,s){var i,a;if(i=(r=new n(r,o,s)).expiration_date<=Date.now(),void 0!==e[r.name]){for(t=e[r.name],a=0;a<t.length;a+=1)if(t[a].collidesWith(r))return i?(t.splice(a,1),0===t.length&&delete e[r.name],!1):(t[a]=r,r);return!i&&(t.push(r),r)}return!i&&(e[r.name]=[r],e[r.name])},this.getCookie=function(n,r){var o,s;if(t=e[n])for(s=0;s<t.length;s+=1)if((o=t[s]).expiration_date<=Date.now())0===t.length&&delete e[o.name];else if(o.matches(r))return o},this.getCookies=function(t){var n,r,o=[];for(n in e)(r=this.getCookie(n,t))&&o.push(r);return o.toString=function(){return o.join(":")},o.toValueString=function(){return o.map((function(e){return e.toValueString()})).join(";")},o},this):new o}n.prototype.parse=function(e,t,r){if(this instanceof n){var o,s=e.split(";").filter((function(e){return!!e})),i=s[0].match(/([^=]+)=([\s\S]*)/);if(!i)return void console.warn("Invalid cookie header encountered. Header: '"+e+"'");var a=i[1],c=i[2];if("string"!=typeof a||0===a.length||"string"!=typeof c)return void console.warn("Unable to extract values from cookie header. Cookie: '"+e+"'");for(this.name=a,this.value=c,o=1;o<s.length;o+=1)switch(a=(i=s[o].match(/([^=]+)(?:=([\s\S]*))?/))[1].trim().toLowerCase(),c=i[2],a){case"httponly":this.noscript=!0;break;case"expires":this.expiration_date=c?Number(Date.parse(c)):1/0;break;case"path":this.path=c?c.trim():"",this.explicit_path=!0;break;case"domain":this.domain=c?c.trim():"",this.explicit_domain=!!this.domain;break;case"secure":this.secure=!0}return this.explicit_path||(this.path=r||"/"),this.explicit_domain||(this.domain=t),this}return(new n).parse(e,t,r)},n.prototype.matches=function(t){return t===e.All||!(this.noscript&&t.script||this.secure&&!t.secure||!this.collidesWith(t))},n.prototype.collidesWith=function(e){if(this.path&&!e.path||this.domain&&!e.domain)return!1;if(this.path&&0!==e.path.indexOf(this.path))return!1;if(this.explicit_path&&0!==e.path.indexOf(this.path))return!1;var t=e.domain&&e.domain.replace(/^[\.]/,""),n=this.domain&&this.domain.replace(/^[\.]/,"");if(n===t)return!0;if(n){if(!this.explicit_domain)return!1;var r=t.indexOf(n);return-1!==r&&r===t.length-n.length}return!0},t.CookieJar=o,o.prototype.setCookies=function(e,t,o){var s,i,a=[];for(e=(e=Array.isArray(e)?e:e.split(r)).map((function(e){return new n(e,t,o)})),s=0;s<e.length;s+=1)i=e[s],this.setCookie(i,t,o)&&a.push(i);return a}}()},function(e,t){
/*!
 * assertion-error
 * Copyright(c) 2013 Jake Luer <jake@qualiancy.com>
 * MIT Licensed
 */
/*!
 * Return a function that will copy properties from
 * one object to another excluding any originally
 * listed. Returned function will create a new `{}`.
 *
 * @param {String} excluded properties ...
 * @return {Function}
 */
function n(){var e=[].slice.call(arguments);function t(t,n){Object.keys(n).forEach((function(r){~e.indexOf(r)||(t[r]=n[r])}))}return function(){for(var e=[].slice.call(arguments),n=0,r={};n<e.length;n++)t(r,e[n]);return r}}function r(e,t,o){var s=n("name","message","stack","constructor","toJSON")(t||{});for(var i in this.message=e||"Unspecified AssertionError",this.showDiff=!1,s)this[i]=s[i];if(o=o||r,Error.captureStackTrace)Error.captureStackTrace(this,o);else try{throw new Error}catch(e){this.stack=e.stack}}
/*!
 * Inherit from Error.prototype
 */
/*!
 * Primary Exports
 */e.exports=r,r.prototype=Object.create(Error.prototype),
/*!
 * Statically set name
 */
r.prototype.name="AssertionError",
/*!
 * Ensure correct constructor
 */
r.prototype.constructor=r,r.prototype.toJSON=function(e){var t=n("constructor","toJSON","stack")({name:this.name},this);return!1!==e&&this.stack&&(t.stack=this.stack),t}},function(e,t){
/*!
 * Chai - getActual utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){return t.length>4?t[4]:e._obj}},function(e,t,n){
/*!
 * Chai - flag utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(26),o=n(18);e.exports=function(e){var t=r(e),n=Object.prototype.toString.call(e);if(o.truncateThreshold&&t.length>=o.truncateThreshold){if("[object Function]"===n)return e.name&&""!==e.name?"[Function: "+e.name+"]":"[Function]";if("[object Array]"===n)return"[ Array("+e.length+") ]";if("[object Object]"===n){var s=Object.keys(e);return"{ Object ("+(s.length>2?s.splice(0,2).join(", ")+", ...":s.join(", "))+") }"}return t}return t}},function(e,t,n){"use strict";var r=Function.prototype.toString,o=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\s\(\/]+)/;e.exports=function(e){if("function"!=typeof e)return null;var t="";if(void 0===Function.prototype.name&&void 0===e.name){var n=r.call(e).match(o);n&&(t=n[1])}else t=e.name;return t}},function(e,t){
/*!
 * Chai - getProperties utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e){var t=Object.getOwnPropertyNames(e);function n(e){-1===t.indexOf(e)&&t.push(e)}for(var r=Object.getPrototypeOf(e);null!==r;)Object.getOwnPropertyNames(r).forEach(n),r=Object.getPrototypeOf(r);return t}},function(e,t){
/*!
 * Chai - getOwnEnumerablePropertySymbols utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e){return"function"!=typeof Object.getOwnPropertySymbols?[]:Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))}},function(e,t,n){var r=n(27),o=n(28),s=n(24),i=n(40),a=n(89),c=r.Request;function u(e,t,n,r){c.call(this,t.toUpperCase(),n),this.redirects(0),this.buffer(),this.app=e,this._asserts=[],this.url="string"==typeof e?e+n:this.serverAddress(e,n,r)}function l(e,t,n){var r=new Error(e);return r.expected=t,r.actual=n,r.showDiff=!0,r}e.exports=u,Object.setPrototypeOf(u.prototype,c.prototype),u.prototype.serverAddress=function(e,t,n){var r;return e.address()||(this._server=e.listen(0)),r=e.address().port,(e instanceof i.Server?"https":"http")+"://"+(n||"127.0.0.1")+":"+r+t},u.prototype.expect=function(e,t,n){return"function"==typeof e?(this._asserts.push(e),this):("function"==typeof t&&this.end(t),"function"==typeof n&&this.end(n),"number"==typeof e?(this._asserts.push(this._assertStatus.bind(this,e)),"function"!=typeof t&&arguments.length>1&&this._asserts.push(this._assertBody.bind(this,t)),this):"string"==typeof t||"number"==typeof t||t instanceof RegExp?(this._asserts.push(this._assertHeader.bind(this,{name:""+e,value:t})),this):(this._asserts.push(this._assertBody.bind(this,e)),this))},u.prototype.end=function(e){var t=this,n=this._server;return c.prototype.end.call(this,(function(r,o){if(n&&n._handle)return n.close(s);function s(){t.assert(r,o,e)}s()})),this},u.prototype.assert=function(e,t,n){var r,o,s={ECONNREFUSED:"Connection refused",ECONNRESET:"Connection reset by peer",EPIPE:"Broken pipe",ETIMEDOUT:"Operation timed out"};for(!t&&e&&(r=e instanceof Error&&"connect"===e.syscall&&Object.getOwnPropertyNames(s).indexOf(e.code)>=0?new Error(e.code+": "+s[e.code]):e),o=0;o<this._asserts.length&&!r;o+=1)r=this._assertFunction(this._asserts[o],t);r||!(e instanceof Error)||t&&e.status===t.status||(r=e),n.call(this,r||null,t)},u.prototype._assertBody=function(e,t){var n,r,s=e instanceof RegExp;if("object"!=typeof e||s){if(e!==t.text){if(n=o.inspect(e),r=o.inspect(t.text),!s)return l("expected "+n+" response body, got "+r,e,t.body);if(!e.test(t.text))return l("expected body "+r+" to match "+e,e,t.body)}}else try{a.deepStrictEqual(e,t.body)}catch(s){return l("expected "+(n=o.inspect(e))+" response body, got "+(r=o.inspect(t.body)),e,t.body)}},u.prototype._assertHeader=function(e,t){var n=e.name,r=t.header[n.toLowerCase()],o=e.value;return void 0===r?new Error('expected "'+n+'" header field'):Array.isArray(r)&&r.toString()===o||o===r?void 0:o instanceof RegExp?o.test(r)?void 0:new Error('expected "'+n+'" matching '+o+', got "'+r+'"'):new Error('expected "'+n+'" of "'+o+'", got "'+r+'"')},u.prototype._assertStatus=function(e,t){var n,r;if(t.status!==e)return n=s.STATUS_CODES[e],r=s.STATUS_CODES[t.status],new Error("expected "+e+' "'+n+'", got '+t.status+' "'+r+'"')},u.prototype._assertFunction=function(e,t){var n;try{n=e(t)}catch(e){n=e}if(n instanceof Error)return n}},function(e,t,n){"use strict";t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){return e.split(/ *; */).reduce((function(e,t){var n=t.split(/ *= */),r=n.shift(),o=n.shift();return r&&o&&(e[r]=o),e}),{})},t.parseLinks=function(e){return e.split(/ *, */).reduce((function(e,t){var n=t.split(/ *; */),r=n[0].slice(1,-1);return e[n[1].split(/ *= */)[1].slice(1,-1)]=r,e}),{})},t.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t,n){const{expect:r}=n(43),o=n(66);n(91);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){e.exports=n(16)},function(e,t,n){
/*!
 * chai
 * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Dependencies that are used for multiple exports are required here only once
 */
var r=n(45);
/*!
 * test utility
 */t.test=n(46),
/*!
 * type utility
 */
t.type=n(25),
/*!
 * expectTypes utility
 */
t.expectTypes=n(47),
/*!
 * message utility
 */
t.getMessage=n(48),
/*!
 * actual utility
 */
t.getActual=n(32),
/*!
 * Inspect util
 */
t.inspect=n(26),
/*!
 * Object Display util
 */
t.objDisplay=n(33),
/*!
 * Flag utility
 */
t.flag=n(15),
/*!
 * Flag transferring utility
 */
t.transferFlags=n(17),
/*!
 * Deep equal utility
 */
t.eql=n(50),
/*!
 * Deep path info
 */
t.getPathInfo=r.getPathInfo,
/*!
 * Check if a property exists
 */
t.hasProperty=r.hasProperty,
/*!
 * Function name
 */
t.getName=n(34),
/*!
 * add Property
 */
t.addProperty=n(51),
/*!
 * add Method
 */
t.addMethod=n(52),
/*!
 * overwrite Property
 */
t.overwriteProperty=n(53),
/*!
 * overwrite Method
 */
t.overwriteMethod=n(54),
/*!
 * Add a chainable method
 */
t.addChainableMethod=n(55),
/*!
 * Overwrite chainable method
 */
t.overwriteChainableMethod=n(56),
/*!
 * Compare by inspect method
 */
t.compareByInspect=n(57),
/*!
 * Get own enumerable property symbols method
 */
t.getOwnEnumerablePropertySymbols=n(36),
/*!
 * Get own enumerable properties method
 */
t.getOwnEnumerableProperties=n(58),
/*!
 * Checks error against a given set of criteria
 */
t.checkError=n(59),
/*!
 * Proxify util
 */
t.proxify=n(21),
/*!
 * addLengthGuard util
 */
t.addLengthGuard=n(20),
/*!
 * isProxyEnabled helper
 */
t.isProxyEnabled=n(19),
/*!
 * isNaN method
 */
t.isNaN=n(60)},function(e,t,n){"use strict";function r(e,t){return null!=e&&t in Object(e)}function o(e){return e.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map((function(e){var t=/^\[(\d+)\]$/.exec(e);return t?{i:parseFloat(t[1])}:{p:e.replace(/\\([.\[\]])/g,"$1")}}))}function s(e,t,n){var r=e,o=null;n=void 0===n?t.length:n;for(var s=0;s<n;s++){var i=t[s];r&&(r=void 0===i.p?r[i.i]:r[i.p],s===n-1&&(o=r))}return o}function i(e,t){var n=o(t),i=n[n.length-1],a={parent:n.length>1?s(e,n,n.length-1):e,name:i.p||i.i,value:s(e,n)};return a.exists=r(a.parent,a.name),a}e.exports={hasProperty:r,getPathInfo:i,getPathValue:function(e,t){return i(e,t).value},setPathValue:function(e,t,n){return function(e,t,n){for(var r=e,o=n.length,s=null,i=0;i<o;i++){var a=null,c=null;if(s=n[i],i===o-1)r[a=void 0===s.p?s.i:s.p]=t;else if(void 0!==s.p&&r[s.p])r=r[s.p];else if(void 0!==s.i&&r[s.i])r=r[s.i];else{var u=n[i+1];a=void 0===s.p?s.i:s.p,c=void 0===u.p?[]:{},r[a]=c,r=r[a]}}}(e,n,o(t)),e}}},function(e,t,n){
/*!
 * Chai - test utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(15);e.exports=function(e,t){var n=r(e,"negate"),o=t[0];return n?!o:o}},function(e,t,n){
/*!
 * Chai - expectTypes utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(31),o=n(15),s=n(25);e.exports=function(e,t){var n=o(e,"message"),i=o(e,"ssfi");n=n?n+": ":"",e=o(e,"object"),(t=t.map((function(e){return e.toLowerCase()}))).sort();var a=t.map((function(e,n){var r=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an":"a";return(t.length>1&&n===t.length-1?"or ":"")+r+" "+e})).join(", "),c=s(e).toLowerCase();if(!t.some((function(e){return c===e})))throw new r(n+"object tested must be "+a+", but "+c+" given",void 0,i)}},function(e,t,n){
/*!
 * Chai - message composition utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(15),o=n(32),s=n(33);e.exports=function(e,t){var n=r(e,"negate"),i=r(e,"object"),a=t[3],c=o(e,t),u=n?t[2]:t[1],l=r(e,"message");return"function"==typeof u&&(u=u()),u=(u=u||"").replace(/#\{this\}/g,(function(){return s(i)})).replace(/#\{act\}/g,(function(){return s(c)})).replace(/#\{exp\}/g,(function(){return s(a)})),l?l+": "+u:u}},function(e,t){
/*!
 * Chai - getEnumerableProperties utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e){var t=[];for(var n in e)t.push(n);return t}},function(e,t,n){"use strict";
/*!
 * deep-eql
 * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */var r=n(25);function o(){this._key="chai/deep-eql__"+Math.random()+Date.now()}o.prototype={get:function(e){return e[this._key]},set:function(e,t){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:t,configurable:!0})}};var s="function"==typeof WeakMap?WeakMap:o;
/*!
 * Check to see if the MemoizeMap has recorded a result of the two operands
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {MemoizeMap} memoizeMap
 * @returns {Boolean|null} result
*/function i(e,t,n){if(!n||y(e)||y(t))return null;var r=n.get(e);if(r){var o=r.get(t);if("boolean"==typeof o)return o}return null}
/*!
 * Set the result of the equality into the MemoizeMap
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {MemoizeMap} memoizeMap
 * @param {Boolean} result
*/function a(e,t,n,r){if(n&&!y(e)&&!y(t)){var o=n.get(e);o?o.set(t,r):((o=new s).set(t,r),n.set(e,o))}}
/*!
 * Primary Export
 */function c(e,t,n){if(n&&n.comparator)return l(e,t,n);var r=u(e,t);return null!==r?r:l(e,t,n)}function u(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t||!y(e)&&!y(t)&&null}
/*!
 * The main logic of the `deepEqual` function.
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Object} [options] (optional) Additional options
 * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
 * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
    complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
    references to blow the stack.
 * @return {Boolean} equal match
*/function l(e,t,n){(n=n||{}).memoize=!1!==n.memoize&&(n.memoize||new s);var o=n&&n.comparator,l=i(e,t,n.memoize);if(null!==l)return l;var y=i(t,e,n.memoize);if(null!==y)return y;if(o){var m=o(e,t);if(!1===m||!0===m)return a(e,t,n.memoize,m),m;var b=u(e,t);if(null!==b)return b}var g=r(e);if(g!==r(t))return a(e,t,n.memoize,!1),!1;a(e,t,n.memoize,!0);var w=function(e,t,n,r){switch(n){case"String":case"Number":case"Boolean":case"Date":return c(e.valueOf(),t.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":case"Error":return e===t;case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return d(e,t,r);case"RegExp":
/*!
 * Compare two Regular Expressions for equality.
 *
 * @param {RegExp} leftHandOperand
 * @param {RegExp} rightHandOperand
 * @return {Boolean} result
 */
return function(e,t){return e.toString()===t.toString()}
/*!
 * Compare two Sets/Maps for equality. Faster than other equality functions.
 *
 * @param {Set} leftHandOperand
 * @param {Set} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */(e,t);case"Generator":
/*!
 * Simple equality for generator objects such as those returned by generator functions.
 *
 * @param {Iterable} leftHandOperand
 * @param {Iterable} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */
return function(e,t,n){return d(h(e),h(t),n)}
/*!
 * Determine if the given object has an @@iterator function.
 *
 * @param {Object} target
 * @return {Boolean} `true` if the object has an @@iterator function.
 */(e,t,r);case"DataView":return d(new Uint8Array(e.buffer),new Uint8Array(t.buffer),r);case"ArrayBuffer":return d(new Uint8Array(e),new Uint8Array(t),r);case"Set":case"Map":return function(e,t,n){if(e.size!==t.size)return!1;if(0===e.size)return!0;var r=[],o=[];return e.forEach((function(e,t){r.push([e,t])})),t.forEach((function(e,t){o.push([e,t])})),d(r.sort(),o.sort(),n);
/*!
 * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
 *
 * @param {Iterable} leftHandOperand
 * @param {Iterable} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */}(e,t,r);default:
/*!
 * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
 * for each enumerable key in the object.
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */
return function(e,t,n){var r=f(e),o=f(t);if(r.length&&r.length===o.length)return r.sort(),o.sort(),!1!==d(r,o)&&
/*!
 * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
 * each key. If any value of the given key is not equal, the function will return false (early).
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */
function(e,t,n,r){var o=n.length;if(0===o)return!0;for(var s=0;s<o;s+=1)if(!1===c(e[n[s]],t[n[s]],r))return!1;return!0}(e,t,r,n);var s=p(e),i=p(t);return s.length&&s.length===i.length?(s.sort(),i.sort(),d(s,i,n)):0===r.length&&0===s.length&&0===o.length&&0===i.length}
/*!
 * Returns true if the argument is a primitive.
 *
 * This intentionally returns true for all objects that can be compared by reference,
 * including functions and symbols.
 *
 * @param {Mixed} value
 * @return {Boolean} result
 */(e,t,r)}}(e,t,g,n);return a(e,t,n.memoize,w),w}function d(e,t,n){var r=e.length;if(r!==t.length)return!1;if(0===r)return!0;for(var o=-1;++o<r;)if(!1===c(e[o],t[o],n))return!1;return!0}
/*!
 * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
 * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
 *
 * @param {Object} target
 * @returns {Array} an array of entries from the @@iterator function
 */function p(e){if(function(e){return"undefined"!=typeof Symbol&&"object"==typeof e&&void 0!==Symbol.iterator&&"function"==typeof e[Symbol.iterator]}(e))try{return h(e[Symbol.iterator]())}catch(e){return[]}return[]}
/*!
 * Gets all entries from a Generator. This will consume the generator - which could have side effects.
 *
 * @param {Generator} target
 * @returns {Array} an array of entries from the Generator.
 */function h(e){for(var t=e.next(),n=[t.value];!1===t.done;)t=e.next(),n.push(t.value);return n}
/*!
 * Gets all own and inherited enumerable keys from a target.
 *
 * @param {Object} target
 * @returns {Array} an array of own and inherited enumerable keys from the target.
 */function f(e){var t=[];for(var n in e)t.push(n);return t}function y(e){return null===e||"object"!=typeof e}e.exports=c,e.exports.MemoizeMap=s},function(e,t,n){
/*!
 * Chai - addProperty utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(16),o=n(15),s=n(19),i=n(17);e.exports=function(e,t,n){n=void 0===n?function(){}:n,Object.defineProperty(e,t,{get:function e(){s()||o(this,"lockSsfi")||o(this,"ssfi",e);var t=n.call(this);if(void 0!==t)return t;var a=new r.Assertion;return i(this,a),a},configurable:!0})}},function(e,t,n){
/*!
 * Chai - addMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(20),o=n(16),s=n(15),i=n(21),a=n(17);e.exports=function(e,t,n){var c=function(){s(this,"lockSsfi")||s(this,"ssfi",c);var e=n.apply(this,arguments);if(void 0!==e)return e;var t=new o.Assertion;return a(this,t),t};r(c,t,!1),e[t]=i(c,t)}},function(e,t,n){
/*!
 * Chai - overwriteProperty utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(16),o=n(15),s=n(19),i=n(17);e.exports=function(e,t,n){var a=Object.getOwnPropertyDescriptor(e,t),c=function(){};a&&"function"==typeof a.get&&(c=a.get),Object.defineProperty(e,t,{get:function e(){s()||o(this,"lockSsfi")||o(this,"ssfi",e);var t=o(this,"lockSsfi");o(this,"lockSsfi",!0);var a=n(c).call(this);if(o(this,"lockSsfi",t),void 0!==a)return a;var u=new r.Assertion;return i(this,u),u},configurable:!0})}},function(e,t,n){
/*!
 * Chai - overwriteMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(20),o=n(16),s=n(15),i=n(21),a=n(17);e.exports=function(e,t,n){var c=e[t],u=function(){throw new Error(t+" is not a function")};c&&"function"==typeof c&&(u=c);var l=function(){s(this,"lockSsfi")||s(this,"ssfi",l);var e=s(this,"lockSsfi");s(this,"lockSsfi",!0);var t=n(u).apply(this,arguments);if(s(this,"lockSsfi",e),void 0!==t)return t;var r=new o.Assertion;return a(this,r),r};r(l,t,!1),e[t]=i(l,t)}},function(e,t,n){
/*!
 * Chai - addChainingMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(20),o=n(16),s=n(15),i=n(21),a=n(17),c="function"==typeof Object.setPrototypeOf,u=function(){},l=Object.getOwnPropertyNames(u).filter((function(e){var t=Object.getOwnPropertyDescriptor(u,e);return"object"!=typeof t||!t.configurable})),d=Function.prototype.call,p=Function.prototype.apply;e.exports=function(e,t,n,u){"function"!=typeof u&&(u=function(){});var h={method:n,chainingBehavior:u};e.__methods||(e.__methods={}),e.__methods[t]=h,Object.defineProperty(e,t,{get:function(){h.chainingBehavior.call(this);var n=function(){s(this,"lockSsfi")||s(this,"ssfi",n);var e=h.method.apply(this,arguments);if(void 0!==e)return e;var t=new o.Assertion;return a(this,t),t};if(r(n,t,!0),c){var u=Object.create(this);u.call=d,u.apply=p,Object.setPrototypeOf(n,u)}else Object.getOwnPropertyNames(e).forEach((function(t){if(-1===l.indexOf(t)){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r)}}));return a(this,n),i(n)},configurable:!0})}},function(e,t,n){
/*!
 * Chai - overwriteChainableMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(16),o=n(17);e.exports=function(e,t,n,s){var i=e.__methods[t],a=i.chainingBehavior;i.chainingBehavior=function(){var e=s(a).call(this);if(void 0!==e)return e;var t=new r.Assertion;return o(this,t),t};var c=i.method;i.method=function(){var e=n(c).apply(this,arguments);if(void 0!==e)return e;var t=new r.Assertion;return o(this,t),t}}},function(e,t,n){
/*!
 * Chai - compareByInspect utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(26);e.exports=function(e,t){return r(e)<r(t)?-1:1}},function(e,t,n){
/*!
 * Chai - getOwnEnumerableProperties utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(36);e.exports=function(e){return Object.keys(e).concat(r(e))}},function(e,t,n){"use strict";var r=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\(\/]+)/;function o(e){var t="";if(void 0===e.name){var n=String(e).match(r);n&&(t=n[1])}else t=e.name;return t}e.exports={compatibleInstance:function(e,t){return t instanceof Error&&e===t},compatibleConstructor:function(e,t){return t instanceof Error?e.constructor===t.constructor||e instanceof t.constructor:(t.prototype instanceof Error||t===Error)&&(e.constructor===t||e instanceof t)},compatibleMessage:function(e,t){var n="string"==typeof e?e:e.message;return t instanceof RegExp?t.test(n):"string"==typeof t&&-1!==n.indexOf(t)},getMessage:function(e){var t="";return e&&e.message?t=e.message:"string"==typeof e&&(t=e),t},getConstructorName:function(e){var t=e;return e instanceof Error?t=o(e.constructor):"function"==typeof e&&(t=o(e).trim()||o(new e)),t}}},function(e,t){e.exports=Number.isNaN||
/*!
 * Chai - isNaN utility
 * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
 * MIT Licensed
 */
function(e){return e!=e}},function(e,t,n){
/*!
 * chai
 * http://chaijs.com
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(18);e.exports=function(e,t){
/*!
   * Module dependencies.
   */
var n=e.AssertionError,o=t.flag;
/*!
   * Module export.
   */
/*!
   * Assertion Constructor
   *
   * Creates object for chaining.
   *
   * `Assertion` objects contain metadata in the form of flags. Three flags can
   * be assigned during instantiation by passing arguments to this constructor:
   *
   * - `object`: This flag contains the target of the assertion. For example, in
   *   the assertion `expect(numKittens).to.equal(7);`, the `object` flag will
   *   contain `numKittens` so that the `equal` assertion can reference it when
   *   needed.
   *
   * - `message`: This flag contains an optional custom error message to be
   *   prepended to the error message that's generated by the assertion when it
   *   fails.
   *
   * - `ssfi`: This flag stands for "start stack function indicator". It
   *   contains a function reference that serves as the starting point for
   *   removing frames from the stack trace of the error that's created by the
   *   assertion when it fails. The goal is to provide a cleaner stack trace to
   *   end users by removing Chai's internal functions. Note that it only works
   *   in environments that support `Error.captureStackTrace`, and only when
   *   `Chai.config.includeStack` hasn't been set to `false`.
   *
   * - `lockSsfi`: This flag controls whether or not the given `ssfi` flag
   *   should retain its current value, even as assertions are chained off of
   *   this object. This is usually set to `true` when creating a new assertion
   *   from within another assertion. It's also temporarily set to `true` before
   *   an overwritten assertion gets called by the overwriting assertion.
   *
   * @param {Mixed} obj target of the assertion
   * @param {String} msg (optional) custom error message
   * @param {Function} ssfi (optional) starting point for removing stack frames
   * @param {Boolean} lockSsfi (optional) whether or not the ssfi flag is locked
   * @api private
   */function s(e,n,r,i){return o(this,"ssfi",r||s),o(this,"lockSsfi",i),o(this,"object",e),o(this,"message",n),t.proxify(this)}e.Assertion=s,Object.defineProperty(s,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack},set:function(e){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack=e}}),Object.defineProperty(s,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff},set:function(e){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff=e}}),s.addProperty=function(e,n){t.addProperty(this.prototype,e,n)},s.addMethod=function(e,n){t.addMethod(this.prototype,e,n)},s.addChainableMethod=function(e,n,r){t.addChainableMethod(this.prototype,e,n,r)},s.overwriteProperty=function(e,n){t.overwriteProperty(this.prototype,e,n)},s.overwriteMethod=function(e,n){t.overwriteMethod(this.prototype,e,n)},s.overwriteChainableMethod=function(e,n,r){t.overwriteChainableMethod(this.prototype,e,n,r)},s.prototype.assert=function(e,s,i,a,c,u){var l=t.test(this,arguments);if(!1!==u&&(u=!0),void 0===a&&void 0===c&&(u=!1),!0!==r.showDiff&&(u=!1),!l){s=t.getMessage(this,arguments);var d=t.getActual(this,arguments);throw new n(s,{actual:d,expected:a,showDiff:u},r.includeStack?this.assert:o(this,"ssfi"))}},
/*!
   * ### ._obj
   *
   * Quick reference to stored `actual` value for plugin developers.
   *
   * @api private
   */
Object.defineProperty(s.prototype,"_obj",{get:function(){return o(this,"object")},set:function(e){o(this,"object",e)}})}},function(e,t){
/*!
 * chai
 * http://chaijs.com
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){var n=e.Assertion,r=e.AssertionError,o=t.flag;function s(e,n){n&&o(this,"message",n),e=e.toLowerCase();var r=o(this,"object"),s=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an ":"a ";this.assert(e===t.type(r).toLowerCase(),"expected #{this} to be "+s+e,"expected #{this} not to be "+s+e)}function i(e,n){return t.isNaN(e)&&t.isNaN(n)||e===n}function a(){o(this,"contains",!0)}function c(e,s){s&&o(this,"message",s);var a=o(this,"object"),c=t.type(a).toLowerCase(),u=o(this,"message"),l=o(this,"negate"),d=o(this,"ssfi"),p=o(this,"deep"),h=p?"deep ":"";u=u?u+": ":"";var f=!1;switch(c){case"string":f=-1!==a.indexOf(e);break;case"weakset":if(p)throw new r(u+"unable to use .deep.include with WeakSet",void 0,d);f=a.has(e);break;case"map":var y=p?t.eql:i;a.forEach((function(t){f=f||y(t,e)}));break;case"set":p?a.forEach((function(n){f=f||t.eql(n,e)})):f=a.has(e);break;case"array":f=p?a.some((function(n){return t.eql(n,e)})):-1!==a.indexOf(e);break;default:if(e!==Object(e))throw new r(u+"object tested must be an array, a map, an object, a set, a string, or a weakset, but "+c+" given",void 0,d);var m=Object.keys(e),b=null,g=0;if(m.forEach((function(s){var i=new n(a);if(t.transferFlags(this,i,!0),o(i,"lockSsfi",!0),l&&1!==m.length)try{i.property(s,e[s])}catch(e){if(!t.checkError.compatibleConstructor(e,r))throw e;null===b&&(b=e),g++}else i.property(s,e[s])}),this),l&&m.length>1&&g===m.length)throw b;return}this.assert(f,"expected #{this} to "+h+"include "+t.inspect(e),"expected #{this} to not "+h+"include "+t.inspect(e))}function u(){var e=o(this,"object"),n=t.type(e);this.assert("Arguments"===n,"expected #{this} to be arguments but got "+n,"expected #{this} to not be arguments")}function l(e,t){t&&o(this,"message",t);var n=o(this,"object");if(o(this,"deep")){var r=o(this,"lockSsfi");o(this,"lockSsfi",!0),this.eql(e),o(this,"lockSsfi",r)}else this.assert(e===n,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",e,this._obj,!0)}function d(e,n){n&&o(this,"message",n),this.assert(t.eql(e,o(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",e,this._obj,!0)}function p(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to above must be a number":i=l+"the argument to above must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y>e,"expected #{this} to have a "+m+" above #{exp} but got #{act}","expected #{this} to not have a "+m+" above #{exp}",e,y)}else this.assert(a>e,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",e)}function h(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to least must be a number":i=l+"the argument to least must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y>=e,"expected #{this} to have a "+m+" at least #{exp} but got #{act}","expected #{this} to have a "+m+" below #{exp}",e,y)}else this.assert(a>=e,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",e)}function f(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to below must be a number":i=l+"the argument to below must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y<e,"expected #{this} to have a "+m+" below #{exp} but got #{act}","expected #{this} to not have a "+m+" below #{exp}",e,y)}else this.assert(a<e,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",e)}function y(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to most must be a number":i=l+"the argument to most must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y<=e,"expected #{this} to have a "+m+" at most #{exp} but got #{act}","expected #{this} to have a "+m+" above #{exp}",e,y)}else this.assert(a<=e,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",e)}function m(e,n){n&&o(this,"message",n);var s=o(this,"object"),i=o(this,"ssfi"),a=o(this,"message");try{var c=s instanceof e}catch(n){if(n instanceof TypeError)throw new r((a=a?a+": ":"")+"The instanceof assertion needs a constructor but "+t.type(e)+" was given.",void 0,i);throw n}var u=t.getName(e);null===u&&(u="an unnamed constructor"),this.assert(c,"expected #{this} to be an instance of "+u,"expected #{this} to not be an instance of "+u)}function b(e,n,s){s&&o(this,"message",s);var i=o(this,"nested"),a=o(this,"own"),c=o(this,"message"),u=o(this,"object"),l=o(this,"ssfi"),d=typeof e;if(c=c?c+": ":"",i){if("string"!==d)throw new r(c+"the argument to property must be a string when using nested syntax",void 0,l)}else if("string"!==d&&"number"!==d&&"symbol"!==d)throw new r(c+"the argument to property must be a string, number, or symbol",void 0,l);if(i&&a)throw new r(c+'The "nested" and "own" flags cannot be combined.',void 0,l);if(null==u)throw new r(c+"Target cannot be null or undefined.",void 0,l);var p,h=o(this,"deep"),f=o(this,"negate"),y=i?t.getPathInfo(u,e):null,m=i?y.value:u[e],b="";h&&(b+="deep "),a&&(b+="own "),i&&(b+="nested "),b+="property ",p=a?Object.prototype.hasOwnProperty.call(u,e):i?y.exists:t.hasProperty(u,e),f&&1!==arguments.length||this.assert(p,"expected #{this} to have "+b+t.inspect(e),"expected #{this} to not have "+b+t.inspect(e)),arguments.length>1&&this.assert(p&&(h?t.eql(n,m):n===m),"expected #{this} to have "+b+t.inspect(e)+" of #{exp}, but got #{act}","expected #{this} to not have "+b+t.inspect(e)+" of #{act}",n,m),o(this,"object",m)}function g(e,t,n){o(this,"own",!0),b.apply(this,arguments)}function w(e,n,r){"string"==typeof n&&(r=n,n=null),r&&o(this,"message",r);var s=o(this,"object"),i=Object.getOwnPropertyDescriptor(Object(s),e);i&&n?this.assert(t.eql(n,i),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to match "+t.inspect(n)+", got "+t.inspect(i),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to not match "+t.inspect(n),n,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+t.inspect(e),"expected #{this} to not have an own property descriptor for "+t.inspect(e)),o(this,"object",i)}function v(){o(this,"doLength",!0)}function _(e,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=t.type(i).toLowerCase(),c=o(this,"message"),u=o(this,"ssfi"),l="length";switch(a){case"map":case"set":l="size",s=i.size;break;default:new n(i,c,u,!0).to.have.property("length"),s=i.length}this.assert(s==e,"expected #{this} to have a "+l+" of #{exp} but got #{act}","expected #{this} to not have a "+l+" of #{act}",e,s)}function x(e,t){t&&o(this,"message",t);var n=o(this,"object");this.assert(e.exec(n),"expected #{this} to match "+e,"expected #{this} not to match "+e)}function E(e){var n,s,i=o(this,"object"),a=t.type(i),c=t.type(e),u=o(this,"ssfi"),l=o(this,"deep"),d="",p=!0,h=o(this,"message"),f=(h=h?h+": ":"")+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if("Map"===a||"Set"===a)d=l?"deeply ":"",s=[],i.forEach((function(e,t){s.push(t)})),"Array"!==c&&(e=Array.prototype.slice.call(arguments));else{switch(s=t.getOwnEnumerableProperties(i),c){case"Array":if(arguments.length>1)throw new r(f,void 0,u);break;case"Object":if(arguments.length>1)throw new r(f,void 0,u);e=Object.keys(e);break;default:e=Array.prototype.slice.call(arguments)}e=e.map((function(e){return"symbol"==typeof e?e:String(e)}))}if(!e.length)throw new r(h+"keys required",void 0,u);var y=e.length,m=o(this,"any"),b=o(this,"all"),g=e;if(m||b||(b=!0),m&&(p=g.some((function(e){return s.some((function(n){return l?t.eql(e,n):e===n}))}))),b&&(p=g.every((function(e){return s.some((function(n){return l?t.eql(e,n):e===n}))})),o(this,"contains")||(p=p&&e.length==s.length)),y>1){var w=(e=e.map((function(e){return t.inspect(e)}))).pop();b&&(n=e.join(", ")+", and "+w),m&&(n=e.join(", ")+", or "+w)}else n=t.inspect(e[0]);n=(y>1?"keys ":"key ")+n,n=(o(this,"contains")?"contain ":"have ")+n,this.assert(p,"expected #{this} to "+d+n,"expected #{this} to not "+d+n,g.slice(0).sort(t.compareByInspect),s.sort(t.compareByInspect),!0)}function S(e,r,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"ssfi"),u=o(this,"message"),l=o(this,"negate")||!1;new n(a,u,c,!0).is.a("function"),(e instanceof RegExp||"string"==typeof e)&&(r=e,e=null);try{a()}catch(e){i=e}var d=void 0===e&&void 0===r,p=Boolean(e&&r),h=!1,f=!1;if(d||!d&&!l){var y="an error";e instanceof Error?y="#{exp}":e&&(y=t.checkError.getConstructorName(e)),this.assert(i,"expected #{this} to throw "+y,"expected #{this} to not throw an error but #{act} was thrown",e&&e.toString(),i instanceof Error?i.toString():"string"==typeof i?i:i&&t.checkError.getConstructorName(i))}if(e&&i&&(e instanceof Error&&t.checkError.compatibleInstance(i,e)===l&&(p&&l?h=!0:this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i&&!l?" but #{act} was thrown":""),e.toString(),i.toString())),t.checkError.compatibleConstructor(i,e)===l&&(p&&l?h=!0:this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&t.checkError.getConstructorName(e),i instanceof Error?i.toString():i&&t.checkError.getConstructorName(i)))),i&&null!=r){var m="including";r instanceof RegExp&&(m="matching"),t.checkError.compatibleMessage(i,r)===l&&(p&&l?f=!0:this.assert(l,"expected #{this} to throw error "+m+" #{exp} but got #{act}","expected #{this} to throw error not "+m+" #{exp}",r,t.checkError.getMessage(i)))}h&&f&&this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&t.checkError.getConstructorName(e),i instanceof Error?i.toString():i&&t.checkError.getConstructorName(i)),o(this,"object",i)}function O(e,n){n&&o(this,"message",n);var r=o(this,"object"),s=o(this,"itself"),i="function"!=typeof r||s?r[e]:r.prototype[e];this.assert("function"==typeof i,"expected #{this} to respond to "+t.inspect(e),"expected #{this} to not respond to "+t.inspect(e))}function P(e,n){n&&o(this,"message",n);var r=e(o(this,"object"));this.assert(r,"expected #{this} to satisfy "+t.objDisplay(e),"expected #{this} to not satisfy"+t.objDisplay(e),!o(this,"negate"),r)}function k(e,t,s){s&&o(this,"message",s);var i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");if(new n(i,a,c,!0).is.a("number"),"number"!=typeof e||"number"!=typeof t)throw new r((a=a?a+": ":"")+"the arguments to closeTo or approximately must be numbers",void 0,c);this.assert(Math.abs(i-e)<=t,"expected #{this} to be close to "+e+" +/- "+t,"expected #{this} not to be close to "+e+" +/- "+t)}function j(e,t,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),s=e[t]):(new n(e,a,c,!0).is.a("function"),s=e()),i();var u=null==t?e():e[t],l=null==t?s:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",s),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","change"),o(this,"realDelta",u!==s),this.assert(s!==u,"expected "+l+" to change","expected "+l+" to not change")}function q(e,t,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),s=e[t]):(new n(e,a,c,!0).is.a("function"),s=e()),new n(s,a,c,!0).is.a("number"),i();var u=null==t?e():e[t],l=null==t?s:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",s),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","increase"),o(this,"realDelta",u-s),this.assert(u-s>0,"expected "+l+" to increase","expected "+l+" to not increase")}function T(e,t,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),s=e[t]):(new n(e,a,c,!0).is.a("function"),s=e()),new n(s,a,c,!0).is.a("number"),i();var u=null==t?e():e[t],l=null==t?s:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",s),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","decrease"),o(this,"realDelta",s-u),this.assert(u-s<0,"expected "+l+" to decrease","expected "+l+" to not decrease")}["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still"].forEach((function(e){n.addProperty(e)})),n.addProperty("not",(function(){o(this,"negate",!0)})),n.addProperty("deep",(function(){o(this,"deep",!0)})),n.addProperty("nested",(function(){o(this,"nested",!0)})),n.addProperty("own",(function(){o(this,"own",!0)})),n.addProperty("ordered",(function(){o(this,"ordered",!0)})),n.addProperty("any",(function(){o(this,"any",!0),o(this,"all",!1)})),n.addProperty("all",(function(){o(this,"all",!0),o(this,"any",!1)})),n.addChainableMethod("an",s),n.addChainableMethod("a",s),n.addChainableMethod("include",c,a),n.addChainableMethod("contain",c,a),n.addChainableMethod("contains",c,a),n.addChainableMethod("includes",c,a),n.addProperty("ok",(function(){this.assert(o(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")})),n.addProperty("true",(function(){this.assert(!0===o(this,"object"),"expected #{this} to be true","expected #{this} to be false",!o(this,"negate"))})),n.addProperty("false",(function(){this.assert(!1===o(this,"object"),"expected #{this} to be false","expected #{this} to be true",!!o(this,"negate"))})),n.addProperty("null",(function(){this.assert(null===o(this,"object"),"expected #{this} to be null","expected #{this} not to be null")})),n.addProperty("undefined",(function(){this.assert(void 0===o(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")})),n.addProperty("NaN",(function(){this.assert(t.isNaN(o(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")})),n.addProperty("exist",(function(){var e=o(this,"object");this.assert(null!=e,"expected #{this} to exist","expected #{this} to not exist")})),n.addProperty("empty",(function(){var e,n=o(this,"object"),s=o(this,"ssfi"),i=o(this,"message");switch(i=i?i+": ":"",t.type(n).toLowerCase()){case"array":case"string":e=n.length;break;case"map":case"set":e=n.size;break;case"weakmap":case"weakset":throw new r(i+".empty was passed a weak collection",void 0,s);case"function":var a=i+".empty was passed a function "+t.getName(n);throw new r(a.trim(),void 0,s);default:if(n!==Object(n))throw new r(i+".empty was passed non-string primitive "+t.inspect(n),void 0,s);e=Object.keys(n).length}this.assert(0===e,"expected #{this} to be empty","expected #{this} not to be empty")})),n.addProperty("arguments",u),n.addProperty("Arguments",u),n.addMethod("equal",l),n.addMethod("equals",l),n.addMethod("eq",l),n.addMethod("eql",d),n.addMethod("eqls",d),n.addMethod("above",p),n.addMethod("gt",p),n.addMethod("greaterThan",p),n.addMethod("least",h),n.addMethod("gte",h),n.addMethod("below",f),n.addMethod("lt",f),n.addMethod("lessThan",f),n.addMethod("most",y),n.addMethod("lte",y),n.addMethod("within",(function(e,s,i){i&&o(this,"message",i);var a,c=o(this,"object"),u=o(this,"doLength"),l=o(this,"message"),d=l?l+": ":"",p=o(this,"ssfi"),h=t.type(c).toLowerCase(),f=t.type(e).toLowerCase(),y=t.type(s).toLowerCase(),m=!0,b="date"===f&&"date"===y?e.toUTCString()+".."+s.toUTCString():e+".."+s;if(u&&"map"!==h&&"set"!==h&&new n(c,l,p,!0).to.have.property("length"),u||"date"!==h||"date"===f&&"date"===y?"number"===f&&"number"===y||!u&&"number"!==h?u||"date"===h||"number"===h?m=!1:a=d+"expected "+("string"===h?"'"+c+"'":c)+" to be a number or a date":a=d+"the arguments to within must be numbers":a=d+"the arguments to within must be dates",m)throw new r(a,void 0,p);if(u){var g,w="length";"map"===h||"set"===h?(w="size",g=c.size):g=c.length,this.assert(g>=e&&g<=s,"expected #{this} to have a "+w+" within "+b,"expected #{this} to not have a "+w+" within "+b)}else this.assert(c>=e&&c<=s,"expected #{this} to be within "+b,"expected #{this} to not be within "+b)})),n.addMethod("instanceof",m),n.addMethod("instanceOf",m),n.addMethod("property",b),n.addMethod("ownProperty",g),n.addMethod("haveOwnProperty",g),n.addMethod("ownPropertyDescriptor",w),n.addMethod("haveOwnPropertyDescriptor",w),n.addChainableMethod("length",_,v),n.addChainableMethod("lengthOf",_,v),n.addMethod("match",x),n.addMethod("matches",x),n.addMethod("string",(function(e,r){r&&o(this,"message",r);var s=o(this,"object"),i=o(this,"message"),a=o(this,"ssfi");new n(s,i,a,!0).is.a("string"),this.assert(~s.indexOf(e),"expected #{this} to contain "+t.inspect(e),"expected #{this} to not contain "+t.inspect(e))})),n.addMethod("keys",E),n.addMethod("key",E),n.addMethod("throw",S),n.addMethod("throws",S),n.addMethod("Throw",S),n.addMethod("respondTo",O),n.addMethod("respondsTo",O),n.addProperty("itself",(function(){o(this,"itself",!0)})),n.addMethod("satisfy",P),n.addMethod("satisfies",P),n.addMethod("closeTo",k),n.addMethod("approximately",k),n.addMethod("members",(function(e,r){r&&o(this,"message",r);var s=o(this,"object"),i=o(this,"message"),a=o(this,"ssfi");new n(s,i,a,!0).to.be.an("array"),new n(e,i,a,!0).to.be.an("array");var c,u,l,d=o(this,"contains"),p=o(this,"ordered");d?(u="expected #{this} to be "+(c=p?"an ordered superset":"a superset")+" of #{exp}",l="expected #{this} to not be "+c+" of #{exp}"):(u="expected #{this} to have the same "+(c=p?"ordered members":"members")+" as #{exp}",l="expected #{this} to not have the same "+c+" as #{exp}");var h=o(this,"deep")?t.eql:void 0;this.assert(function(e,t,n,r,o){if(!r){if(e.length!==t.length)return!1;t=t.slice()}return e.every((function(e,s){if(o)return n?n(e,t[s]):e===t[s];if(!n){var i=t.indexOf(e);return-1!==i&&(r||t.splice(i,1),!0)}return t.some((function(o,s){return!!n(e,o)&&(r||t.splice(s,1),!0)}))}))}(e,s,h,d,p),u,l,e,s,!0)})),n.addMethod("oneOf",(function(e,t){t&&o(this,"message",t);var r=o(this,"object"),s=o(this,"message"),i=o(this,"ssfi");new n(e,s,i,!0).to.be.an("array"),this.assert(e.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",e,r)})),n.addMethod("change",j),n.addMethod("changes",j),n.addMethod("increase",q),n.addMethod("increases",q),n.addMethod("decrease",T),n.addMethod("decreases",T),n.addMethod("by",(function(e,t){t&&o(this,"message",t);var n,r=o(this,"deltaMsgObj"),s=o(this,"initialDeltaValue"),i=o(this,"finalDeltaValue"),a=o(this,"deltaBehavior"),c=o(this,"realDelta");n="change"===a?Math.abs(i-s)===Math.abs(e):c===Math.abs(e),this.assert(n,"expected "+r+" to "+a+" by "+e,"expected "+r+" to not "+a+" by "+e)})),n.addProperty("extensible",(function(){var e=o(this,"object"),t=e===Object(e)&&Object.isExtensible(e);this.assert(t,"expected #{this} to be extensible","expected #{this} to not be extensible")})),n.addProperty("sealed",(function(){var e=o(this,"object"),t=e!==Object(e)||Object.isSealed(e);this.assert(t,"expected #{this} to be sealed","expected #{this} to not be sealed")})),n.addProperty("frozen",(function(){var e=o(this,"object"),t=e!==Object(e)||Object.isFrozen(e);this.assert(t,"expected #{this} to be frozen","expected #{this} to not be frozen")})),n.addProperty("finite",(function(e){var t=o(this,"object");this.assert("number"==typeof t&&isFinite(t),"expected #{this} to be a finite number","expected #{this} to not be a finite number")}))}},function(e,t){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){e.expect=function(t,n){return new e.Assertion(t,n)},e.expect.fail=function(t,n,r,o){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new e.AssertionError(r,{actual:t,expected:n,operator:o},e.expect.fail)}}},function(e,t){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){var n=e.Assertion;function r(){Object.defineProperty(Object.prototype,"should",{set:function(e){Object.defineProperty(this,"should",{value:e,enumerable:!0,configurable:!0,writable:!0})},get:function e(){return this instanceof String||this instanceof Number||this instanceof Boolean||"function"==typeof Symbol&&this instanceof Symbol?new n(this.valueOf(),null,e):new n(this,null,e)},configurable:!0});var t={fail:function(n,r,o,s){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new e.AssertionError(o,{actual:n,expected:r,operator:s},t.fail)},equal:function(e,t,r){new n(e,r).to.equal(t)},Throw:function(e,t,r,o){new n(e,o).to.Throw(t,r)},exist:function(e,t){new n(e,t).to.exist},not:{}};return t.not.equal=function(e,t,r){new n(e,r).to.not.equal(t)},t.not.Throw=function(e,t,r,o){new n(e,o).to.not.Throw(t,r)},t.not.exist=function(e,t){new n(e,t).to.not.exist},t.throw=t.Throw,t.not.throw=t.not.Throw,t}e.should=r,e.Should=r}},function(e,t){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){
/*!
   * Chai dependencies.
   */
var n=e.Assertion,r=t.flag,o=e.assert=function(t,r){new n(null,null,e.assert,!0).assert(t,r,"[ negation message unavailable ]")};
/*!
   * Module export.
   */o.fail=function(t,n,r,s){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new e.AssertionError(r,{actual:t,expected:n,operator:s},o.fail)},o.isOk=function(e,t){new n(e,t,o.isOk,!0).is.ok},o.isNotOk=function(e,t){new n(e,t,o.isNotOk,!0).is.not.ok},o.equal=function(e,t,s){var i=new n(e,s,o.equal,!0);i.assert(t==r(i,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",t,e,!0)},o.notEqual=function(e,t,s){var i=new n(e,s,o.notEqual,!0);i.assert(t!=r(i,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",t,e,!0)},o.strictEqual=function(e,t,r){new n(e,r,o.strictEqual,!0).to.equal(t)},o.notStrictEqual=function(e,t,r){new n(e,r,o.notStrictEqual,!0).to.not.equal(t)},o.deepEqual=o.deepStrictEqual=function(e,t,r){new n(e,r,o.deepEqual,!0).to.eql(t)},o.notDeepEqual=function(e,t,r){new n(e,r,o.notDeepEqual,!0).to.not.eql(t)},o.isAbove=function(e,t,r){new n(e,r,o.isAbove,!0).to.be.above(t)},o.isAtLeast=function(e,t,r){new n(e,r,o.isAtLeast,!0).to.be.least(t)},o.isBelow=function(e,t,r){new n(e,r,o.isBelow,!0).to.be.below(t)},o.isAtMost=function(e,t,r){new n(e,r,o.isAtMost,!0).to.be.most(t)},o.isTrue=function(e,t){new n(e,t,o.isTrue,!0).is.true},o.isNotTrue=function(e,t){new n(e,t,o.isNotTrue,!0).to.not.equal(!0)},o.isFalse=function(e,t){new n(e,t,o.isFalse,!0).is.false},o.isNotFalse=function(e,t){new n(e,t,o.isNotFalse,!0).to.not.equal(!1)},o.isNull=function(e,t){new n(e,t,o.isNull,!0).to.equal(null)},o.isNotNull=function(e,t){new n(e,t,o.isNotNull,!0).to.not.equal(null)},o.isNaN=function(e,t){new n(e,t,o.isNaN,!0).to.be.NaN},o.isNotNaN=function(e,t){new n(e,t,o.isNotNaN,!0).not.to.be.NaN},o.exists=function(e,t){new n(e,t,o.exists,!0).to.exist},o.notExists=function(e,t){new n(e,t,o.notExists,!0).to.not.exist},o.isUndefined=function(e,t){new n(e,t,o.isUndefined,!0).to.equal(void 0)},o.isDefined=function(e,t){new n(e,t,o.isDefined,!0).to.not.equal(void 0)},o.isFunction=function(e,t){new n(e,t,o.isFunction,!0).to.be.a("function")},o.isNotFunction=function(e,t){new n(e,t,o.isNotFunction,!0).to.not.be.a("function")},o.isObject=function(e,t){new n(e,t,o.isObject,!0).to.be.a("object")},o.isNotObject=function(e,t){new n(e,t,o.isNotObject,!0).to.not.be.a("object")},o.isArray=function(e,t){new n(e,t,o.isArray,!0).to.be.an("array")},o.isNotArray=function(e,t){new n(e,t,o.isNotArray,!0).to.not.be.an("array")},o.isString=function(e,t){new n(e,t,o.isString,!0).to.be.a("string")},o.isNotString=function(e,t){new n(e,t,o.isNotString,!0).to.not.be.a("string")},o.isNumber=function(e,t){new n(e,t,o.isNumber,!0).to.be.a("number")},o.isNotNumber=function(e,t){new n(e,t,o.isNotNumber,!0).to.not.be.a("number")},o.isFinite=function(e,t){new n(e,t,o.isFinite,!0).to.be.finite},o.isBoolean=function(e,t){new n(e,t,o.isBoolean,!0).to.be.a("boolean")},o.isNotBoolean=function(e,t){new n(e,t,o.isNotBoolean,!0).to.not.be.a("boolean")},o.typeOf=function(e,t,r){new n(e,r,o.typeOf,!0).to.be.a(t)},o.notTypeOf=function(e,t,r){new n(e,r,o.notTypeOf,!0).to.not.be.a(t)},o.instanceOf=function(e,t,r){new n(e,r,o.instanceOf,!0).to.be.instanceOf(t)},o.notInstanceOf=function(e,t,r){new n(e,r,o.notInstanceOf,!0).to.not.be.instanceOf(t)},o.include=function(e,t,r){new n(e,r,o.include,!0).include(t)},o.notInclude=function(e,t,r){new n(e,r,o.notInclude,!0).not.include(t)},o.deepInclude=function(e,t,r){new n(e,r,o.deepInclude,!0).deep.include(t)},o.notDeepInclude=function(e,t,r){new n(e,r,o.notDeepInclude,!0).not.deep.include(t)},o.nestedInclude=function(e,t,r){new n(e,r,o.nestedInclude,!0).nested.include(t)},o.notNestedInclude=function(e,t,r){new n(e,r,o.notNestedInclude,!0).not.nested.include(t)},o.deepNestedInclude=function(e,t,r){new n(e,r,o.deepNestedInclude,!0).deep.nested.include(t)},o.notDeepNestedInclude=function(e,t,r){new n(e,r,o.notDeepNestedInclude,!0).not.deep.nested.include(t)},o.ownInclude=function(e,t,r){new n(e,r,o.ownInclude,!0).own.include(t)},o.notOwnInclude=function(e,t,r){new n(e,r,o.notOwnInclude,!0).not.own.include(t)},o.deepOwnInclude=function(e,t,r){new n(e,r,o.deepOwnInclude,!0).deep.own.include(t)},o.notDeepOwnInclude=function(e,t,r){new n(e,r,o.notDeepOwnInclude,!0).not.deep.own.include(t)},o.match=function(e,t,r){new n(e,r,o.match,!0).to.match(t)},o.notMatch=function(e,t,r){new n(e,r,o.notMatch,!0).to.not.match(t)},o.property=function(e,t,r){new n(e,r,o.property,!0).to.have.property(t)},o.notProperty=function(e,t,r){new n(e,r,o.notProperty,!0).to.not.have.property(t)},o.propertyVal=function(e,t,r,s){new n(e,s,o.propertyVal,!0).to.have.property(t,r)},o.notPropertyVal=function(e,t,r,s){new n(e,s,o.notPropertyVal,!0).to.not.have.property(t,r)},o.deepPropertyVal=function(e,t,r,s){new n(e,s,o.deepPropertyVal,!0).to.have.deep.property(t,r)},o.notDeepPropertyVal=function(e,t,r,s){new n(e,s,o.notDeepPropertyVal,!0).to.not.have.deep.property(t,r)},o.ownProperty=function(e,t,r){new n(e,r,o.ownProperty,!0).to.have.own.property(t)},o.notOwnProperty=function(e,t,r){new n(e,r,o.notOwnProperty,!0).to.not.have.own.property(t)},o.ownPropertyVal=function(e,t,r,s){new n(e,s,o.ownPropertyVal,!0).to.have.own.property(t,r)},o.notOwnPropertyVal=function(e,t,r,s){new n(e,s,o.notOwnPropertyVal,!0).to.not.have.own.property(t,r)},o.deepOwnPropertyVal=function(e,t,r,s){new n(e,s,o.deepOwnPropertyVal,!0).to.have.deep.own.property(t,r)},o.notDeepOwnPropertyVal=function(e,t,r,s){new n(e,s,o.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(t,r)},o.nestedProperty=function(e,t,r){new n(e,r,o.nestedProperty,!0).to.have.nested.property(t)},o.notNestedProperty=function(e,t,r){new n(e,r,o.notNestedProperty,!0).to.not.have.nested.property(t)},o.nestedPropertyVal=function(e,t,r,s){new n(e,s,o.nestedPropertyVal,!0).to.have.nested.property(t,r)},o.notNestedPropertyVal=function(e,t,r,s){new n(e,s,o.notNestedPropertyVal,!0).to.not.have.nested.property(t,r)},o.deepNestedPropertyVal=function(e,t,r,s){new n(e,s,o.deepNestedPropertyVal,!0).to.have.deep.nested.property(t,r)},o.notDeepNestedPropertyVal=function(e,t,r,s){new n(e,s,o.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(t,r)},o.lengthOf=function(e,t,r){new n(e,r,o.lengthOf,!0).to.have.lengthOf(t)},o.hasAnyKeys=function(e,t,r){new n(e,r,o.hasAnyKeys,!0).to.have.any.keys(t)},o.hasAllKeys=function(e,t,r){new n(e,r,o.hasAllKeys,!0).to.have.all.keys(t)},o.containsAllKeys=function(e,t,r){new n(e,r,o.containsAllKeys,!0).to.contain.all.keys(t)},o.doesNotHaveAnyKeys=function(e,t,r){new n(e,r,o.doesNotHaveAnyKeys,!0).to.not.have.any.keys(t)},o.doesNotHaveAllKeys=function(e,t,r){new n(e,r,o.doesNotHaveAllKeys,!0).to.not.have.all.keys(t)},o.hasAnyDeepKeys=function(e,t,r){new n(e,r,o.hasAnyDeepKeys,!0).to.have.any.deep.keys(t)},o.hasAllDeepKeys=function(e,t,r){new n(e,r,o.hasAllDeepKeys,!0).to.have.all.deep.keys(t)},o.containsAllDeepKeys=function(e,t,r){new n(e,r,o.containsAllDeepKeys,!0).to.contain.all.deep.keys(t)},o.doesNotHaveAnyDeepKeys=function(e,t,r){new n(e,r,o.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(t)},o.doesNotHaveAllDeepKeys=function(e,t,r){new n(e,r,o.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(t)},o.throws=function(e,t,s,i){("string"==typeof t||t instanceof RegExp)&&(s=t,t=null);var a=new n(e,i,o.throws,!0).to.throw(t,s);return r(a,"object")},o.doesNotThrow=function(e,t,r,s){("string"==typeof t||t instanceof RegExp)&&(r=t,t=null),new n(e,s,o.doesNotThrow,!0).to.not.throw(t,r)},o.operator=function(s,i,a,c){var u;switch(i){case"==":u=s==a;break;case"===":u=s===a;break;case">":u=s>a;break;case">=":u=s>=a;break;case"<":u=s<a;break;case"<=":u=s<=a;break;case"!=":u=s!=a;break;case"!==":u=s!==a;break;default:throw c=c?c+": ":c,new e.AssertionError(c+'Invalid operator "'+i+'"',void 0,o.operator)}var l=new n(u,c,o.operator,!0);l.assert(!0===r(l,"object"),"expected "+t.inspect(s)+" to be "+i+" "+t.inspect(a),"expected "+t.inspect(s)+" to not be "+i+" "+t.inspect(a))},o.closeTo=function(e,t,r,s){new n(e,s,o.closeTo,!0).to.be.closeTo(t,r)},o.approximately=function(e,t,r,s){new n(e,s,o.approximately,!0).to.be.approximately(t,r)},o.sameMembers=function(e,t,r){new n(e,r,o.sameMembers,!0).to.have.same.members(t)},o.notSameMembers=function(e,t,r){new n(e,r,o.notSameMembers,!0).to.not.have.same.members(t)},o.sameDeepMembers=function(e,t,r){new n(e,r,o.sameDeepMembers,!0).to.have.same.deep.members(t)},o.notSameDeepMembers=function(e,t,r){new n(e,r,o.notSameDeepMembers,!0).to.not.have.same.deep.members(t)},o.sameOrderedMembers=function(e,t,r){new n(e,r,o.sameOrderedMembers,!0).to.have.same.ordered.members(t)},o.notSameOrderedMembers=function(e,t,r){new n(e,r,o.notSameOrderedMembers,!0).to.not.have.same.ordered.members(t)},o.sameDeepOrderedMembers=function(e,t,r){new n(e,r,o.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(t)},o.notSameDeepOrderedMembers=function(e,t,r){new n(e,r,o.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(t)},o.includeMembers=function(e,t,r){new n(e,r,o.includeMembers,!0).to.include.members(t)},o.notIncludeMembers=function(e,t,r){new n(e,r,o.notIncludeMembers,!0).to.not.include.members(t)},o.includeDeepMembers=function(e,t,r){new n(e,r,o.includeDeepMembers,!0).to.include.deep.members(t)},o.notIncludeDeepMembers=function(e,t,r){new n(e,r,o.notIncludeDeepMembers,!0).to.not.include.deep.members(t)},o.includeOrderedMembers=function(e,t,r){new n(e,r,o.includeOrderedMembers,!0).to.include.ordered.members(t)},o.notIncludeOrderedMembers=function(e,t,r){new n(e,r,o.notIncludeOrderedMembers,!0).to.not.include.ordered.members(t)},o.includeDeepOrderedMembers=function(e,t,r){new n(e,r,o.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(t)},o.notIncludeDeepOrderedMembers=function(e,t,r){new n(e,r,o.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(t)},o.oneOf=function(e,t,r){new n(e,r,o.oneOf,!0).to.be.oneOf(t)},o.changes=function(e,t,r,s){3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.changes,!0).to.change(t,r)},o.changesBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.changesBy,!0).to.change(t,r).by(s)},o.doesNotChange=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.doesNotChange,!0).to.not.change(t,r)},o.changesButNotBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.changesButNotBy,!0).to.change(t,r).but.not.by(s)},o.increases=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.increases,!0).to.increase(t,r)},o.increasesBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.increasesBy,!0).to.increase(t,r).by(s)},o.doesNotIncrease=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.doesNotIncrease,!0).to.not.increase(t,r)},o.increasesButNotBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.increasesButNotBy,!0).to.increase(t,r).but.not.by(s)},o.decreases=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.decreases,!0).to.decrease(t,r)},o.decreasesBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.decreasesBy,!0).to.decrease(t,r).by(s)},o.doesNotDecrease=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.doesNotDecrease,!0).to.not.decrease(t,r)},o.doesNotDecreaseBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);return new n(e,i,o.doesNotDecreaseBy,!0).to.not.decrease(t,r).by(s)},o.decreasesButNotBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.decreasesButNotBy,!0).to.decrease(t,r).but.not.by(s)}
/*!
   * ### .ifError(object)
   *
   * Asserts if value is not a false value, and throws if it is a true value.
   * This is added to allow for chai to be a drop-in replacement for Node's
   * assert class.
   *
   *     var err = new Error('I am a custom error');
   *     assert.ifError(err); // Rethrows err!
   *
   * @name ifError
   * @param {Object} object
   * @namespace Assert
   * @api public
   */,o.ifError=function(e){if(e)throw e},o.isExtensible=function(e,t){new n(e,t,o.isExtensible,!0).to.be.extensible},o.isNotExtensible=function(e,t){new n(e,t,o.isNotExtensible,!0).to.not.be.extensible},o.isSealed=function(e,t){new n(e,t,o.isSealed,!0).to.be.sealed},o.isNotSealed=function(e,t){new n(e,t,o.isNotSealed,!0).to.not.be.sealed},o.isFrozen=function(e,t){new n(e,t,o.isFrozen,!0).to.be.frozen},o.isNotFrozen=function(e,t){new n(e,t,o.isNotFrozen,!0).to.not.be.frozen},o.isEmpty=function(e,t){new n(e,t,o.isEmpty,!0).to.be.empty},o.isNotEmpty=function(e,t){new n(e,t,o.isNotEmpty,!0).to.not.be.empty},
/*!
   * Aliases.
   */
function e(t,n){return o[n]=o[t],e}("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")}},function(e,t,n){var r=n(22),o=n(37),s=n(24);e.exports=function(e){var t={};return"function"==typeof e&&(e=s.createServer(e)),r.forEach((function(n){t[n]=function(t){return new o(e,n,t)}})),t.del=t.delete,t},e.exports.Test=o,e.exports.agent=n(90)},function(e,t){e.exports=n(27)},function(e,t,n){var r=n(69).IncomingForm;r.IncomingForm=r,e.exports=r},function(e,t,n){var r;global.GENTLY&&(r=GENTLY.hijack(n(70)));var o=r("crypto"),s=r("fs"),i=r("util"),a=r("path"),c=r("./file"),u=r("./multipart_parser").MultipartParser,l=r("./querystring_parser").QuerystringParser,d=r("./octet_parser").OctetParser,p=r("./json_parser").JSONParser,h=r("string_decoder").StringDecoder,f=r("events").EventEmitter,y=r("stream").Stream,m=r("os");function b(e){return this instanceof b?(f.call(this),e=e||{},this.error=null,this.ended=!1,this.maxFields=e.maxFields||1e3,this.maxFieldsSize=e.maxFieldsSize||20971520,this.maxFileSize=e.maxFileSize||209715200,this.keepExtensions=e.keepExtensions||!1,this.uploadDir=e.uploadDir||m.tmpdir&&m.tmpdir()||m.tmpDir(),this.encoding=e.encoding||"utf-8",this.headers=null,this.type=null,this.hash=e.hash||!1,this.multiples=e.multiples||!1,this.bytesReceived=null,this.bytesExpected=null,this._parser=null,this._flushing=0,this._fieldsSize=0,this._fileSize=0,this.openedFiles=[],this):new b(e)}i.inherits(b,f),t.IncomingForm=b,b.prototype.parse=function(e,t){if(this.pause=function(){try{e.pause()}catch(e){return this.ended||this._error(e),!1}return!0},this.resume=function(){try{e.resume()}catch(e){return this.ended||this._error(e),!1}return!0},t){var n={},r={};this.on("field",(function(e,t){n[e]=t})).on("file",(function(e,t){this.multiples&&r[e]?(Array.isArray(r[e])||(r[e]=[r[e]]),r[e].push(t)):r[e]=t})).on("error",(function(e){t(e,n,r)})).on("end",(function(){t(null,n,r)}))}this.writeHeaders(e.headers);var o=this;return e.on("error",(function(e){o._error(e)})).on("aborted",(function(){o.emit("aborted"),o._error(new Error("Request aborted"))})).on("data",(function(e){o.write(e)})).on("end",(function(){if(!o.error){var e=o._parser.end();e&&o._error(e)}})),this},b.prototype.writeHeaders=function(e){this.headers=e,this._parseContentLength(),this._parseContentType()},b.prototype.write=function(e){if(!this.error){if(this._parser){this.bytesReceived+=e.length,this.emit("progress",this.bytesReceived,this.bytesExpected);var t=this._parser.write(e);return t!==e.length&&this._error(new Error("parser error, "+t+" of "+e.length+" bytes parsed")),t}this._error(new Error("uninitialized parser"))}},b.prototype.pause=function(){return!1},b.prototype.resume=function(){return!1},b.prototype.onPart=function(e){this.handlePart(e)},b.prototype.handlePart=function(e){var t=this;if(void 0===e.filename){var n="",r=new h(this.encoding);return e.on("data",(function(e){t._fieldsSize+=e.length,t._fieldsSize>t.maxFieldsSize?t._error(new Error("maxFieldsSize exceeded, received "+t._fieldsSize+" bytes of field data")):n+=r.write(e)})),void e.on("end",(function(){t.emit("field",e.name,n)}))}this._flushing++;var o=new c({path:this._uploadPath(e.filename),name:e.filename,type:e.mime,hash:t.hash});this.emit("fileBegin",e.name,o),o.open(),this.openedFiles.push(o),e.on("data",(function(e){t._fileSize+=e.length,t._fileSize>t.maxFileSize?t._error(new Error("maxFileSize exceeded, received "+t._fileSize+" bytes of file data")):0!=e.length&&(t.pause(),o.write(e,(function(){t.resume()})))})),e.on("end",(function(){o.end((function(){t._flushing--,t.emit("file",e.name,o),t._maybeEnd()}))}))},b.prototype._parseContentType=function(){if(0!==this.bytesExpected)if(this.headers["content-type"])if(this.headers["content-type"].match(/octet-stream/i))this._initOctetStream();else if(this.headers["content-type"].match(/urlencoded/i))this._initUrlencoded();else if(this.headers["content-type"].match(/multipart/i)){var e=this.headers["content-type"].match(/boundary=(?:"([^"]+)"|([^;]+))/i);e?this._initMultipart(e[1]||e[2]):this._error(new Error("bad content-type header, no multipart boundary"))}else this.headers["content-type"].match(/json/i)?this._initJSONencoded():this._error(new Error("bad content-type header, unknown content-type: "+this.headers["content-type"]));else this._error(new Error("bad content-type header, no content-type"));else this._parser=function(e){return{end:function(){return e.ended=!0,e._maybeEnd(),null}}}(this)},b.prototype._error=function(e){this.error||this.ended||(this.error=e,this.emit("error",e),Array.isArray(this.openedFiles)&&this.openedFiles.forEach((function(e){e._writeStream.destroy(),setTimeout(s.unlink,0,e.path,(function(e){}))})))},b.prototype._parseContentLength=function(){this.bytesReceived=0,this.headers["content-length"]?this.bytesExpected=parseInt(this.headers["content-length"],10):void 0===this.headers["transfer-encoding"]&&(this.bytesExpected=0),null!==this.bytesExpected&&this.emit("progress",this.bytesReceived,this.bytesExpected)},b.prototype._newParser=function(){return new u},b.prototype._initMultipart=function(e){this.type="multipart";var t,n,r,o=new u,s=this;o.initWithBoundary(e),o.onPartBegin=function(){(r=new y).readable=!0,r.headers={},r.name=null,r.filename=null,r.mime=null,r.transferEncoding="binary",r.transferBuffer="",t="",n=""},o.onHeaderField=function(e,n,r){t+=e.toString(s.encoding,n,r)},o.onHeaderValue=function(e,t,r){n+=e.toString(s.encoding,t,r)},o.onHeaderEnd=function(){t=t.toLowerCase(),r.headers[t]=n;var e=n.match(/\bname=("([^"]*)"|([^\(\)<>@,;:\\"\/\[\]\?=\{\}\s\t/]+))/i);"content-disposition"==t?(e&&(r.name=e[2]||e[3]||""),r.filename=s._fileName(n)):"content-type"==t?r.mime=n:"content-transfer-encoding"==t&&(r.transferEncoding=n.toLowerCase()),t="",n=""},o.onHeadersEnd=function(){switch(r.transferEncoding){case"binary":case"7bit":case"8bit":o.onPartData=function(e,t,n){r.emit("data",e.slice(t,n))},o.onPartEnd=function(){r.emit("end")};break;case"base64":o.onPartData=function(e,t,n){r.transferBuffer+=e.slice(t,n).toString("ascii");var o=4*parseInt(r.transferBuffer.length/4,10);r.emit("data",new Buffer(r.transferBuffer.substring(0,o),"base64")),r.transferBuffer=r.transferBuffer.substring(o)},o.onPartEnd=function(){r.emit("data",new Buffer(r.transferBuffer,"base64")),r.emit("end")};break;default:return s._error(new Error("unknown transfer-encoding"))}s.onPart(r)},o.onEnd=function(){s.ended=!0,s._maybeEnd()},this._parser=o},b.prototype._fileName=function(e){var t=e.match(/\bfilename=("(.*?)"|([^\(\)<>@,;:\\"\/\[\]\?=\{\}\s\t/]+))($|;\s)/i);if(t){var n=t[2]||t[3]||"",r=n.substr(n.lastIndexOf("\\")+1);return(r=r.replace(/%22/g,'"')).replace(/&#([\d]{4});/g,(function(e,t){return String.fromCharCode(t)}))}},b.prototype._initUrlencoded=function(){this.type="urlencoded";var e=new l(this.maxFields),t=this;e.onField=function(e,n){t.emit("field",e,n)},e.onEnd=function(){t.ended=!0,t._maybeEnd()},this._parser=e},b.prototype._initOctetStream=function(){this.type="octet-stream";var e=this.headers["x-file-name"],t=this.headers["content-type"],n=new c({path:this._uploadPath(e),name:e,type:t});this.emit("fileBegin",e,n),n.open(),this.openedFiles.push(n),this._flushing++;var r=this;r._parser=new d;var o=0;r._parser.on("data",(function(e){r.pause(),o++,n.write(e,(function(){o--,r.resume(),r.ended&&r._parser.emit("doneWritingFile")}))})),r._parser.on("end",(function(){r._flushing--,r.ended=!0;var e=function(){n.end((function(){r.emit("file","file",n),r._maybeEnd()}))};0===o?e():r._parser.once("doneWritingFile",e)}))},b.prototype._initJSONencoded=function(){this.type="json";var e=new p(this),t=this;e.onField=function(e,n){t.emit("field",e,n)},e.onEnd=function(){t.ended=!0,t._maybeEnd()},this._parser=e},b.prototype._uploadPath=function(e){var t="upload_"+o.randomBytes(16).toString("hex");if(this.keepExtensions){var n=a.extname(e);t+=n=n.replace(/(\.[a-z0-9]+).*/i,"$1")}return a.join(this.uploadDir,t)},b.prototype._maybeEnd=function(){!this.ended||this._flushing||this.error||this.emit("end")}},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=70},function(e,t){e.exports=n(28)},function(e,t,n){"use strict";const r=n(28),o=n(29),s=n(73);function i(e){o.call(this);const t=this.res=e.res;this.request=e,this.req=e.req,this.text=t.text,this.body=void 0!==t.body?t.body:{},this.files=t.files||{},this.buffered="string"==typeof this.text,this.header=this.headers=t.headers,this._setStatusProperties(t.statusCode),this._setHeaderProperties(this.header),this.setEncoding=t.setEncoding.bind(t),t.on("data",this.emit.bind(this,"data")),t.on("end",this.emit.bind(this,"end")),t.on("close",this.emit.bind(this,"close")),t.on("error",this.emit.bind(this,"error"))}e.exports=i,r.inherits(i,o),s(i.prototype),i.prototype.destroy=function(e){this.res.destroy(e)},i.prototype.pause=function(){this.res.pause()},i.prototype.resume=function(){this.res.resume()},i.prototype.toError=function(){const e=this.req,t=e.method,n=e.path,r=`cannot ${t} ${n} (${this.status})`,o=new Error(r);return o.status=this.status,o.text=this.text,o.method=t,o.path=n,o},i.prototype.setStatusProperties=function(e){return console.warn("In superagent 2.x setStatusProperties is a private method"),this._setStatusProperties(e)},i.prototype.toJSON=function(){return{req:this.request.toJSON(),header:this.header,status:this.status,text:this.text}}},function(e,t,n){"use strict";var r=n(38);function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}e.exports=o,o.prototype.get=function(e){return this.header[e.toLowerCase()]},o.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=r.type(t);var n=r.params(t);for(var o in n)this[o]=n[o];this.links={};try{e.link&&(this.links=r.parseLinks(e.link))}catch(e){}},o.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}},function(e,t,n){"use strict";const r=n(75).StringDecoder,o=n(29),s=n(39);t.unzip=(e,t)=>{const n=s.createUnzip(),i=new o;let a;i.req=e,n.on("error",e=>{e&&"Z_BUF_ERROR"===e.code?i.emit("end"):i.emit("error",e)}),t.pipe(n),t.setEncoding=e=>{a=new r(e)},n.on("data",e=>{if(a){const t=a.write(e);t.length&&i.emit("data",t)}else i.emit("data",e)}),n.on("end",()=>{i.emit("end")});const c=t.on;t.on=function(e,n){return"data"==e||"end"==e?i.on(e,n):"error"==e?(i.on(e,n),c.call(t,e,n)):c.call(t,e,n),this}}},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e){e.exports=JSON.parse('{"name":"superagent","version":"3.8.3","description":"elegant & feature rich browser / node HTTP with a fluent API","scripts":{"prepare":"make all","test":"make test"},"keywords":["http","ajax","request","agent"],"license":"MIT","author":"TJ Holowaychuk <tj@vision-media.ca>","contributors":["Kornel Lesiński <kornel@geekhood.net>","Peter Lyons <pete@peterlyons.com>","Hunter Loftis <hunter@hunterloftis.com>"],"repository":{"type":"git","url":"git://github.com/visionmedia/superagent.git"},"dependencies":{"component-emitter":"^1.2.0","cookiejar":"^2.1.0","debug":"^3.1.0","extend":"^3.0.0","form-data":"^2.3.1","formidable":"^1.2.0","methods":"^1.1.1","mime":"^1.4.1","qs":"^6.5.1","readable-stream":"^2.3.5"},"devDependencies":{"Base64":"^1.0.1","basic-auth-connect":"^1.0.0","body-parser":"^1.18.2","browserify":"^14.1.0","cookie-parser":"^1.4.3","express":"^4.16.3","express-session":"^1.15.6","marked":"0.3.12","mocha":"^3.5.3","multer":"^1.3.0","should":"^11.2.0","should-http":"^0.1.1","zuul":"^3.11.1"},"browser":{"./lib/node/index.js":"./lib/client.js","./test/support/server.js":"./test/support/blank.js"},"component":{"scripts":{"superagent":"lib/client.js"}},"main":"./lib/node/index.js","engines":{"node":">= 4.0"}}')},function(e,t,n){"use strict";var r=n(81);function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}e.exports=o,o.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},o.prototype.parse=function(e){return this._parser=e,this},o.prototype.responseType=function(e){return this._responseType=e,this},o.prototype.serialize=function(e){return this._serializer=e,this},o.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},o.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var s=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];o.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(e,t);if(!0===n)return!0;if(!1===n)return!1}catch(e){console.error(e)}if(t&&t.status&&t.status>=500&&501!=t.status)return!0;if(e){if(e.code&&~s.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},o.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},o.prototype.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(e,t){n.end((function(n,r){n?t(n):e(r)}))}))}return this._fullfilledPromise.then(e,t)},o.prototype.catch=function(e){return this.then(void 0,e)},o.prototype.use=function(e){return e(this),this},o.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},o.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},o.prototype.get=function(e){return this._header[e.toLowerCase()]},o.prototype.getHeader=o.prototype.get,o.prototype.set=function(e,t){if(r(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},o.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},o.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),r(e)){for(var n in e)this.field(n,e[n]);return this}if(Array.isArray(t)){for(var o in t)this.field(e,t[o]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},o.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},o.prototype._auth=function(e,t,n,r){switch(n.type){case"basic":this.set("Authorization","Basic "+r(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},o.prototype.withCredentials=function(e){return null==e&&(e=!0),this._withCredentials=e,this},o.prototype.redirects=function(e){return this._maxRedirects=e,this},o.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},o.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},o.prototype.send=function(e){var t=r(e),n=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&r(this._data))for(var o in e)this._data[o]=e[o];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(n||this.type("json"),this)},o.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},o.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var n=this.url.substring(t+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,t)+"?"+n.join("&")}}},o.prototype._appendQueryString=function(){console.trace("Unsupported")},o.prototype._timeoutError=function(e,t,n){if(!this._aborted){var r=new Error(e+t+"ms exceeded");r.timeout=t,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},o.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))}},function(e,t,n){"use strict";e.exports=function(e){return null!==e&&"object"==typeof e}},function(e,t,n){"use strict";const r=n(30).CookieJar,o=n(30).CookieAccessInfo,s=n(23).parse,i=n(27),a=n(83);let c=n(22);function u(e){if(!(this instanceof u))return new u(e);a.call(this),this.jar=new r,e&&(e.ca&&this.ca(e.ca),e.key&&this.key(e.key),e.pfx&&this.pfx(e.pfx),e.cert&&this.cert(e.cert))}e.exports=u,u.prototype=Object.create(a.prototype),u.prototype._saveCookies=function(e){const t=e.headers["set-cookie"];t&&this.jar.setCookies(t)},u.prototype._attachCookies=function(e){const t=s(e.url),n=o(t.hostname,t.pathname,"https:"==t.protocol),r=this.jar.getCookies(n).toValueString();e.cookies=r},c.forEach(e=>{const t=e.toUpperCase();u.prototype[e]=function(e,n){const r=new i.Request(t,e);return r.on("response",this._saveCookies.bind(this)),r.on("redirect",this._saveCookies.bind(this)),r.on("redirect",this._attachCookies.bind(this,r)),this._attachCookies(r),this._setDefaults(r),n&&r.end(n),r}}),u.prototype.del=u.prototype.delete},function(e,t){function n(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach((function(e){n.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}})),n.prototype._setDefaults=function(e){this._defaults.forEach((function(t){e[t.fn].apply(e,t.arguments)}))},e.exports=n},function(e,t,n){"use strict";t["application/x-www-form-urlencoded"]=n(85),t["application/json"]=n(86),t.text=n(87);const r=n(88);t["application/octet-stream"]=r,t["application/pdf"]=r,t.image=r},function(e,t,n){"use strict";const r=n(41);e.exports=function(e,t){e.text="",e.setEncoding("ascii"),e.on("data",t=>{e.text+=t}),e.on("end",()=>{try{t(null,r.parse(e.text))}catch(e){t(e)}})}},function(e,t,n){"use strict";e.exports=function(e,t){e.text="",e.setEncoding("utf8"),e.on("data",t=>{e.text+=t}),e.on("end",()=>{try{var n=e.text&&JSON.parse(e.text)}catch(t){var r=t;r.rawResponse=e.text||null,r.statusCode=e.statusCode}finally{t(r,n)}})}},function(e,t,n){"use strict";e.exports=function(e,t){e.text="",e.setEncoding("utf8"),e.on("data",t=>{e.text+=t}),e.on("end",t)}},function(e,t,n){"use strict";e.exports=(e,t)=>{const n=[];e.on("data",e=>{n.push(e)}),e.on("end",()=>{t(null,Buffer.concat(n))})}},function(e,t){e.exports=n(33)},function(e,t,n){var r=n(27).agent,o=n(22),s=n(24),i=n(37);function a(e,t){if(!(this instanceof a))return new a(e,t);"function"==typeof e&&(e=s.createServer(e)),t&&(this._ca=t.ca,this._key=t.key,this._cert=t.cert),r.call(this),this.app=e}e.exports=a,Object.setPrototypeOf(a.prototype,r.prototype),a.prototype.host=function(e){return this._host=e,this},o.forEach((function(e){a.prototype[e]=function(t,n){var r=new i(this.app,e.toUpperCase(),t,this._host);return r.ca(this._ca),r.cert(this._cert),r.key(this._key),r.on("response",this._saveCookies.bind(this)),r.on("redirect",this._saveCookies.bind(this)),r.on("redirect",this._attachCookies.bind(this,r)),this._attachCookies(r),this._setDefaults(r),r}})),a.prototype.del=a.prototype.delete},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(14).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(42),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(10),A=n.n(C),L=n(11),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(10)},function(e,t){e.exports=n(11)},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(9);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(13)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(14)},function(e,t){
/*!
 * Chai - flag utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t,n){var r=e.__flags||(e.__flags=Object.create(null));if(3!==arguments.length)return r[t];r[t]=n}},function(e,t,n){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=[];
/*!
 * Chai version
 */t.version="4.2.0",
/*!
 * Assertion Error
 */
t.AssertionError=n(31);
/*!
 * Utils for plugins (not exported)
 */
var o=n(44);t.use=function(e){return~r.indexOf(e)||(e(t,o),r.push(e)),t},
/*!
 * Utility Functions
 */
t.util=o;
/*!
 * Configuration
 */
var s=n(18);t.config=s;
/*!
 * Primary `Assertion` prototype
 */
var i=n(61);t.use(i);
/*!
 * Core Assertions
 */
var a=n(62);t.use(a);
/*!
 * Expect interface
 */
var c=n(63);t.use(c);
/*!
 * Should interface
 */
var u=n(64);t.use(u);
/*!
 * Assert interface
 */
var l=n(65);t.use(l)},function(e,t){
/*!
 * Chai - transferFlags utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t,n){var r=e.__flags||(e.__flags=Object.create(null));for(var o in t.__flags||(t.__flags=Object.create(null)),n=3!==arguments.length||n,r)(n||"object"!==o&&"ssfi"!==o&&"lockSsfi"!==o&&"message"!=o)&&(t.__flags[o]=r[o])}},function(e,t){e.exports={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"]}},function(e,t,n){var r=n(18);
/*!
 * Chai - isProxyEnabled helper
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */e.exports=function(){return r.useProxy&&"undefined"!=typeof Proxy&&"undefined"!=typeof Reflect}},function(e,t){var n=Object.getOwnPropertyDescriptor((function(){}),"length");
/*!
 * Chai - addLengthGuard utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */e.exports=function(e,t,r){return n.configurable?(Object.defineProperty(e,"length",{get:function(){if(r)throw Error("Invalid Chai property: "+t+'.length. Due to a compatibility issue, "length" cannot directly follow "'+t+'". Use "'+t+'.lengthOf" instead.');throw Error("Invalid Chai property: "+t+'.length. See docs for proper usage of "'+t+'".')}}),e):e}},function(e,t,n){var r=n(18),o=n(15),s=n(35),i=n(19),a=["__flags","__methods","_obj","assert"];e.exports=function(e,t){return i()?new Proxy(e,{get:function e(n,i){if("string"==typeof i&&-1===r.proxyExcludedKeys.indexOf(i)&&!Reflect.has(n,i)){if(t)throw Error("Invalid Chai property: "+t+"."+i+'. See docs for proper usage of "'+t+'".');var c=null,u=4;throw s(n).forEach((function(e){if(!Object.prototype.hasOwnProperty(e)&&-1===a.indexOf(e)){var t=function(e,t,n){if(Math.abs(e.length-t.length)>=n)return n;for(var r=[],o=0;o<=e.length;o++)r[o]=Array(t.length+1).fill(0),r[o][0]=o;for(var s=0;s<t.length;s++)r[0][s]=s;for(o=1;o<=e.length;o++){var i=e.charCodeAt(o-1);for(s=1;s<=t.length;s++)Math.abs(o-s)>=n?r[o][s]=n:r[o][s]=Math.min(r[o-1][s]+1,r[o][s-1]+1,r[o-1][s-1]+(i===t.charCodeAt(s-1)?0:1))}return r[e.length][t.length]}(i,e,u);t<u&&(c=e,u=t)}})),null!==c?Error("Invalid Chai property: "+i+'. Did you mean "'+c+'"?'):Error("Invalid Chai property: "+i)}return-1!==a.indexOf(i)||o(n,"lockSsfi")||o(n,"ssfi",e),Reflect.get(n,i)}}):e}},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t,n){var r;r=function(){"use strict";var e="function"==typeof Promise,t="object"==typeof self?self:global,n="undefined"!=typeof Symbol,r="undefined"!=typeof Map,o="undefined"!=typeof Set,s="undefined"!=typeof WeakMap,i="undefined"!=typeof WeakSet,a="undefined"!=typeof DataView,c=n&&void 0!==Symbol.iterator,u=n&&void 0!==Symbol.toStringTag,l=o&&"function"==typeof Set.prototype.entries,d=r&&"function"==typeof Map.prototype.entries,p=l&&Object.getPrototypeOf((new Set).entries()),h=d&&Object.getPrototypeOf((new Map).entries()),f=c&&"function"==typeof Array.prototype[Symbol.iterator],y=f&&Object.getPrototypeOf([][Symbol.iterator]()),m=c&&"function"==typeof String.prototype[Symbol.iterator],b=m&&Object.getPrototypeOf(""[Symbol.iterator]());return function(n){var c=typeof n;if("object"!==c)return c;if(null===n)return"null";if(n===t)return"global";if(Array.isArray(n)&&(!1===u||!(Symbol.toStringTag in n)))return"Array";if("object"==typeof window&&null!==window){if("object"==typeof window.location&&n===window.location)return"Location";if("object"==typeof window.document&&n===window.document)return"Document";if("object"==typeof window.navigator){if("object"==typeof window.navigator.mimeTypes&&n===window.navigator.mimeTypes)return"MimeTypeArray";if("object"==typeof window.navigator.plugins&&n===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"==typeof window.HTMLElement)&&n instanceof window.HTMLElement){if("BLOCKQUOTE"===n.tagName)return"HTMLQuoteElement";if("TD"===n.tagName)return"HTMLTableDataCellElement";if("TH"===n.tagName)return"HTMLTableHeaderCellElement"}}var l=u&&n[Symbol.toStringTag];if("string"==typeof l)return l;var d=Object.getPrototypeOf(n);return d===RegExp.prototype?"RegExp":d===Date.prototype?"Date":e&&d===Promise.prototype?"Promise":o&&d===Set.prototype?"Set":r&&d===Map.prototype?"Map":i&&d===WeakSet.prototype?"WeakSet":s&&d===WeakMap.prototype?"WeakMap":a&&d===DataView.prototype?"DataView":r&&d===h?"Map Iterator":o&&d===p?"Set Iterator":f&&d===y?"Array Iterator":m&&d===b?"String Iterator":null===d?"Object":Object.prototype.toString.call(n).slice(8,-1)}},e.exports=r()},function(e,t,n){var r=n(34),o=n(35),s=n(49),i=n(18);e.exports=function(e,t,n,r){return c({showHidden:t,seen:[],stylize:function(e){return e}},e,void 0===n?2:n)};var a=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&"nodeType"in e&&1===e.nodeType&&"string"==typeof e.nodeName};function c(e,n,y){if(n&&"function"==typeof n.inspect&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var m=n.inspect(y,e);return"string"!=typeof m&&(m=c(e,m,y)),m}var b=function(e,t){switch(typeof t){case"undefined":return e.stylize("undefined","undefined");case"string":var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string");case"number":return 0===t&&1/t==-1/0?e.stylize("-0","number"):e.stylize(""+t,"number");case"boolean":return e.stylize(""+t,"boolean");case"symbol":return e.stylize(t.toString(),"symbol")}if(null===t)return e.stylize("null","null")}(e,n);if(b)return b;if(a(n)){if("outerHTML"in n)return n.outerHTML;try{if(document.xmlVersion)return(new XMLSerializer).serializeToString(n);var g=document.createElementNS("http://www.w3.org/1999/xhtml","_");g.appendChild(n.cloneNode(!1));var w=g.innerHTML.replace("><",">"+n.innerHTML+"<");return g.innerHTML="",w}catch(e){}}var v,_,x=s(n),E=e.showHidden?o(n):x;if(0===E.length||h(n)&&(1===E.length&&"stack"===E[0]||2===E.length&&"description"===E[0]&&"stack"===E[1])){if("function"==typeof n)return _=(v=r(n))?": "+v:"",e.stylize("[Function"+_+"]","special");if(d(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(p(n))return e.stylize(Date.prototype.toUTCString.call(n),"date");if(h(n))return u(n)}var S,O,P="",k=!1,j=!1,q=["{","}"];if("object"==typeof(S=n)&&/\w+Array]$/.test(f(S))&&(j=!0,q=["[","]"]),function(e){return Array.isArray(e)||"object"==typeof e&&"[object Array]"===f(e)}(n)&&(k=!0,q=["[","]"]),"function"==typeof n&&(P=" [Function"+(_=(v=r(n))?": "+v:"")+"]"),d(n)&&(P=" "+RegExp.prototype.toString.call(n)),p(n)&&(P=" "+Date.prototype.toUTCString.call(n)),h(n))return u(n);if(0===E.length&&(!k||0==n.length))return q[0]+P+q[1];if(y<0)return d(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");if(e.seen.push(n),k)O=function(e,t,n,r,o){for(var s=[],i=0,a=t.length;i<a;++i)Object.prototype.hasOwnProperty.call(t,String(i))?s.push(l(e,t,n,r,String(i),!0)):s.push("");return o.forEach((function(o){o.match(/^\d+$/)||s.push(l(e,t,n,r,o,!0))})),s}(e,n,y,x,E);else{if(j)return function(e){for(var t="[ ",n=0;n<e.length;++n){if(t.length>=i.truncateThreshold-7){t+="...";break}t+=e[n]+", "}return-1!==(t+=" ]").indexOf(",  ]")&&(t=t.replace(",  ]"," ]")),t}(n);O=E.map((function(t){return l(e,n,y,x,t,k)}))}return e.seen.pop(),function(e,t,n){return e.reduce((function(e,t){return e+t.length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(O,P,q)}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,n,r,o,s){var i,a,u=Object.getOwnPropertyDescriptor(t,o);if(u&&(u.get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special"))),r.indexOf(o)<0&&(i="["+o+"]"),a||(e.seen.indexOf(t[o])<0?(a=c(e,t[o],null===n?null:n-1)).indexOf("\n")>-1&&(a=s?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),void 0===i){if(s&&o.match(/^\d+$/))return a;(i=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+a}function d(e){return"object"==typeof e&&"[object RegExp]"===f(e)}function p(e){return"object"==typeof e&&"[object Date]"===f(e)}function h(e){return"object"==typeof e&&"[object Error]"===f(e)}function f(e){return Object.prototype.toString.call(e)}},function(e,t,n){"use strict";const r=n(67)("superagent"),o=n(68),s=n(71),i=n(72),a=n(23).parse,c=n(23).format,u=n(23).resolve;let l=n(22);const d=n(29),p=n(38),h=n(74).unzip,f=n(76),y=n(77),m=n(40),b=n(24),g=n(78),w=n(41),v=n(39),_=n(28),x=n(79),E=n(80),S=n(30);function O(e,n){return"function"==typeof n?new t.Request("GET",e).end(n):1==arguments.length?new t.Request("GET",e):new t.Request(e,n)}function P(){}function k(e){const t=`node-superagent/${x.version}`;e._header={"user-agent":t},e.header={"User-Agent":t}}function j(e,t){d.call(this),"string"!=typeof t&&(t=c(t)),this._agent=!1,this._formData=null,this.method=e,this.url=t,k(this),this.writable=!0,this._redirects=0,this.redirects("HEAD"===e?0:5),this.cookies="",this.qs={},this._query=[],this.qsRaw=this._query,this._redirectList=[],this._streamRequest=!1,this.once("end",this.clearTimeout.bind(this))}function q(e){return/[\/+]json($|[^-\w])/.test(e)}function T(e){return~[301,302,303,305,307,308].indexOf(e)}(t=e.exports=O).Request=j,t.agent=n(82),t.Response=i,y.define({"application/x-www-form-urlencoded":["form","urlencoded","form-data"]},!0),t.protocols={"http:":b,"https:":m},t.serialize={"application/x-www-form-urlencoded":w.stringify,"application/json":JSON.stringify},t.parse=n(84),_.inherits(j,d),E(j.prototype),j.prototype.attach=function(e,t,n){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");let o=n||{};"string"==typeof n&&(o={filename:n}),"string"==typeof t?(o.filename||(o.filename=t),r("creating `fs.ReadStream` instance for file: %s",t),t=g.createReadStream(t)):!o.filename&&t.path&&(o.filename=t.path),this._getFormData().append(e,t,o)}return this},j.prototype._getFormData=function(){return this._formData||(this._formData=new s,this._formData.on("error",e=>{this.emit("error",e),this.abort()})),this._formData},j.prototype.agent=function(e){return arguments.length?(this._agent=e,this):this._agent},j.prototype.type=function(e){return this.set("Content-Type",~e.indexOf("/")?e:y.lookup(e))},j.prototype.accept=function(e){return this.set("Accept",~e.indexOf("/")?e:y.lookup(e))},j.prototype.query=function(e){return"string"==typeof e?this._query.push(e):f(this.qs,e),this},j.prototype.write=function(e,t){const n=this.request();return this._streamRequest||(this._streamRequest=!0),n.write(e,t)},j.prototype.pipe=function(e,t){return this.piped=!0,this.buffer(!1),this.end(),this._pipeContinue(e,t)},j.prototype._pipeContinue=function(e,t){return this.req.once("response",n=>{if(T(n.statusCode)&&this._redirects++!=this._maxRedirects)return this._redirect(n)._pipeContinue(e,t);if(this.res=n,this._emitResponse(),!this._aborted){if(this._shouldUnzip(n)){const r=v.createUnzip();r.on("error",t=>{t&&"Z_BUF_ERROR"===t.code?e.emit("end"):e.emit("error",t)}),n.pipe(r).pipe(e,t)}else n.pipe(e,t);n.once("end",()=>{this.emit("end")})}}),e},j.prototype.buffer=function(e){return this._buffer=!1!==e,this},j.prototype._redirect=function(e){let t=e.headers.location;if(!t)return this.callback(new Error("No location header for redirect"),e);r("redirect %s -> %s",this.url,t),t=u(this.url,t),e.resume();let n=this.req._headers;const o=a(t).host!==a(this.url).host;return 301!=e.statusCode&&302!=e.statusCode||(n=p.cleanHeader(this.req._headers,o),this.method="HEAD"==this.method?"HEAD":"GET",this._data=null),303==e.statusCode&&(n=p.cleanHeader(this.req._headers,o),this.method="GET",this._data=null),delete n.host,delete this.req,delete this._formData,k(this),this._endCalled=!1,this.url=t,this.qs={},this._query.length=0,this.set(n),this.emit("redirect",e),this._redirectList.push(this.url),this.end(this._callback),this},j.prototype.auth=function(e,t,n){1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(n=t,t=""),n||(n={type:"basic"});var r=function(e){return new Buffer(e).toString("base64")};return this._auth(e,t,n,r)},j.prototype.ca=function(e){return this._ca=e,this},j.prototype.key=function(e){return this._key=e,this},j.prototype.pfx=function(e){return"object"!=typeof e||Buffer.isBuffer(e)?this._pfx=e:(this._pfx=e.pfx,this._passphrase=e.passphrase),this},j.prototype.cert=function(e){return this._cert=e,this},j.prototype.request=function(){if(this.req)return this.req;const e={};try{const e=w.stringify(this.qs,{indices:!1,strictNullHandling:!0});e&&(this.qs={},this._query.push(e)),this._finalizeQueryString()}catch(e){return this.emit("error",e)}let n=this.url;const r=this._retries;if(0!=n.indexOf("http")&&(n=`http://${n}`),n=a(n),!0===/^https?\+unix:/.test(n.protocol)){n.protocol=`${n.protocol.split("+")[0]}:`;const t=n.path.match(/^([^/]+)(.+)$/);e.socketPath=t[1].replace(/%2F/g,"/"),n.path=t[2]}e.method=this.method,e.port=n.port,e.path=n.path,e.host=n.hostname,e.ca=this._ca,e.key=this._key,e.pfx=this._pfx,e.cert=this._cert,e.passphrase=this._passphrase,e.agent=this._agent;const o=t.protocols[n.protocol],s=this.req=o.request(e);if(s.setNoDelay(!0),"HEAD"!=e.method&&s.setHeader("Accept-Encoding","gzip, deflate"),this.protocol=n.protocol,this.host=n.host,s.once("drain",()=>{this.emit("drain")}),s.once("error",e=>{this._aborted||this._retries===r&&(this.response||this.callback(e))}),n.auth){const e=n.auth.split(":");this.auth(e[0],e[1])}this.username&&this.password&&this.auth(this.username,this.password);for(const e in this.header)this.header.hasOwnProperty(e)&&s.setHeader(e,this.header[e]);if(this.cookies)if(this.header.hasOwnProperty("cookie")){const e=new S.CookieJar;e.setCookies(this.header.cookie.split(";")),e.setCookies(this.cookies.split(";")),s.setHeader("Cookie",e.getCookies(S.CookieAccessInfo.All).toValueString())}else s.setHeader("Cookie",this.cookies);return s},j.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();const n=this._callback||P;if(this.clearTimeout(),this.called)return console.warn("superagent: double callback bug");if(this.called=!0,!e)try{if(!this._isResponseOK(t)){let n="Unsuccessful HTTP response";t&&(n=b.STATUS_CODES[t.status]||n),(e=new Error(n)).status=t?t.status:void 0}}catch(t){e=t}if(!e)return n(null,t);e.response=t,this._maxRetries&&(e.retries=this._retries-1),e&&this.listeners("error").length>0&&this.emit("error",e),n(e,t)},j.prototype._isHost=function(e){return Buffer.isBuffer(e)||e instanceof d||e instanceof s},j.prototype._emitResponse=function(e,t){const n=new i(this);return this.response=n,n.redirects=this._redirectList,void 0!==e&&(n.body=e),n.files=t,this.emit("response",n),n},j.prototype.end=function(e){return this.request(),r("%s %s",this.method,this.url),this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||P,this._end()},j.prototype._end=function(){let e=this._data;const n=this.req;let s=this._buffer;const i=this.method;if(this._setTimeouts(),"HEAD"!=i&&!n._headerSent){if("string"!=typeof e){let r=n.getHeader("Content-Type");r&&(r=r.split(";")[0]);let o=t.serialize[r];!o&&q(r)&&(o=t.serialize["application/json"]),o&&(e=o(e))}e&&!n.getHeader("Content-Length")&&n.setHeader("Content-Length",Buffer.isBuffer(e)?e.length:Buffer.byteLength(e))}n.once("response",e=>{if(r("%s %s -> %s",this.method,this.url,e.statusCode),this._responseTimeoutTimer&&clearTimeout(this._responseTimeoutTimer),this.piped)return;const i=this._maxRedirects,a=p.type(e.headers["content-type"]||"")||"text/plain",c=a.split("/")[0],u="multipart"==c,l=T(e.statusCode);let d=this._parser;const f=this._responseType;if(this.res=e,l&&this._redirects++!=i)return this._redirect(e);if("HEAD"==this.method)return this.emit("end"),void this.callback(null,this._emitResponse());if(this._shouldUnzip(e)&&h(n,e),!d)if(f)d=t.parse.image,s=!0;else if(u){const e=new o.IncomingForm;d=e.parse.bind(e),s=!0}else!function(e){const t=e.split("/")[0];return"image"==t||"video"==t}(a)?t.parse[a]?d=t.parse[a]:"text"==c?(d=t.parse.text,s=!1!==s):q(a)?(d=t.parse["application/json"],s=!1!==s):s&&(d=t.parse.text):(d=t.parse.image,s=!0);(void 0===s&&function(e){const t=e.split("/"),n=t[0],r=t[1];return"text"==n||"x-www-form-urlencoded"==r}(a)||q(a))&&(s=!0);let y=!1;if(s){let t=this._maxResponseSize||2e8;e.on("data",n=>{if((t-=n.byteLength||n.length)<0){const t=Error("Maximum response size reached");t.code="ETOOLARGE",y=!1,e.destroy(t)}})}if(d)try{y=s,d(e,(e,t,n)=>{if(!this.timedout)return e&&!this._aborted?this.callback(e):void(y&&(this.emit("end"),this.callback(null,this._emitResponse(t,n))))})}catch(e){return void this.callback(e)}if(this.res=e,s)e.once("error",e=>{y=!1,this.callback(e,null)}),y||e.once("end",()=>{r("end %s %s",this.method,this.url),this.emit("end"),this.callback(null,this._emitResponse())});else{if(r("unbuffered %s %s",this.method,this.url),this.callback(null,this._emitResponse()),u)return;e.once("end",()=>{r("end %s %s",this.method,this.url),this.emit("end")})}}),this.emit("request",this);const a=()=>{const e=n.getHeader("Content-Length");let t=0;const r=new d.Transform;return r._transform=(n,r,o)=>{t+=n.length,this.emit("progress",{direction:"upload",lengthComputable:!0,loaded:t,total:e}),o(null,n)},r},c=this._formData;if(c){const e=c.getHeaders();for(const t in e)r('setting FormData header: "%s: %s"',t,e[t]),n.setHeader(t,e[t]);c.getLength((e,t)=>{r("got FormData Content-Length: %s",t),"number"==typeof t&&n.setHeader("Content-Length",t),c.pipe(a()).pipe(n)})}else Buffer.isBuffer(e)?(e=>{const t=new d.Readable,n=e.length,r=n%16384,o=n-r;for(let n=0;n<o;n+=16384){const r=e.slice(n,n+16384);t.push(r)}if(r>0){const n=e.slice(-r);t.push(n)}return t.push(null),t})(e).pipe(a()).pipe(n):n.end(e);return this},j.prototype._shouldUnzip=e=>204!==e.statusCode&&304!==e.statusCode&&"0"!==e.headers["content-length"]&&/^\s*(?:deflate|gzip)\s*$/.test(e.headers["content-encoding"]),-1==l.indexOf("del")&&(l=l.slice(0)).push("del"),l.forEach(e=>{const t=e;e=(e="del"==e?"delete":e).toUpperCase(),O[t]=(t,n,r)=>{const o=O(e,t);return"function"==typeof n&&(r=n,n=null),n&&("GET"===e||"HEAD"===e?o.query(n):o.send(n)),r&&o.end(r),o}})},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){!function(){"use strict";function e(t,n,r,o){return this instanceof e?(this.domain=t||void 0,this.path=n||"/",this.secure=!!r,this.script=!!o,this):new e(t,n,r,o)}function n(e,t,r){return e instanceof n?e:this instanceof n?(this.name=null,this.value=null,this.expiration_date=1/0,this.path=String(r||"/"),this.explicit_path=!1,this.domain=t||null,this.explicit_domain=!1,this.secure=!1,this.noscript=!1,e&&this.parse(e,t,r),this):new n(e,t,r)}e.All=Object.freeze(Object.create(null)),t.CookieAccessInfo=e,t.Cookie=n,n.prototype.toString=function(){var e=[this.name+"="+this.value];return this.expiration_date!==1/0&&e.push("expires="+new Date(this.expiration_date).toGMTString()),this.domain&&e.push("domain="+this.domain),this.path&&e.push("path="+this.path),this.secure&&e.push("secure"),this.noscript&&e.push("httponly"),e.join("; ")},n.prototype.toValueString=function(){return this.name+"="+this.value};var r=/[:](?=\s*[a-zA-Z0-9_\-]+\s*[=])/g;function o(){var e,t;return this instanceof o?(e=Object.create(null),this.setCookie=function(r,o,s){var i,a;if(i=(r=new n(r,o,s)).expiration_date<=Date.now(),void 0!==e[r.name]){for(t=e[r.name],a=0;a<t.length;a+=1)if(t[a].collidesWith(r))return i?(t.splice(a,1),0===t.length&&delete e[r.name],!1):(t[a]=r,r);return!i&&(t.push(r),r)}return!i&&(e[r.name]=[r],e[r.name])},this.getCookie=function(n,r){var o,s;if(t=e[n])for(s=0;s<t.length;s+=1)if((o=t[s]).expiration_date<=Date.now())0===t.length&&delete e[o.name];else if(o.matches(r))return o},this.getCookies=function(t){var n,r,o=[];for(n in e)(r=this.getCookie(n,t))&&o.push(r);return o.toString=function(){return o.join(":")},o.toValueString=function(){return o.map((function(e){return e.toValueString()})).join(";")},o},this):new o}n.prototype.parse=function(e,t,r){if(this instanceof n){var o,s=e.split(";").filter((function(e){return!!e})),i=s[0].match(/([^=]+)=([\s\S]*)/);if(!i)return void console.warn("Invalid cookie header encountered. Header: '"+e+"'");var a=i[1],c=i[2];if("string"!=typeof a||0===a.length||"string"!=typeof c)return void console.warn("Unable to extract values from cookie header. Cookie: '"+e+"'");for(this.name=a,this.value=c,o=1;o<s.length;o+=1)switch(a=(i=s[o].match(/([^=]+)(?:=([\s\S]*))?/))[1].trim().toLowerCase(),c=i[2],a){case"httponly":this.noscript=!0;break;case"expires":this.expiration_date=c?Number(Date.parse(c)):1/0;break;case"path":this.path=c?c.trim():"",this.explicit_path=!0;break;case"domain":this.domain=c?c.trim():"",this.explicit_domain=!!this.domain;break;case"secure":this.secure=!0}return this.explicit_path||(this.path=r||"/"),this.explicit_domain||(this.domain=t),this}return(new n).parse(e,t,r)},n.prototype.matches=function(t){return t===e.All||!(this.noscript&&t.script||this.secure&&!t.secure||!this.collidesWith(t))},n.prototype.collidesWith=function(e){if(this.path&&!e.path||this.domain&&!e.domain)return!1;if(this.path&&0!==e.path.indexOf(this.path))return!1;if(this.explicit_path&&0!==e.path.indexOf(this.path))return!1;var t=e.domain&&e.domain.replace(/^[\.]/,""),n=this.domain&&this.domain.replace(/^[\.]/,"");if(n===t)return!0;if(n){if(!this.explicit_domain)return!1;var r=t.indexOf(n);return-1!==r&&r===t.length-n.length}return!0},t.CookieJar=o,o.prototype.setCookies=function(e,t,o){var s,i,a=[];for(e=(e=Array.isArray(e)?e:e.split(r)).map((function(e){return new n(e,t,o)})),s=0;s<e.length;s+=1)i=e[s],this.setCookie(i,t,o)&&a.push(i);return a}}()},function(e,t){
/*!
 * assertion-error
 * Copyright(c) 2013 Jake Luer <jake@qualiancy.com>
 * MIT Licensed
 */
/*!
 * Return a function that will copy properties from
 * one object to another excluding any originally
 * listed. Returned function will create a new `{}`.
 *
 * @param {String} excluded properties ...
 * @return {Function}
 */
function n(){var e=[].slice.call(arguments);function t(t,n){Object.keys(n).forEach((function(r){~e.indexOf(r)||(t[r]=n[r])}))}return function(){for(var e=[].slice.call(arguments),n=0,r={};n<e.length;n++)t(r,e[n]);return r}}function r(e,t,o){var s=n("name","message","stack","constructor","toJSON")(t||{});for(var i in this.message=e||"Unspecified AssertionError",this.showDiff=!1,s)this[i]=s[i];if(o=o||r,Error.captureStackTrace)Error.captureStackTrace(this,o);else try{throw new Error}catch(e){this.stack=e.stack}}
/*!
 * Inherit from Error.prototype
 */
/*!
 * Primary Exports
 */e.exports=r,r.prototype=Object.create(Error.prototype),
/*!
 * Statically set name
 */
r.prototype.name="AssertionError",
/*!
 * Ensure correct constructor
 */
r.prototype.constructor=r,r.prototype.toJSON=function(e){var t=n("constructor","toJSON","stack")({name:this.name},this);return!1!==e&&this.stack&&(t.stack=this.stack),t}},function(e,t){
/*!
 * Chai - getActual utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){return t.length>4?t[4]:e._obj}},function(e,t,n){
/*!
 * Chai - flag utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(26),o=n(18);e.exports=function(e){var t=r(e),n=Object.prototype.toString.call(e);if(o.truncateThreshold&&t.length>=o.truncateThreshold){if("[object Function]"===n)return e.name&&""!==e.name?"[Function: "+e.name+"]":"[Function]";if("[object Array]"===n)return"[ Array("+e.length+") ]";if("[object Object]"===n){var s=Object.keys(e);return"{ Object ("+(s.length>2?s.splice(0,2).join(", ")+", ...":s.join(", "))+") }"}return t}return t}},function(e,t,n){"use strict";var r=Function.prototype.toString,o=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\s\(\/]+)/;e.exports=function(e){if("function"!=typeof e)return null;var t="";if(void 0===Function.prototype.name&&void 0===e.name){var n=r.call(e).match(o);n&&(t=n[1])}else t=e.name;return t}},function(e,t){
/*!
 * Chai - getProperties utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e){var t=Object.getOwnPropertyNames(e);function n(e){-1===t.indexOf(e)&&t.push(e)}for(var r=Object.getPrototypeOf(e);null!==r;)Object.getOwnPropertyNames(r).forEach(n),r=Object.getPrototypeOf(r);return t}},function(e,t){
/*!
 * Chai - getOwnEnumerablePropertySymbols utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e){return"function"!=typeof Object.getOwnPropertySymbols?[]:Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))}},function(e,t,n){var r=n(27),o=n(28),s=n(24),i=n(40),a=n(89),c=r.Request;function u(e,t,n,r){c.call(this,t.toUpperCase(),n),this.redirects(0),this.buffer(),this.app=e,this._asserts=[],this.url="string"==typeof e?e+n:this.serverAddress(e,n,r)}function l(e,t,n){var r=new Error(e);return r.expected=t,r.actual=n,r.showDiff=!0,r}e.exports=u,Object.setPrototypeOf(u.prototype,c.prototype),u.prototype.serverAddress=function(e,t,n){var r;return e.address()||(this._server=e.listen(0)),r=e.address().port,(e instanceof i.Server?"https":"http")+"://"+(n||"127.0.0.1")+":"+r+t},u.prototype.expect=function(e,t,n){return"function"==typeof e?(this._asserts.push(e),this):("function"==typeof t&&this.end(t),"function"==typeof n&&this.end(n),"number"==typeof e?(this._asserts.push(this._assertStatus.bind(this,e)),"function"!=typeof t&&arguments.length>1&&this._asserts.push(this._assertBody.bind(this,t)),this):"string"==typeof t||"number"==typeof t||t instanceof RegExp?(this._asserts.push(this._assertHeader.bind(this,{name:""+e,value:t})),this):(this._asserts.push(this._assertBody.bind(this,e)),this))},u.prototype.end=function(e){var t=this,n=this._server;return c.prototype.end.call(this,(function(r,o){if(n&&n._handle)return n.close(s);function s(){t.assert(r,o,e)}s()})),this},u.prototype.assert=function(e,t,n){var r,o,s={ECONNREFUSED:"Connection refused",ECONNRESET:"Connection reset by peer",EPIPE:"Broken pipe",ETIMEDOUT:"Operation timed out"};for(!t&&e&&(r=e instanceof Error&&"connect"===e.syscall&&Object.getOwnPropertyNames(s).indexOf(e.code)>=0?new Error(e.code+": "+s[e.code]):e),o=0;o<this._asserts.length&&!r;o+=1)r=this._assertFunction(this._asserts[o],t);r||!(e instanceof Error)||t&&e.status===t.status||(r=e),n.call(this,r||null,t)},u.prototype._assertBody=function(e,t){var n,r,s=e instanceof RegExp;if("object"!=typeof e||s){if(e!==t.text){if(n=o.inspect(e),r=o.inspect(t.text),!s)return l("expected "+n+" response body, got "+r,e,t.body);if(!e.test(t.text))return l("expected body "+r+" to match "+e,e,t.body)}}else try{a.deepStrictEqual(e,t.body)}catch(s){return l("expected "+(n=o.inspect(e))+" response body, got "+(r=o.inspect(t.body)),e,t.body)}},u.prototype._assertHeader=function(e,t){var n=e.name,r=t.header[n.toLowerCase()],o=e.value;return void 0===r?new Error('expected "'+n+'" header field'):Array.isArray(r)&&r.toString()===o||o===r?void 0:o instanceof RegExp?o.test(r)?void 0:new Error('expected "'+n+'" matching '+o+', got "'+r+'"'):new Error('expected "'+n+'" of "'+o+'", got "'+r+'"')},u.prototype._assertStatus=function(e,t){var n,r;if(t.status!==e)return n=s.STATUS_CODES[e],r=s.STATUS_CODES[t.status],new Error("expected "+e+' "'+n+'", got '+t.status+' "'+r+'"')},u.prototype._assertFunction=function(e,t){var n;try{n=e(t)}catch(e){n=e}if(n instanceof Error)return n}},function(e,t,n){"use strict";t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){return e.split(/ *; */).reduce((function(e,t){var n=t.split(/ *= */),r=n.shift(),o=n.shift();return r&&o&&(e[r]=o),e}),{})},t.parseLinks=function(e){return e.split(/ *, */).reduce((function(e,t){var n=t.split(/ *; */),r=n[0].slice(1,-1);return e[n[1].split(/ *= */)[1].slice(1,-1)]=r,e}),{})},t.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},function(e,t){e.exports=n(39)},function(e,t){e.exports=n(40)},function(e,t){e.exports=n(41)},function(e,t,n){const{expect:r}=n(43),o=n(66);n(91);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){e.exports=n(16)},function(e,t,n){
/*!
 * chai
 * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Dependencies that are used for multiple exports are required here only once
 */
var r=n(45);
/*!
 * test utility
 */t.test=n(46),
/*!
 * type utility
 */
t.type=n(25),
/*!
 * expectTypes utility
 */
t.expectTypes=n(47),
/*!
 * message utility
 */
t.getMessage=n(48),
/*!
 * actual utility
 */
t.getActual=n(32),
/*!
 * Inspect util
 */
t.inspect=n(26),
/*!
 * Object Display util
 */
t.objDisplay=n(33),
/*!
 * Flag utility
 */
t.flag=n(15),
/*!
 * Flag transferring utility
 */
t.transferFlags=n(17),
/*!
 * Deep equal utility
 */
t.eql=n(50),
/*!
 * Deep path info
 */
t.getPathInfo=r.getPathInfo,
/*!
 * Check if a property exists
 */
t.hasProperty=r.hasProperty,
/*!
 * Function name
 */
t.getName=n(34),
/*!
 * add Property
 */
t.addProperty=n(51),
/*!
 * add Method
 */
t.addMethod=n(52),
/*!
 * overwrite Property
 */
t.overwriteProperty=n(53),
/*!
 * overwrite Method
 */
t.overwriteMethod=n(54),
/*!
 * Add a chainable method
 */
t.addChainableMethod=n(55),
/*!
 * Overwrite chainable method
 */
t.overwriteChainableMethod=n(56),
/*!
 * Compare by inspect method
 */
t.compareByInspect=n(57),
/*!
 * Get own enumerable property symbols method
 */
t.getOwnEnumerablePropertySymbols=n(36),
/*!
 * Get own enumerable properties method
 */
t.getOwnEnumerableProperties=n(58),
/*!
 * Checks error against a given set of criteria
 */
t.checkError=n(59),
/*!
 * Proxify util
 */
t.proxify=n(21),
/*!
 * addLengthGuard util
 */
t.addLengthGuard=n(20),
/*!
 * isProxyEnabled helper
 */
t.isProxyEnabled=n(19),
/*!
 * isNaN method
 */
t.isNaN=n(60)},function(e,t,n){"use strict";function r(e,t){return null!=e&&t in Object(e)}function o(e){return e.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map((function(e){var t=/^\[(\d+)\]$/.exec(e);return t?{i:parseFloat(t[1])}:{p:e.replace(/\\([.\[\]])/g,"$1")}}))}function s(e,t,n){var r=e,o=null;n=void 0===n?t.length:n;for(var s=0;s<n;s++){var i=t[s];r&&(r=void 0===i.p?r[i.i]:r[i.p],s===n-1&&(o=r))}return o}function i(e,t){var n=o(t),i=n[n.length-1],a={parent:n.length>1?s(e,n,n.length-1):e,name:i.p||i.i,value:s(e,n)};return a.exists=r(a.parent,a.name),a}e.exports={hasProperty:r,getPathInfo:i,getPathValue:function(e,t){return i(e,t).value},setPathValue:function(e,t,n){return function(e,t,n){for(var r=e,o=n.length,s=null,i=0;i<o;i++){var a=null,c=null;if(s=n[i],i===o-1)r[a=void 0===s.p?s.i:s.p]=t;else if(void 0!==s.p&&r[s.p])r=r[s.p];else if(void 0!==s.i&&r[s.i])r=r[s.i];else{var u=n[i+1];a=void 0===s.p?s.i:s.p,c=void 0===u.p?[]:{},r[a]=c,r=r[a]}}}(e,n,o(t)),e}}},function(e,t,n){
/*!
 * Chai - test utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(15);e.exports=function(e,t){var n=r(e,"negate"),o=t[0];return n?!o:o}},function(e,t,n){
/*!
 * Chai - expectTypes utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(31),o=n(15),s=n(25);e.exports=function(e,t){var n=o(e,"message"),i=o(e,"ssfi");n=n?n+": ":"",e=o(e,"object"),(t=t.map((function(e){return e.toLowerCase()}))).sort();var a=t.map((function(e,n){var r=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an":"a";return(t.length>1&&n===t.length-1?"or ":"")+r+" "+e})).join(", "),c=s(e).toLowerCase();if(!t.some((function(e){return c===e})))throw new r(n+"object tested must be "+a+", but "+c+" given",void 0,i)}},function(e,t,n){
/*!
 * Chai - message composition utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(15),o=n(32),s=n(33);e.exports=function(e,t){var n=r(e,"negate"),i=r(e,"object"),a=t[3],c=o(e,t),u=n?t[2]:t[1],l=r(e,"message");return"function"==typeof u&&(u=u()),u=(u=u||"").replace(/#\{this\}/g,(function(){return s(i)})).replace(/#\{act\}/g,(function(){return s(c)})).replace(/#\{exp\}/g,(function(){return s(a)})),l?l+": "+u:u}},function(e,t){
/*!
 * Chai - getEnumerableProperties utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e){var t=[];for(var n in e)t.push(n);return t}},function(e,t,n){"use strict";
/*!
 * deep-eql
 * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */var r=n(25);function o(){this._key="chai/deep-eql__"+Math.random()+Date.now()}o.prototype={get:function(e){return e[this._key]},set:function(e,t){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:t,configurable:!0})}};var s="function"==typeof WeakMap?WeakMap:o;
/*!
 * Check to see if the MemoizeMap has recorded a result of the two operands
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {MemoizeMap} memoizeMap
 * @returns {Boolean|null} result
*/function i(e,t,n){if(!n||y(e)||y(t))return null;var r=n.get(e);if(r){var o=r.get(t);if("boolean"==typeof o)return o}return null}
/*!
 * Set the result of the equality into the MemoizeMap
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {MemoizeMap} memoizeMap
 * @param {Boolean} result
*/function a(e,t,n,r){if(n&&!y(e)&&!y(t)){var o=n.get(e);o?o.set(t,r):((o=new s).set(t,r),n.set(e,o))}}
/*!
 * Primary Export
 */function c(e,t,n){if(n&&n.comparator)return l(e,t,n);var r=u(e,t);return null!==r?r:l(e,t,n)}function u(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t||!y(e)&&!y(t)&&null}
/*!
 * The main logic of the `deepEqual` function.
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Object} [options] (optional) Additional options
 * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
 * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
    complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
    references to blow the stack.
 * @return {Boolean} equal match
*/function l(e,t,n){(n=n||{}).memoize=!1!==n.memoize&&(n.memoize||new s);var o=n&&n.comparator,l=i(e,t,n.memoize);if(null!==l)return l;var y=i(t,e,n.memoize);if(null!==y)return y;if(o){var m=o(e,t);if(!1===m||!0===m)return a(e,t,n.memoize,m),m;var b=u(e,t);if(null!==b)return b}var g=r(e);if(g!==r(t))return a(e,t,n.memoize,!1),!1;a(e,t,n.memoize,!0);var w=function(e,t,n,r){switch(n){case"String":case"Number":case"Boolean":case"Date":return c(e.valueOf(),t.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":case"Error":return e===t;case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return d(e,t,r);case"RegExp":
/*!
 * Compare two Regular Expressions for equality.
 *
 * @param {RegExp} leftHandOperand
 * @param {RegExp} rightHandOperand
 * @return {Boolean} result
 */
return function(e,t){return e.toString()===t.toString()}
/*!
 * Compare two Sets/Maps for equality. Faster than other equality functions.
 *
 * @param {Set} leftHandOperand
 * @param {Set} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */(e,t);case"Generator":
/*!
 * Simple equality for generator objects such as those returned by generator functions.
 *
 * @param {Iterable} leftHandOperand
 * @param {Iterable} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */
return function(e,t,n){return d(h(e),h(t),n)}
/*!
 * Determine if the given object has an @@iterator function.
 *
 * @param {Object} target
 * @return {Boolean} `true` if the object has an @@iterator function.
 */(e,t,r);case"DataView":return d(new Uint8Array(e.buffer),new Uint8Array(t.buffer),r);case"ArrayBuffer":return d(new Uint8Array(e),new Uint8Array(t),r);case"Set":case"Map":return function(e,t,n){if(e.size!==t.size)return!1;if(0===e.size)return!0;var r=[],o=[];return e.forEach((function(e,t){r.push([e,t])})),t.forEach((function(e,t){o.push([e,t])})),d(r.sort(),o.sort(),n);
/*!
 * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
 *
 * @param {Iterable} leftHandOperand
 * @param {Iterable} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */}(e,t,r);default:
/*!
 * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
 * for each enumerable key in the object.
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */
return function(e,t,n){var r=f(e),o=f(t);if(r.length&&r.length===o.length)return r.sort(),o.sort(),!1!==d(r,o)&&
/*!
 * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
 * each key. If any value of the given key is not equal, the function will return false (early).
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */
function(e,t,n,r){var o=n.length;if(0===o)return!0;for(var s=0;s<o;s+=1)if(!1===c(e[n[s]],t[n[s]],r))return!1;return!0}(e,t,r,n);var s=p(e),i=p(t);return s.length&&s.length===i.length?(s.sort(),i.sort(),d(s,i,n)):0===r.length&&0===s.length&&0===o.length&&0===i.length}
/*!
 * Returns true if the argument is a primitive.
 *
 * This intentionally returns true for all objects that can be compared by reference,
 * including functions and symbols.
 *
 * @param {Mixed} value
 * @return {Boolean} result
 */(e,t,r)}}(e,t,g,n);return a(e,t,n.memoize,w),w}function d(e,t,n){var r=e.length;if(r!==t.length)return!1;if(0===r)return!0;for(var o=-1;++o<r;)if(!1===c(e[o],t[o],n))return!1;return!0}
/*!
 * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
 * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
 *
 * @param {Object} target
 * @returns {Array} an array of entries from the @@iterator function
 */function p(e){if(function(e){return"undefined"!=typeof Symbol&&"object"==typeof e&&void 0!==Symbol.iterator&&"function"==typeof e[Symbol.iterator]}(e))try{return h(e[Symbol.iterator]())}catch(e){return[]}return[]}
/*!
 * Gets all entries from a Generator. This will consume the generator - which could have side effects.
 *
 * @param {Generator} target
 * @returns {Array} an array of entries from the Generator.
 */function h(e){for(var t=e.next(),n=[t.value];!1===t.done;)t=e.next(),n.push(t.value);return n}
/*!
 * Gets all own and inherited enumerable keys from a target.
 *
 * @param {Object} target
 * @returns {Array} an array of own and inherited enumerable keys from the target.
 */function f(e){var t=[];for(var n in e)t.push(n);return t}function y(e){return null===e||"object"!=typeof e}e.exports=c,e.exports.MemoizeMap=s},function(e,t,n){
/*!
 * Chai - addProperty utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(16),o=n(15),s=n(19),i=n(17);e.exports=function(e,t,n){n=void 0===n?function(){}:n,Object.defineProperty(e,t,{get:function e(){s()||o(this,"lockSsfi")||o(this,"ssfi",e);var t=n.call(this);if(void 0!==t)return t;var a=new r.Assertion;return i(this,a),a},configurable:!0})}},function(e,t,n){
/*!
 * Chai - addMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(20),o=n(16),s=n(15),i=n(21),a=n(17);e.exports=function(e,t,n){var c=function(){s(this,"lockSsfi")||s(this,"ssfi",c);var e=n.apply(this,arguments);if(void 0!==e)return e;var t=new o.Assertion;return a(this,t),t};r(c,t,!1),e[t]=i(c,t)}},function(e,t,n){
/*!
 * Chai - overwriteProperty utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(16),o=n(15),s=n(19),i=n(17);e.exports=function(e,t,n){var a=Object.getOwnPropertyDescriptor(e,t),c=function(){};a&&"function"==typeof a.get&&(c=a.get),Object.defineProperty(e,t,{get:function e(){s()||o(this,"lockSsfi")||o(this,"ssfi",e);var t=o(this,"lockSsfi");o(this,"lockSsfi",!0);var a=n(c).call(this);if(o(this,"lockSsfi",t),void 0!==a)return a;var u=new r.Assertion;return i(this,u),u},configurable:!0})}},function(e,t,n){
/*!
 * Chai - overwriteMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(20),o=n(16),s=n(15),i=n(21),a=n(17);e.exports=function(e,t,n){var c=e[t],u=function(){throw new Error(t+" is not a function")};c&&"function"==typeof c&&(u=c);var l=function(){s(this,"lockSsfi")||s(this,"ssfi",l);var e=s(this,"lockSsfi");s(this,"lockSsfi",!0);var t=n(u).apply(this,arguments);if(s(this,"lockSsfi",e),void 0!==t)return t;var r=new o.Assertion;return a(this,r),r};r(l,t,!1),e[t]=i(l,t)}},function(e,t,n){
/*!
 * Chai - addChainingMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(20),o=n(16),s=n(15),i=n(21),a=n(17),c="function"==typeof Object.setPrototypeOf,u=function(){},l=Object.getOwnPropertyNames(u).filter((function(e){var t=Object.getOwnPropertyDescriptor(u,e);return"object"!=typeof t||!t.configurable})),d=Function.prototype.call,p=Function.prototype.apply;e.exports=function(e,t,n,u){"function"!=typeof u&&(u=function(){});var h={method:n,chainingBehavior:u};e.__methods||(e.__methods={}),e.__methods[t]=h,Object.defineProperty(e,t,{get:function(){h.chainingBehavior.call(this);var n=function(){s(this,"lockSsfi")||s(this,"ssfi",n);var e=h.method.apply(this,arguments);if(void 0!==e)return e;var t=new o.Assertion;return a(this,t),t};if(r(n,t,!0),c){var u=Object.create(this);u.call=d,u.apply=p,Object.setPrototypeOf(n,u)}else Object.getOwnPropertyNames(e).forEach((function(t){if(-1===l.indexOf(t)){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r)}}));return a(this,n),i(n)},configurable:!0})}},function(e,t,n){
/*!
 * Chai - overwriteChainableMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(16),o=n(17);e.exports=function(e,t,n,s){var i=e.__methods[t],a=i.chainingBehavior;i.chainingBehavior=function(){var e=s(a).call(this);if(void 0!==e)return e;var t=new r.Assertion;return o(this,t),t};var c=i.method;i.method=function(){var e=n(c).apply(this,arguments);if(void 0!==e)return e;var t=new r.Assertion;return o(this,t),t}}},function(e,t,n){
/*!
 * Chai - compareByInspect utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(26);e.exports=function(e,t){return r(e)<r(t)?-1:1}},function(e,t,n){
/*!
 * Chai - getOwnEnumerableProperties utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(36);e.exports=function(e){return Object.keys(e).concat(r(e))}},function(e,t,n){"use strict";var r=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\(\/]+)/;function o(e){var t="";if(void 0===e.name){var n=String(e).match(r);n&&(t=n[1])}else t=e.name;return t}e.exports={compatibleInstance:function(e,t){return t instanceof Error&&e===t},compatibleConstructor:function(e,t){return t instanceof Error?e.constructor===t.constructor||e instanceof t.constructor:(t.prototype instanceof Error||t===Error)&&(e.constructor===t||e instanceof t)},compatibleMessage:function(e,t){var n="string"==typeof e?e:e.message;return t instanceof RegExp?t.test(n):"string"==typeof t&&-1!==n.indexOf(t)},getMessage:function(e){var t="";return e&&e.message?t=e.message:"string"==typeof e&&(t=e),t},getConstructorName:function(e){var t=e;return e instanceof Error?t=o(e.constructor):"function"==typeof e&&(t=o(e).trim()||o(new e)),t}}},function(e,t){e.exports=Number.isNaN||
/*!
 * Chai - isNaN utility
 * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
 * MIT Licensed
 */
function(e){return e!=e}},function(e,t,n){
/*!
 * chai
 * http://chaijs.com
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(18);e.exports=function(e,t){
/*!
   * Module dependencies.
   */
var n=e.AssertionError,o=t.flag;
/*!
   * Module export.
   */
/*!
   * Assertion Constructor
   *
   * Creates object for chaining.
   *
   * `Assertion` objects contain metadata in the form of flags. Three flags can
   * be assigned during instantiation by passing arguments to this constructor:
   *
   * - `object`: This flag contains the target of the assertion. For example, in
   *   the assertion `expect(numKittens).to.equal(7);`, the `object` flag will
   *   contain `numKittens` so that the `equal` assertion can reference it when
   *   needed.
   *
   * - `message`: This flag contains an optional custom error message to be
   *   prepended to the error message that's generated by the assertion when it
   *   fails.
   *
   * - `ssfi`: This flag stands for "start stack function indicator". It
   *   contains a function reference that serves as the starting point for
   *   removing frames from the stack trace of the error that's created by the
   *   assertion when it fails. The goal is to provide a cleaner stack trace to
   *   end users by removing Chai's internal functions. Note that it only works
   *   in environments that support `Error.captureStackTrace`, and only when
   *   `Chai.config.includeStack` hasn't been set to `false`.
   *
   * - `lockSsfi`: This flag controls whether or not the given `ssfi` flag
   *   should retain its current value, even as assertions are chained off of
   *   this object. This is usually set to `true` when creating a new assertion
   *   from within another assertion. It's also temporarily set to `true` before
   *   an overwritten assertion gets called by the overwriting assertion.
   *
   * @param {Mixed} obj target of the assertion
   * @param {String} msg (optional) custom error message
   * @param {Function} ssfi (optional) starting point for removing stack frames
   * @param {Boolean} lockSsfi (optional) whether or not the ssfi flag is locked
   * @api private
   */function s(e,n,r,i){return o(this,"ssfi",r||s),o(this,"lockSsfi",i),o(this,"object",e),o(this,"message",n),t.proxify(this)}e.Assertion=s,Object.defineProperty(s,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack},set:function(e){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack=e}}),Object.defineProperty(s,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff},set:function(e){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff=e}}),s.addProperty=function(e,n){t.addProperty(this.prototype,e,n)},s.addMethod=function(e,n){t.addMethod(this.prototype,e,n)},s.addChainableMethod=function(e,n,r){t.addChainableMethod(this.prototype,e,n,r)},s.overwriteProperty=function(e,n){t.overwriteProperty(this.prototype,e,n)},s.overwriteMethod=function(e,n){t.overwriteMethod(this.prototype,e,n)},s.overwriteChainableMethod=function(e,n,r){t.overwriteChainableMethod(this.prototype,e,n,r)},s.prototype.assert=function(e,s,i,a,c,u){var l=t.test(this,arguments);if(!1!==u&&(u=!0),void 0===a&&void 0===c&&(u=!1),!0!==r.showDiff&&(u=!1),!l){s=t.getMessage(this,arguments);var d=t.getActual(this,arguments);throw new n(s,{actual:d,expected:a,showDiff:u},r.includeStack?this.assert:o(this,"ssfi"))}},
/*!
   * ### ._obj
   *
   * Quick reference to stored `actual` value for plugin developers.
   *
   * @api private
   */
Object.defineProperty(s.prototype,"_obj",{get:function(){return o(this,"object")},set:function(e){o(this,"object",e)}})}},function(e,t){
/*!
 * chai
 * http://chaijs.com
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){var n=e.Assertion,r=e.AssertionError,o=t.flag;function s(e,n){n&&o(this,"message",n),e=e.toLowerCase();var r=o(this,"object"),s=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an ":"a ";this.assert(e===t.type(r).toLowerCase(),"expected #{this} to be "+s+e,"expected #{this} not to be "+s+e)}function i(e,n){return t.isNaN(e)&&t.isNaN(n)||e===n}function a(){o(this,"contains",!0)}function c(e,s){s&&o(this,"message",s);var a=o(this,"object"),c=t.type(a).toLowerCase(),u=o(this,"message"),l=o(this,"negate"),d=o(this,"ssfi"),p=o(this,"deep"),h=p?"deep ":"";u=u?u+": ":"";var f=!1;switch(c){case"string":f=-1!==a.indexOf(e);break;case"weakset":if(p)throw new r(u+"unable to use .deep.include with WeakSet",void 0,d);f=a.has(e);break;case"map":var y=p?t.eql:i;a.forEach((function(t){f=f||y(t,e)}));break;case"set":p?a.forEach((function(n){f=f||t.eql(n,e)})):f=a.has(e);break;case"array":f=p?a.some((function(n){return t.eql(n,e)})):-1!==a.indexOf(e);break;default:if(e!==Object(e))throw new r(u+"object tested must be an array, a map, an object, a set, a string, or a weakset, but "+c+" given",void 0,d);var m=Object.keys(e),b=null,g=0;if(m.forEach((function(s){var i=new n(a);if(t.transferFlags(this,i,!0),o(i,"lockSsfi",!0),l&&1!==m.length)try{i.property(s,e[s])}catch(e){if(!t.checkError.compatibleConstructor(e,r))throw e;null===b&&(b=e),g++}else i.property(s,e[s])}),this),l&&m.length>1&&g===m.length)throw b;return}this.assert(f,"expected #{this} to "+h+"include "+t.inspect(e),"expected #{this} to not "+h+"include "+t.inspect(e))}function u(){var e=o(this,"object"),n=t.type(e);this.assert("Arguments"===n,"expected #{this} to be arguments but got "+n,"expected #{this} to not be arguments")}function l(e,t){t&&o(this,"message",t);var n=o(this,"object");if(o(this,"deep")){var r=o(this,"lockSsfi");o(this,"lockSsfi",!0),this.eql(e),o(this,"lockSsfi",r)}else this.assert(e===n,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",e,this._obj,!0)}function d(e,n){n&&o(this,"message",n),this.assert(t.eql(e,o(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",e,this._obj,!0)}function p(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to above must be a number":i=l+"the argument to above must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y>e,"expected #{this} to have a "+m+" above #{exp} but got #{act}","expected #{this} to not have a "+m+" above #{exp}",e,y)}else this.assert(a>e,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",e)}function h(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to least must be a number":i=l+"the argument to least must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y>=e,"expected #{this} to have a "+m+" at least #{exp} but got #{act}","expected #{this} to have a "+m+" below #{exp}",e,y)}else this.assert(a>=e,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",e)}function f(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to below must be a number":i=l+"the argument to below must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y<e,"expected #{this} to have a "+m+" below #{exp} but got #{act}","expected #{this} to not have a "+m+" below #{exp}",e,y)}else this.assert(a<e,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",e)}function y(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to most must be a number":i=l+"the argument to most must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y<=e,"expected #{this} to have a "+m+" at most #{exp} but got #{act}","expected #{this} to have a "+m+" above #{exp}",e,y)}else this.assert(a<=e,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",e)}function m(e,n){n&&o(this,"message",n);var s=o(this,"object"),i=o(this,"ssfi"),a=o(this,"message");try{var c=s instanceof e}catch(n){if(n instanceof TypeError)throw new r((a=a?a+": ":"")+"The instanceof assertion needs a constructor but "+t.type(e)+" was given.",void 0,i);throw n}var u=t.getName(e);null===u&&(u="an unnamed constructor"),this.assert(c,"expected #{this} to be an instance of "+u,"expected #{this} to not be an instance of "+u)}function b(e,n,s){s&&o(this,"message",s);var i=o(this,"nested"),a=o(this,"own"),c=o(this,"message"),u=o(this,"object"),l=o(this,"ssfi"),d=typeof e;if(c=c?c+": ":"",i){if("string"!==d)throw new r(c+"the argument to property must be a string when using nested syntax",void 0,l)}else if("string"!==d&&"number"!==d&&"symbol"!==d)throw new r(c+"the argument to property must be a string, number, or symbol",void 0,l);if(i&&a)throw new r(c+'The "nested" and "own" flags cannot be combined.',void 0,l);if(null==u)throw new r(c+"Target cannot be null or undefined.",void 0,l);var p,h=o(this,"deep"),f=o(this,"negate"),y=i?t.getPathInfo(u,e):null,m=i?y.value:u[e],b="";h&&(b+="deep "),a&&(b+="own "),i&&(b+="nested "),b+="property ",p=a?Object.prototype.hasOwnProperty.call(u,e):i?y.exists:t.hasProperty(u,e),f&&1!==arguments.length||this.assert(p,"expected #{this} to have "+b+t.inspect(e),"expected #{this} to not have "+b+t.inspect(e)),arguments.length>1&&this.assert(p&&(h?t.eql(n,m):n===m),"expected #{this} to have "+b+t.inspect(e)+" of #{exp}, but got #{act}","expected #{this} to not have "+b+t.inspect(e)+" of #{act}",n,m),o(this,"object",m)}function g(e,t,n){o(this,"own",!0),b.apply(this,arguments)}function w(e,n,r){"string"==typeof n&&(r=n,n=null),r&&o(this,"message",r);var s=o(this,"object"),i=Object.getOwnPropertyDescriptor(Object(s),e);i&&n?this.assert(t.eql(n,i),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to match "+t.inspect(n)+", got "+t.inspect(i),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to not match "+t.inspect(n),n,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+t.inspect(e),"expected #{this} to not have an own property descriptor for "+t.inspect(e)),o(this,"object",i)}function v(){o(this,"doLength",!0)}function _(e,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=t.type(i).toLowerCase(),c=o(this,"message"),u=o(this,"ssfi"),l="length";switch(a){case"map":case"set":l="size",s=i.size;break;default:new n(i,c,u,!0).to.have.property("length"),s=i.length}this.assert(s==e,"expected #{this} to have a "+l+" of #{exp} but got #{act}","expected #{this} to not have a "+l+" of #{act}",e,s)}function x(e,t){t&&o(this,"message",t);var n=o(this,"object");this.assert(e.exec(n),"expected #{this} to match "+e,"expected #{this} not to match "+e)}function E(e){var n,s,i=o(this,"object"),a=t.type(i),c=t.type(e),u=o(this,"ssfi"),l=o(this,"deep"),d="",p=!0,h=o(this,"message"),f=(h=h?h+": ":"")+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if("Map"===a||"Set"===a)d=l?"deeply ":"",s=[],i.forEach((function(e,t){s.push(t)})),"Array"!==c&&(e=Array.prototype.slice.call(arguments));else{switch(s=t.getOwnEnumerableProperties(i),c){case"Array":if(arguments.length>1)throw new r(f,void 0,u);break;case"Object":if(arguments.length>1)throw new r(f,void 0,u);e=Object.keys(e);break;default:e=Array.prototype.slice.call(arguments)}e=e.map((function(e){return"symbol"==typeof e?e:String(e)}))}if(!e.length)throw new r(h+"keys required",void 0,u);var y=e.length,m=o(this,"any"),b=o(this,"all"),g=e;if(m||b||(b=!0),m&&(p=g.some((function(e){return s.some((function(n){return l?t.eql(e,n):e===n}))}))),b&&(p=g.every((function(e){return s.some((function(n){return l?t.eql(e,n):e===n}))})),o(this,"contains")||(p=p&&e.length==s.length)),y>1){var w=(e=e.map((function(e){return t.inspect(e)}))).pop();b&&(n=e.join(", ")+", and "+w),m&&(n=e.join(", ")+", or "+w)}else n=t.inspect(e[0]);n=(y>1?"keys ":"key ")+n,n=(o(this,"contains")?"contain ":"have ")+n,this.assert(p,"expected #{this} to "+d+n,"expected #{this} to not "+d+n,g.slice(0).sort(t.compareByInspect),s.sort(t.compareByInspect),!0)}function S(e,r,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"ssfi"),u=o(this,"message"),l=o(this,"negate")||!1;new n(a,u,c,!0).is.a("function"),(e instanceof RegExp||"string"==typeof e)&&(r=e,e=null);try{a()}catch(e){i=e}var d=void 0===e&&void 0===r,p=Boolean(e&&r),h=!1,f=!1;if(d||!d&&!l){var y="an error";e instanceof Error?y="#{exp}":e&&(y=t.checkError.getConstructorName(e)),this.assert(i,"expected #{this} to throw "+y,"expected #{this} to not throw an error but #{act} was thrown",e&&e.toString(),i instanceof Error?i.toString():"string"==typeof i?i:i&&t.checkError.getConstructorName(i))}if(e&&i&&(e instanceof Error&&t.checkError.compatibleInstance(i,e)===l&&(p&&l?h=!0:this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i&&!l?" but #{act} was thrown":""),e.toString(),i.toString())),t.checkError.compatibleConstructor(i,e)===l&&(p&&l?h=!0:this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&t.checkError.getConstructorName(e),i instanceof Error?i.toString():i&&t.checkError.getConstructorName(i)))),i&&null!=r){var m="including";r instanceof RegExp&&(m="matching"),t.checkError.compatibleMessage(i,r)===l&&(p&&l?f=!0:this.assert(l,"expected #{this} to throw error "+m+" #{exp} but got #{act}","expected #{this} to throw error not "+m+" #{exp}",r,t.checkError.getMessage(i)))}h&&f&&this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&t.checkError.getConstructorName(e),i instanceof Error?i.toString():i&&t.checkError.getConstructorName(i)),o(this,"object",i)}function O(e,n){n&&o(this,"message",n);var r=o(this,"object"),s=o(this,"itself"),i="function"!=typeof r||s?r[e]:r.prototype[e];this.assert("function"==typeof i,"expected #{this} to respond to "+t.inspect(e),"expected #{this} to not respond to "+t.inspect(e))}function P(e,n){n&&o(this,"message",n);var r=e(o(this,"object"));this.assert(r,"expected #{this} to satisfy "+t.objDisplay(e),"expected #{this} to not satisfy"+t.objDisplay(e),!o(this,"negate"),r)}function k(e,t,s){s&&o(this,"message",s);var i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");if(new n(i,a,c,!0).is.a("number"),"number"!=typeof e||"number"!=typeof t)throw new r((a=a?a+": ":"")+"the arguments to closeTo or approximately must be numbers",void 0,c);this.assert(Math.abs(i-e)<=t,"expected #{this} to be close to "+e+" +/- "+t,"expected #{this} not to be close to "+e+" +/- "+t)}function j(e,t,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),s=e[t]):(new n(e,a,c,!0).is.a("function"),s=e()),i();var u=null==t?e():e[t],l=null==t?s:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",s),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","change"),o(this,"realDelta",u!==s),this.assert(s!==u,"expected "+l+" to change","expected "+l+" to not change")}function q(e,t,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),s=e[t]):(new n(e,a,c,!0).is.a("function"),s=e()),new n(s,a,c,!0).is.a("number"),i();var u=null==t?e():e[t],l=null==t?s:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",s),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","increase"),o(this,"realDelta",u-s),this.assert(u-s>0,"expected "+l+" to increase","expected "+l+" to not increase")}function T(e,t,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),s=e[t]):(new n(e,a,c,!0).is.a("function"),s=e()),new n(s,a,c,!0).is.a("number"),i();var u=null==t?e():e[t],l=null==t?s:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",s),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","decrease"),o(this,"realDelta",s-u),this.assert(u-s<0,"expected "+l+" to decrease","expected "+l+" to not decrease")}["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still"].forEach((function(e){n.addProperty(e)})),n.addProperty("not",(function(){o(this,"negate",!0)})),n.addProperty("deep",(function(){o(this,"deep",!0)})),n.addProperty("nested",(function(){o(this,"nested",!0)})),n.addProperty("own",(function(){o(this,"own",!0)})),n.addProperty("ordered",(function(){o(this,"ordered",!0)})),n.addProperty("any",(function(){o(this,"any",!0),o(this,"all",!1)})),n.addProperty("all",(function(){o(this,"all",!0),o(this,"any",!1)})),n.addChainableMethod("an",s),n.addChainableMethod("a",s),n.addChainableMethod("include",c,a),n.addChainableMethod("contain",c,a),n.addChainableMethod("contains",c,a),n.addChainableMethod("includes",c,a),n.addProperty("ok",(function(){this.assert(o(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")})),n.addProperty("true",(function(){this.assert(!0===o(this,"object"),"expected #{this} to be true","expected #{this} to be false",!o(this,"negate"))})),n.addProperty("false",(function(){this.assert(!1===o(this,"object"),"expected #{this} to be false","expected #{this} to be true",!!o(this,"negate"))})),n.addProperty("null",(function(){this.assert(null===o(this,"object"),"expected #{this} to be null","expected #{this} not to be null")})),n.addProperty("undefined",(function(){this.assert(void 0===o(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")})),n.addProperty("NaN",(function(){this.assert(t.isNaN(o(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")})),n.addProperty("exist",(function(){var e=o(this,"object");this.assert(null!=e,"expected #{this} to exist","expected #{this} to not exist")})),n.addProperty("empty",(function(){var e,n=o(this,"object"),s=o(this,"ssfi"),i=o(this,"message");switch(i=i?i+": ":"",t.type(n).toLowerCase()){case"array":case"string":e=n.length;break;case"map":case"set":e=n.size;break;case"weakmap":case"weakset":throw new r(i+".empty was passed a weak collection",void 0,s);case"function":var a=i+".empty was passed a function "+t.getName(n);throw new r(a.trim(),void 0,s);default:if(n!==Object(n))throw new r(i+".empty was passed non-string primitive "+t.inspect(n),void 0,s);e=Object.keys(n).length}this.assert(0===e,"expected #{this} to be empty","expected #{this} not to be empty")})),n.addProperty("arguments",u),n.addProperty("Arguments",u),n.addMethod("equal",l),n.addMethod("equals",l),n.addMethod("eq",l),n.addMethod("eql",d),n.addMethod("eqls",d),n.addMethod("above",p),n.addMethod("gt",p),n.addMethod("greaterThan",p),n.addMethod("least",h),n.addMethod("gte",h),n.addMethod("below",f),n.addMethod("lt",f),n.addMethod("lessThan",f),n.addMethod("most",y),n.addMethod("lte",y),n.addMethod("within",(function(e,s,i){i&&o(this,"message",i);var a,c=o(this,"object"),u=o(this,"doLength"),l=o(this,"message"),d=l?l+": ":"",p=o(this,"ssfi"),h=t.type(c).toLowerCase(),f=t.type(e).toLowerCase(),y=t.type(s).toLowerCase(),m=!0,b="date"===f&&"date"===y?e.toUTCString()+".."+s.toUTCString():e+".."+s;if(u&&"map"!==h&&"set"!==h&&new n(c,l,p,!0).to.have.property("length"),u||"date"!==h||"date"===f&&"date"===y?"number"===f&&"number"===y||!u&&"number"!==h?u||"date"===h||"number"===h?m=!1:a=d+"expected "+("string"===h?"'"+c+"'":c)+" to be a number or a date":a=d+"the arguments to within must be numbers":a=d+"the arguments to within must be dates",m)throw new r(a,void 0,p);if(u){var g,w="length";"map"===h||"set"===h?(w="size",g=c.size):g=c.length,this.assert(g>=e&&g<=s,"expected #{this} to have a "+w+" within "+b,"expected #{this} to not have a "+w+" within "+b)}else this.assert(c>=e&&c<=s,"expected #{this} to be within "+b,"expected #{this} to not be within "+b)})),n.addMethod("instanceof",m),n.addMethod("instanceOf",m),n.addMethod("property",b),n.addMethod("ownProperty",g),n.addMethod("haveOwnProperty",g),n.addMethod("ownPropertyDescriptor",w),n.addMethod("haveOwnPropertyDescriptor",w),n.addChainableMethod("length",_,v),n.addChainableMethod("lengthOf",_,v),n.addMethod("match",x),n.addMethod("matches",x),n.addMethod("string",(function(e,r){r&&o(this,"message",r);var s=o(this,"object"),i=o(this,"message"),a=o(this,"ssfi");new n(s,i,a,!0).is.a("string"),this.assert(~s.indexOf(e),"expected #{this} to contain "+t.inspect(e),"expected #{this} to not contain "+t.inspect(e))})),n.addMethod("keys",E),n.addMethod("key",E),n.addMethod("throw",S),n.addMethod("throws",S),n.addMethod("Throw",S),n.addMethod("respondTo",O),n.addMethod("respondsTo",O),n.addProperty("itself",(function(){o(this,"itself",!0)})),n.addMethod("satisfy",P),n.addMethod("satisfies",P),n.addMethod("closeTo",k),n.addMethod("approximately",k),n.addMethod("members",(function(e,r){r&&o(this,"message",r);var s=o(this,"object"),i=o(this,"message"),a=o(this,"ssfi");new n(s,i,a,!0).to.be.an("array"),new n(e,i,a,!0).to.be.an("array");var c,u,l,d=o(this,"contains"),p=o(this,"ordered");d?(u="expected #{this} to be "+(c=p?"an ordered superset":"a superset")+" of #{exp}",l="expected #{this} to not be "+c+" of #{exp}"):(u="expected #{this} to have the same "+(c=p?"ordered members":"members")+" as #{exp}",l="expected #{this} to not have the same "+c+" as #{exp}");var h=o(this,"deep")?t.eql:void 0;this.assert(function(e,t,n,r,o){if(!r){if(e.length!==t.length)return!1;t=t.slice()}return e.every((function(e,s){if(o)return n?n(e,t[s]):e===t[s];if(!n){var i=t.indexOf(e);return-1!==i&&(r||t.splice(i,1),!0)}return t.some((function(o,s){return!!n(e,o)&&(r||t.splice(s,1),!0)}))}))}(e,s,h,d,p),u,l,e,s,!0)})),n.addMethod("oneOf",(function(e,t){t&&o(this,"message",t);var r=o(this,"object"),s=o(this,"message"),i=o(this,"ssfi");new n(e,s,i,!0).to.be.an("array"),this.assert(e.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",e,r)})),n.addMethod("change",j),n.addMethod("changes",j),n.addMethod("increase",q),n.addMethod("increases",q),n.addMethod("decrease",T),n.addMethod("decreases",T),n.addMethod("by",(function(e,t){t&&o(this,"message",t);var n,r=o(this,"deltaMsgObj"),s=o(this,"initialDeltaValue"),i=o(this,"finalDeltaValue"),a=o(this,"deltaBehavior"),c=o(this,"realDelta");n="change"===a?Math.abs(i-s)===Math.abs(e):c===Math.abs(e),this.assert(n,"expected "+r+" to "+a+" by "+e,"expected "+r+" to not "+a+" by "+e)})),n.addProperty("extensible",(function(){var e=o(this,"object"),t=e===Object(e)&&Object.isExtensible(e);this.assert(t,"expected #{this} to be extensible","expected #{this} to not be extensible")})),n.addProperty("sealed",(function(){var e=o(this,"object"),t=e!==Object(e)||Object.isSealed(e);this.assert(t,"expected #{this} to be sealed","expected #{this} to not be sealed")})),n.addProperty("frozen",(function(){var e=o(this,"object"),t=e!==Object(e)||Object.isFrozen(e);this.assert(t,"expected #{this} to be frozen","expected #{this} to not be frozen")})),n.addProperty("finite",(function(e){var t=o(this,"object");this.assert("number"==typeof t&&isFinite(t),"expected #{this} to be a finite number","expected #{this} to not be a finite number")}))}},function(e,t){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){e.expect=function(t,n){return new e.Assertion(t,n)},e.expect.fail=function(t,n,r,o){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new e.AssertionError(r,{actual:t,expected:n,operator:o},e.expect.fail)}}},function(e,t){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){var n=e.Assertion;function r(){Object.defineProperty(Object.prototype,"should",{set:function(e){Object.defineProperty(this,"should",{value:e,enumerable:!0,configurable:!0,writable:!0})},get:function e(){return this instanceof String||this instanceof Number||this instanceof Boolean||"function"==typeof Symbol&&this instanceof Symbol?new n(this.valueOf(),null,e):new n(this,null,e)},configurable:!0});var t={fail:function(n,r,o,s){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new e.AssertionError(o,{actual:n,expected:r,operator:s},t.fail)},equal:function(e,t,r){new n(e,r).to.equal(t)},Throw:function(e,t,r,o){new n(e,o).to.Throw(t,r)},exist:function(e,t){new n(e,t).to.exist},not:{}};return t.not.equal=function(e,t,r){new n(e,r).to.not.equal(t)},t.not.Throw=function(e,t,r,o){new n(e,o).to.not.Throw(t,r)},t.not.exist=function(e,t){new n(e,t).to.not.exist},t.throw=t.Throw,t.not.throw=t.not.Throw,t}e.should=r,e.Should=r}},function(e,t){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){
/*!
   * Chai dependencies.
   */
var n=e.Assertion,r=t.flag,o=e.assert=function(t,r){new n(null,null,e.assert,!0).assert(t,r,"[ negation message unavailable ]")};
/*!
   * Module export.
   */o.fail=function(t,n,r,s){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new e.AssertionError(r,{actual:t,expected:n,operator:s},o.fail)},o.isOk=function(e,t){new n(e,t,o.isOk,!0).is.ok},o.isNotOk=function(e,t){new n(e,t,o.isNotOk,!0).is.not.ok},o.equal=function(e,t,s){var i=new n(e,s,o.equal,!0);i.assert(t==r(i,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",t,e,!0)},o.notEqual=function(e,t,s){var i=new n(e,s,o.notEqual,!0);i.assert(t!=r(i,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",t,e,!0)},o.strictEqual=function(e,t,r){new n(e,r,o.strictEqual,!0).to.equal(t)},o.notStrictEqual=function(e,t,r){new n(e,r,o.notStrictEqual,!0).to.not.equal(t)},o.deepEqual=o.deepStrictEqual=function(e,t,r){new n(e,r,o.deepEqual,!0).to.eql(t)},o.notDeepEqual=function(e,t,r){new n(e,r,o.notDeepEqual,!0).to.not.eql(t)},o.isAbove=function(e,t,r){new n(e,r,o.isAbove,!0).to.be.above(t)},o.isAtLeast=function(e,t,r){new n(e,r,o.isAtLeast,!0).to.be.least(t)},o.isBelow=function(e,t,r){new n(e,r,o.isBelow,!0).to.be.below(t)},o.isAtMost=function(e,t,r){new n(e,r,o.isAtMost,!0).to.be.most(t)},o.isTrue=function(e,t){new n(e,t,o.isTrue,!0).is.true},o.isNotTrue=function(e,t){new n(e,t,o.isNotTrue,!0).to.not.equal(!0)},o.isFalse=function(e,t){new n(e,t,o.isFalse,!0).is.false},o.isNotFalse=function(e,t){new n(e,t,o.isNotFalse,!0).to.not.equal(!1)},o.isNull=function(e,t){new n(e,t,o.isNull,!0).to.equal(null)},o.isNotNull=function(e,t){new n(e,t,o.isNotNull,!0).to.not.equal(null)},o.isNaN=function(e,t){new n(e,t,o.isNaN,!0).to.be.NaN},o.isNotNaN=function(e,t){new n(e,t,o.isNotNaN,!0).not.to.be.NaN},o.exists=function(e,t){new n(e,t,o.exists,!0).to.exist},o.notExists=function(e,t){new n(e,t,o.notExists,!0).to.not.exist},o.isUndefined=function(e,t){new n(e,t,o.isUndefined,!0).to.equal(void 0)},o.isDefined=function(e,t){new n(e,t,o.isDefined,!0).to.not.equal(void 0)},o.isFunction=function(e,t){new n(e,t,o.isFunction,!0).to.be.a("function")},o.isNotFunction=function(e,t){new n(e,t,o.isNotFunction,!0).to.not.be.a("function")},o.isObject=function(e,t){new n(e,t,o.isObject,!0).to.be.a("object")},o.isNotObject=function(e,t){new n(e,t,o.isNotObject,!0).to.not.be.a("object")},o.isArray=function(e,t){new n(e,t,o.isArray,!0).to.be.an("array")},o.isNotArray=function(e,t){new n(e,t,o.isNotArray,!0).to.not.be.an("array")},o.isString=function(e,t){new n(e,t,o.isString,!0).to.be.a("string")},o.isNotString=function(e,t){new n(e,t,o.isNotString,!0).to.not.be.a("string")},o.isNumber=function(e,t){new n(e,t,o.isNumber,!0).to.be.a("number")},o.isNotNumber=function(e,t){new n(e,t,o.isNotNumber,!0).to.not.be.a("number")},o.isFinite=function(e,t){new n(e,t,o.isFinite,!0).to.be.finite},o.isBoolean=function(e,t){new n(e,t,o.isBoolean,!0).to.be.a("boolean")},o.isNotBoolean=function(e,t){new n(e,t,o.isNotBoolean,!0).to.not.be.a("boolean")},o.typeOf=function(e,t,r){new n(e,r,o.typeOf,!0).to.be.a(t)},o.notTypeOf=function(e,t,r){new n(e,r,o.notTypeOf,!0).to.not.be.a(t)},o.instanceOf=function(e,t,r){new n(e,r,o.instanceOf,!0).to.be.instanceOf(t)},o.notInstanceOf=function(e,t,r){new n(e,r,o.notInstanceOf,!0).to.not.be.instanceOf(t)},o.include=function(e,t,r){new n(e,r,o.include,!0).include(t)},o.notInclude=function(e,t,r){new n(e,r,o.notInclude,!0).not.include(t)},o.deepInclude=function(e,t,r){new n(e,r,o.deepInclude,!0).deep.include(t)},o.notDeepInclude=function(e,t,r){new n(e,r,o.notDeepInclude,!0).not.deep.include(t)},o.nestedInclude=function(e,t,r){new n(e,r,o.nestedInclude,!0).nested.include(t)},o.notNestedInclude=function(e,t,r){new n(e,r,o.notNestedInclude,!0).not.nested.include(t)},o.deepNestedInclude=function(e,t,r){new n(e,r,o.deepNestedInclude,!0).deep.nested.include(t)},o.notDeepNestedInclude=function(e,t,r){new n(e,r,o.notDeepNestedInclude,!0).not.deep.nested.include(t)},o.ownInclude=function(e,t,r){new n(e,r,o.ownInclude,!0).own.include(t)},o.notOwnInclude=function(e,t,r){new n(e,r,o.notOwnInclude,!0).not.own.include(t)},o.deepOwnInclude=function(e,t,r){new n(e,r,o.deepOwnInclude,!0).deep.own.include(t)},o.notDeepOwnInclude=function(e,t,r){new n(e,r,o.notDeepOwnInclude,!0).not.deep.own.include(t)},o.match=function(e,t,r){new n(e,r,o.match,!0).to.match(t)},o.notMatch=function(e,t,r){new n(e,r,o.notMatch,!0).to.not.match(t)},o.property=function(e,t,r){new n(e,r,o.property,!0).to.have.property(t)},o.notProperty=function(e,t,r){new n(e,r,o.notProperty,!0).to.not.have.property(t)},o.propertyVal=function(e,t,r,s){new n(e,s,o.propertyVal,!0).to.have.property(t,r)},o.notPropertyVal=function(e,t,r,s){new n(e,s,o.notPropertyVal,!0).to.not.have.property(t,r)},o.deepPropertyVal=function(e,t,r,s){new n(e,s,o.deepPropertyVal,!0).to.have.deep.property(t,r)},o.notDeepPropertyVal=function(e,t,r,s){new n(e,s,o.notDeepPropertyVal,!0).to.not.have.deep.property(t,r)},o.ownProperty=function(e,t,r){new n(e,r,o.ownProperty,!0).to.have.own.property(t)},o.notOwnProperty=function(e,t,r){new n(e,r,o.notOwnProperty,!0).to.not.have.own.property(t)},o.ownPropertyVal=function(e,t,r,s){new n(e,s,o.ownPropertyVal,!0).to.have.own.property(t,r)},o.notOwnPropertyVal=function(e,t,r,s){new n(e,s,o.notOwnPropertyVal,!0).to.not.have.own.property(t,r)},o.deepOwnPropertyVal=function(e,t,r,s){new n(e,s,o.deepOwnPropertyVal,!0).to.have.deep.own.property(t,r)},o.notDeepOwnPropertyVal=function(e,t,r,s){new n(e,s,o.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(t,r)},o.nestedProperty=function(e,t,r){new n(e,r,o.nestedProperty,!0).to.have.nested.property(t)},o.notNestedProperty=function(e,t,r){new n(e,r,o.notNestedProperty,!0).to.not.have.nested.property(t)},o.nestedPropertyVal=function(e,t,r,s){new n(e,s,o.nestedPropertyVal,!0).to.have.nested.property(t,r)},o.notNestedPropertyVal=function(e,t,r,s){new n(e,s,o.notNestedPropertyVal,!0).to.not.have.nested.property(t,r)},o.deepNestedPropertyVal=function(e,t,r,s){new n(e,s,o.deepNestedPropertyVal,!0).to.have.deep.nested.property(t,r)},o.notDeepNestedPropertyVal=function(e,t,r,s){new n(e,s,o.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(t,r)},o.lengthOf=function(e,t,r){new n(e,r,o.lengthOf,!0).to.have.lengthOf(t)},o.hasAnyKeys=function(e,t,r){new n(e,r,o.hasAnyKeys,!0).to.have.any.keys(t)},o.hasAllKeys=function(e,t,r){new n(e,r,o.hasAllKeys,!0).to.have.all.keys(t)},o.containsAllKeys=function(e,t,r){new n(e,r,o.containsAllKeys,!0).to.contain.all.keys(t)},o.doesNotHaveAnyKeys=function(e,t,r){new n(e,r,o.doesNotHaveAnyKeys,!0).to.not.have.any.keys(t)},o.doesNotHaveAllKeys=function(e,t,r){new n(e,r,o.doesNotHaveAllKeys,!0).to.not.have.all.keys(t)},o.hasAnyDeepKeys=function(e,t,r){new n(e,r,o.hasAnyDeepKeys,!0).to.have.any.deep.keys(t)},o.hasAllDeepKeys=function(e,t,r){new n(e,r,o.hasAllDeepKeys,!0).to.have.all.deep.keys(t)},o.containsAllDeepKeys=function(e,t,r){new n(e,r,o.containsAllDeepKeys,!0).to.contain.all.deep.keys(t)},o.doesNotHaveAnyDeepKeys=function(e,t,r){new n(e,r,o.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(t)},o.doesNotHaveAllDeepKeys=function(e,t,r){new n(e,r,o.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(t)},o.throws=function(e,t,s,i){("string"==typeof t||t instanceof RegExp)&&(s=t,t=null);var a=new n(e,i,o.throws,!0).to.throw(t,s);return r(a,"object")},o.doesNotThrow=function(e,t,r,s){("string"==typeof t||t instanceof RegExp)&&(r=t,t=null),new n(e,s,o.doesNotThrow,!0).to.not.throw(t,r)},o.operator=function(s,i,a,c){var u;switch(i){case"==":u=s==a;break;case"===":u=s===a;break;case">":u=s>a;break;case">=":u=s>=a;break;case"<":u=s<a;break;case"<=":u=s<=a;break;case"!=":u=s!=a;break;case"!==":u=s!==a;break;default:throw c=c?c+": ":c,new e.AssertionError(c+'Invalid operator "'+i+'"',void 0,o.operator)}var l=new n(u,c,o.operator,!0);l.assert(!0===r(l,"object"),"expected "+t.inspect(s)+" to be "+i+" "+t.inspect(a),"expected "+t.inspect(s)+" to not be "+i+" "+t.inspect(a))},o.closeTo=function(e,t,r,s){new n(e,s,o.closeTo,!0).to.be.closeTo(t,r)},o.approximately=function(e,t,r,s){new n(e,s,o.approximately,!0).to.be.approximately(t,r)},o.sameMembers=function(e,t,r){new n(e,r,o.sameMembers,!0).to.have.same.members(t)},o.notSameMembers=function(e,t,r){new n(e,r,o.notSameMembers,!0).to.not.have.same.members(t)},o.sameDeepMembers=function(e,t,r){new n(e,r,o.sameDeepMembers,!0).to.have.same.deep.members(t)},o.notSameDeepMembers=function(e,t,r){new n(e,r,o.notSameDeepMembers,!0).to.not.have.same.deep.members(t)},o.sameOrderedMembers=function(e,t,r){new n(e,r,o.sameOrderedMembers,!0).to.have.same.ordered.members(t)},o.notSameOrderedMembers=function(e,t,r){new n(e,r,o.notSameOrderedMembers,!0).to.not.have.same.ordered.members(t)},o.sameDeepOrderedMembers=function(e,t,r){new n(e,r,o.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(t)},o.notSameDeepOrderedMembers=function(e,t,r){new n(e,r,o.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(t)},o.includeMembers=function(e,t,r){new n(e,r,o.includeMembers,!0).to.include.members(t)},o.notIncludeMembers=function(e,t,r){new n(e,r,o.notIncludeMembers,!0).to.not.include.members(t)},o.includeDeepMembers=function(e,t,r){new n(e,r,o.includeDeepMembers,!0).to.include.deep.members(t)},o.notIncludeDeepMembers=function(e,t,r){new n(e,r,o.notIncludeDeepMembers,!0).to.not.include.deep.members(t)},o.includeOrderedMembers=function(e,t,r){new n(e,r,o.includeOrderedMembers,!0).to.include.ordered.members(t)},o.notIncludeOrderedMembers=function(e,t,r){new n(e,r,o.notIncludeOrderedMembers,!0).to.not.include.ordered.members(t)},o.includeDeepOrderedMembers=function(e,t,r){new n(e,r,o.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(t)},o.notIncludeDeepOrderedMembers=function(e,t,r){new n(e,r,o.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(t)},o.oneOf=function(e,t,r){new n(e,r,o.oneOf,!0).to.be.oneOf(t)},o.changes=function(e,t,r,s){3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.changes,!0).to.change(t,r)},o.changesBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.changesBy,!0).to.change(t,r).by(s)},o.doesNotChange=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.doesNotChange,!0).to.not.change(t,r)},o.changesButNotBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.changesButNotBy,!0).to.change(t,r).but.not.by(s)},o.increases=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.increases,!0).to.increase(t,r)},o.increasesBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.increasesBy,!0).to.increase(t,r).by(s)},o.doesNotIncrease=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.doesNotIncrease,!0).to.not.increase(t,r)},o.increasesButNotBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.increasesButNotBy,!0).to.increase(t,r).but.not.by(s)},o.decreases=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.decreases,!0).to.decrease(t,r)},o.decreasesBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.decreasesBy,!0).to.decrease(t,r).by(s)},o.doesNotDecrease=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.doesNotDecrease,!0).to.not.decrease(t,r)},o.doesNotDecreaseBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);return new n(e,i,o.doesNotDecreaseBy,!0).to.not.decrease(t,r).by(s)},o.decreasesButNotBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.decreasesButNotBy,!0).to.decrease(t,r).but.not.by(s)}
/*!
   * ### .ifError(object)
   *
   * Asserts if value is not a false value, and throws if it is a true value.
   * This is added to allow for chai to be a drop-in replacement for Node's
   * assert class.
   *
   *     var err = new Error('I am a custom error');
   *     assert.ifError(err); // Rethrows err!
   *
   * @name ifError
   * @param {Object} object
   * @namespace Assert
   * @api public
   */,o.ifError=function(e){if(e)throw e},o.isExtensible=function(e,t){new n(e,t,o.isExtensible,!0).to.be.extensible},o.isNotExtensible=function(e,t){new n(e,t,o.isNotExtensible,!0).to.not.be.extensible},o.isSealed=function(e,t){new n(e,t,o.isSealed,!0).to.be.sealed},o.isNotSealed=function(e,t){new n(e,t,o.isNotSealed,!0).to.not.be.sealed},o.isFrozen=function(e,t){new n(e,t,o.isFrozen,!0).to.be.frozen},o.isNotFrozen=function(e,t){new n(e,t,o.isNotFrozen,!0).to.not.be.frozen},o.isEmpty=function(e,t){new n(e,t,o.isEmpty,!0).to.be.empty},o.isNotEmpty=function(e,t){new n(e,t,o.isNotEmpty,!0).to.not.be.empty},
/*!
   * Aliases.
   */
function e(t,n){return o[n]=o[t],e}("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")}},function(e,t,n){var r=n(22),o=n(37),s=n(24);e.exports=function(e){var t={};return"function"==typeof e&&(e=s.createServer(e)),r.forEach((function(n){t[n]=function(t){return new o(e,n,t)}})),t.del=t.delete,t},e.exports.Test=o,e.exports.agent=n(90)},function(e,t){e.exports=n(67)},function(e,t,n){var r=n(69).IncomingForm;r.IncomingForm=r,e.exports=r},function(e,t,n){var r;global.GENTLY&&(r=GENTLY.hijack(n(70)));var o=r("crypto"),s=r("fs"),i=r("util"),a=r("path"),c=r("./file"),u=r("./multipart_parser").MultipartParser,l=r("./querystring_parser").QuerystringParser,d=r("./octet_parser").OctetParser,p=r("./json_parser").JSONParser,h=r("string_decoder").StringDecoder,f=r("events").EventEmitter,y=r("stream").Stream,m=r("os");function b(e){return this instanceof b?(f.call(this),e=e||{},this.error=null,this.ended=!1,this.maxFields=e.maxFields||1e3,this.maxFieldsSize=e.maxFieldsSize||20971520,this.maxFileSize=e.maxFileSize||209715200,this.keepExtensions=e.keepExtensions||!1,this.uploadDir=e.uploadDir||m.tmpdir&&m.tmpdir()||m.tmpDir(),this.encoding=e.encoding||"utf-8",this.headers=null,this.type=null,this.hash=e.hash||!1,this.multiples=e.multiples||!1,this.bytesReceived=null,this.bytesExpected=null,this._parser=null,this._flushing=0,this._fieldsSize=0,this._fileSize=0,this.openedFiles=[],this):new b(e)}i.inherits(b,f),t.IncomingForm=b,b.prototype.parse=function(e,t){if(this.pause=function(){try{e.pause()}catch(e){return this.ended||this._error(e),!1}return!0},this.resume=function(){try{e.resume()}catch(e){return this.ended||this._error(e),!1}return!0},t){var n={},r={};this.on("field",(function(e,t){n[e]=t})).on("file",(function(e,t){this.multiples&&r[e]?(Array.isArray(r[e])||(r[e]=[r[e]]),r[e].push(t)):r[e]=t})).on("error",(function(e){t(e,n,r)})).on("end",(function(){t(null,n,r)}))}this.writeHeaders(e.headers);var o=this;return e.on("error",(function(e){o._error(e)})).on("aborted",(function(){o.emit("aborted"),o._error(new Error("Request aborted"))})).on("data",(function(e){o.write(e)})).on("end",(function(){if(!o.error){var e=o._parser.end();e&&o._error(e)}})),this},b.prototype.writeHeaders=function(e){this.headers=e,this._parseContentLength(),this._parseContentType()},b.prototype.write=function(e){if(!this.error){if(this._parser){this.bytesReceived+=e.length,this.emit("progress",this.bytesReceived,this.bytesExpected);var t=this._parser.write(e);return t!==e.length&&this._error(new Error("parser error, "+t+" of "+e.length+" bytes parsed")),t}this._error(new Error("uninitialized parser"))}},b.prototype.pause=function(){return!1},b.prototype.resume=function(){return!1},b.prototype.onPart=function(e){this.handlePart(e)},b.prototype.handlePart=function(e){var t=this;if(void 0===e.filename){var n="",r=new h(this.encoding);return e.on("data",(function(e){t._fieldsSize+=e.length,t._fieldsSize>t.maxFieldsSize?t._error(new Error("maxFieldsSize exceeded, received "+t._fieldsSize+" bytes of field data")):n+=r.write(e)})),void e.on("end",(function(){t.emit("field",e.name,n)}))}this._flushing++;var o=new c({path:this._uploadPath(e.filename),name:e.filename,type:e.mime,hash:t.hash});this.emit("fileBegin",e.name,o),o.open(),this.openedFiles.push(o),e.on("data",(function(e){t._fileSize+=e.length,t._fileSize>t.maxFileSize?t._error(new Error("maxFileSize exceeded, received "+t._fileSize+" bytes of file data")):0!=e.length&&(t.pause(),o.write(e,(function(){t.resume()})))})),e.on("end",(function(){o.end((function(){t._flushing--,t.emit("file",e.name,o),t._maybeEnd()}))}))},b.prototype._parseContentType=function(){if(0!==this.bytesExpected)if(this.headers["content-type"])if(this.headers["content-type"].match(/octet-stream/i))this._initOctetStream();else if(this.headers["content-type"].match(/urlencoded/i))this._initUrlencoded();else if(this.headers["content-type"].match(/multipart/i)){var e=this.headers["content-type"].match(/boundary=(?:"([^"]+)"|([^;]+))/i);e?this._initMultipart(e[1]||e[2]):this._error(new Error("bad content-type header, no multipart boundary"))}else this.headers["content-type"].match(/json/i)?this._initJSONencoded():this._error(new Error("bad content-type header, unknown content-type: "+this.headers["content-type"]));else this._error(new Error("bad content-type header, no content-type"));else this._parser=function(e){return{end:function(){return e.ended=!0,e._maybeEnd(),null}}}(this)},b.prototype._error=function(e){this.error||this.ended||(this.error=e,this.emit("error",e),Array.isArray(this.openedFiles)&&this.openedFiles.forEach((function(e){e._writeStream.destroy(),setTimeout(s.unlink,0,e.path,(function(e){}))})))},b.prototype._parseContentLength=function(){this.bytesReceived=0,this.headers["content-length"]?this.bytesExpected=parseInt(this.headers["content-length"],10):void 0===this.headers["transfer-encoding"]&&(this.bytesExpected=0),null!==this.bytesExpected&&this.emit("progress",this.bytesReceived,this.bytesExpected)},b.prototype._newParser=function(){return new u},b.prototype._initMultipart=function(e){this.type="multipart";var t,n,r,o=new u,s=this;o.initWithBoundary(e),o.onPartBegin=function(){(r=new y).readable=!0,r.headers={},r.name=null,r.filename=null,r.mime=null,r.transferEncoding="binary",r.transferBuffer="",t="",n=""},o.onHeaderField=function(e,n,r){t+=e.toString(s.encoding,n,r)},o.onHeaderValue=function(e,t,r){n+=e.toString(s.encoding,t,r)},o.onHeaderEnd=function(){t=t.toLowerCase(),r.headers[t]=n;var e=n.match(/\bname=("([^"]*)"|([^\(\)<>@,;:\\"\/\[\]\?=\{\}\s\t/]+))/i);"content-disposition"==t?(e&&(r.name=e[2]||e[3]||""),r.filename=s._fileName(n)):"content-type"==t?r.mime=n:"content-transfer-encoding"==t&&(r.transferEncoding=n.toLowerCase()),t="",n=""},o.onHeadersEnd=function(){switch(r.transferEncoding){case"binary":case"7bit":case"8bit":o.onPartData=function(e,t,n){r.emit("data",e.slice(t,n))},o.onPartEnd=function(){r.emit("end")};break;case"base64":o.onPartData=function(e,t,n){r.transferBuffer+=e.slice(t,n).toString("ascii");var o=4*parseInt(r.transferBuffer.length/4,10);r.emit("data",new Buffer(r.transferBuffer.substring(0,o),"base64")),r.transferBuffer=r.transferBuffer.substring(o)},o.onPartEnd=function(){r.emit("data",new Buffer(r.transferBuffer,"base64")),r.emit("end")};break;default:return s._error(new Error("unknown transfer-encoding"))}s.onPart(r)},o.onEnd=function(){s.ended=!0,s._maybeEnd()},this._parser=o},b.prototype._fileName=function(e){var t=e.match(/\bfilename=("(.*?)"|([^\(\)<>@,;:\\"\/\[\]\?=\{\}\s\t/]+))($|;\s)/i);if(t){var n=t[2]||t[3]||"",r=n.substr(n.lastIndexOf("\\")+1);return(r=r.replace(/%22/g,'"')).replace(/&#([\d]{4});/g,(function(e,t){return String.fromCharCode(t)}))}},b.prototype._initUrlencoded=function(){this.type="urlencoded";var e=new l(this.maxFields),t=this;e.onField=function(e,n){t.emit("field",e,n)},e.onEnd=function(){t.ended=!0,t._maybeEnd()},this._parser=e},b.prototype._initOctetStream=function(){this.type="octet-stream";var e=this.headers["x-file-name"],t=this.headers["content-type"],n=new c({path:this._uploadPath(e),name:e,type:t});this.emit("fileBegin",e,n),n.open(),this.openedFiles.push(n),this._flushing++;var r=this;r._parser=new d;var o=0;r._parser.on("data",(function(e){r.pause(),o++,n.write(e,(function(){o--,r.resume(),r.ended&&r._parser.emit("doneWritingFile")}))})),r._parser.on("end",(function(){r._flushing--,r.ended=!0;var e=function(){n.end((function(){r.emit("file","file",n),r._maybeEnd()}))};0===o?e():r._parser.once("doneWritingFile",e)}))},b.prototype._initJSONencoded=function(){this.type="json";var e=new p(this),t=this;e.onField=function(e,n){t.emit("field",e,n)},e.onEnd=function(){t.ended=!0,t._maybeEnd()},this._parser=e},b.prototype._uploadPath=function(e){var t="upload_"+o.randomBytes(16).toString("hex");if(this.keepExtensions){var n=a.extname(e);t+=n=n.replace(/(\.[a-z0-9]+).*/i,"$1")}return a.join(this.uploadDir,t)},b.prototype._maybeEnd=function(){!this.ended||this._flushing||this.error||this.emit("end")}},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=70},function(e,t){e.exports=n(71)},function(e,t,n){"use strict";const r=n(28),o=n(29),s=n(73);function i(e){o.call(this);const t=this.res=e.res;this.request=e,this.req=e.req,this.text=t.text,this.body=void 0!==t.body?t.body:{},this.files=t.files||{},this.buffered="string"==typeof this.text,this.header=this.headers=t.headers,this._setStatusProperties(t.statusCode),this._setHeaderProperties(this.header),this.setEncoding=t.setEncoding.bind(t),t.on("data",this.emit.bind(this,"data")),t.on("end",this.emit.bind(this,"end")),t.on("close",this.emit.bind(this,"close")),t.on("error",this.emit.bind(this,"error"))}e.exports=i,r.inherits(i,o),s(i.prototype),i.prototype.destroy=function(e){this.res.destroy(e)},i.prototype.pause=function(){this.res.pause()},i.prototype.resume=function(){this.res.resume()},i.prototype.toError=function(){const e=this.req,t=e.method,n=e.path,r=`cannot ${t} ${n} (${this.status})`,o=new Error(r);return o.status=this.status,o.text=this.text,o.method=t,o.path=n,o},i.prototype.setStatusProperties=function(e){return console.warn("In superagent 2.x setStatusProperties is a private method"),this._setStatusProperties(e)},i.prototype.toJSON=function(){return{req:this.request.toJSON(),header:this.header,status:this.status,text:this.text}}},function(e,t,n){"use strict";var r=n(38);function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}e.exports=o,o.prototype.get=function(e){return this.header[e.toLowerCase()]},o.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=r.type(t);var n=r.params(t);for(var o in n)this[o]=n[o];this.links={};try{e.link&&(this.links=r.parseLinks(e.link))}catch(e){}},o.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}},function(e,t,n){"use strict";const r=n(75).StringDecoder,o=n(29),s=n(39);t.unzip=(e,t)=>{const n=s.createUnzip(),i=new o;let a;i.req=e,n.on("error",e=>{e&&"Z_BUF_ERROR"===e.code?i.emit("end"):i.emit("error",e)}),t.pipe(n),t.setEncoding=e=>{a=new r(e)},n.on("data",e=>{if(a){const t=a.write(e);t.length&&i.emit("data",t)}else i.emit("data",e)}),n.on("end",()=>{i.emit("end")});const c=t.on;t.on=function(e,n){return"data"==e||"end"==e?i.on(e,n):"error"==e?(i.on(e,n),c.call(t,e,n)):c.call(t,e,n),this}}},function(e,t){e.exports=n(75)},function(e,t){e.exports=n(76)},function(e,t){e.exports=n(77)},function(e,t){e.exports=n(78)},function(e){e.exports=JSON.parse('{"name":"superagent","version":"3.8.3","description":"elegant & feature rich browser / node HTTP with a fluent API","scripts":{"prepare":"make all","test":"make test"},"keywords":["http","ajax","request","agent"],"license":"MIT","author":"TJ Holowaychuk <tj@vision-media.ca>","contributors":["Kornel Lesiński <kornel@geekhood.net>","Peter Lyons <pete@peterlyons.com>","Hunter Loftis <hunter@hunterloftis.com>"],"repository":{"type":"git","url":"git://github.com/visionmedia/superagent.git"},"dependencies":{"component-emitter":"^1.2.0","cookiejar":"^2.1.0","debug":"^3.1.0","extend":"^3.0.0","form-data":"^2.3.1","formidable":"^1.2.0","methods":"^1.1.1","mime":"^1.4.1","qs":"^6.5.1","readable-stream":"^2.3.5"},"devDependencies":{"Base64":"^1.0.1","basic-auth-connect":"^1.0.0","body-parser":"^1.18.2","browserify":"^14.1.0","cookie-parser":"^1.4.3","express":"^4.16.3","express-session":"^1.15.6","marked":"0.3.12","mocha":"^3.5.3","multer":"^1.3.0","should":"^11.2.0","should-http":"^0.1.1","zuul":"^3.11.1"},"browser":{"./lib/node/index.js":"./lib/client.js","./test/support/server.js":"./test/support/blank.js"},"component":{"scripts":{"superagent":"lib/client.js"}},"main":"./lib/node/index.js","engines":{"node":">= 4.0"}}')},function(e,t,n){"use strict";var r=n(81);function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}e.exports=o,o.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},o.prototype.parse=function(e){return this._parser=e,this},o.prototype.responseType=function(e){return this._responseType=e,this},o.prototype.serialize=function(e){return this._serializer=e,this},o.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},o.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var s=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];o.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(e,t);if(!0===n)return!0;if(!1===n)return!1}catch(e){console.error(e)}if(t&&t.status&&t.status>=500&&501!=t.status)return!0;if(e){if(e.code&&~s.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},o.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},o.prototype.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(e,t){n.end((function(n,r){n?t(n):e(r)}))}))}return this._fullfilledPromise.then(e,t)},o.prototype.catch=function(e){return this.then(void 0,e)},o.prototype.use=function(e){return e(this),this},o.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},o.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},o.prototype.get=function(e){return this._header[e.toLowerCase()]},o.prototype.getHeader=o.prototype.get,o.prototype.set=function(e,t){if(r(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},o.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},o.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),r(e)){for(var n in e)this.field(n,e[n]);return this}if(Array.isArray(t)){for(var o in t)this.field(e,t[o]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},o.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},o.prototype._auth=function(e,t,n,r){switch(n.type){case"basic":this.set("Authorization","Basic "+r(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},o.prototype.withCredentials=function(e){return null==e&&(e=!0),this._withCredentials=e,this},o.prototype.redirects=function(e){return this._maxRedirects=e,this},o.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},o.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},o.prototype.send=function(e){var t=r(e),n=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&r(this._data))for(var o in e)this._data[o]=e[o];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(n||this.type("json"),this)},o.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},o.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var n=this.url.substring(t+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,t)+"?"+n.join("&")}}},o.prototype._appendQueryString=function(){console.trace("Unsupported")},o.prototype._timeoutError=function(e,t,n){if(!this._aborted){var r=new Error(e+t+"ms exceeded");r.timeout=t,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},o.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))}},function(e,t,n){"use strict";e.exports=function(e){return null!==e&&"object"==typeof e}},function(e,t,n){"use strict";const r=n(30).CookieJar,o=n(30).CookieAccessInfo,s=n(23).parse,i=n(27),a=n(83);let c=n(22);function u(e){if(!(this instanceof u))return new u(e);a.call(this),this.jar=new r,e&&(e.ca&&this.ca(e.ca),e.key&&this.key(e.key),e.pfx&&this.pfx(e.pfx),e.cert&&this.cert(e.cert))}e.exports=u,u.prototype=Object.create(a.prototype),u.prototype._saveCookies=function(e){const t=e.headers["set-cookie"];t&&this.jar.setCookies(t)},u.prototype._attachCookies=function(e){const t=s(e.url),n=o(t.hostname,t.pathname,"https:"==t.protocol),r=this.jar.getCookies(n).toValueString();e.cookies=r},c.forEach(e=>{const t=e.toUpperCase();u.prototype[e]=function(e,n){const r=new i.Request(t,e);return r.on("response",this._saveCookies.bind(this)),r.on("redirect",this._saveCookies.bind(this)),r.on("redirect",this._attachCookies.bind(this,r)),this._attachCookies(r),this._setDefaults(r),n&&r.end(n),r}}),u.prototype.del=u.prototype.delete},function(e,t){function n(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach((function(e){n.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}})),n.prototype._setDefaults=function(e){this._defaults.forEach((function(t){e[t.fn].apply(e,t.arguments)}))},e.exports=n},function(e,t,n){"use strict";t["application/x-www-form-urlencoded"]=n(85),t["application/json"]=n(86),t.text=n(87);const r=n(88);t["application/octet-stream"]=r,t["application/pdf"]=r,t.image=r},function(e,t,n){"use strict";const r=n(41);e.exports=function(e,t){e.text="",e.setEncoding("ascii"),e.on("data",t=>{e.text+=t}),e.on("end",()=>{try{t(null,r.parse(e.text))}catch(e){t(e)}})}},function(e,t,n){"use strict";e.exports=function(e,t){e.text="",e.setEncoding("utf8"),e.on("data",t=>{e.text+=t}),e.on("end",()=>{try{var n=e.text&&JSON.parse(e.text)}catch(t){var r=t;r.rawResponse=e.text||null,r.statusCode=e.statusCode}finally{t(r,n)}})}},function(e,t,n){"use strict";e.exports=function(e,t){e.text="",e.setEncoding("utf8"),e.on("data",t=>{e.text+=t}),e.on("end",t)}},function(e,t,n){"use strict";e.exports=(e,t)=>{const n=[];e.on("data",e=>{n.push(e)}),e.on("end",()=>{t(null,Buffer.concat(n))})}},function(e,t){e.exports=n(89)},function(e,t,n){var r=n(27).agent,o=n(22),s=n(24),i=n(37);function a(e,t){if(!(this instanceof a))return new a(e,t);"function"==typeof e&&(e=s.createServer(e)),t&&(this._ca=t.ca,this._key=t.key,this._cert=t.cert),r.call(this),this.app=e}e.exports=a,Object.setPrototypeOf(a.prototype,r.prototype),a.prototype.host=function(e){return this._host=e,this},o.forEach((function(e){a.prototype[e]=function(t,n){var r=new i(this.app,e.toUpperCase(),t,this._host);return r.ca(this._ca),r.cert(this._cert),r.key(this._key),r.on("response",this._saveCookies.bind(this)),r.on("redirect",this._saveCookies.bind(this)),r.on("redirect",this._attachCookies.bind(this,r)),this._attachCookies(r),this._setDefaults(r),r}})),a.prototype.del=a.prototype.delete},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(14).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(42),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(10),A=n.n(C),L=n(11),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(10)},function(e,t){e.exports=n(11)},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(9);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(13)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(14)},function(e,t){
/*!
 * Chai - flag utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t,n){var r=e.__flags||(e.__flags=Object.create(null));if(3!==arguments.length)return r[t];r[t]=n}},function(e,t,n){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=[];
/*!
 * Chai version
 */t.version="4.2.0",
/*!
 * Assertion Error
 */
t.AssertionError=n(31);
/*!
 * Utils for plugins (not exported)
 */
var o=n(44);t.use=function(e){return~r.indexOf(e)||(e(t,o),r.push(e)),t},
/*!
 * Utility Functions
 */
t.util=o;
/*!
 * Configuration
 */
var s=n(18);t.config=s;
/*!
 * Primary `Assertion` prototype
 */
var i=n(61);t.use(i);
/*!
 * Core Assertions
 */
var a=n(62);t.use(a);
/*!
 * Expect interface
 */
var c=n(63);t.use(c);
/*!
 * Should interface
 */
var u=n(64);t.use(u);
/*!
 * Assert interface
 */
var l=n(65);t.use(l)},function(e,t){
/*!
 * Chai - transferFlags utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t,n){var r=e.__flags||(e.__flags=Object.create(null));for(var o in t.__flags||(t.__flags=Object.create(null)),n=3!==arguments.length||n,r)(n||"object"!==o&&"ssfi"!==o&&"lockSsfi"!==o&&"message"!=o)&&(t.__flags[o]=r[o])}},function(e,t){e.exports={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"]}},function(e,t,n){var r=n(18);
/*!
 * Chai - isProxyEnabled helper
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */e.exports=function(){return r.useProxy&&"undefined"!=typeof Proxy&&"undefined"!=typeof Reflect}},function(e,t){var n=Object.getOwnPropertyDescriptor((function(){}),"length");
/*!
 * Chai - addLengthGuard utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */e.exports=function(e,t,r){return n.configurable?(Object.defineProperty(e,"length",{get:function(){if(r)throw Error("Invalid Chai property: "+t+'.length. Due to a compatibility issue, "length" cannot directly follow "'+t+'". Use "'+t+'.lengthOf" instead.');throw Error("Invalid Chai property: "+t+'.length. See docs for proper usage of "'+t+'".')}}),e):e}},function(e,t,n){var r=n(18),o=n(15),s=n(35),i=n(19),a=["__flags","__methods","_obj","assert"];e.exports=function(e,t){return i()?new Proxy(e,{get:function e(n,i){if("string"==typeof i&&-1===r.proxyExcludedKeys.indexOf(i)&&!Reflect.has(n,i)){if(t)throw Error("Invalid Chai property: "+t+"."+i+'. See docs for proper usage of "'+t+'".');var c=null,u=4;throw s(n).forEach((function(e){if(!Object.prototype.hasOwnProperty(e)&&-1===a.indexOf(e)){var t=function(e,t,n){if(Math.abs(e.length-t.length)>=n)return n;for(var r=[],o=0;o<=e.length;o++)r[o]=Array(t.length+1).fill(0),r[o][0]=o;for(var s=0;s<t.length;s++)r[0][s]=s;for(o=1;o<=e.length;o++){var i=e.charCodeAt(o-1);for(s=1;s<=t.length;s++)Math.abs(o-s)>=n?r[o][s]=n:r[o][s]=Math.min(r[o-1][s]+1,r[o][s-1]+1,r[o-1][s-1]+(i===t.charCodeAt(s-1)?0:1))}return r[e.length][t.length]}(i,e,u);t<u&&(c=e,u=t)}})),null!==c?Error("Invalid Chai property: "+i+'. Did you mean "'+c+'"?'):Error("Invalid Chai property: "+i)}return-1!==a.indexOf(i)||o(n,"lockSsfi")||o(n,"ssfi",e),Reflect.get(n,i)}}):e}},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t,n){var r;r=function(){"use strict";var e="function"==typeof Promise,t="object"==typeof self?self:global,n="undefined"!=typeof Symbol,r="undefined"!=typeof Map,o="undefined"!=typeof Set,s="undefined"!=typeof WeakMap,i="undefined"!=typeof WeakSet,a="undefined"!=typeof DataView,c=n&&void 0!==Symbol.iterator,u=n&&void 0!==Symbol.toStringTag,l=o&&"function"==typeof Set.prototype.entries,d=r&&"function"==typeof Map.prototype.entries,p=l&&Object.getPrototypeOf((new Set).entries()),h=d&&Object.getPrototypeOf((new Map).entries()),f=c&&"function"==typeof Array.prototype[Symbol.iterator],y=f&&Object.getPrototypeOf([][Symbol.iterator]()),m=c&&"function"==typeof String.prototype[Symbol.iterator],b=m&&Object.getPrototypeOf(""[Symbol.iterator]());return function(n){var c=typeof n;if("object"!==c)return c;if(null===n)return"null";if(n===t)return"global";if(Array.isArray(n)&&(!1===u||!(Symbol.toStringTag in n)))return"Array";if("object"==typeof window&&null!==window){if("object"==typeof window.location&&n===window.location)return"Location";if("object"==typeof window.document&&n===window.document)return"Document";if("object"==typeof window.navigator){if("object"==typeof window.navigator.mimeTypes&&n===window.navigator.mimeTypes)return"MimeTypeArray";if("object"==typeof window.navigator.plugins&&n===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"==typeof window.HTMLElement)&&n instanceof window.HTMLElement){if("BLOCKQUOTE"===n.tagName)return"HTMLQuoteElement";if("TD"===n.tagName)return"HTMLTableDataCellElement";if("TH"===n.tagName)return"HTMLTableHeaderCellElement"}}var l=u&&n[Symbol.toStringTag];if("string"==typeof l)return l;var d=Object.getPrototypeOf(n);return d===RegExp.prototype?"RegExp":d===Date.prototype?"Date":e&&d===Promise.prototype?"Promise":o&&d===Set.prototype?"Set":r&&d===Map.prototype?"Map":i&&d===WeakSet.prototype?"WeakSet":s&&d===WeakMap.prototype?"WeakMap":a&&d===DataView.prototype?"DataView":r&&d===h?"Map Iterator":o&&d===p?"Set Iterator":f&&d===y?"Array Iterator":m&&d===b?"String Iterator":null===d?"Object":Object.prototype.toString.call(n).slice(8,-1)}},e.exports=r()},function(e,t,n){var r=n(34),o=n(35),s=n(49),i=n(18);e.exports=function(e,t,n,r){return c({showHidden:t,seen:[],stylize:function(e){return e}},e,void 0===n?2:n)};var a=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&"nodeType"in e&&1===e.nodeType&&"string"==typeof e.nodeName};function c(e,n,y){if(n&&"function"==typeof n.inspect&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var m=n.inspect(y,e);return"string"!=typeof m&&(m=c(e,m,y)),m}var b=function(e,t){switch(typeof t){case"undefined":return e.stylize("undefined","undefined");case"string":var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string");case"number":return 0===t&&1/t==-1/0?e.stylize("-0","number"):e.stylize(""+t,"number");case"boolean":return e.stylize(""+t,"boolean");case"symbol":return e.stylize(t.toString(),"symbol")}if(null===t)return e.stylize("null","null")}(e,n);if(b)return b;if(a(n)){if("outerHTML"in n)return n.outerHTML;try{if(document.xmlVersion)return(new XMLSerializer).serializeToString(n);var g=document.createElementNS("http://www.w3.org/1999/xhtml","_");g.appendChild(n.cloneNode(!1));var w=g.innerHTML.replace("><",">"+n.innerHTML+"<");return g.innerHTML="",w}catch(e){}}var v,_,x=s(n),E=e.showHidden?o(n):x;if(0===E.length||h(n)&&(1===E.length&&"stack"===E[0]||2===E.length&&"description"===E[0]&&"stack"===E[1])){if("function"==typeof n)return _=(v=r(n))?": "+v:"",e.stylize("[Function"+_+"]","special");if(d(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(p(n))return e.stylize(Date.prototype.toUTCString.call(n),"date");if(h(n))return u(n)}var S,O,P="",k=!1,j=!1,q=["{","}"];if("object"==typeof(S=n)&&/\w+Array]$/.test(f(S))&&(j=!0,q=["[","]"]),function(e){return Array.isArray(e)||"object"==typeof e&&"[object Array]"===f(e)}(n)&&(k=!0,q=["[","]"]),"function"==typeof n&&(P=" [Function"+(_=(v=r(n))?": "+v:"")+"]"),d(n)&&(P=" "+RegExp.prototype.toString.call(n)),p(n)&&(P=" "+Date.prototype.toUTCString.call(n)),h(n))return u(n);if(0===E.length&&(!k||0==n.length))return q[0]+P+q[1];if(y<0)return d(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");if(e.seen.push(n),k)O=function(e,t,n,r,o){for(var s=[],i=0,a=t.length;i<a;++i)Object.prototype.hasOwnProperty.call(t,String(i))?s.push(l(e,t,n,r,String(i),!0)):s.push("");return o.forEach((function(o){o.match(/^\d+$/)||s.push(l(e,t,n,r,o,!0))})),s}(e,n,y,x,E);else{if(j)return function(e){for(var t="[ ",n=0;n<e.length;++n){if(t.length>=i.truncateThreshold-7){t+="...";break}t+=e[n]+", "}return-1!==(t+=" ]").indexOf(",  ]")&&(t=t.replace(",  ]"," ]")),t}(n);O=E.map((function(t){return l(e,n,y,x,t,k)}))}return e.seen.pop(),function(e,t,n){return e.reduce((function(e,t){return e+t.length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(O,P,q)}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,n,r,o,s){var i,a,u=Object.getOwnPropertyDescriptor(t,o);if(u&&(u.get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special"))),r.indexOf(o)<0&&(i="["+o+"]"),a||(e.seen.indexOf(t[o])<0?(a=c(e,t[o],null===n?null:n-1)).indexOf("\n")>-1&&(a=s?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),void 0===i){if(s&&o.match(/^\d+$/))return a;(i=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+a}function d(e){return"object"==typeof e&&"[object RegExp]"===f(e)}function p(e){return"object"==typeof e&&"[object Date]"===f(e)}function h(e){return"object"==typeof e&&"[object Error]"===f(e)}function f(e){return Object.prototype.toString.call(e)}},function(e,t,n){"use strict";const r=n(67)("superagent"),o=n(68),s=n(71),i=n(72),a=n(23).parse,c=n(23).format,u=n(23).resolve;let l=n(22);const d=n(29),p=n(38),h=n(74).unzip,f=n(76),y=n(77),m=n(40),b=n(24),g=n(78),w=n(41),v=n(39),_=n(28),x=n(79),E=n(80),S=n(30);function O(e,n){return"function"==typeof n?new t.Request("GET",e).end(n):1==arguments.length?new t.Request("GET",e):new t.Request(e,n)}function P(){}function k(e){const t=`node-superagent/${x.version}`;e._header={"user-agent":t},e.header={"User-Agent":t}}function j(e,t){d.call(this),"string"!=typeof t&&(t=c(t)),this._agent=!1,this._formData=null,this.method=e,this.url=t,k(this),this.writable=!0,this._redirects=0,this.redirects("HEAD"===e?0:5),this.cookies="",this.qs={},this._query=[],this.qsRaw=this._query,this._redirectList=[],this._streamRequest=!1,this.once("end",this.clearTimeout.bind(this))}function q(e){return/[\/+]json($|[^-\w])/.test(e)}function T(e){return~[301,302,303,305,307,308].indexOf(e)}(t=e.exports=O).Request=j,t.agent=n(82),t.Response=i,y.define({"application/x-www-form-urlencoded":["form","urlencoded","form-data"]},!0),t.protocols={"http:":b,"https:":m},t.serialize={"application/x-www-form-urlencoded":w.stringify,"application/json":JSON.stringify},t.parse=n(84),_.inherits(j,d),E(j.prototype),j.prototype.attach=function(e,t,n){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");let o=n||{};"string"==typeof n&&(o={filename:n}),"string"==typeof t?(o.filename||(o.filename=t),r("creating `fs.ReadStream` instance for file: %s",t),t=g.createReadStream(t)):!o.filename&&t.path&&(o.filename=t.path),this._getFormData().append(e,t,o)}return this},j.prototype._getFormData=function(){return this._formData||(this._formData=new s,this._formData.on("error",e=>{this.emit("error",e),this.abort()})),this._formData},j.prototype.agent=function(e){return arguments.length?(this._agent=e,this):this._agent},j.prototype.type=function(e){return this.set("Content-Type",~e.indexOf("/")?e:y.lookup(e))},j.prototype.accept=function(e){return this.set("Accept",~e.indexOf("/")?e:y.lookup(e))},j.prototype.query=function(e){return"string"==typeof e?this._query.push(e):f(this.qs,e),this},j.prototype.write=function(e,t){const n=this.request();return this._streamRequest||(this._streamRequest=!0),n.write(e,t)},j.prototype.pipe=function(e,t){return this.piped=!0,this.buffer(!1),this.end(),this._pipeContinue(e,t)},j.prototype._pipeContinue=function(e,t){return this.req.once("response",n=>{if(T(n.statusCode)&&this._redirects++!=this._maxRedirects)return this._redirect(n)._pipeContinue(e,t);if(this.res=n,this._emitResponse(),!this._aborted){if(this._shouldUnzip(n)){const r=v.createUnzip();r.on("error",t=>{t&&"Z_BUF_ERROR"===t.code?e.emit("end"):e.emit("error",t)}),n.pipe(r).pipe(e,t)}else n.pipe(e,t);n.once("end",()=>{this.emit("end")})}}),e},j.prototype.buffer=function(e){return this._buffer=!1!==e,this},j.prototype._redirect=function(e){let t=e.headers.location;if(!t)return this.callback(new Error("No location header for redirect"),e);r("redirect %s -> %s",this.url,t),t=u(this.url,t),e.resume();let n=this.req._headers;const o=a(t).host!==a(this.url).host;return 301!=e.statusCode&&302!=e.statusCode||(n=p.cleanHeader(this.req._headers,o),this.method="HEAD"==this.method?"HEAD":"GET",this._data=null),303==e.statusCode&&(n=p.cleanHeader(this.req._headers,o),this.method="GET",this._data=null),delete n.host,delete this.req,delete this._formData,k(this),this._endCalled=!1,this.url=t,this.qs={},this._query.length=0,this.set(n),this.emit("redirect",e),this._redirectList.push(this.url),this.end(this._callback),this},j.prototype.auth=function(e,t,n){1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(n=t,t=""),n||(n={type:"basic"});var r=function(e){return new Buffer(e).toString("base64")};return this._auth(e,t,n,r)},j.prototype.ca=function(e){return this._ca=e,this},j.prototype.key=function(e){return this._key=e,this},j.prototype.pfx=function(e){return"object"!=typeof e||Buffer.isBuffer(e)?this._pfx=e:(this._pfx=e.pfx,this._passphrase=e.passphrase),this},j.prototype.cert=function(e){return this._cert=e,this},j.prototype.request=function(){if(this.req)return this.req;const e={};try{const e=w.stringify(this.qs,{indices:!1,strictNullHandling:!0});e&&(this.qs={},this._query.push(e)),this._finalizeQueryString()}catch(e){return this.emit("error",e)}let n=this.url;const r=this._retries;if(0!=n.indexOf("http")&&(n=`http://${n}`),n=a(n),!0===/^https?\+unix:/.test(n.protocol)){n.protocol=`${n.protocol.split("+")[0]}:`;const t=n.path.match(/^([^/]+)(.+)$/);e.socketPath=t[1].replace(/%2F/g,"/"),n.path=t[2]}e.method=this.method,e.port=n.port,e.path=n.path,e.host=n.hostname,e.ca=this._ca,e.key=this._key,e.pfx=this._pfx,e.cert=this._cert,e.passphrase=this._passphrase,e.agent=this._agent;const o=t.protocols[n.protocol],s=this.req=o.request(e);if(s.setNoDelay(!0),"HEAD"!=e.method&&s.setHeader("Accept-Encoding","gzip, deflate"),this.protocol=n.protocol,this.host=n.host,s.once("drain",()=>{this.emit("drain")}),s.once("error",e=>{this._aborted||this._retries===r&&(this.response||this.callback(e))}),n.auth){const e=n.auth.split(":");this.auth(e[0],e[1])}this.username&&this.password&&this.auth(this.username,this.password);for(const e in this.header)this.header.hasOwnProperty(e)&&s.setHeader(e,this.header[e]);if(this.cookies)if(this.header.hasOwnProperty("cookie")){const e=new S.CookieJar;e.setCookies(this.header.cookie.split(";")),e.setCookies(this.cookies.split(";")),s.setHeader("Cookie",e.getCookies(S.CookieAccessInfo.All).toValueString())}else s.setHeader("Cookie",this.cookies);return s},j.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();const n=this._callback||P;if(this.clearTimeout(),this.called)return console.warn("superagent: double callback bug");if(this.called=!0,!e)try{if(!this._isResponseOK(t)){let n="Unsuccessful HTTP response";t&&(n=b.STATUS_CODES[t.status]||n),(e=new Error(n)).status=t?t.status:void 0}}catch(t){e=t}if(!e)return n(null,t);e.response=t,this._maxRetries&&(e.retries=this._retries-1),e&&this.listeners("error").length>0&&this.emit("error",e),n(e,t)},j.prototype._isHost=function(e){return Buffer.isBuffer(e)||e instanceof d||e instanceof s},j.prototype._emitResponse=function(e,t){const n=new i(this);return this.response=n,n.redirects=this._redirectList,void 0!==e&&(n.body=e),n.files=t,this.emit("response",n),n},j.prototype.end=function(e){return this.request(),r("%s %s",this.method,this.url),this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||P,this._end()},j.prototype._end=function(){let e=this._data;const n=this.req;let s=this._buffer;const i=this.method;if(this._setTimeouts(),"HEAD"!=i&&!n._headerSent){if("string"!=typeof e){let r=n.getHeader("Content-Type");r&&(r=r.split(";")[0]);let o=t.serialize[r];!o&&q(r)&&(o=t.serialize["application/json"]),o&&(e=o(e))}e&&!n.getHeader("Content-Length")&&n.setHeader("Content-Length",Buffer.isBuffer(e)?e.length:Buffer.byteLength(e))}n.once("response",e=>{if(r("%s %s -> %s",this.method,this.url,e.statusCode),this._responseTimeoutTimer&&clearTimeout(this._responseTimeoutTimer),this.piped)return;const i=this._maxRedirects,a=p.type(e.headers["content-type"]||"")||"text/plain",c=a.split("/")[0],u="multipart"==c,l=T(e.statusCode);let d=this._parser;const f=this._responseType;if(this.res=e,l&&this._redirects++!=i)return this._redirect(e);if("HEAD"==this.method)return this.emit("end"),void this.callback(null,this._emitResponse());if(this._shouldUnzip(e)&&h(n,e),!d)if(f)d=t.parse.image,s=!0;else if(u){const e=new o.IncomingForm;d=e.parse.bind(e),s=!0}else!function(e){const t=e.split("/")[0];return"image"==t||"video"==t}(a)?t.parse[a]?d=t.parse[a]:"text"==c?(d=t.parse.text,s=!1!==s):q(a)?(d=t.parse["application/json"],s=!1!==s):s&&(d=t.parse.text):(d=t.parse.image,s=!0);(void 0===s&&function(e){const t=e.split("/"),n=t[0],r=t[1];return"text"==n||"x-www-form-urlencoded"==r}(a)||q(a))&&(s=!0);let y=!1;if(s){let t=this._maxResponseSize||2e8;e.on("data",n=>{if((t-=n.byteLength||n.length)<0){const t=Error("Maximum response size reached");t.code="ETOOLARGE",y=!1,e.destroy(t)}})}if(d)try{y=s,d(e,(e,t,n)=>{if(!this.timedout)return e&&!this._aborted?this.callback(e):void(y&&(this.emit("end"),this.callback(null,this._emitResponse(t,n))))})}catch(e){return void this.callback(e)}if(this.res=e,s)e.once("error",e=>{y=!1,this.callback(e,null)}),y||e.once("end",()=>{r("end %s %s",this.method,this.url),this.emit("end"),this.callback(null,this._emitResponse())});else{if(r("unbuffered %s %s",this.method,this.url),this.callback(null,this._emitResponse()),u)return;e.once("end",()=>{r("end %s %s",this.method,this.url),this.emit("end")})}}),this.emit("request",this);const a=()=>{const e=n.getHeader("Content-Length");let t=0;const r=new d.Transform;return r._transform=(n,r,o)=>{t+=n.length,this.emit("progress",{direction:"upload",lengthComputable:!0,loaded:t,total:e}),o(null,n)},r},c=this._formData;if(c){const e=c.getHeaders();for(const t in e)r('setting FormData header: "%s: %s"',t,e[t]),n.setHeader(t,e[t]);c.getLength((e,t)=>{r("got FormData Content-Length: %s",t),"number"==typeof t&&n.setHeader("Content-Length",t),c.pipe(a()).pipe(n)})}else Buffer.isBuffer(e)?(e=>{const t=new d.Readable,n=e.length,r=n%16384,o=n-r;for(let n=0;n<o;n+=16384){const r=e.slice(n,n+16384);t.push(r)}if(r>0){const n=e.slice(-r);t.push(n)}return t.push(null),t})(e).pipe(a()).pipe(n):n.end(e);return this},j.prototype._shouldUnzip=e=>204!==e.statusCode&&304!==e.statusCode&&"0"!==e.headers["content-length"]&&/^\s*(?:deflate|gzip)\s*$/.test(e.headers["content-encoding"]),-1==l.indexOf("del")&&(l=l.slice(0)).push("del"),l.forEach(e=>{const t=e;e=(e="del"==e?"delete":e).toUpperCase(),O[t]=(t,n,r)=>{const o=O(e,t);return"function"==typeof n&&(r=n,n=null),n&&("GET"===e||"HEAD"===e?o.query(n):o.send(n)),r&&o.end(r),o}})},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){!function(){"use strict";function e(t,n,r,o){return this instanceof e?(this.domain=t||void 0,this.path=n||"/",this.secure=!!r,this.script=!!o,this):new e(t,n,r,o)}function n(e,t,r){return e instanceof n?e:this instanceof n?(this.name=null,this.value=null,this.expiration_date=1/0,this.path=String(r||"/"),this.explicit_path=!1,this.domain=t||null,this.explicit_domain=!1,this.secure=!1,this.noscript=!1,e&&this.parse(e,t,r),this):new n(e,t,r)}e.All=Object.freeze(Object.create(null)),t.CookieAccessInfo=e,t.Cookie=n,n.prototype.toString=function(){var e=[this.name+"="+this.value];return this.expiration_date!==1/0&&e.push("expires="+new Date(this.expiration_date).toGMTString()),this.domain&&e.push("domain="+this.domain),this.path&&e.push("path="+this.path),this.secure&&e.push("secure"),this.noscript&&e.push("httponly"),e.join("; ")},n.prototype.toValueString=function(){return this.name+"="+this.value};var r=/[:](?=\s*[a-zA-Z0-9_\-]+\s*[=])/g;function o(){var e,t;return this instanceof o?(e=Object.create(null),this.setCookie=function(r,o,s){var i,a;if(i=(r=new n(r,o,s)).expiration_date<=Date.now(),void 0!==e[r.name]){for(t=e[r.name],a=0;a<t.length;a+=1)if(t[a].collidesWith(r))return i?(t.splice(a,1),0===t.length&&delete e[r.name],!1):(t[a]=r,r);return!i&&(t.push(r),r)}return!i&&(e[r.name]=[r],e[r.name])},this.getCookie=function(n,r){var o,s;if(t=e[n])for(s=0;s<t.length;s+=1)if((o=t[s]).expiration_date<=Date.now())0===t.length&&delete e[o.name];else if(o.matches(r))return o},this.getCookies=function(t){var n,r,o=[];for(n in e)(r=this.getCookie(n,t))&&o.push(r);return o.toString=function(){return o.join(":")},o.toValueString=function(){return o.map((function(e){return e.toValueString()})).join(";")},o},this):new o}n.prototype.parse=function(e,t,r){if(this instanceof n){var o,s=e.split(";").filter((function(e){return!!e})),i=s[0].match(/([^=]+)=([\s\S]*)/);if(!i)return void console.warn("Invalid cookie header encountered. Header: '"+e+"'");var a=i[1],c=i[2];if("string"!=typeof a||0===a.length||"string"!=typeof c)return void console.warn("Unable to extract values from cookie header. Cookie: '"+e+"'");for(this.name=a,this.value=c,o=1;o<s.length;o+=1)switch(a=(i=s[o].match(/([^=]+)(?:=([\s\S]*))?/))[1].trim().toLowerCase(),c=i[2],a){case"httponly":this.noscript=!0;break;case"expires":this.expiration_date=c?Number(Date.parse(c)):1/0;break;case"path":this.path=c?c.trim():"",this.explicit_path=!0;break;case"domain":this.domain=c?c.trim():"",this.explicit_domain=!!this.domain;break;case"secure":this.secure=!0}return this.explicit_path||(this.path=r||"/"),this.explicit_domain||(this.domain=t),this}return(new n).parse(e,t,r)},n.prototype.matches=function(t){return t===e.All||!(this.noscript&&t.script||this.secure&&!t.secure||!this.collidesWith(t))},n.prototype.collidesWith=function(e){if(this.path&&!e.path||this.domain&&!e.domain)return!1;if(this.path&&0!==e.path.indexOf(this.path))return!1;if(this.explicit_path&&0!==e.path.indexOf(this.path))return!1;var t=e.domain&&e.domain.replace(/^[\.]/,""),n=this.domain&&this.domain.replace(/^[\.]/,"");if(n===t)return!0;if(n){if(!this.explicit_domain)return!1;var r=t.indexOf(n);return-1!==r&&r===t.length-n.length}return!0},t.CookieJar=o,o.prototype.setCookies=function(e,t,o){var s,i,a=[];for(e=(e=Array.isArray(e)?e:e.split(r)).map((function(e){return new n(e,t,o)})),s=0;s<e.length;s+=1)i=e[s],this.setCookie(i,t,o)&&a.push(i);return a}}()},function(e,t){
/*!
 * assertion-error
 * Copyright(c) 2013 Jake Luer <jake@qualiancy.com>
 * MIT Licensed
 */
/*!
 * Return a function that will copy properties from
 * one object to another excluding any originally
 * listed. Returned function will create a new `{}`.
 *
 * @param {String} excluded properties ...
 * @return {Function}
 */
function n(){var e=[].slice.call(arguments);function t(t,n){Object.keys(n).forEach((function(r){~e.indexOf(r)||(t[r]=n[r])}))}return function(){for(var e=[].slice.call(arguments),n=0,r={};n<e.length;n++)t(r,e[n]);return r}}function r(e,t,o){var s=n("name","message","stack","constructor","toJSON")(t||{});for(var i in this.message=e||"Unspecified AssertionError",this.showDiff=!1,s)this[i]=s[i];if(o=o||r,Error.captureStackTrace)Error.captureStackTrace(this,o);else try{throw new Error}catch(e){this.stack=e.stack}}
/*!
 * Inherit from Error.prototype
 */
/*!
 * Primary Exports
 */e.exports=r,r.prototype=Object.create(Error.prototype),
/*!
 * Statically set name
 */
r.prototype.name="AssertionError",
/*!
 * Ensure correct constructor
 */
r.prototype.constructor=r,r.prototype.toJSON=function(e){var t=n("constructor","toJSON","stack")({name:this.name},this);return!1!==e&&this.stack&&(t.stack=this.stack),t}},function(e,t){
/*!
 * Chai - getActual utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){return t.length>4?t[4]:e._obj}},function(e,t,n){
/*!
 * Chai - flag utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(26),o=n(18);e.exports=function(e){var t=r(e),n=Object.prototype.toString.call(e);if(o.truncateThreshold&&t.length>=o.truncateThreshold){if("[object Function]"===n)return e.name&&""!==e.name?"[Function: "+e.name+"]":"[Function]";if("[object Array]"===n)return"[ Array("+e.length+") ]";if("[object Object]"===n){var s=Object.keys(e);return"{ Object ("+(s.length>2?s.splice(0,2).join(", ")+", ...":s.join(", "))+") }"}return t}return t}},function(e,t,n){"use strict";var r=Function.prototype.toString,o=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\s\(\/]+)/;e.exports=function(e){if("function"!=typeof e)return null;var t="";if(void 0===Function.prototype.name&&void 0===e.name){var n=r.call(e).match(o);n&&(t=n[1])}else t=e.name;return t}},function(e,t){
/*!
 * Chai - getProperties utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e){var t=Object.getOwnPropertyNames(e);function n(e){-1===t.indexOf(e)&&t.push(e)}for(var r=Object.getPrototypeOf(e);null!==r;)Object.getOwnPropertyNames(r).forEach(n),r=Object.getPrototypeOf(r);return t}},function(e,t){
/*!
 * Chai - getOwnEnumerablePropertySymbols utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e){return"function"!=typeof Object.getOwnPropertySymbols?[]:Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))}},function(e,t,n){var r=n(27),o=n(28),s=n(24),i=n(40),a=n(89),c=r.Request;function u(e,t,n,r){c.call(this,t.toUpperCase(),n),this.redirects(0),this.buffer(),this.app=e,this._asserts=[],this.url="string"==typeof e?e+n:this.serverAddress(e,n,r)}function l(e,t,n){var r=new Error(e);return r.expected=t,r.actual=n,r.showDiff=!0,r}e.exports=u,Object.setPrototypeOf(u.prototype,c.prototype),u.prototype.serverAddress=function(e,t,n){var r;return e.address()||(this._server=e.listen(0)),r=e.address().port,(e instanceof i.Server?"https":"http")+"://"+(n||"127.0.0.1")+":"+r+t},u.prototype.expect=function(e,t,n){return"function"==typeof e?(this._asserts.push(e),this):("function"==typeof t&&this.end(t),"function"==typeof n&&this.end(n),"number"==typeof e?(this._asserts.push(this._assertStatus.bind(this,e)),"function"!=typeof t&&arguments.length>1&&this._asserts.push(this._assertBody.bind(this,t)),this):"string"==typeof t||"number"==typeof t||t instanceof RegExp?(this._asserts.push(this._assertHeader.bind(this,{name:""+e,value:t})),this):(this._asserts.push(this._assertBody.bind(this,e)),this))},u.prototype.end=function(e){var t=this,n=this._server;return c.prototype.end.call(this,(function(r,o){if(n&&n._handle)return n.close(s);function s(){t.assert(r,o,e)}s()})),this},u.prototype.assert=function(e,t,n){var r,o,s={ECONNREFUSED:"Connection refused",ECONNRESET:"Connection reset by peer",EPIPE:"Broken pipe",ETIMEDOUT:"Operation timed out"};for(!t&&e&&(r=e instanceof Error&&"connect"===e.syscall&&Object.getOwnPropertyNames(s).indexOf(e.code)>=0?new Error(e.code+": "+s[e.code]):e),o=0;o<this._asserts.length&&!r;o+=1)r=this._assertFunction(this._asserts[o],t);r||!(e instanceof Error)||t&&e.status===t.status||(r=e),n.call(this,r||null,t)},u.prototype._assertBody=function(e,t){var n,r,s=e instanceof RegExp;if("object"!=typeof e||s){if(e!==t.text){if(n=o.inspect(e),r=o.inspect(t.text),!s)return l("expected "+n+" response body, got "+r,e,t.body);if(!e.test(t.text))return l("expected body "+r+" to match "+e,e,t.body)}}else try{a.deepStrictEqual(e,t.body)}catch(s){return l("expected "+(n=o.inspect(e))+" response body, got "+(r=o.inspect(t.body)),e,t.body)}},u.prototype._assertHeader=function(e,t){var n=e.name,r=t.header[n.toLowerCase()],o=e.value;return void 0===r?new Error('expected "'+n+'" header field'):Array.isArray(r)&&r.toString()===o||o===r?void 0:o instanceof RegExp?o.test(r)?void 0:new Error('expected "'+n+'" matching '+o+', got "'+r+'"'):new Error('expected "'+n+'" of "'+o+'", got "'+r+'"')},u.prototype._assertStatus=function(e,t){var n,r;if(t.status!==e)return n=s.STATUS_CODES[e],r=s.STATUS_CODES[t.status],new Error("expected "+e+' "'+n+'", got '+t.status+' "'+r+'"')},u.prototype._assertFunction=function(e,t){var n;try{n=e(t)}catch(e){n=e}if(n instanceof Error)return n}},function(e,t,n){"use strict";t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){return e.split(/ *; */).reduce((function(e,t){var n=t.split(/ *= */),r=n.shift(),o=n.shift();return r&&o&&(e[r]=o),e}),{})},t.parseLinks=function(e){return e.split(/ *, */).reduce((function(e,t){var n=t.split(/ *; */),r=n[0].slice(1,-1);return e[n[1].split(/ *= */)[1].slice(1,-1)]=r,e}),{})},t.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},function(e,t){e.exports=n(39)},function(e,t){e.exports=n(40)},function(e,t){e.exports=n(41)},function(e,t,n){const{expect:r}=n(43),o=n(66);n(91);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){e.exports=n(16)},function(e,t,n){
/*!
 * chai
 * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Dependencies that are used for multiple exports are required here only once
 */
var r=n(45);
/*!
 * test utility
 */t.test=n(46),
/*!
 * type utility
 */
t.type=n(25),
/*!
 * expectTypes utility
 */
t.expectTypes=n(47),
/*!
 * message utility
 */
t.getMessage=n(48),
/*!
 * actual utility
 */
t.getActual=n(32),
/*!
 * Inspect util
 */
t.inspect=n(26),
/*!
 * Object Display util
 */
t.objDisplay=n(33),
/*!
 * Flag utility
 */
t.flag=n(15),
/*!
 * Flag transferring utility
 */
t.transferFlags=n(17),
/*!
 * Deep equal utility
 */
t.eql=n(50),
/*!
 * Deep path info
 */
t.getPathInfo=r.getPathInfo,
/*!
 * Check if a property exists
 */
t.hasProperty=r.hasProperty,
/*!
 * Function name
 */
t.getName=n(34),
/*!
 * add Property
 */
t.addProperty=n(51),
/*!
 * add Method
 */
t.addMethod=n(52),
/*!
 * overwrite Property
 */
t.overwriteProperty=n(53),
/*!
 * overwrite Method
 */
t.overwriteMethod=n(54),
/*!
 * Add a chainable method
 */
t.addChainableMethod=n(55),
/*!
 * Overwrite chainable method
 */
t.overwriteChainableMethod=n(56),
/*!
 * Compare by inspect method
 */
t.compareByInspect=n(57),
/*!
 * Get own enumerable property symbols method
 */
t.getOwnEnumerablePropertySymbols=n(36),
/*!
 * Get own enumerable properties method
 */
t.getOwnEnumerableProperties=n(58),
/*!
 * Checks error against a given set of criteria
 */
t.checkError=n(59),
/*!
 * Proxify util
 */
t.proxify=n(21),
/*!
 * addLengthGuard util
 */
t.addLengthGuard=n(20),
/*!
 * isProxyEnabled helper
 */
t.isProxyEnabled=n(19),
/*!
 * isNaN method
 */
t.isNaN=n(60)},function(e,t,n){"use strict";function r(e,t){return null!=e&&t in Object(e)}function o(e){return e.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map((function(e){var t=/^\[(\d+)\]$/.exec(e);return t?{i:parseFloat(t[1])}:{p:e.replace(/\\([.\[\]])/g,"$1")}}))}function s(e,t,n){var r=e,o=null;n=void 0===n?t.length:n;for(var s=0;s<n;s++){var i=t[s];r&&(r=void 0===i.p?r[i.i]:r[i.p],s===n-1&&(o=r))}return o}function i(e,t){var n=o(t),i=n[n.length-1],a={parent:n.length>1?s(e,n,n.length-1):e,name:i.p||i.i,value:s(e,n)};return a.exists=r(a.parent,a.name),a}e.exports={hasProperty:r,getPathInfo:i,getPathValue:function(e,t){return i(e,t).value},setPathValue:function(e,t,n){return function(e,t,n){for(var r=e,o=n.length,s=null,i=0;i<o;i++){var a=null,c=null;if(s=n[i],i===o-1)r[a=void 0===s.p?s.i:s.p]=t;else if(void 0!==s.p&&r[s.p])r=r[s.p];else if(void 0!==s.i&&r[s.i])r=r[s.i];else{var u=n[i+1];a=void 0===s.p?s.i:s.p,c=void 0===u.p?[]:{},r[a]=c,r=r[a]}}}(e,n,o(t)),e}}},function(e,t,n){
/*!
 * Chai - test utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(15);e.exports=function(e,t){var n=r(e,"negate"),o=t[0];return n?!o:o}},function(e,t,n){
/*!
 * Chai - expectTypes utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(31),o=n(15),s=n(25);e.exports=function(e,t){var n=o(e,"message"),i=o(e,"ssfi");n=n?n+": ":"",e=o(e,"object"),(t=t.map((function(e){return e.toLowerCase()}))).sort();var a=t.map((function(e,n){var r=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an":"a";return(t.length>1&&n===t.length-1?"or ":"")+r+" "+e})).join(", "),c=s(e).toLowerCase();if(!t.some((function(e){return c===e})))throw new r(n+"object tested must be "+a+", but "+c+" given",void 0,i)}},function(e,t,n){
/*!
 * Chai - message composition utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(15),o=n(32),s=n(33);e.exports=function(e,t){var n=r(e,"negate"),i=r(e,"object"),a=t[3],c=o(e,t),u=n?t[2]:t[1],l=r(e,"message");return"function"==typeof u&&(u=u()),u=(u=u||"").replace(/#\{this\}/g,(function(){return s(i)})).replace(/#\{act\}/g,(function(){return s(c)})).replace(/#\{exp\}/g,(function(){return s(a)})),l?l+": "+u:u}},function(e,t){
/*!
 * Chai - getEnumerableProperties utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e){var t=[];for(var n in e)t.push(n);return t}},function(e,t,n){"use strict";
/*!
 * deep-eql
 * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */var r=n(25);function o(){this._key="chai/deep-eql__"+Math.random()+Date.now()}o.prototype={get:function(e){return e[this._key]},set:function(e,t){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:t,configurable:!0})}};var s="function"==typeof WeakMap?WeakMap:o;
/*!
 * Check to see if the MemoizeMap has recorded a result of the two operands
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {MemoizeMap} memoizeMap
 * @returns {Boolean|null} result
*/function i(e,t,n){if(!n||y(e)||y(t))return null;var r=n.get(e);if(r){var o=r.get(t);if("boolean"==typeof o)return o}return null}
/*!
 * Set the result of the equality into the MemoizeMap
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {MemoizeMap} memoizeMap
 * @param {Boolean} result
*/function a(e,t,n,r){if(n&&!y(e)&&!y(t)){var o=n.get(e);o?o.set(t,r):((o=new s).set(t,r),n.set(e,o))}}
/*!
 * Primary Export
 */function c(e,t,n){if(n&&n.comparator)return l(e,t,n);var r=u(e,t);return null!==r?r:l(e,t,n)}function u(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t||!y(e)&&!y(t)&&null}
/*!
 * The main logic of the `deepEqual` function.
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Object} [options] (optional) Additional options
 * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
 * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
    complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
    references to blow the stack.
 * @return {Boolean} equal match
*/function l(e,t,n){(n=n||{}).memoize=!1!==n.memoize&&(n.memoize||new s);var o=n&&n.comparator,l=i(e,t,n.memoize);if(null!==l)return l;var y=i(t,e,n.memoize);if(null!==y)return y;if(o){var m=o(e,t);if(!1===m||!0===m)return a(e,t,n.memoize,m),m;var b=u(e,t);if(null!==b)return b}var g=r(e);if(g!==r(t))return a(e,t,n.memoize,!1),!1;a(e,t,n.memoize,!0);var w=function(e,t,n,r){switch(n){case"String":case"Number":case"Boolean":case"Date":return c(e.valueOf(),t.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":case"Error":return e===t;case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return d(e,t,r);case"RegExp":
/*!
 * Compare two Regular Expressions for equality.
 *
 * @param {RegExp} leftHandOperand
 * @param {RegExp} rightHandOperand
 * @return {Boolean} result
 */
return function(e,t){return e.toString()===t.toString()}
/*!
 * Compare two Sets/Maps for equality. Faster than other equality functions.
 *
 * @param {Set} leftHandOperand
 * @param {Set} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */(e,t);case"Generator":
/*!
 * Simple equality for generator objects such as those returned by generator functions.
 *
 * @param {Iterable} leftHandOperand
 * @param {Iterable} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */
return function(e,t,n){return d(h(e),h(t),n)}
/*!
 * Determine if the given object has an @@iterator function.
 *
 * @param {Object} target
 * @return {Boolean} `true` if the object has an @@iterator function.
 */(e,t,r);case"DataView":return d(new Uint8Array(e.buffer),new Uint8Array(t.buffer),r);case"ArrayBuffer":return d(new Uint8Array(e),new Uint8Array(t),r);case"Set":case"Map":return function(e,t,n){if(e.size!==t.size)return!1;if(0===e.size)return!0;var r=[],o=[];return e.forEach((function(e,t){r.push([e,t])})),t.forEach((function(e,t){o.push([e,t])})),d(r.sort(),o.sort(),n);
/*!
 * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
 *
 * @param {Iterable} leftHandOperand
 * @param {Iterable} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */}(e,t,r);default:
/*!
 * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
 * for each enumerable key in the object.
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */
return function(e,t,n){var r=f(e),o=f(t);if(r.length&&r.length===o.length)return r.sort(),o.sort(),!1!==d(r,o)&&
/*!
 * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
 * each key. If any value of the given key is not equal, the function will return false (early).
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */
function(e,t,n,r){var o=n.length;if(0===o)return!0;for(var s=0;s<o;s+=1)if(!1===c(e[n[s]],t[n[s]],r))return!1;return!0}(e,t,r,n);var s=p(e),i=p(t);return s.length&&s.length===i.length?(s.sort(),i.sort(),d(s,i,n)):0===r.length&&0===s.length&&0===o.length&&0===i.length}
/*!
 * Returns true if the argument is a primitive.
 *
 * This intentionally returns true for all objects that can be compared by reference,
 * including functions and symbols.
 *
 * @param {Mixed} value
 * @return {Boolean} result
 */(e,t,r)}}(e,t,g,n);return a(e,t,n.memoize,w),w}function d(e,t,n){var r=e.length;if(r!==t.length)return!1;if(0===r)return!0;for(var o=-1;++o<r;)if(!1===c(e[o],t[o],n))return!1;return!0}
/*!
 * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
 * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
 *
 * @param {Object} target
 * @returns {Array} an array of entries from the @@iterator function
 */function p(e){if(function(e){return"undefined"!=typeof Symbol&&"object"==typeof e&&void 0!==Symbol.iterator&&"function"==typeof e[Symbol.iterator]}(e))try{return h(e[Symbol.iterator]())}catch(e){return[]}return[]}
/*!
 * Gets all entries from a Generator. This will consume the generator - which could have side effects.
 *
 * @param {Generator} target
 * @returns {Array} an array of entries from the Generator.
 */function h(e){for(var t=e.next(),n=[t.value];!1===t.done;)t=e.next(),n.push(t.value);return n}
/*!
 * Gets all own and inherited enumerable keys from a target.
 *
 * @param {Object} target
 * @returns {Array} an array of own and inherited enumerable keys from the target.
 */function f(e){var t=[];for(var n in e)t.push(n);return t}function y(e){return null===e||"object"!=typeof e}e.exports=c,e.exports.MemoizeMap=s},function(e,t,n){
/*!
 * Chai - addProperty utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(16),o=n(15),s=n(19),i=n(17);e.exports=function(e,t,n){n=void 0===n?function(){}:n,Object.defineProperty(e,t,{get:function e(){s()||o(this,"lockSsfi")||o(this,"ssfi",e);var t=n.call(this);if(void 0!==t)return t;var a=new r.Assertion;return i(this,a),a},configurable:!0})}},function(e,t,n){
/*!
 * Chai - addMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(20),o=n(16),s=n(15),i=n(21),a=n(17);e.exports=function(e,t,n){var c=function(){s(this,"lockSsfi")||s(this,"ssfi",c);var e=n.apply(this,arguments);if(void 0!==e)return e;var t=new o.Assertion;return a(this,t),t};r(c,t,!1),e[t]=i(c,t)}},function(e,t,n){
/*!
 * Chai - overwriteProperty utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(16),o=n(15),s=n(19),i=n(17);e.exports=function(e,t,n){var a=Object.getOwnPropertyDescriptor(e,t),c=function(){};a&&"function"==typeof a.get&&(c=a.get),Object.defineProperty(e,t,{get:function e(){s()||o(this,"lockSsfi")||o(this,"ssfi",e);var t=o(this,"lockSsfi");o(this,"lockSsfi",!0);var a=n(c).call(this);if(o(this,"lockSsfi",t),void 0!==a)return a;var u=new r.Assertion;return i(this,u),u},configurable:!0})}},function(e,t,n){
/*!
 * Chai - overwriteMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(20),o=n(16),s=n(15),i=n(21),a=n(17);e.exports=function(e,t,n){var c=e[t],u=function(){throw new Error(t+" is not a function")};c&&"function"==typeof c&&(u=c);var l=function(){s(this,"lockSsfi")||s(this,"ssfi",l);var e=s(this,"lockSsfi");s(this,"lockSsfi",!0);var t=n(u).apply(this,arguments);if(s(this,"lockSsfi",e),void 0!==t)return t;var r=new o.Assertion;return a(this,r),r};r(l,t,!1),e[t]=i(l,t)}},function(e,t,n){
/*!
 * Chai - addChainingMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(20),o=n(16),s=n(15),i=n(21),a=n(17),c="function"==typeof Object.setPrototypeOf,u=function(){},l=Object.getOwnPropertyNames(u).filter((function(e){var t=Object.getOwnPropertyDescriptor(u,e);return"object"!=typeof t||!t.configurable})),d=Function.prototype.call,p=Function.prototype.apply;e.exports=function(e,t,n,u){"function"!=typeof u&&(u=function(){});var h={method:n,chainingBehavior:u};e.__methods||(e.__methods={}),e.__methods[t]=h,Object.defineProperty(e,t,{get:function(){h.chainingBehavior.call(this);var n=function(){s(this,"lockSsfi")||s(this,"ssfi",n);var e=h.method.apply(this,arguments);if(void 0!==e)return e;var t=new o.Assertion;return a(this,t),t};if(r(n,t,!0),c){var u=Object.create(this);u.call=d,u.apply=p,Object.setPrototypeOf(n,u)}else Object.getOwnPropertyNames(e).forEach((function(t){if(-1===l.indexOf(t)){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r)}}));return a(this,n),i(n)},configurable:!0})}},function(e,t,n){
/*!
 * Chai - overwriteChainableMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(16),o=n(17);e.exports=function(e,t,n,s){var i=e.__methods[t],a=i.chainingBehavior;i.chainingBehavior=function(){var e=s(a).call(this);if(void 0!==e)return e;var t=new r.Assertion;return o(this,t),t};var c=i.method;i.method=function(){var e=n(c).apply(this,arguments);if(void 0!==e)return e;var t=new r.Assertion;return o(this,t),t}}},function(e,t,n){
/*!
 * Chai - compareByInspect utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(26);e.exports=function(e,t){return r(e)<r(t)?-1:1}},function(e,t,n){
/*!
 * Chai - getOwnEnumerableProperties utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(36);e.exports=function(e){return Object.keys(e).concat(r(e))}},function(e,t,n){"use strict";var r=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\(\/]+)/;function o(e){var t="";if(void 0===e.name){var n=String(e).match(r);n&&(t=n[1])}else t=e.name;return t}e.exports={compatibleInstance:function(e,t){return t instanceof Error&&e===t},compatibleConstructor:function(e,t){return t instanceof Error?e.constructor===t.constructor||e instanceof t.constructor:(t.prototype instanceof Error||t===Error)&&(e.constructor===t||e instanceof t)},compatibleMessage:function(e,t){var n="string"==typeof e?e:e.message;return t instanceof RegExp?t.test(n):"string"==typeof t&&-1!==n.indexOf(t)},getMessage:function(e){var t="";return e&&e.message?t=e.message:"string"==typeof e&&(t=e),t},getConstructorName:function(e){var t=e;return e instanceof Error?t=o(e.constructor):"function"==typeof e&&(t=o(e).trim()||o(new e)),t}}},function(e,t){e.exports=Number.isNaN||
/*!
 * Chai - isNaN utility
 * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
 * MIT Licensed
 */
function(e){return e!=e}},function(e,t,n){
/*!
 * chai
 * http://chaijs.com
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(18);e.exports=function(e,t){
/*!
   * Module dependencies.
   */
var n=e.AssertionError,o=t.flag;
/*!
   * Module export.
   */
/*!
   * Assertion Constructor
   *
   * Creates object for chaining.
   *
   * `Assertion` objects contain metadata in the form of flags. Three flags can
   * be assigned during instantiation by passing arguments to this constructor:
   *
   * - `object`: This flag contains the target of the assertion. For example, in
   *   the assertion `expect(numKittens).to.equal(7);`, the `object` flag will
   *   contain `numKittens` so that the `equal` assertion can reference it when
   *   needed.
   *
   * - `message`: This flag contains an optional custom error message to be
   *   prepended to the error message that's generated by the assertion when it
   *   fails.
   *
   * - `ssfi`: This flag stands for "start stack function indicator". It
   *   contains a function reference that serves as the starting point for
   *   removing frames from the stack trace of the error that's created by the
   *   assertion when it fails. The goal is to provide a cleaner stack trace to
   *   end users by removing Chai's internal functions. Note that it only works
   *   in environments that support `Error.captureStackTrace`, and only when
   *   `Chai.config.includeStack` hasn't been set to `false`.
   *
   * - `lockSsfi`: This flag controls whether or not the given `ssfi` flag
   *   should retain its current value, even as assertions are chained off of
   *   this object. This is usually set to `true` when creating a new assertion
   *   from within another assertion. It's also temporarily set to `true` before
   *   an overwritten assertion gets called by the overwriting assertion.
   *
   * @param {Mixed} obj target of the assertion
   * @param {String} msg (optional) custom error message
   * @param {Function} ssfi (optional) starting point for removing stack frames
   * @param {Boolean} lockSsfi (optional) whether or not the ssfi flag is locked
   * @api private
   */function s(e,n,r,i){return o(this,"ssfi",r||s),o(this,"lockSsfi",i),o(this,"object",e),o(this,"message",n),t.proxify(this)}e.Assertion=s,Object.defineProperty(s,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack},set:function(e){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack=e}}),Object.defineProperty(s,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff},set:function(e){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff=e}}),s.addProperty=function(e,n){t.addProperty(this.prototype,e,n)},s.addMethod=function(e,n){t.addMethod(this.prototype,e,n)},s.addChainableMethod=function(e,n,r){t.addChainableMethod(this.prototype,e,n,r)},s.overwriteProperty=function(e,n){t.overwriteProperty(this.prototype,e,n)},s.overwriteMethod=function(e,n){t.overwriteMethod(this.prototype,e,n)},s.overwriteChainableMethod=function(e,n,r){t.overwriteChainableMethod(this.prototype,e,n,r)},s.prototype.assert=function(e,s,i,a,c,u){var l=t.test(this,arguments);if(!1!==u&&(u=!0),void 0===a&&void 0===c&&(u=!1),!0!==r.showDiff&&(u=!1),!l){s=t.getMessage(this,arguments);var d=t.getActual(this,arguments);throw new n(s,{actual:d,expected:a,showDiff:u},r.includeStack?this.assert:o(this,"ssfi"))}},
/*!
   * ### ._obj
   *
   * Quick reference to stored `actual` value for plugin developers.
   *
   * @api private
   */
Object.defineProperty(s.prototype,"_obj",{get:function(){return o(this,"object")},set:function(e){o(this,"object",e)}})}},function(e,t){
/*!
 * chai
 * http://chaijs.com
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){var n=e.Assertion,r=e.AssertionError,o=t.flag;function s(e,n){n&&o(this,"message",n),e=e.toLowerCase();var r=o(this,"object"),s=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an ":"a ";this.assert(e===t.type(r).toLowerCase(),"expected #{this} to be "+s+e,"expected #{this} not to be "+s+e)}function i(e,n){return t.isNaN(e)&&t.isNaN(n)||e===n}function a(){o(this,"contains",!0)}function c(e,s){s&&o(this,"message",s);var a=o(this,"object"),c=t.type(a).toLowerCase(),u=o(this,"message"),l=o(this,"negate"),d=o(this,"ssfi"),p=o(this,"deep"),h=p?"deep ":"";u=u?u+": ":"";var f=!1;switch(c){case"string":f=-1!==a.indexOf(e);break;case"weakset":if(p)throw new r(u+"unable to use .deep.include with WeakSet",void 0,d);f=a.has(e);break;case"map":var y=p?t.eql:i;a.forEach((function(t){f=f||y(t,e)}));break;case"set":p?a.forEach((function(n){f=f||t.eql(n,e)})):f=a.has(e);break;case"array":f=p?a.some((function(n){return t.eql(n,e)})):-1!==a.indexOf(e);break;default:if(e!==Object(e))throw new r(u+"object tested must be an array, a map, an object, a set, a string, or a weakset, but "+c+" given",void 0,d);var m=Object.keys(e),b=null,g=0;if(m.forEach((function(s){var i=new n(a);if(t.transferFlags(this,i,!0),o(i,"lockSsfi",!0),l&&1!==m.length)try{i.property(s,e[s])}catch(e){if(!t.checkError.compatibleConstructor(e,r))throw e;null===b&&(b=e),g++}else i.property(s,e[s])}),this),l&&m.length>1&&g===m.length)throw b;return}this.assert(f,"expected #{this} to "+h+"include "+t.inspect(e),"expected #{this} to not "+h+"include "+t.inspect(e))}function u(){var e=o(this,"object"),n=t.type(e);this.assert("Arguments"===n,"expected #{this} to be arguments but got "+n,"expected #{this} to not be arguments")}function l(e,t){t&&o(this,"message",t);var n=o(this,"object");if(o(this,"deep")){var r=o(this,"lockSsfi");o(this,"lockSsfi",!0),this.eql(e),o(this,"lockSsfi",r)}else this.assert(e===n,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",e,this._obj,!0)}function d(e,n){n&&o(this,"message",n),this.assert(t.eql(e,o(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",e,this._obj,!0)}function p(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to above must be a number":i=l+"the argument to above must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y>e,"expected #{this} to have a "+m+" above #{exp} but got #{act}","expected #{this} to not have a "+m+" above #{exp}",e,y)}else this.assert(a>e,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",e)}function h(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to least must be a number":i=l+"the argument to least must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y>=e,"expected #{this} to have a "+m+" at least #{exp} but got #{act}","expected #{this} to have a "+m+" below #{exp}",e,y)}else this.assert(a>=e,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",e)}function f(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to below must be a number":i=l+"the argument to below must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y<e,"expected #{this} to have a "+m+" below #{exp} but got #{act}","expected #{this} to not have a "+m+" below #{exp}",e,y)}else this.assert(a<e,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",e)}function y(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to most must be a number":i=l+"the argument to most must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y<=e,"expected #{this} to have a "+m+" at most #{exp} but got #{act}","expected #{this} to have a "+m+" above #{exp}",e,y)}else this.assert(a<=e,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",e)}function m(e,n){n&&o(this,"message",n);var s=o(this,"object"),i=o(this,"ssfi"),a=o(this,"message");try{var c=s instanceof e}catch(n){if(n instanceof TypeError)throw new r((a=a?a+": ":"")+"The instanceof assertion needs a constructor but "+t.type(e)+" was given.",void 0,i);throw n}var u=t.getName(e);null===u&&(u="an unnamed constructor"),this.assert(c,"expected #{this} to be an instance of "+u,"expected #{this} to not be an instance of "+u)}function b(e,n,s){s&&o(this,"message",s);var i=o(this,"nested"),a=o(this,"own"),c=o(this,"message"),u=o(this,"object"),l=o(this,"ssfi"),d=typeof e;if(c=c?c+": ":"",i){if("string"!==d)throw new r(c+"the argument to property must be a string when using nested syntax",void 0,l)}else if("string"!==d&&"number"!==d&&"symbol"!==d)throw new r(c+"the argument to property must be a string, number, or symbol",void 0,l);if(i&&a)throw new r(c+'The "nested" and "own" flags cannot be combined.',void 0,l);if(null==u)throw new r(c+"Target cannot be null or undefined.",void 0,l);var p,h=o(this,"deep"),f=o(this,"negate"),y=i?t.getPathInfo(u,e):null,m=i?y.value:u[e],b="";h&&(b+="deep "),a&&(b+="own "),i&&(b+="nested "),b+="property ",p=a?Object.prototype.hasOwnProperty.call(u,e):i?y.exists:t.hasProperty(u,e),f&&1!==arguments.length||this.assert(p,"expected #{this} to have "+b+t.inspect(e),"expected #{this} to not have "+b+t.inspect(e)),arguments.length>1&&this.assert(p&&(h?t.eql(n,m):n===m),"expected #{this} to have "+b+t.inspect(e)+" of #{exp}, but got #{act}","expected #{this} to not have "+b+t.inspect(e)+" of #{act}",n,m),o(this,"object",m)}function g(e,t,n){o(this,"own",!0),b.apply(this,arguments)}function w(e,n,r){"string"==typeof n&&(r=n,n=null),r&&o(this,"message",r);var s=o(this,"object"),i=Object.getOwnPropertyDescriptor(Object(s),e);i&&n?this.assert(t.eql(n,i),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to match "+t.inspect(n)+", got "+t.inspect(i),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to not match "+t.inspect(n),n,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+t.inspect(e),"expected #{this} to not have an own property descriptor for "+t.inspect(e)),o(this,"object",i)}function v(){o(this,"doLength",!0)}function _(e,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=t.type(i).toLowerCase(),c=o(this,"message"),u=o(this,"ssfi"),l="length";switch(a){case"map":case"set":l="size",s=i.size;break;default:new n(i,c,u,!0).to.have.property("length"),s=i.length}this.assert(s==e,"expected #{this} to have a "+l+" of #{exp} but got #{act}","expected #{this} to not have a "+l+" of #{act}",e,s)}function x(e,t){t&&o(this,"message",t);var n=o(this,"object");this.assert(e.exec(n),"expected #{this} to match "+e,"expected #{this} not to match "+e)}function E(e){var n,s,i=o(this,"object"),a=t.type(i),c=t.type(e),u=o(this,"ssfi"),l=o(this,"deep"),d="",p=!0,h=o(this,"message"),f=(h=h?h+": ":"")+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if("Map"===a||"Set"===a)d=l?"deeply ":"",s=[],i.forEach((function(e,t){s.push(t)})),"Array"!==c&&(e=Array.prototype.slice.call(arguments));else{switch(s=t.getOwnEnumerableProperties(i),c){case"Array":if(arguments.length>1)throw new r(f,void 0,u);break;case"Object":if(arguments.length>1)throw new r(f,void 0,u);e=Object.keys(e);break;default:e=Array.prototype.slice.call(arguments)}e=e.map((function(e){return"symbol"==typeof e?e:String(e)}))}if(!e.length)throw new r(h+"keys required",void 0,u);var y=e.length,m=o(this,"any"),b=o(this,"all"),g=e;if(m||b||(b=!0),m&&(p=g.some((function(e){return s.some((function(n){return l?t.eql(e,n):e===n}))}))),b&&(p=g.every((function(e){return s.some((function(n){return l?t.eql(e,n):e===n}))})),o(this,"contains")||(p=p&&e.length==s.length)),y>1){var w=(e=e.map((function(e){return t.inspect(e)}))).pop();b&&(n=e.join(", ")+", and "+w),m&&(n=e.join(", ")+", or "+w)}else n=t.inspect(e[0]);n=(y>1?"keys ":"key ")+n,n=(o(this,"contains")?"contain ":"have ")+n,this.assert(p,"expected #{this} to "+d+n,"expected #{this} to not "+d+n,g.slice(0).sort(t.compareByInspect),s.sort(t.compareByInspect),!0)}function S(e,r,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"ssfi"),u=o(this,"message"),l=o(this,"negate")||!1;new n(a,u,c,!0).is.a("function"),(e instanceof RegExp||"string"==typeof e)&&(r=e,e=null);try{a()}catch(e){i=e}var d=void 0===e&&void 0===r,p=Boolean(e&&r),h=!1,f=!1;if(d||!d&&!l){var y="an error";e instanceof Error?y="#{exp}":e&&(y=t.checkError.getConstructorName(e)),this.assert(i,"expected #{this} to throw "+y,"expected #{this} to not throw an error but #{act} was thrown",e&&e.toString(),i instanceof Error?i.toString():"string"==typeof i?i:i&&t.checkError.getConstructorName(i))}if(e&&i&&(e instanceof Error&&t.checkError.compatibleInstance(i,e)===l&&(p&&l?h=!0:this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i&&!l?" but #{act} was thrown":""),e.toString(),i.toString())),t.checkError.compatibleConstructor(i,e)===l&&(p&&l?h=!0:this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&t.checkError.getConstructorName(e),i instanceof Error?i.toString():i&&t.checkError.getConstructorName(i)))),i&&null!=r){var m="including";r instanceof RegExp&&(m="matching"),t.checkError.compatibleMessage(i,r)===l&&(p&&l?f=!0:this.assert(l,"expected #{this} to throw error "+m+" #{exp} but got #{act}","expected #{this} to throw error not "+m+" #{exp}",r,t.checkError.getMessage(i)))}h&&f&&this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&t.checkError.getConstructorName(e),i instanceof Error?i.toString():i&&t.checkError.getConstructorName(i)),o(this,"object",i)}function O(e,n){n&&o(this,"message",n);var r=o(this,"object"),s=o(this,"itself"),i="function"!=typeof r||s?r[e]:r.prototype[e];this.assert("function"==typeof i,"expected #{this} to respond to "+t.inspect(e),"expected #{this} to not respond to "+t.inspect(e))}function P(e,n){n&&o(this,"message",n);var r=e(o(this,"object"));this.assert(r,"expected #{this} to satisfy "+t.objDisplay(e),"expected #{this} to not satisfy"+t.objDisplay(e),!o(this,"negate"),r)}function k(e,t,s){s&&o(this,"message",s);var i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");if(new n(i,a,c,!0).is.a("number"),"number"!=typeof e||"number"!=typeof t)throw new r((a=a?a+": ":"")+"the arguments to closeTo or approximately must be numbers",void 0,c);this.assert(Math.abs(i-e)<=t,"expected #{this} to be close to "+e+" +/- "+t,"expected #{this} not to be close to "+e+" +/- "+t)}function j(e,t,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),s=e[t]):(new n(e,a,c,!0).is.a("function"),s=e()),i();var u=null==t?e():e[t],l=null==t?s:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",s),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","change"),o(this,"realDelta",u!==s),this.assert(s!==u,"expected "+l+" to change","expected "+l+" to not change")}function q(e,t,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),s=e[t]):(new n(e,a,c,!0).is.a("function"),s=e()),new n(s,a,c,!0).is.a("number"),i();var u=null==t?e():e[t],l=null==t?s:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",s),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","increase"),o(this,"realDelta",u-s),this.assert(u-s>0,"expected "+l+" to increase","expected "+l+" to not increase")}function T(e,t,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),s=e[t]):(new n(e,a,c,!0).is.a("function"),s=e()),new n(s,a,c,!0).is.a("number"),i();var u=null==t?e():e[t],l=null==t?s:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",s),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","decrease"),o(this,"realDelta",s-u),this.assert(u-s<0,"expected "+l+" to decrease","expected "+l+" to not decrease")}["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still"].forEach((function(e){n.addProperty(e)})),n.addProperty("not",(function(){o(this,"negate",!0)})),n.addProperty("deep",(function(){o(this,"deep",!0)})),n.addProperty("nested",(function(){o(this,"nested",!0)})),n.addProperty("own",(function(){o(this,"own",!0)})),n.addProperty("ordered",(function(){o(this,"ordered",!0)})),n.addProperty("any",(function(){o(this,"any",!0),o(this,"all",!1)})),n.addProperty("all",(function(){o(this,"all",!0),o(this,"any",!1)})),n.addChainableMethod("an",s),n.addChainableMethod("a",s),n.addChainableMethod("include",c,a),n.addChainableMethod("contain",c,a),n.addChainableMethod("contains",c,a),n.addChainableMethod("includes",c,a),n.addProperty("ok",(function(){this.assert(o(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")})),n.addProperty("true",(function(){this.assert(!0===o(this,"object"),"expected #{this} to be true","expected #{this} to be false",!o(this,"negate"))})),n.addProperty("false",(function(){this.assert(!1===o(this,"object"),"expected #{this} to be false","expected #{this} to be true",!!o(this,"negate"))})),n.addProperty("null",(function(){this.assert(null===o(this,"object"),"expected #{this} to be null","expected #{this} not to be null")})),n.addProperty("undefined",(function(){this.assert(void 0===o(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")})),n.addProperty("NaN",(function(){this.assert(t.isNaN(o(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")})),n.addProperty("exist",(function(){var e=o(this,"object");this.assert(null!=e,"expected #{this} to exist","expected #{this} to not exist")})),n.addProperty("empty",(function(){var e,n=o(this,"object"),s=o(this,"ssfi"),i=o(this,"message");switch(i=i?i+": ":"",t.type(n).toLowerCase()){case"array":case"string":e=n.length;break;case"map":case"set":e=n.size;break;case"weakmap":case"weakset":throw new r(i+".empty was passed a weak collection",void 0,s);case"function":var a=i+".empty was passed a function "+t.getName(n);throw new r(a.trim(),void 0,s);default:if(n!==Object(n))throw new r(i+".empty was passed non-string primitive "+t.inspect(n),void 0,s);e=Object.keys(n).length}this.assert(0===e,"expected #{this} to be empty","expected #{this} not to be empty")})),n.addProperty("arguments",u),n.addProperty("Arguments",u),n.addMethod("equal",l),n.addMethod("equals",l),n.addMethod("eq",l),n.addMethod("eql",d),n.addMethod("eqls",d),n.addMethod("above",p),n.addMethod("gt",p),n.addMethod("greaterThan",p),n.addMethod("least",h),n.addMethod("gte",h),n.addMethod("below",f),n.addMethod("lt",f),n.addMethod("lessThan",f),n.addMethod("most",y),n.addMethod("lte",y),n.addMethod("within",(function(e,s,i){i&&o(this,"message",i);var a,c=o(this,"object"),u=o(this,"doLength"),l=o(this,"message"),d=l?l+": ":"",p=o(this,"ssfi"),h=t.type(c).toLowerCase(),f=t.type(e).toLowerCase(),y=t.type(s).toLowerCase(),m=!0,b="date"===f&&"date"===y?e.toUTCString()+".."+s.toUTCString():e+".."+s;if(u&&"map"!==h&&"set"!==h&&new n(c,l,p,!0).to.have.property("length"),u||"date"!==h||"date"===f&&"date"===y?"number"===f&&"number"===y||!u&&"number"!==h?u||"date"===h||"number"===h?m=!1:a=d+"expected "+("string"===h?"'"+c+"'":c)+" to be a number or a date":a=d+"the arguments to within must be numbers":a=d+"the arguments to within must be dates",m)throw new r(a,void 0,p);if(u){var g,w="length";"map"===h||"set"===h?(w="size",g=c.size):g=c.length,this.assert(g>=e&&g<=s,"expected #{this} to have a "+w+" within "+b,"expected #{this} to not have a "+w+" within "+b)}else this.assert(c>=e&&c<=s,"expected #{this} to be within "+b,"expected #{this} to not be within "+b)})),n.addMethod("instanceof",m),n.addMethod("instanceOf",m),n.addMethod("property",b),n.addMethod("ownProperty",g),n.addMethod("haveOwnProperty",g),n.addMethod("ownPropertyDescriptor",w),n.addMethod("haveOwnPropertyDescriptor",w),n.addChainableMethod("length",_,v),n.addChainableMethod("lengthOf",_,v),n.addMethod("match",x),n.addMethod("matches",x),n.addMethod("string",(function(e,r){r&&o(this,"message",r);var s=o(this,"object"),i=o(this,"message"),a=o(this,"ssfi");new n(s,i,a,!0).is.a("string"),this.assert(~s.indexOf(e),"expected #{this} to contain "+t.inspect(e),"expected #{this} to not contain "+t.inspect(e))})),n.addMethod("keys",E),n.addMethod("key",E),n.addMethod("throw",S),n.addMethod("throws",S),n.addMethod("Throw",S),n.addMethod("respondTo",O),n.addMethod("respondsTo",O),n.addProperty("itself",(function(){o(this,"itself",!0)})),n.addMethod("satisfy",P),n.addMethod("satisfies",P),n.addMethod("closeTo",k),n.addMethod("approximately",k),n.addMethod("members",(function(e,r){r&&o(this,"message",r);var s=o(this,"object"),i=o(this,"message"),a=o(this,"ssfi");new n(s,i,a,!0).to.be.an("array"),new n(e,i,a,!0).to.be.an("array");var c,u,l,d=o(this,"contains"),p=o(this,"ordered");d?(u="expected #{this} to be "+(c=p?"an ordered superset":"a superset")+" of #{exp}",l="expected #{this} to not be "+c+" of #{exp}"):(u="expected #{this} to have the same "+(c=p?"ordered members":"members")+" as #{exp}",l="expected #{this} to not have the same "+c+" as #{exp}");var h=o(this,"deep")?t.eql:void 0;this.assert(function(e,t,n,r,o){if(!r){if(e.length!==t.length)return!1;t=t.slice()}return e.every((function(e,s){if(o)return n?n(e,t[s]):e===t[s];if(!n){var i=t.indexOf(e);return-1!==i&&(r||t.splice(i,1),!0)}return t.some((function(o,s){return!!n(e,o)&&(r||t.splice(s,1),!0)}))}))}(e,s,h,d,p),u,l,e,s,!0)})),n.addMethod("oneOf",(function(e,t){t&&o(this,"message",t);var r=o(this,"object"),s=o(this,"message"),i=o(this,"ssfi");new n(e,s,i,!0).to.be.an("array"),this.assert(e.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",e,r)})),n.addMethod("change",j),n.addMethod("changes",j),n.addMethod("increase",q),n.addMethod("increases",q),n.addMethod("decrease",T),n.addMethod("decreases",T),n.addMethod("by",(function(e,t){t&&o(this,"message",t);var n,r=o(this,"deltaMsgObj"),s=o(this,"initialDeltaValue"),i=o(this,"finalDeltaValue"),a=o(this,"deltaBehavior"),c=o(this,"realDelta");n="change"===a?Math.abs(i-s)===Math.abs(e):c===Math.abs(e),this.assert(n,"expected "+r+" to "+a+" by "+e,"expected "+r+" to not "+a+" by "+e)})),n.addProperty("extensible",(function(){var e=o(this,"object"),t=e===Object(e)&&Object.isExtensible(e);this.assert(t,"expected #{this} to be extensible","expected #{this} to not be extensible")})),n.addProperty("sealed",(function(){var e=o(this,"object"),t=e!==Object(e)||Object.isSealed(e);this.assert(t,"expected #{this} to be sealed","expected #{this} to not be sealed")})),n.addProperty("frozen",(function(){var e=o(this,"object"),t=e!==Object(e)||Object.isFrozen(e);this.assert(t,"expected #{this} to be frozen","expected #{this} to not be frozen")})),n.addProperty("finite",(function(e){var t=o(this,"object");this.assert("number"==typeof t&&isFinite(t),"expected #{this} to be a finite number","expected #{this} to not be a finite number")}))}},function(e,t){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){e.expect=function(t,n){return new e.Assertion(t,n)},e.expect.fail=function(t,n,r,o){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new e.AssertionError(r,{actual:t,expected:n,operator:o},e.expect.fail)}}},function(e,t){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){var n=e.Assertion;function r(){Object.defineProperty(Object.prototype,"should",{set:function(e){Object.defineProperty(this,"should",{value:e,enumerable:!0,configurable:!0,writable:!0})},get:function e(){return this instanceof String||this instanceof Number||this instanceof Boolean||"function"==typeof Symbol&&this instanceof Symbol?new n(this.valueOf(),null,e):new n(this,null,e)},configurable:!0});var t={fail:function(n,r,o,s){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new e.AssertionError(o,{actual:n,expected:r,operator:s},t.fail)},equal:function(e,t,r){new n(e,r).to.equal(t)},Throw:function(e,t,r,o){new n(e,o).to.Throw(t,r)},exist:function(e,t){new n(e,t).to.exist},not:{}};return t.not.equal=function(e,t,r){new n(e,r).to.not.equal(t)},t.not.Throw=function(e,t,r,o){new n(e,o).to.not.Throw(t,r)},t.not.exist=function(e,t){new n(e,t).to.not.exist},t.throw=t.Throw,t.not.throw=t.not.Throw,t}e.should=r,e.Should=r}},function(e,t){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){
/*!
   * Chai dependencies.
   */
var n=e.Assertion,r=t.flag,o=e.assert=function(t,r){new n(null,null,e.assert,!0).assert(t,r,"[ negation message unavailable ]")};
/*!
   * Module export.
   */o.fail=function(t,n,r,s){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new e.AssertionError(r,{actual:t,expected:n,operator:s},o.fail)},o.isOk=function(e,t){new n(e,t,o.isOk,!0).is.ok},o.isNotOk=function(e,t){new n(e,t,o.isNotOk,!0).is.not.ok},o.equal=function(e,t,s){var i=new n(e,s,o.equal,!0);i.assert(t==r(i,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",t,e,!0)},o.notEqual=function(e,t,s){var i=new n(e,s,o.notEqual,!0);i.assert(t!=r(i,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",t,e,!0)},o.strictEqual=function(e,t,r){new n(e,r,o.strictEqual,!0).to.equal(t)},o.notStrictEqual=function(e,t,r){new n(e,r,o.notStrictEqual,!0).to.not.equal(t)},o.deepEqual=o.deepStrictEqual=function(e,t,r){new n(e,r,o.deepEqual,!0).to.eql(t)},o.notDeepEqual=function(e,t,r){new n(e,r,o.notDeepEqual,!0).to.not.eql(t)},o.isAbove=function(e,t,r){new n(e,r,o.isAbove,!0).to.be.above(t)},o.isAtLeast=function(e,t,r){new n(e,r,o.isAtLeast,!0).to.be.least(t)},o.isBelow=function(e,t,r){new n(e,r,o.isBelow,!0).to.be.below(t)},o.isAtMost=function(e,t,r){new n(e,r,o.isAtMost,!0).to.be.most(t)},o.isTrue=function(e,t){new n(e,t,o.isTrue,!0).is.true},o.isNotTrue=function(e,t){new n(e,t,o.isNotTrue,!0).to.not.equal(!0)},o.isFalse=function(e,t){new n(e,t,o.isFalse,!0).is.false},o.isNotFalse=function(e,t){new n(e,t,o.isNotFalse,!0).to.not.equal(!1)},o.isNull=function(e,t){new n(e,t,o.isNull,!0).to.equal(null)},o.isNotNull=function(e,t){new n(e,t,o.isNotNull,!0).to.not.equal(null)},o.isNaN=function(e,t){new n(e,t,o.isNaN,!0).to.be.NaN},o.isNotNaN=function(e,t){new n(e,t,o.isNotNaN,!0).not.to.be.NaN},o.exists=function(e,t){new n(e,t,o.exists,!0).to.exist},o.notExists=function(e,t){new n(e,t,o.notExists,!0).to.not.exist},o.isUndefined=function(e,t){new n(e,t,o.isUndefined,!0).to.equal(void 0)},o.isDefined=function(e,t){new n(e,t,o.isDefined,!0).to.not.equal(void 0)},o.isFunction=function(e,t){new n(e,t,o.isFunction,!0).to.be.a("function")},o.isNotFunction=function(e,t){new n(e,t,o.isNotFunction,!0).to.not.be.a("function")},o.isObject=function(e,t){new n(e,t,o.isObject,!0).to.be.a("object")},o.isNotObject=function(e,t){new n(e,t,o.isNotObject,!0).to.not.be.a("object")},o.isArray=function(e,t){new n(e,t,o.isArray,!0).to.be.an("array")},o.isNotArray=function(e,t){new n(e,t,o.isNotArray,!0).to.not.be.an("array")},o.isString=function(e,t){new n(e,t,o.isString,!0).to.be.a("string")},o.isNotString=function(e,t){new n(e,t,o.isNotString,!0).to.not.be.a("string")},o.isNumber=function(e,t){new n(e,t,o.isNumber,!0).to.be.a("number")},o.isNotNumber=function(e,t){new n(e,t,o.isNotNumber,!0).to.not.be.a("number")},o.isFinite=function(e,t){new n(e,t,o.isFinite,!0).to.be.finite},o.isBoolean=function(e,t){new n(e,t,o.isBoolean,!0).to.be.a("boolean")},o.isNotBoolean=function(e,t){new n(e,t,o.isNotBoolean,!0).to.not.be.a("boolean")},o.typeOf=function(e,t,r){new n(e,r,o.typeOf,!0).to.be.a(t)},o.notTypeOf=function(e,t,r){new n(e,r,o.notTypeOf,!0).to.not.be.a(t)},o.instanceOf=function(e,t,r){new n(e,r,o.instanceOf,!0).to.be.instanceOf(t)},o.notInstanceOf=function(e,t,r){new n(e,r,o.notInstanceOf,!0).to.not.be.instanceOf(t)},o.include=function(e,t,r){new n(e,r,o.include,!0).include(t)},o.notInclude=function(e,t,r){new n(e,r,o.notInclude,!0).not.include(t)},o.deepInclude=function(e,t,r){new n(e,r,o.deepInclude,!0).deep.include(t)},o.notDeepInclude=function(e,t,r){new n(e,r,o.notDeepInclude,!0).not.deep.include(t)},o.nestedInclude=function(e,t,r){new n(e,r,o.nestedInclude,!0).nested.include(t)},o.notNestedInclude=function(e,t,r){new n(e,r,o.notNestedInclude,!0).not.nested.include(t)},o.deepNestedInclude=function(e,t,r){new n(e,r,o.deepNestedInclude,!0).deep.nested.include(t)},o.notDeepNestedInclude=function(e,t,r){new n(e,r,o.notDeepNestedInclude,!0).not.deep.nested.include(t)},o.ownInclude=function(e,t,r){new n(e,r,o.ownInclude,!0).own.include(t)},o.notOwnInclude=function(e,t,r){new n(e,r,o.notOwnInclude,!0).not.own.include(t)},o.deepOwnInclude=function(e,t,r){new n(e,r,o.deepOwnInclude,!0).deep.own.include(t)},o.notDeepOwnInclude=function(e,t,r){new n(e,r,o.notDeepOwnInclude,!0).not.deep.own.include(t)},o.match=function(e,t,r){new n(e,r,o.match,!0).to.match(t)},o.notMatch=function(e,t,r){new n(e,r,o.notMatch,!0).to.not.match(t)},o.property=function(e,t,r){new n(e,r,o.property,!0).to.have.property(t)},o.notProperty=function(e,t,r){new n(e,r,o.notProperty,!0).to.not.have.property(t)},o.propertyVal=function(e,t,r,s){new n(e,s,o.propertyVal,!0).to.have.property(t,r)},o.notPropertyVal=function(e,t,r,s){new n(e,s,o.notPropertyVal,!0).to.not.have.property(t,r)},o.deepPropertyVal=function(e,t,r,s){new n(e,s,o.deepPropertyVal,!0).to.have.deep.property(t,r)},o.notDeepPropertyVal=function(e,t,r,s){new n(e,s,o.notDeepPropertyVal,!0).to.not.have.deep.property(t,r)},o.ownProperty=function(e,t,r){new n(e,r,o.ownProperty,!0).to.have.own.property(t)},o.notOwnProperty=function(e,t,r){new n(e,r,o.notOwnProperty,!0).to.not.have.own.property(t)},o.ownPropertyVal=function(e,t,r,s){new n(e,s,o.ownPropertyVal,!0).to.have.own.property(t,r)},o.notOwnPropertyVal=function(e,t,r,s){new n(e,s,o.notOwnPropertyVal,!0).to.not.have.own.property(t,r)},o.deepOwnPropertyVal=function(e,t,r,s){new n(e,s,o.deepOwnPropertyVal,!0).to.have.deep.own.property(t,r)},o.notDeepOwnPropertyVal=function(e,t,r,s){new n(e,s,o.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(t,r)},o.nestedProperty=function(e,t,r){new n(e,r,o.nestedProperty,!0).to.have.nested.property(t)},o.notNestedProperty=function(e,t,r){new n(e,r,o.notNestedProperty,!0).to.not.have.nested.property(t)},o.nestedPropertyVal=function(e,t,r,s){new n(e,s,o.nestedPropertyVal,!0).to.have.nested.property(t,r)},o.notNestedPropertyVal=function(e,t,r,s){new n(e,s,o.notNestedPropertyVal,!0).to.not.have.nested.property(t,r)},o.deepNestedPropertyVal=function(e,t,r,s){new n(e,s,o.deepNestedPropertyVal,!0).to.have.deep.nested.property(t,r)},o.notDeepNestedPropertyVal=function(e,t,r,s){new n(e,s,o.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(t,r)},o.lengthOf=function(e,t,r){new n(e,r,o.lengthOf,!0).to.have.lengthOf(t)},o.hasAnyKeys=function(e,t,r){new n(e,r,o.hasAnyKeys,!0).to.have.any.keys(t)},o.hasAllKeys=function(e,t,r){new n(e,r,o.hasAllKeys,!0).to.have.all.keys(t)},o.containsAllKeys=function(e,t,r){new n(e,r,o.containsAllKeys,!0).to.contain.all.keys(t)},o.doesNotHaveAnyKeys=function(e,t,r){new n(e,r,o.doesNotHaveAnyKeys,!0).to.not.have.any.keys(t)},o.doesNotHaveAllKeys=function(e,t,r){new n(e,r,o.doesNotHaveAllKeys,!0).to.not.have.all.keys(t)},o.hasAnyDeepKeys=function(e,t,r){new n(e,r,o.hasAnyDeepKeys,!0).to.have.any.deep.keys(t)},o.hasAllDeepKeys=function(e,t,r){new n(e,r,o.hasAllDeepKeys,!0).to.have.all.deep.keys(t)},o.containsAllDeepKeys=function(e,t,r){new n(e,r,o.containsAllDeepKeys,!0).to.contain.all.deep.keys(t)},o.doesNotHaveAnyDeepKeys=function(e,t,r){new n(e,r,o.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(t)},o.doesNotHaveAllDeepKeys=function(e,t,r){new n(e,r,o.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(t)},o.throws=function(e,t,s,i){("string"==typeof t||t instanceof RegExp)&&(s=t,t=null);var a=new n(e,i,o.throws,!0).to.throw(t,s);return r(a,"object")},o.doesNotThrow=function(e,t,r,s){("string"==typeof t||t instanceof RegExp)&&(r=t,t=null),new n(e,s,o.doesNotThrow,!0).to.not.throw(t,r)},o.operator=function(s,i,a,c){var u;switch(i){case"==":u=s==a;break;case"===":u=s===a;break;case">":u=s>a;break;case">=":u=s>=a;break;case"<":u=s<a;break;case"<=":u=s<=a;break;case"!=":u=s!=a;break;case"!==":u=s!==a;break;default:throw c=c?c+": ":c,new e.AssertionError(c+'Invalid operator "'+i+'"',void 0,o.operator)}var l=new n(u,c,o.operator,!0);l.assert(!0===r(l,"object"),"expected "+t.inspect(s)+" to be "+i+" "+t.inspect(a),"expected "+t.inspect(s)+" to not be "+i+" "+t.inspect(a))},o.closeTo=function(e,t,r,s){new n(e,s,o.closeTo,!0).to.be.closeTo(t,r)},o.approximately=function(e,t,r,s){new n(e,s,o.approximately,!0).to.be.approximately(t,r)},o.sameMembers=function(e,t,r){new n(e,r,o.sameMembers,!0).to.have.same.members(t)},o.notSameMembers=function(e,t,r){new n(e,r,o.notSameMembers,!0).to.not.have.same.members(t)},o.sameDeepMembers=function(e,t,r){new n(e,r,o.sameDeepMembers,!0).to.have.same.deep.members(t)},o.notSameDeepMembers=function(e,t,r){new n(e,r,o.notSameDeepMembers,!0).to.not.have.same.deep.members(t)},o.sameOrderedMembers=function(e,t,r){new n(e,r,o.sameOrderedMembers,!0).to.have.same.ordered.members(t)},o.notSameOrderedMembers=function(e,t,r){new n(e,r,o.notSameOrderedMembers,!0).to.not.have.same.ordered.members(t)},o.sameDeepOrderedMembers=function(e,t,r){new n(e,r,o.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(t)},o.notSameDeepOrderedMembers=function(e,t,r){new n(e,r,o.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(t)},o.includeMembers=function(e,t,r){new n(e,r,o.includeMembers,!0).to.include.members(t)},o.notIncludeMembers=function(e,t,r){new n(e,r,o.notIncludeMembers,!0).to.not.include.members(t)},o.includeDeepMembers=function(e,t,r){new n(e,r,o.includeDeepMembers,!0).to.include.deep.members(t)},o.notIncludeDeepMembers=function(e,t,r){new n(e,r,o.notIncludeDeepMembers,!0).to.not.include.deep.members(t)},o.includeOrderedMembers=function(e,t,r){new n(e,r,o.includeOrderedMembers,!0).to.include.ordered.members(t)},o.notIncludeOrderedMembers=function(e,t,r){new n(e,r,o.notIncludeOrderedMembers,!0).to.not.include.ordered.members(t)},o.includeDeepOrderedMembers=function(e,t,r){new n(e,r,o.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(t)},o.notIncludeDeepOrderedMembers=function(e,t,r){new n(e,r,o.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(t)},o.oneOf=function(e,t,r){new n(e,r,o.oneOf,!0).to.be.oneOf(t)},o.changes=function(e,t,r,s){3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.changes,!0).to.change(t,r)},o.changesBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.changesBy,!0).to.change(t,r).by(s)},o.doesNotChange=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.doesNotChange,!0).to.not.change(t,r)},o.changesButNotBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.changesButNotBy,!0).to.change(t,r).but.not.by(s)},o.increases=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.increases,!0).to.increase(t,r)},o.increasesBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.increasesBy,!0).to.increase(t,r).by(s)},o.doesNotIncrease=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.doesNotIncrease,!0).to.not.increase(t,r)},o.increasesButNotBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.increasesButNotBy,!0).to.increase(t,r).but.not.by(s)},o.decreases=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.decreases,!0).to.decrease(t,r)},o.decreasesBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.decreasesBy,!0).to.decrease(t,r).by(s)},o.doesNotDecrease=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.doesNotDecrease,!0).to.not.decrease(t,r)},o.doesNotDecreaseBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);return new n(e,i,o.doesNotDecreaseBy,!0).to.not.decrease(t,r).by(s)},o.decreasesButNotBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.decreasesButNotBy,!0).to.decrease(t,r).but.not.by(s)}
/*!
   * ### .ifError(object)
   *
   * Asserts if value is not a false value, and throws if it is a true value.
   * This is added to allow for chai to be a drop-in replacement for Node's
   * assert class.
   *
   *     var err = new Error('I am a custom error');
   *     assert.ifError(err); // Rethrows err!
   *
   * @name ifError
   * @param {Object} object
   * @namespace Assert
   * @api public
   */,o.ifError=function(e){if(e)throw e},o.isExtensible=function(e,t){new n(e,t,o.isExtensible,!0).to.be.extensible},o.isNotExtensible=function(e,t){new n(e,t,o.isNotExtensible,!0).to.not.be.extensible},o.isSealed=function(e,t){new n(e,t,o.isSealed,!0).to.be.sealed},o.isNotSealed=function(e,t){new n(e,t,o.isNotSealed,!0).to.not.be.sealed},o.isFrozen=function(e,t){new n(e,t,o.isFrozen,!0).to.be.frozen},o.isNotFrozen=function(e,t){new n(e,t,o.isNotFrozen,!0).to.not.be.frozen},o.isEmpty=function(e,t){new n(e,t,o.isEmpty,!0).to.be.empty},o.isNotEmpty=function(e,t){new n(e,t,o.isNotEmpty,!0).to.not.be.empty},
/*!
   * Aliases.
   */
function e(t,n){return o[n]=o[t],e}("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")}},function(e,t,n){var r=n(22),o=n(37),s=n(24);e.exports=function(e){var t={};return"function"==typeof e&&(e=s.createServer(e)),r.forEach((function(n){t[n]=function(t){return new o(e,n,t)}})),t.del=t.delete,t},e.exports.Test=o,e.exports.agent=n(90)},function(e,t){e.exports=n(67)},function(e,t,n){var r=n(69).IncomingForm;r.IncomingForm=r,e.exports=r},function(e,t,n){var r;global.GENTLY&&(r=GENTLY.hijack(n(70)));var o=r("crypto"),s=r("fs"),i=r("util"),a=r("path"),c=r("./file"),u=r("./multipart_parser").MultipartParser,l=r("./querystring_parser").QuerystringParser,d=r("./octet_parser").OctetParser,p=r("./json_parser").JSONParser,h=r("string_decoder").StringDecoder,f=r("events").EventEmitter,y=r("stream").Stream,m=r("os");function b(e){return this instanceof b?(f.call(this),e=e||{},this.error=null,this.ended=!1,this.maxFields=e.maxFields||1e3,this.maxFieldsSize=e.maxFieldsSize||20971520,this.maxFileSize=e.maxFileSize||209715200,this.keepExtensions=e.keepExtensions||!1,this.uploadDir=e.uploadDir||m.tmpdir&&m.tmpdir()||m.tmpDir(),this.encoding=e.encoding||"utf-8",this.headers=null,this.type=null,this.hash=e.hash||!1,this.multiples=e.multiples||!1,this.bytesReceived=null,this.bytesExpected=null,this._parser=null,this._flushing=0,this._fieldsSize=0,this._fileSize=0,this.openedFiles=[],this):new b(e)}i.inherits(b,f),t.IncomingForm=b,b.prototype.parse=function(e,t){if(this.pause=function(){try{e.pause()}catch(e){return this.ended||this._error(e),!1}return!0},this.resume=function(){try{e.resume()}catch(e){return this.ended||this._error(e),!1}return!0},t){var n={},r={};this.on("field",(function(e,t){n[e]=t})).on("file",(function(e,t){this.multiples&&r[e]?(Array.isArray(r[e])||(r[e]=[r[e]]),r[e].push(t)):r[e]=t})).on("error",(function(e){t(e,n,r)})).on("end",(function(){t(null,n,r)}))}this.writeHeaders(e.headers);var o=this;return e.on("error",(function(e){o._error(e)})).on("aborted",(function(){o.emit("aborted"),o._error(new Error("Request aborted"))})).on("data",(function(e){o.write(e)})).on("end",(function(){if(!o.error){var e=o._parser.end();e&&o._error(e)}})),this},b.prototype.writeHeaders=function(e){this.headers=e,this._parseContentLength(),this._parseContentType()},b.prototype.write=function(e){if(!this.error){if(this._parser){this.bytesReceived+=e.length,this.emit("progress",this.bytesReceived,this.bytesExpected);var t=this._parser.write(e);return t!==e.length&&this._error(new Error("parser error, "+t+" of "+e.length+" bytes parsed")),t}this._error(new Error("uninitialized parser"))}},b.prototype.pause=function(){return!1},b.prototype.resume=function(){return!1},b.prototype.onPart=function(e){this.handlePart(e)},b.prototype.handlePart=function(e){var t=this;if(void 0===e.filename){var n="",r=new h(this.encoding);return e.on("data",(function(e){t._fieldsSize+=e.length,t._fieldsSize>t.maxFieldsSize?t._error(new Error("maxFieldsSize exceeded, received "+t._fieldsSize+" bytes of field data")):n+=r.write(e)})),void e.on("end",(function(){t.emit("field",e.name,n)}))}this._flushing++;var o=new c({path:this._uploadPath(e.filename),name:e.filename,type:e.mime,hash:t.hash});this.emit("fileBegin",e.name,o),o.open(),this.openedFiles.push(o),e.on("data",(function(e){t._fileSize+=e.length,t._fileSize>t.maxFileSize?t._error(new Error("maxFileSize exceeded, received "+t._fileSize+" bytes of file data")):0!=e.length&&(t.pause(),o.write(e,(function(){t.resume()})))})),e.on("end",(function(){o.end((function(){t._flushing--,t.emit("file",e.name,o),t._maybeEnd()}))}))},b.prototype._parseContentType=function(){if(0!==this.bytesExpected)if(this.headers["content-type"])if(this.headers["content-type"].match(/octet-stream/i))this._initOctetStream();else if(this.headers["content-type"].match(/urlencoded/i))this._initUrlencoded();else if(this.headers["content-type"].match(/multipart/i)){var e=this.headers["content-type"].match(/boundary=(?:"([^"]+)"|([^;]+))/i);e?this._initMultipart(e[1]||e[2]):this._error(new Error("bad content-type header, no multipart boundary"))}else this.headers["content-type"].match(/json/i)?this._initJSONencoded():this._error(new Error("bad content-type header, unknown content-type: "+this.headers["content-type"]));else this._error(new Error("bad content-type header, no content-type"));else this._parser=function(e){return{end:function(){return e.ended=!0,e._maybeEnd(),null}}}(this)},b.prototype._error=function(e){this.error||this.ended||(this.error=e,this.emit("error",e),Array.isArray(this.openedFiles)&&this.openedFiles.forEach((function(e){e._writeStream.destroy(),setTimeout(s.unlink,0,e.path,(function(e){}))})))},b.prototype._parseContentLength=function(){this.bytesReceived=0,this.headers["content-length"]?this.bytesExpected=parseInt(this.headers["content-length"],10):void 0===this.headers["transfer-encoding"]&&(this.bytesExpected=0),null!==this.bytesExpected&&this.emit("progress",this.bytesReceived,this.bytesExpected)},b.prototype._newParser=function(){return new u},b.prototype._initMultipart=function(e){this.type="multipart";var t,n,r,o=new u,s=this;o.initWithBoundary(e),o.onPartBegin=function(){(r=new y).readable=!0,r.headers={},r.name=null,r.filename=null,r.mime=null,r.transferEncoding="binary",r.transferBuffer="",t="",n=""},o.onHeaderField=function(e,n,r){t+=e.toString(s.encoding,n,r)},o.onHeaderValue=function(e,t,r){n+=e.toString(s.encoding,t,r)},o.onHeaderEnd=function(){t=t.toLowerCase(),r.headers[t]=n;var e=n.match(/\bname=("([^"]*)"|([^\(\)<>@,;:\\"\/\[\]\?=\{\}\s\t/]+))/i);"content-disposition"==t?(e&&(r.name=e[2]||e[3]||""),r.filename=s._fileName(n)):"content-type"==t?r.mime=n:"content-transfer-encoding"==t&&(r.transferEncoding=n.toLowerCase()),t="",n=""},o.onHeadersEnd=function(){switch(r.transferEncoding){case"binary":case"7bit":case"8bit":o.onPartData=function(e,t,n){r.emit("data",e.slice(t,n))},o.onPartEnd=function(){r.emit("end")};break;case"base64":o.onPartData=function(e,t,n){r.transferBuffer+=e.slice(t,n).toString("ascii");var o=4*parseInt(r.transferBuffer.length/4,10);r.emit("data",new Buffer(r.transferBuffer.substring(0,o),"base64")),r.transferBuffer=r.transferBuffer.substring(o)},o.onPartEnd=function(){r.emit("data",new Buffer(r.transferBuffer,"base64")),r.emit("end")};break;default:return s._error(new Error("unknown transfer-encoding"))}s.onPart(r)},o.onEnd=function(){s.ended=!0,s._maybeEnd()},this._parser=o},b.prototype._fileName=function(e){var t=e.match(/\bfilename=("(.*?)"|([^\(\)<>@,;:\\"\/\[\]\?=\{\}\s\t/]+))($|;\s)/i);if(t){var n=t[2]||t[3]||"",r=n.substr(n.lastIndexOf("\\")+1);return(r=r.replace(/%22/g,'"')).replace(/&#([\d]{4});/g,(function(e,t){return String.fromCharCode(t)}))}},b.prototype._initUrlencoded=function(){this.type="urlencoded";var e=new l(this.maxFields),t=this;e.onField=function(e,n){t.emit("field",e,n)},e.onEnd=function(){t.ended=!0,t._maybeEnd()},this._parser=e},b.prototype._initOctetStream=function(){this.type="octet-stream";var e=this.headers["x-file-name"],t=this.headers["content-type"],n=new c({path:this._uploadPath(e),name:e,type:t});this.emit("fileBegin",e,n),n.open(),this.openedFiles.push(n),this._flushing++;var r=this;r._parser=new d;var o=0;r._parser.on("data",(function(e){r.pause(),o++,n.write(e,(function(){o--,r.resume(),r.ended&&r._parser.emit("doneWritingFile")}))})),r._parser.on("end",(function(){r._flushing--,r.ended=!0;var e=function(){n.end((function(){r.emit("file","file",n),r._maybeEnd()}))};0===o?e():r._parser.once("doneWritingFile",e)}))},b.prototype._initJSONencoded=function(){this.type="json";var e=new p(this),t=this;e.onField=function(e,n){t.emit("field",e,n)},e.onEnd=function(){t.ended=!0,t._maybeEnd()},this._parser=e},b.prototype._uploadPath=function(e){var t="upload_"+o.randomBytes(16).toString("hex");if(this.keepExtensions){var n=a.extname(e);t+=n=n.replace(/(\.[a-z0-9]+).*/i,"$1")}return a.join(this.uploadDir,t)},b.prototype._maybeEnd=function(){!this.ended||this._flushing||this.error||this.emit("end")}},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=70},function(e,t){e.exports=n(71)},function(e,t,n){"use strict";const r=n(28),o=n(29),s=n(73);function i(e){o.call(this);const t=this.res=e.res;this.request=e,this.req=e.req,this.text=t.text,this.body=void 0!==t.body?t.body:{},this.files=t.files||{},this.buffered="string"==typeof this.text,this.header=this.headers=t.headers,this._setStatusProperties(t.statusCode),this._setHeaderProperties(this.header),this.setEncoding=t.setEncoding.bind(t),t.on("data",this.emit.bind(this,"data")),t.on("end",this.emit.bind(this,"end")),t.on("close",this.emit.bind(this,"close")),t.on("error",this.emit.bind(this,"error"))}e.exports=i,r.inherits(i,o),s(i.prototype),i.prototype.destroy=function(e){this.res.destroy(e)},i.prototype.pause=function(){this.res.pause()},i.prototype.resume=function(){this.res.resume()},i.prototype.toError=function(){const e=this.req,t=e.method,n=e.path,r=`cannot ${t} ${n} (${this.status})`,o=new Error(r);return o.status=this.status,o.text=this.text,o.method=t,o.path=n,o},i.prototype.setStatusProperties=function(e){return console.warn("In superagent 2.x setStatusProperties is a private method"),this._setStatusProperties(e)},i.prototype.toJSON=function(){return{req:this.request.toJSON(),header:this.header,status:this.status,text:this.text}}},function(e,t,n){"use strict";var r=n(38);function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}e.exports=o,o.prototype.get=function(e){return this.header[e.toLowerCase()]},o.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=r.type(t);var n=r.params(t);for(var o in n)this[o]=n[o];this.links={};try{e.link&&(this.links=r.parseLinks(e.link))}catch(e){}},o.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}},function(e,t,n){"use strict";const r=n(75).StringDecoder,o=n(29),s=n(39);t.unzip=(e,t)=>{const n=s.createUnzip(),i=new o;let a;i.req=e,n.on("error",e=>{e&&"Z_BUF_ERROR"===e.code?i.emit("end"):i.emit("error",e)}),t.pipe(n),t.setEncoding=e=>{a=new r(e)},n.on("data",e=>{if(a){const t=a.write(e);t.length&&i.emit("data",t)}else i.emit("data",e)}),n.on("end",()=>{i.emit("end")});const c=t.on;t.on=function(e,n){return"data"==e||"end"==e?i.on(e,n):"error"==e?(i.on(e,n),c.call(t,e,n)):c.call(t,e,n),this}}},function(e,t){e.exports=n(75)},function(e,t){e.exports=n(76)},function(e,t){e.exports=n(77)},function(e,t){e.exports=n(78)},function(e){e.exports=JSON.parse('{"name":"superagent","version":"3.8.3","description":"elegant & feature rich browser / node HTTP with a fluent API","scripts":{"prepare":"make all","test":"make test"},"keywords":["http","ajax","request","agent"],"license":"MIT","author":"TJ Holowaychuk <tj@vision-media.ca>","contributors":["Kornel Lesiński <kornel@geekhood.net>","Peter Lyons <pete@peterlyons.com>","Hunter Loftis <hunter@hunterloftis.com>"],"repository":{"type":"git","url":"git://github.com/visionmedia/superagent.git"},"dependencies":{"component-emitter":"^1.2.0","cookiejar":"^2.1.0","debug":"^3.1.0","extend":"^3.0.0","form-data":"^2.3.1","formidable":"^1.2.0","methods":"^1.1.1","mime":"^1.4.1","qs":"^6.5.1","readable-stream":"^2.3.5"},"devDependencies":{"Base64":"^1.0.1","basic-auth-connect":"^1.0.0","body-parser":"^1.18.2","browserify":"^14.1.0","cookie-parser":"^1.4.3","express":"^4.16.3","express-session":"^1.15.6","marked":"0.3.12","mocha":"^3.5.3","multer":"^1.3.0","should":"^11.2.0","should-http":"^0.1.1","zuul":"^3.11.1"},"browser":{"./lib/node/index.js":"./lib/client.js","./test/support/server.js":"./test/support/blank.js"},"component":{"scripts":{"superagent":"lib/client.js"}},"main":"./lib/node/index.js","engines":{"node":">= 4.0"}}')},function(e,t,n){"use strict";var r=n(81);function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}e.exports=o,o.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},o.prototype.parse=function(e){return this._parser=e,this},o.prototype.responseType=function(e){return this._responseType=e,this},o.prototype.serialize=function(e){return this._serializer=e,this},o.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},o.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var s=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];o.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(e,t);if(!0===n)return!0;if(!1===n)return!1}catch(e){console.error(e)}if(t&&t.status&&t.status>=500&&501!=t.status)return!0;if(e){if(e.code&&~s.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},o.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},o.prototype.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(e,t){n.end((function(n,r){n?t(n):e(r)}))}))}return this._fullfilledPromise.then(e,t)},o.prototype.catch=function(e){return this.then(void 0,e)},o.prototype.use=function(e){return e(this),this},o.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},o.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},o.prototype.get=function(e){return this._header[e.toLowerCase()]},o.prototype.getHeader=o.prototype.get,o.prototype.set=function(e,t){if(r(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},o.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},o.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),r(e)){for(var n in e)this.field(n,e[n]);return this}if(Array.isArray(t)){for(var o in t)this.field(e,t[o]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},o.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},o.prototype._auth=function(e,t,n,r){switch(n.type){case"basic":this.set("Authorization","Basic "+r(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},o.prototype.withCredentials=function(e){return null==e&&(e=!0),this._withCredentials=e,this},o.prototype.redirects=function(e){return this._maxRedirects=e,this},o.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},o.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},o.prototype.send=function(e){var t=r(e),n=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&r(this._data))for(var o in e)this._data[o]=e[o];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(n||this.type("json"),this)},o.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},o.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var n=this.url.substring(t+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,t)+"?"+n.join("&")}}},o.prototype._appendQueryString=function(){console.trace("Unsupported")},o.prototype._timeoutError=function(e,t,n){if(!this._aborted){var r=new Error(e+t+"ms exceeded");r.timeout=t,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},o.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))}},function(e,t,n){"use strict";e.exports=function(e){return null!==e&&"object"==typeof e}},function(e,t,n){"use strict";const r=n(30).CookieJar,o=n(30).CookieAccessInfo,s=n(23).parse,i=n(27),a=n(83);let c=n(22);function u(e){if(!(this instanceof u))return new u(e);a.call(this),this.jar=new r,e&&(e.ca&&this.ca(e.ca),e.key&&this.key(e.key),e.pfx&&this.pfx(e.pfx),e.cert&&this.cert(e.cert))}e.exports=u,u.prototype=Object.create(a.prototype),u.prototype._saveCookies=function(e){const t=e.headers["set-cookie"];t&&this.jar.setCookies(t)},u.prototype._attachCookies=function(e){const t=s(e.url),n=o(t.hostname,t.pathname,"https:"==t.protocol),r=this.jar.getCookies(n).toValueString();e.cookies=r},c.forEach(e=>{const t=e.toUpperCase();u.prototype[e]=function(e,n){const r=new i.Request(t,e);return r.on("response",this._saveCookies.bind(this)),r.on("redirect",this._saveCookies.bind(this)),r.on("redirect",this._attachCookies.bind(this,r)),this._attachCookies(r),this._setDefaults(r),n&&r.end(n),r}}),u.prototype.del=u.prototype.delete},function(e,t){function n(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach((function(e){n.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}})),n.prototype._setDefaults=function(e){this._defaults.forEach((function(t){e[t.fn].apply(e,t.arguments)}))},e.exports=n},function(e,t,n){"use strict";t["application/x-www-form-urlencoded"]=n(85),t["application/json"]=n(86),t.text=n(87);const r=n(88);t["application/octet-stream"]=r,t["application/pdf"]=r,t.image=r},function(e,t,n){"use strict";const r=n(41);e.exports=function(e,t){e.text="",e.setEncoding("ascii"),e.on("data",t=>{e.text+=t}),e.on("end",()=>{try{t(null,r.parse(e.text))}catch(e){t(e)}})}},function(e,t,n){"use strict";e.exports=function(e,t){e.text="",e.setEncoding("utf8"),e.on("data",t=>{e.text+=t}),e.on("end",()=>{try{var n=e.text&&JSON.parse(e.text)}catch(t){var r=t;r.rawResponse=e.text||null,r.statusCode=e.statusCode}finally{t(r,n)}})}},function(e,t,n){"use strict";e.exports=function(e,t){e.text="",e.setEncoding("utf8"),e.on("data",t=>{e.text+=t}),e.on("end",t)}},function(e,t,n){"use strict";e.exports=(e,t)=>{const n=[];e.on("data",e=>{n.push(e)}),e.on("end",()=>{t(null,Buffer.concat(n))})}},function(e,t){e.exports=n(89)},function(e,t,n){var r=n(27).agent,o=n(22),s=n(24),i=n(37);function a(e,t){if(!(this instanceof a))return new a(e,t);"function"==typeof e&&(e=s.createServer(e)),t&&(this._ca=t.ca,this._key=t.key,this._cert=t.cert),r.call(this),this.app=e}e.exports=a,Object.setPrototypeOf(a.prototype,r.prototype),a.prototype.host=function(e){return this._host=e,this},o.forEach((function(e){a.prototype[e]=function(t,n){var r=new i(this.app,e.toUpperCase(),t,this._host);return r.ca(this._ca),r.cert(this._cert),r.key(this._key),r.on("response",this._saveCookies.bind(this)),r.on("redirect",this._saveCookies.bind(this)),r.on("redirect",this._attachCookies.bind(this,r)),this._attachCookies(r),this._setDefaults(r),r}})),a.prototype.del=a.prototype.delete},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(14).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(42),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(10),A=n.n(C),L=n(11),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(10)},function(e,t){e.exports=n(11)},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(9);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(13)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(14)},function(e,t){
/*!
 * Chai - flag utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t,n){var r=e.__flags||(e.__flags=Object.create(null));if(3!==arguments.length)return r[t];r[t]=n}},function(e,t,n){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=[];
/*!
 * Chai version
 */t.version="4.2.0",
/*!
 * Assertion Error
 */
t.AssertionError=n(31);
/*!
 * Utils for plugins (not exported)
 */
var o=n(44);t.use=function(e){return~r.indexOf(e)||(e(t,o),r.push(e)),t},
/*!
 * Utility Functions
 */
t.util=o;
/*!
 * Configuration
 */
var s=n(18);t.config=s;
/*!
 * Primary `Assertion` prototype
 */
var i=n(61);t.use(i);
/*!
 * Core Assertions
 */
var a=n(62);t.use(a);
/*!
 * Expect interface
 */
var c=n(63);t.use(c);
/*!
 * Should interface
 */
var u=n(64);t.use(u);
/*!
 * Assert interface
 */
var l=n(65);t.use(l)},function(e,t){
/*!
 * Chai - transferFlags utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t,n){var r=e.__flags||(e.__flags=Object.create(null));for(var o in t.__flags||(t.__flags=Object.create(null)),n=3!==arguments.length||n,r)(n||"object"!==o&&"ssfi"!==o&&"lockSsfi"!==o&&"message"!=o)&&(t.__flags[o]=r[o])}},function(e,t){e.exports={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"]}},function(e,t,n){var r=n(18);
/*!
 * Chai - isProxyEnabled helper
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */e.exports=function(){return r.useProxy&&"undefined"!=typeof Proxy&&"undefined"!=typeof Reflect}},function(e,t){var n=Object.getOwnPropertyDescriptor((function(){}),"length");
/*!
 * Chai - addLengthGuard utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */e.exports=function(e,t,r){return n.configurable?(Object.defineProperty(e,"length",{get:function(){if(r)throw Error("Invalid Chai property: "+t+'.length. Due to a compatibility issue, "length" cannot directly follow "'+t+'". Use "'+t+'.lengthOf" instead.');throw Error("Invalid Chai property: "+t+'.length. See docs for proper usage of "'+t+'".')}}),e):e}},function(e,t,n){var r=n(18),o=n(15),s=n(35),i=n(19),a=["__flags","__methods","_obj","assert"];e.exports=function(e,t){return i()?new Proxy(e,{get:function e(n,i){if("string"==typeof i&&-1===r.proxyExcludedKeys.indexOf(i)&&!Reflect.has(n,i)){if(t)throw Error("Invalid Chai property: "+t+"."+i+'. See docs for proper usage of "'+t+'".');var c=null,u=4;throw s(n).forEach((function(e){if(!Object.prototype.hasOwnProperty(e)&&-1===a.indexOf(e)){var t=function(e,t,n){if(Math.abs(e.length-t.length)>=n)return n;for(var r=[],o=0;o<=e.length;o++)r[o]=Array(t.length+1).fill(0),r[o][0]=o;for(var s=0;s<t.length;s++)r[0][s]=s;for(o=1;o<=e.length;o++){var i=e.charCodeAt(o-1);for(s=1;s<=t.length;s++)Math.abs(o-s)>=n?r[o][s]=n:r[o][s]=Math.min(r[o-1][s]+1,r[o][s-1]+1,r[o-1][s-1]+(i===t.charCodeAt(s-1)?0:1))}return r[e.length][t.length]}(i,e,u);t<u&&(c=e,u=t)}})),null!==c?Error("Invalid Chai property: "+i+'. Did you mean "'+c+'"?'):Error("Invalid Chai property: "+i)}return-1!==a.indexOf(i)||o(n,"lockSsfi")||o(n,"ssfi",e),Reflect.get(n,i)}}):e}},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t,n){var r;r=function(){"use strict";var e="function"==typeof Promise,t="object"==typeof self?self:global,n="undefined"!=typeof Symbol,r="undefined"!=typeof Map,o="undefined"!=typeof Set,s="undefined"!=typeof WeakMap,i="undefined"!=typeof WeakSet,a="undefined"!=typeof DataView,c=n&&void 0!==Symbol.iterator,u=n&&void 0!==Symbol.toStringTag,l=o&&"function"==typeof Set.prototype.entries,d=r&&"function"==typeof Map.prototype.entries,p=l&&Object.getPrototypeOf((new Set).entries()),h=d&&Object.getPrototypeOf((new Map).entries()),f=c&&"function"==typeof Array.prototype[Symbol.iterator],y=f&&Object.getPrototypeOf([][Symbol.iterator]()),m=c&&"function"==typeof String.prototype[Symbol.iterator],b=m&&Object.getPrototypeOf(""[Symbol.iterator]());return function(n){var c=typeof n;if("object"!==c)return c;if(null===n)return"null";if(n===t)return"global";if(Array.isArray(n)&&(!1===u||!(Symbol.toStringTag in n)))return"Array";if("object"==typeof window&&null!==window){if("object"==typeof window.location&&n===window.location)return"Location";if("object"==typeof window.document&&n===window.document)return"Document";if("object"==typeof window.navigator){if("object"==typeof window.navigator.mimeTypes&&n===window.navigator.mimeTypes)return"MimeTypeArray";if("object"==typeof window.navigator.plugins&&n===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"==typeof window.HTMLElement)&&n instanceof window.HTMLElement){if("BLOCKQUOTE"===n.tagName)return"HTMLQuoteElement";if("TD"===n.tagName)return"HTMLTableDataCellElement";if("TH"===n.tagName)return"HTMLTableHeaderCellElement"}}var l=u&&n[Symbol.toStringTag];if("string"==typeof l)return l;var d=Object.getPrototypeOf(n);return d===RegExp.prototype?"RegExp":d===Date.prototype?"Date":e&&d===Promise.prototype?"Promise":o&&d===Set.prototype?"Set":r&&d===Map.prototype?"Map":i&&d===WeakSet.prototype?"WeakSet":s&&d===WeakMap.prototype?"WeakMap":a&&d===DataView.prototype?"DataView":r&&d===h?"Map Iterator":o&&d===p?"Set Iterator":f&&d===y?"Array Iterator":m&&d===b?"String Iterator":null===d?"Object":Object.prototype.toString.call(n).slice(8,-1)}},e.exports=r()},function(e,t,n){var r=n(34),o=n(35),s=n(49),i=n(18);e.exports=function(e,t,n,r){return c({showHidden:t,seen:[],stylize:function(e){return e}},e,void 0===n?2:n)};var a=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&"nodeType"in e&&1===e.nodeType&&"string"==typeof e.nodeName};function c(e,n,y){if(n&&"function"==typeof n.inspect&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var m=n.inspect(y,e);return"string"!=typeof m&&(m=c(e,m,y)),m}var b=function(e,t){switch(typeof t){case"undefined":return e.stylize("undefined","undefined");case"string":var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string");case"number":return 0===t&&1/t==-1/0?e.stylize("-0","number"):e.stylize(""+t,"number");case"boolean":return e.stylize(""+t,"boolean");case"symbol":return e.stylize(t.toString(),"symbol")}if(null===t)return e.stylize("null","null")}(e,n);if(b)return b;if(a(n)){if("outerHTML"in n)return n.outerHTML;try{if(document.xmlVersion)return(new XMLSerializer).serializeToString(n);var g=document.createElementNS("http://www.w3.org/1999/xhtml","_");g.appendChild(n.cloneNode(!1));var w=g.innerHTML.replace("><",">"+n.innerHTML+"<");return g.innerHTML="",w}catch(e){}}var v,_,x=s(n),E=e.showHidden?o(n):x;if(0===E.length||h(n)&&(1===E.length&&"stack"===E[0]||2===E.length&&"description"===E[0]&&"stack"===E[1])){if("function"==typeof n)return _=(v=r(n))?": "+v:"",e.stylize("[Function"+_+"]","special");if(d(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(p(n))return e.stylize(Date.prototype.toUTCString.call(n),"date");if(h(n))return u(n)}var S,O,P="",k=!1,j=!1,q=["{","}"];if("object"==typeof(S=n)&&/\w+Array]$/.test(f(S))&&(j=!0,q=["[","]"]),function(e){return Array.isArray(e)||"object"==typeof e&&"[object Array]"===f(e)}(n)&&(k=!0,q=["[","]"]),"function"==typeof n&&(P=" [Function"+(_=(v=r(n))?": "+v:"")+"]"),d(n)&&(P=" "+RegExp.prototype.toString.call(n)),p(n)&&(P=" "+Date.prototype.toUTCString.call(n)),h(n))return u(n);if(0===E.length&&(!k||0==n.length))return q[0]+P+q[1];if(y<0)return d(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");if(e.seen.push(n),k)O=function(e,t,n,r,o){for(var s=[],i=0,a=t.length;i<a;++i)Object.prototype.hasOwnProperty.call(t,String(i))?s.push(l(e,t,n,r,String(i),!0)):s.push("");return o.forEach((function(o){o.match(/^\d+$/)||s.push(l(e,t,n,r,o,!0))})),s}(e,n,y,x,E);else{if(j)return function(e){for(var t="[ ",n=0;n<e.length;++n){if(t.length>=i.truncateThreshold-7){t+="...";break}t+=e[n]+", "}return-1!==(t+=" ]").indexOf(",  ]")&&(t=t.replace(",  ]"," ]")),t}(n);O=E.map((function(t){return l(e,n,y,x,t,k)}))}return e.seen.pop(),function(e,t,n){return e.reduce((function(e,t){return e+t.length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(O,P,q)}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,n,r,o,s){var i,a,u=Object.getOwnPropertyDescriptor(t,o);if(u&&(u.get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special"))),r.indexOf(o)<0&&(i="["+o+"]"),a||(e.seen.indexOf(t[o])<0?(a=c(e,t[o],null===n?null:n-1)).indexOf("\n")>-1&&(a=s?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),void 0===i){if(s&&o.match(/^\d+$/))return a;(i=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+a}function d(e){return"object"==typeof e&&"[object RegExp]"===f(e)}function p(e){return"object"==typeof e&&"[object Date]"===f(e)}function h(e){return"object"==typeof e&&"[object Error]"===f(e)}function f(e){return Object.prototype.toString.call(e)}},function(e,t,n){"use strict";const r=n(67)("superagent"),o=n(68),s=n(71),i=n(72),a=n(23).parse,c=n(23).format,u=n(23).resolve;let l=n(22);const d=n(29),p=n(38),h=n(74).unzip,f=n(76),y=n(77),m=n(40),b=n(24),g=n(78),w=n(41),v=n(39),_=n(28),x=n(79),E=n(80),S=n(30);function O(e,n){return"function"==typeof n?new t.Request("GET",e).end(n):1==arguments.length?new t.Request("GET",e):new t.Request(e,n)}function P(){}function k(e){const t=`node-superagent/${x.version}`;e._header={"user-agent":t},e.header={"User-Agent":t}}function j(e,t){d.call(this),"string"!=typeof t&&(t=c(t)),this._agent=!1,this._formData=null,this.method=e,this.url=t,k(this),this.writable=!0,this._redirects=0,this.redirects("HEAD"===e?0:5),this.cookies="",this.qs={},this._query=[],this.qsRaw=this._query,this._redirectList=[],this._streamRequest=!1,this.once("end",this.clearTimeout.bind(this))}function q(e){return/[\/+]json($|[^-\w])/.test(e)}function T(e){return~[301,302,303,305,307,308].indexOf(e)}(t=e.exports=O).Request=j,t.agent=n(82),t.Response=i,y.define({"application/x-www-form-urlencoded":["form","urlencoded","form-data"]},!0),t.protocols={"http:":b,"https:":m},t.serialize={"application/x-www-form-urlencoded":w.stringify,"application/json":JSON.stringify},t.parse=n(84),_.inherits(j,d),E(j.prototype),j.prototype.attach=function(e,t,n){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");let o=n||{};"string"==typeof n&&(o={filename:n}),"string"==typeof t?(o.filename||(o.filename=t),r("creating `fs.ReadStream` instance for file: %s",t),t=g.createReadStream(t)):!o.filename&&t.path&&(o.filename=t.path),this._getFormData().append(e,t,o)}return this},j.prototype._getFormData=function(){return this._formData||(this._formData=new s,this._formData.on("error",e=>{this.emit("error",e),this.abort()})),this._formData},j.prototype.agent=function(e){return arguments.length?(this._agent=e,this):this._agent},j.prototype.type=function(e){return this.set("Content-Type",~e.indexOf("/")?e:y.lookup(e))},j.prototype.accept=function(e){return this.set("Accept",~e.indexOf("/")?e:y.lookup(e))},j.prototype.query=function(e){return"string"==typeof e?this._query.push(e):f(this.qs,e),this},j.prototype.write=function(e,t){const n=this.request();return this._streamRequest||(this._streamRequest=!0),n.write(e,t)},j.prototype.pipe=function(e,t){return this.piped=!0,this.buffer(!1),this.end(),this._pipeContinue(e,t)},j.prototype._pipeContinue=function(e,t){return this.req.once("response",n=>{if(T(n.statusCode)&&this._redirects++!=this._maxRedirects)return this._redirect(n)._pipeContinue(e,t);if(this.res=n,this._emitResponse(),!this._aborted){if(this._shouldUnzip(n)){const r=v.createUnzip();r.on("error",t=>{t&&"Z_BUF_ERROR"===t.code?e.emit("end"):e.emit("error",t)}),n.pipe(r).pipe(e,t)}else n.pipe(e,t);n.once("end",()=>{this.emit("end")})}}),e},j.prototype.buffer=function(e){return this._buffer=!1!==e,this},j.prototype._redirect=function(e){let t=e.headers.location;if(!t)return this.callback(new Error("No location header for redirect"),e);r("redirect %s -> %s",this.url,t),t=u(this.url,t),e.resume();let n=this.req._headers;const o=a(t).host!==a(this.url).host;return 301!=e.statusCode&&302!=e.statusCode||(n=p.cleanHeader(this.req._headers,o),this.method="HEAD"==this.method?"HEAD":"GET",this._data=null),303==e.statusCode&&(n=p.cleanHeader(this.req._headers,o),this.method="GET",this._data=null),delete n.host,delete this.req,delete this._formData,k(this),this._endCalled=!1,this.url=t,this.qs={},this._query.length=0,this.set(n),this.emit("redirect",e),this._redirectList.push(this.url),this.end(this._callback),this},j.prototype.auth=function(e,t,n){1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(n=t,t=""),n||(n={type:"basic"});var r=function(e){return new Buffer(e).toString("base64")};return this._auth(e,t,n,r)},j.prototype.ca=function(e){return this._ca=e,this},j.prototype.key=function(e){return this._key=e,this},j.prototype.pfx=function(e){return"object"!=typeof e||Buffer.isBuffer(e)?this._pfx=e:(this._pfx=e.pfx,this._passphrase=e.passphrase),this},j.prototype.cert=function(e){return this._cert=e,this},j.prototype.request=function(){if(this.req)return this.req;const e={};try{const e=w.stringify(this.qs,{indices:!1,strictNullHandling:!0});e&&(this.qs={},this._query.push(e)),this._finalizeQueryString()}catch(e){return this.emit("error",e)}let n=this.url;const r=this._retries;if(0!=n.indexOf("http")&&(n=`http://${n}`),n=a(n),!0===/^https?\+unix:/.test(n.protocol)){n.protocol=`${n.protocol.split("+")[0]}:`;const t=n.path.match(/^([^/]+)(.+)$/);e.socketPath=t[1].replace(/%2F/g,"/"),n.path=t[2]}e.method=this.method,e.port=n.port,e.path=n.path,e.host=n.hostname,e.ca=this._ca,e.key=this._key,e.pfx=this._pfx,e.cert=this._cert,e.passphrase=this._passphrase,e.agent=this._agent;const o=t.protocols[n.protocol],s=this.req=o.request(e);if(s.setNoDelay(!0),"HEAD"!=e.method&&s.setHeader("Accept-Encoding","gzip, deflate"),this.protocol=n.protocol,this.host=n.host,s.once("drain",()=>{this.emit("drain")}),s.once("error",e=>{this._aborted||this._retries===r&&(this.response||this.callback(e))}),n.auth){const e=n.auth.split(":");this.auth(e[0],e[1])}this.username&&this.password&&this.auth(this.username,this.password);for(const e in this.header)this.header.hasOwnProperty(e)&&s.setHeader(e,this.header[e]);if(this.cookies)if(this.header.hasOwnProperty("cookie")){const e=new S.CookieJar;e.setCookies(this.header.cookie.split(";")),e.setCookies(this.cookies.split(";")),s.setHeader("Cookie",e.getCookies(S.CookieAccessInfo.All).toValueString())}else s.setHeader("Cookie",this.cookies);return s},j.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();const n=this._callback||P;if(this.clearTimeout(),this.called)return console.warn("superagent: double callback bug");if(this.called=!0,!e)try{if(!this._isResponseOK(t)){let n="Unsuccessful HTTP response";t&&(n=b.STATUS_CODES[t.status]||n),(e=new Error(n)).status=t?t.status:void 0}}catch(t){e=t}if(!e)return n(null,t);e.response=t,this._maxRetries&&(e.retries=this._retries-1),e&&this.listeners("error").length>0&&this.emit("error",e),n(e,t)},j.prototype._isHost=function(e){return Buffer.isBuffer(e)||e instanceof d||e instanceof s},j.prototype._emitResponse=function(e,t){const n=new i(this);return this.response=n,n.redirects=this._redirectList,void 0!==e&&(n.body=e),n.files=t,this.emit("response",n),n},j.prototype.end=function(e){return this.request(),r("%s %s",this.method,this.url),this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||P,this._end()},j.prototype._end=function(){let e=this._data;const n=this.req;let s=this._buffer;const i=this.method;if(this._setTimeouts(),"HEAD"!=i&&!n._headerSent){if("string"!=typeof e){let r=n.getHeader("Content-Type");r&&(r=r.split(";")[0]);let o=t.serialize[r];!o&&q(r)&&(o=t.serialize["application/json"]),o&&(e=o(e))}e&&!n.getHeader("Content-Length")&&n.setHeader("Content-Length",Buffer.isBuffer(e)?e.length:Buffer.byteLength(e))}n.once("response",e=>{if(r("%s %s -> %s",this.method,this.url,e.statusCode),this._responseTimeoutTimer&&clearTimeout(this._responseTimeoutTimer),this.piped)return;const i=this._maxRedirects,a=p.type(e.headers["content-type"]||"")||"text/plain",c=a.split("/")[0],u="multipart"==c,l=T(e.statusCode);let d=this._parser;const f=this._responseType;if(this.res=e,l&&this._redirects++!=i)return this._redirect(e);if("HEAD"==this.method)return this.emit("end"),void this.callback(null,this._emitResponse());if(this._shouldUnzip(e)&&h(n,e),!d)if(f)d=t.parse.image,s=!0;else if(u){const e=new o.IncomingForm;d=e.parse.bind(e),s=!0}else!function(e){const t=e.split("/")[0];return"image"==t||"video"==t}(a)?t.parse[a]?d=t.parse[a]:"text"==c?(d=t.parse.text,s=!1!==s):q(a)?(d=t.parse["application/json"],s=!1!==s):s&&(d=t.parse.text):(d=t.parse.image,s=!0);(void 0===s&&function(e){const t=e.split("/"),n=t[0],r=t[1];return"text"==n||"x-www-form-urlencoded"==r}(a)||q(a))&&(s=!0);let y=!1;if(s){let t=this._maxResponseSize||2e8;e.on("data",n=>{if((t-=n.byteLength||n.length)<0){const t=Error("Maximum response size reached");t.code="ETOOLARGE",y=!1,e.destroy(t)}})}if(d)try{y=s,d(e,(e,t,n)=>{if(!this.timedout)return e&&!this._aborted?this.callback(e):void(y&&(this.emit("end"),this.callback(null,this._emitResponse(t,n))))})}catch(e){return void this.callback(e)}if(this.res=e,s)e.once("error",e=>{y=!1,this.callback(e,null)}),y||e.once("end",()=>{r("end %s %s",this.method,this.url),this.emit("end"),this.callback(null,this._emitResponse())});else{if(r("unbuffered %s %s",this.method,this.url),this.callback(null,this._emitResponse()),u)return;e.once("end",()=>{r("end %s %s",this.method,this.url),this.emit("end")})}}),this.emit("request",this);const a=()=>{const e=n.getHeader("Content-Length");let t=0;const r=new d.Transform;return r._transform=(n,r,o)=>{t+=n.length,this.emit("progress",{direction:"upload",lengthComputable:!0,loaded:t,total:e}),o(null,n)},r},c=this._formData;if(c){const e=c.getHeaders();for(const t in e)r('setting FormData header: "%s: %s"',t,e[t]),n.setHeader(t,e[t]);c.getLength((e,t)=>{r("got FormData Content-Length: %s",t),"number"==typeof t&&n.setHeader("Content-Length",t),c.pipe(a()).pipe(n)})}else Buffer.isBuffer(e)?(e=>{const t=new d.Readable,n=e.length,r=n%16384,o=n-r;for(let n=0;n<o;n+=16384){const r=e.slice(n,n+16384);t.push(r)}if(r>0){const n=e.slice(-r);t.push(n)}return t.push(null),t})(e).pipe(a()).pipe(n):n.end(e);return this},j.prototype._shouldUnzip=e=>204!==e.statusCode&&304!==e.statusCode&&"0"!==e.headers["content-length"]&&/^\s*(?:deflate|gzip)\s*$/.test(e.headers["content-encoding"]),-1==l.indexOf("del")&&(l=l.slice(0)).push("del"),l.forEach(e=>{const t=e;e=(e="del"==e?"delete":e).toUpperCase(),O[t]=(t,n,r)=>{const o=O(e,t);return"function"==typeof n&&(r=n,n=null),n&&("GET"===e||"HEAD"===e?o.query(n):o.send(n)),r&&o.end(r),o}})},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){!function(){"use strict";function e(t,n,r,o){return this instanceof e?(this.domain=t||void 0,this.path=n||"/",this.secure=!!r,this.script=!!o,this):new e(t,n,r,o)}function n(e,t,r){return e instanceof n?e:this instanceof n?(this.name=null,this.value=null,this.expiration_date=1/0,this.path=String(r||"/"),this.explicit_path=!1,this.domain=t||null,this.explicit_domain=!1,this.secure=!1,this.noscript=!1,e&&this.parse(e,t,r),this):new n(e,t,r)}e.All=Object.freeze(Object.create(null)),t.CookieAccessInfo=e,t.Cookie=n,n.prototype.toString=function(){var e=[this.name+"="+this.value];return this.expiration_date!==1/0&&e.push("expires="+new Date(this.expiration_date).toGMTString()),this.domain&&e.push("domain="+this.domain),this.path&&e.push("path="+this.path),this.secure&&e.push("secure"),this.noscript&&e.push("httponly"),e.join("; ")},n.prototype.toValueString=function(){return this.name+"="+this.value};var r=/[:](?=\s*[a-zA-Z0-9_\-]+\s*[=])/g;function o(){var e,t;return this instanceof o?(e=Object.create(null),this.setCookie=function(r,o,s){var i,a;if(i=(r=new n(r,o,s)).expiration_date<=Date.now(),void 0!==e[r.name]){for(t=e[r.name],a=0;a<t.length;a+=1)if(t[a].collidesWith(r))return i?(t.splice(a,1),0===t.length&&delete e[r.name],!1):(t[a]=r,r);return!i&&(t.push(r),r)}return!i&&(e[r.name]=[r],e[r.name])},this.getCookie=function(n,r){var o,s;if(t=e[n])for(s=0;s<t.length;s+=1)if((o=t[s]).expiration_date<=Date.now())0===t.length&&delete e[o.name];else if(o.matches(r))return o},this.getCookies=function(t){var n,r,o=[];for(n in e)(r=this.getCookie(n,t))&&o.push(r);return o.toString=function(){return o.join(":")},o.toValueString=function(){return o.map((function(e){return e.toValueString()})).join(";")},o},this):new o}n.prototype.parse=function(e,t,r){if(this instanceof n){var o,s=e.split(";").filter((function(e){return!!e})),i=s[0].match(/([^=]+)=([\s\S]*)/);if(!i)return void console.warn("Invalid cookie header encountered. Header: '"+e+"'");var a=i[1],c=i[2];if("string"!=typeof a||0===a.length||"string"!=typeof c)return void console.warn("Unable to extract values from cookie header. Cookie: '"+e+"'");for(this.name=a,this.value=c,o=1;o<s.length;o+=1)switch(a=(i=s[o].match(/([^=]+)(?:=([\s\S]*))?/))[1].trim().toLowerCase(),c=i[2],a){case"httponly":this.noscript=!0;break;case"expires":this.expiration_date=c?Number(Date.parse(c)):1/0;break;case"path":this.path=c?c.trim():"",this.explicit_path=!0;break;case"domain":this.domain=c?c.trim():"",this.explicit_domain=!!this.domain;break;case"secure":this.secure=!0}return this.explicit_path||(this.path=r||"/"),this.explicit_domain||(this.domain=t),this}return(new n).parse(e,t,r)},n.prototype.matches=function(t){return t===e.All||!(this.noscript&&t.script||this.secure&&!t.secure||!this.collidesWith(t))},n.prototype.collidesWith=function(e){if(this.path&&!e.path||this.domain&&!e.domain)return!1;if(this.path&&0!==e.path.indexOf(this.path))return!1;if(this.explicit_path&&0!==e.path.indexOf(this.path))return!1;var t=e.domain&&e.domain.replace(/^[\.]/,""),n=this.domain&&this.domain.replace(/^[\.]/,"");if(n===t)return!0;if(n){if(!this.explicit_domain)return!1;var r=t.indexOf(n);return-1!==r&&r===t.length-n.length}return!0},t.CookieJar=o,o.prototype.setCookies=function(e,t,o){var s,i,a=[];for(e=(e=Array.isArray(e)?e:e.split(r)).map((function(e){return new n(e,t,o)})),s=0;s<e.length;s+=1)i=e[s],this.setCookie(i,t,o)&&a.push(i);return a}}()},function(e,t){
/*!
 * assertion-error
 * Copyright(c) 2013 Jake Luer <jake@qualiancy.com>
 * MIT Licensed
 */
/*!
 * Return a function that will copy properties from
 * one object to another excluding any originally
 * listed. Returned function will create a new `{}`.
 *
 * @param {String} excluded properties ...
 * @return {Function}
 */
function n(){var e=[].slice.call(arguments);function t(t,n){Object.keys(n).forEach((function(r){~e.indexOf(r)||(t[r]=n[r])}))}return function(){for(var e=[].slice.call(arguments),n=0,r={};n<e.length;n++)t(r,e[n]);return r}}function r(e,t,o){var s=n("name","message","stack","constructor","toJSON")(t||{});for(var i in this.message=e||"Unspecified AssertionError",this.showDiff=!1,s)this[i]=s[i];if(o=o||r,Error.captureStackTrace)Error.captureStackTrace(this,o);else try{throw new Error}catch(e){this.stack=e.stack}}
/*!
 * Inherit from Error.prototype
 */
/*!
 * Primary Exports
 */e.exports=r,r.prototype=Object.create(Error.prototype),
/*!
 * Statically set name
 */
r.prototype.name="AssertionError",
/*!
 * Ensure correct constructor
 */
r.prototype.constructor=r,r.prototype.toJSON=function(e){var t=n("constructor","toJSON","stack")({name:this.name},this);return!1!==e&&this.stack&&(t.stack=this.stack),t}},function(e,t){
/*!
 * Chai - getActual utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){return t.length>4?t[4]:e._obj}},function(e,t,n){
/*!
 * Chai - flag utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(26),o=n(18);e.exports=function(e){var t=r(e),n=Object.prototype.toString.call(e);if(o.truncateThreshold&&t.length>=o.truncateThreshold){if("[object Function]"===n)return e.name&&""!==e.name?"[Function: "+e.name+"]":"[Function]";if("[object Array]"===n)return"[ Array("+e.length+") ]";if("[object Object]"===n){var s=Object.keys(e);return"{ Object ("+(s.length>2?s.splice(0,2).join(", ")+", ...":s.join(", "))+") }"}return t}return t}},function(e,t,n){"use strict";var r=Function.prototype.toString,o=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\s\(\/]+)/;e.exports=function(e){if("function"!=typeof e)return null;var t="";if(void 0===Function.prototype.name&&void 0===e.name){var n=r.call(e).match(o);n&&(t=n[1])}else t=e.name;return t}},function(e,t){
/*!
 * Chai - getProperties utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e){var t=Object.getOwnPropertyNames(e);function n(e){-1===t.indexOf(e)&&t.push(e)}for(var r=Object.getPrototypeOf(e);null!==r;)Object.getOwnPropertyNames(r).forEach(n),r=Object.getPrototypeOf(r);return t}},function(e,t){
/*!
 * Chai - getOwnEnumerablePropertySymbols utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e){return"function"!=typeof Object.getOwnPropertySymbols?[]:Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))}},function(e,t,n){var r=n(27),o=n(28),s=n(24),i=n(40),a=n(89),c=r.Request;function u(e,t,n,r){c.call(this,t.toUpperCase(),n),this.redirects(0),this.buffer(),this.app=e,this._asserts=[],this.url="string"==typeof e?e+n:this.serverAddress(e,n,r)}function l(e,t,n){var r=new Error(e);return r.expected=t,r.actual=n,r.showDiff=!0,r}e.exports=u,Object.setPrototypeOf(u.prototype,c.prototype),u.prototype.serverAddress=function(e,t,n){var r;return e.address()||(this._server=e.listen(0)),r=e.address().port,(e instanceof i.Server?"https":"http")+"://"+(n||"127.0.0.1")+":"+r+t},u.prototype.expect=function(e,t,n){return"function"==typeof e?(this._asserts.push(e),this):("function"==typeof t&&this.end(t),"function"==typeof n&&this.end(n),"number"==typeof e?(this._asserts.push(this._assertStatus.bind(this,e)),"function"!=typeof t&&arguments.length>1&&this._asserts.push(this._assertBody.bind(this,t)),this):"string"==typeof t||"number"==typeof t||t instanceof RegExp?(this._asserts.push(this._assertHeader.bind(this,{name:""+e,value:t})),this):(this._asserts.push(this._assertBody.bind(this,e)),this))},u.prototype.end=function(e){var t=this,n=this._server;return c.prototype.end.call(this,(function(r,o){if(n&&n._handle)return n.close(s);function s(){t.assert(r,o,e)}s()})),this},u.prototype.assert=function(e,t,n){var r,o,s={ECONNREFUSED:"Connection refused",ECONNRESET:"Connection reset by peer",EPIPE:"Broken pipe",ETIMEDOUT:"Operation timed out"};for(!t&&e&&(r=e instanceof Error&&"connect"===e.syscall&&Object.getOwnPropertyNames(s).indexOf(e.code)>=0?new Error(e.code+": "+s[e.code]):e),o=0;o<this._asserts.length&&!r;o+=1)r=this._assertFunction(this._asserts[o],t);r||!(e instanceof Error)||t&&e.status===t.status||(r=e),n.call(this,r||null,t)},u.prototype._assertBody=function(e,t){var n,r,s=e instanceof RegExp;if("object"!=typeof e||s){if(e!==t.text){if(n=o.inspect(e),r=o.inspect(t.text),!s)return l("expected "+n+" response body, got "+r,e,t.body);if(!e.test(t.text))return l("expected body "+r+" to match "+e,e,t.body)}}else try{a.deepStrictEqual(e,t.body)}catch(s){return l("expected "+(n=o.inspect(e))+" response body, got "+(r=o.inspect(t.body)),e,t.body)}},u.prototype._assertHeader=function(e,t){var n=e.name,r=t.header[n.toLowerCase()],o=e.value;return void 0===r?new Error('expected "'+n+'" header field'):Array.isArray(r)&&r.toString()===o||o===r?void 0:o instanceof RegExp?o.test(r)?void 0:new Error('expected "'+n+'" matching '+o+', got "'+r+'"'):new Error('expected "'+n+'" of "'+o+'", got "'+r+'"')},u.prototype._assertStatus=function(e,t){var n,r;if(t.status!==e)return n=s.STATUS_CODES[e],r=s.STATUS_CODES[t.status],new Error("expected "+e+' "'+n+'", got '+t.status+' "'+r+'"')},u.prototype._assertFunction=function(e,t){var n;try{n=e(t)}catch(e){n=e}if(n instanceof Error)return n}},function(e,t,n){"use strict";t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){return e.split(/ *; */).reduce((function(e,t){var n=t.split(/ *= */),r=n.shift(),o=n.shift();return r&&o&&(e[r]=o),e}),{})},t.parseLinks=function(e){return e.split(/ *, */).reduce((function(e,t){var n=t.split(/ *; */),r=n[0].slice(1,-1);return e[n[1].split(/ *= */)[1].slice(1,-1)]=r,e}),{})},t.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},function(e,t){e.exports=n(39)},function(e,t){e.exports=n(40)},function(e,t){e.exports=n(41)},function(e,t,n){const{expect:r}=n(43),o=n(66);n(91);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){e.exports=n(16)},function(e,t,n){
/*!
 * chai
 * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Dependencies that are used for multiple exports are required here only once
 */
var r=n(45);
/*!
 * test utility
 */t.test=n(46),
/*!
 * type utility
 */
t.type=n(25),
/*!
 * expectTypes utility
 */
t.expectTypes=n(47),
/*!
 * message utility
 */
t.getMessage=n(48),
/*!
 * actual utility
 */
t.getActual=n(32),
/*!
 * Inspect util
 */
t.inspect=n(26),
/*!
 * Object Display util
 */
t.objDisplay=n(33),
/*!
 * Flag utility
 */
t.flag=n(15),
/*!
 * Flag transferring utility
 */
t.transferFlags=n(17),
/*!
 * Deep equal utility
 */
t.eql=n(50),
/*!
 * Deep path info
 */
t.getPathInfo=r.getPathInfo,
/*!
 * Check if a property exists
 */
t.hasProperty=r.hasProperty,
/*!
 * Function name
 */
t.getName=n(34),
/*!
 * add Property
 */
t.addProperty=n(51),
/*!
 * add Method
 */
t.addMethod=n(52),
/*!
 * overwrite Property
 */
t.overwriteProperty=n(53),
/*!
 * overwrite Method
 */
t.overwriteMethod=n(54),
/*!
 * Add a chainable method
 */
t.addChainableMethod=n(55),
/*!
 * Overwrite chainable method
 */
t.overwriteChainableMethod=n(56),
/*!
 * Compare by inspect method
 */
t.compareByInspect=n(57),
/*!
 * Get own enumerable property symbols method
 */
t.getOwnEnumerablePropertySymbols=n(36),
/*!
 * Get own enumerable properties method
 */
t.getOwnEnumerableProperties=n(58),
/*!
 * Checks error against a given set of criteria
 */
t.checkError=n(59),
/*!
 * Proxify util
 */
t.proxify=n(21),
/*!
 * addLengthGuard util
 */
t.addLengthGuard=n(20),
/*!
 * isProxyEnabled helper
 */
t.isProxyEnabled=n(19),
/*!
 * isNaN method
 */
t.isNaN=n(60)},function(e,t,n){"use strict";function r(e,t){return null!=e&&t in Object(e)}function o(e){return e.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map((function(e){var t=/^\[(\d+)\]$/.exec(e);return t?{i:parseFloat(t[1])}:{p:e.replace(/\\([.\[\]])/g,"$1")}}))}function s(e,t,n){var r=e,o=null;n=void 0===n?t.length:n;for(var s=0;s<n;s++){var i=t[s];r&&(r=void 0===i.p?r[i.i]:r[i.p],s===n-1&&(o=r))}return o}function i(e,t){var n=o(t),i=n[n.length-1],a={parent:n.length>1?s(e,n,n.length-1):e,name:i.p||i.i,value:s(e,n)};return a.exists=r(a.parent,a.name),a}e.exports={hasProperty:r,getPathInfo:i,getPathValue:function(e,t){return i(e,t).value},setPathValue:function(e,t,n){return function(e,t,n){for(var r=e,o=n.length,s=null,i=0;i<o;i++){var a=null,c=null;if(s=n[i],i===o-1)r[a=void 0===s.p?s.i:s.p]=t;else if(void 0!==s.p&&r[s.p])r=r[s.p];else if(void 0!==s.i&&r[s.i])r=r[s.i];else{var u=n[i+1];a=void 0===s.p?s.i:s.p,c=void 0===u.p?[]:{},r[a]=c,r=r[a]}}}(e,n,o(t)),e}}},function(e,t,n){
/*!
 * Chai - test utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(15);e.exports=function(e,t){var n=r(e,"negate"),o=t[0];return n?!o:o}},function(e,t,n){
/*!
 * Chai - expectTypes utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(31),o=n(15),s=n(25);e.exports=function(e,t){var n=o(e,"message"),i=o(e,"ssfi");n=n?n+": ":"",e=o(e,"object"),(t=t.map((function(e){return e.toLowerCase()}))).sort();var a=t.map((function(e,n){var r=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an":"a";return(t.length>1&&n===t.length-1?"or ":"")+r+" "+e})).join(", "),c=s(e).toLowerCase();if(!t.some((function(e){return c===e})))throw new r(n+"object tested must be "+a+", but "+c+" given",void 0,i)}},function(e,t,n){
/*!
 * Chai - message composition utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(15),o=n(32),s=n(33);e.exports=function(e,t){var n=r(e,"negate"),i=r(e,"object"),a=t[3],c=o(e,t),u=n?t[2]:t[1],l=r(e,"message");return"function"==typeof u&&(u=u()),u=(u=u||"").replace(/#\{this\}/g,(function(){return s(i)})).replace(/#\{act\}/g,(function(){return s(c)})).replace(/#\{exp\}/g,(function(){return s(a)})),l?l+": "+u:u}},function(e,t){
/*!
 * Chai - getEnumerableProperties utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e){var t=[];for(var n in e)t.push(n);return t}},function(e,t,n){"use strict";
/*!
 * deep-eql
 * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */var r=n(25);function o(){this._key="chai/deep-eql__"+Math.random()+Date.now()}o.prototype={get:function(e){return e[this._key]},set:function(e,t){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:t,configurable:!0})}};var s="function"==typeof WeakMap?WeakMap:o;
/*!
 * Check to see if the MemoizeMap has recorded a result of the two operands
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {MemoizeMap} memoizeMap
 * @returns {Boolean|null} result
*/function i(e,t,n){if(!n||y(e)||y(t))return null;var r=n.get(e);if(r){var o=r.get(t);if("boolean"==typeof o)return o}return null}
/*!
 * Set the result of the equality into the MemoizeMap
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {MemoizeMap} memoizeMap
 * @param {Boolean} result
*/function a(e,t,n,r){if(n&&!y(e)&&!y(t)){var o=n.get(e);o?o.set(t,r):((o=new s).set(t,r),n.set(e,o))}}
/*!
 * Primary Export
 */function c(e,t,n){if(n&&n.comparator)return l(e,t,n);var r=u(e,t);return null!==r?r:l(e,t,n)}function u(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t||!y(e)&&!y(t)&&null}
/*!
 * The main logic of the `deepEqual` function.
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Object} [options] (optional) Additional options
 * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
 * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
    complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
    references to blow the stack.
 * @return {Boolean} equal match
*/function l(e,t,n){(n=n||{}).memoize=!1!==n.memoize&&(n.memoize||new s);var o=n&&n.comparator,l=i(e,t,n.memoize);if(null!==l)return l;var y=i(t,e,n.memoize);if(null!==y)return y;if(o){var m=o(e,t);if(!1===m||!0===m)return a(e,t,n.memoize,m),m;var b=u(e,t);if(null!==b)return b}var g=r(e);if(g!==r(t))return a(e,t,n.memoize,!1),!1;a(e,t,n.memoize,!0);var w=function(e,t,n,r){switch(n){case"String":case"Number":case"Boolean":case"Date":return c(e.valueOf(),t.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":case"Error":return e===t;case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return d(e,t,r);case"RegExp":
/*!
 * Compare two Regular Expressions for equality.
 *
 * @param {RegExp} leftHandOperand
 * @param {RegExp} rightHandOperand
 * @return {Boolean} result
 */
return function(e,t){return e.toString()===t.toString()}
/*!
 * Compare two Sets/Maps for equality. Faster than other equality functions.
 *
 * @param {Set} leftHandOperand
 * @param {Set} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */(e,t);case"Generator":
/*!
 * Simple equality for generator objects such as those returned by generator functions.
 *
 * @param {Iterable} leftHandOperand
 * @param {Iterable} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */
return function(e,t,n){return d(h(e),h(t),n)}
/*!
 * Determine if the given object has an @@iterator function.
 *
 * @param {Object} target
 * @return {Boolean} `true` if the object has an @@iterator function.
 */(e,t,r);case"DataView":return d(new Uint8Array(e.buffer),new Uint8Array(t.buffer),r);case"ArrayBuffer":return d(new Uint8Array(e),new Uint8Array(t),r);case"Set":case"Map":return function(e,t,n){if(e.size!==t.size)return!1;if(0===e.size)return!0;var r=[],o=[];return e.forEach((function(e,t){r.push([e,t])})),t.forEach((function(e,t){o.push([e,t])})),d(r.sort(),o.sort(),n);
/*!
 * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
 *
 * @param {Iterable} leftHandOperand
 * @param {Iterable} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */}(e,t,r);default:
/*!
 * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
 * for each enumerable key in the object.
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */
return function(e,t,n){var r=f(e),o=f(t);if(r.length&&r.length===o.length)return r.sort(),o.sort(),!1!==d(r,o)&&
/*!
 * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
 * each key. If any value of the given key is not equal, the function will return false (early).
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */
function(e,t,n,r){var o=n.length;if(0===o)return!0;for(var s=0;s<o;s+=1)if(!1===c(e[n[s]],t[n[s]],r))return!1;return!0}(e,t,r,n);var s=p(e),i=p(t);return s.length&&s.length===i.length?(s.sort(),i.sort(),d(s,i,n)):0===r.length&&0===s.length&&0===o.length&&0===i.length}
/*!
 * Returns true if the argument is a primitive.
 *
 * This intentionally returns true for all objects that can be compared by reference,
 * including functions and symbols.
 *
 * @param {Mixed} value
 * @return {Boolean} result
 */(e,t,r)}}(e,t,g,n);return a(e,t,n.memoize,w),w}function d(e,t,n){var r=e.length;if(r!==t.length)return!1;if(0===r)return!0;for(var o=-1;++o<r;)if(!1===c(e[o],t[o],n))return!1;return!0}
/*!
 * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
 * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
 *
 * @param {Object} target
 * @returns {Array} an array of entries from the @@iterator function
 */function p(e){if(function(e){return"undefined"!=typeof Symbol&&"object"==typeof e&&void 0!==Symbol.iterator&&"function"==typeof e[Symbol.iterator]}(e))try{return h(e[Symbol.iterator]())}catch(e){return[]}return[]}
/*!
 * Gets all entries from a Generator. This will consume the generator - which could have side effects.
 *
 * @param {Generator} target
 * @returns {Array} an array of entries from the Generator.
 */function h(e){for(var t=e.next(),n=[t.value];!1===t.done;)t=e.next(),n.push(t.value);return n}
/*!
 * Gets all own and inherited enumerable keys from a target.
 *
 * @param {Object} target
 * @returns {Array} an array of own and inherited enumerable keys from the target.
 */function f(e){var t=[];for(var n in e)t.push(n);return t}function y(e){return null===e||"object"!=typeof e}e.exports=c,e.exports.MemoizeMap=s},function(e,t,n){
/*!
 * Chai - addProperty utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(16),o=n(15),s=n(19),i=n(17);e.exports=function(e,t,n){n=void 0===n?function(){}:n,Object.defineProperty(e,t,{get:function e(){s()||o(this,"lockSsfi")||o(this,"ssfi",e);var t=n.call(this);if(void 0!==t)return t;var a=new r.Assertion;return i(this,a),a},configurable:!0})}},function(e,t,n){
/*!
 * Chai - addMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(20),o=n(16),s=n(15),i=n(21),a=n(17);e.exports=function(e,t,n){var c=function(){s(this,"lockSsfi")||s(this,"ssfi",c);var e=n.apply(this,arguments);if(void 0!==e)return e;var t=new o.Assertion;return a(this,t),t};r(c,t,!1),e[t]=i(c,t)}},function(e,t,n){
/*!
 * Chai - overwriteProperty utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(16),o=n(15),s=n(19),i=n(17);e.exports=function(e,t,n){var a=Object.getOwnPropertyDescriptor(e,t),c=function(){};a&&"function"==typeof a.get&&(c=a.get),Object.defineProperty(e,t,{get:function e(){s()||o(this,"lockSsfi")||o(this,"ssfi",e);var t=o(this,"lockSsfi");o(this,"lockSsfi",!0);var a=n(c).call(this);if(o(this,"lockSsfi",t),void 0!==a)return a;var u=new r.Assertion;return i(this,u),u},configurable:!0})}},function(e,t,n){
/*!
 * Chai - overwriteMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(20),o=n(16),s=n(15),i=n(21),a=n(17);e.exports=function(e,t,n){var c=e[t],u=function(){throw new Error(t+" is not a function")};c&&"function"==typeof c&&(u=c);var l=function(){s(this,"lockSsfi")||s(this,"ssfi",l);var e=s(this,"lockSsfi");s(this,"lockSsfi",!0);var t=n(u).apply(this,arguments);if(s(this,"lockSsfi",e),void 0!==t)return t;var r=new o.Assertion;return a(this,r),r};r(l,t,!1),e[t]=i(l,t)}},function(e,t,n){
/*!
 * Chai - addChainingMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(20),o=n(16),s=n(15),i=n(21),a=n(17),c="function"==typeof Object.setPrototypeOf,u=function(){},l=Object.getOwnPropertyNames(u).filter((function(e){var t=Object.getOwnPropertyDescriptor(u,e);return"object"!=typeof t||!t.configurable})),d=Function.prototype.call,p=Function.prototype.apply;e.exports=function(e,t,n,u){"function"!=typeof u&&(u=function(){});var h={method:n,chainingBehavior:u};e.__methods||(e.__methods={}),e.__methods[t]=h,Object.defineProperty(e,t,{get:function(){h.chainingBehavior.call(this);var n=function(){s(this,"lockSsfi")||s(this,"ssfi",n);var e=h.method.apply(this,arguments);if(void 0!==e)return e;var t=new o.Assertion;return a(this,t),t};if(r(n,t,!0),c){var u=Object.create(this);u.call=d,u.apply=p,Object.setPrototypeOf(n,u)}else Object.getOwnPropertyNames(e).forEach((function(t){if(-1===l.indexOf(t)){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r)}}));return a(this,n),i(n)},configurable:!0})}},function(e,t,n){
/*!
 * Chai - overwriteChainableMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(16),o=n(17);e.exports=function(e,t,n,s){var i=e.__methods[t],a=i.chainingBehavior;i.chainingBehavior=function(){var e=s(a).call(this);if(void 0!==e)return e;var t=new r.Assertion;return o(this,t),t};var c=i.method;i.method=function(){var e=n(c).apply(this,arguments);if(void 0!==e)return e;var t=new r.Assertion;return o(this,t),t}}},function(e,t,n){
/*!
 * Chai - compareByInspect utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(26);e.exports=function(e,t){return r(e)<r(t)?-1:1}},function(e,t,n){
/*!
 * Chai - getOwnEnumerableProperties utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(36);e.exports=function(e){return Object.keys(e).concat(r(e))}},function(e,t,n){"use strict";var r=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\(\/]+)/;function o(e){var t="";if(void 0===e.name){var n=String(e).match(r);n&&(t=n[1])}else t=e.name;return t}e.exports={compatibleInstance:function(e,t){return t instanceof Error&&e===t},compatibleConstructor:function(e,t){return t instanceof Error?e.constructor===t.constructor||e instanceof t.constructor:(t.prototype instanceof Error||t===Error)&&(e.constructor===t||e instanceof t)},compatibleMessage:function(e,t){var n="string"==typeof e?e:e.message;return t instanceof RegExp?t.test(n):"string"==typeof t&&-1!==n.indexOf(t)},getMessage:function(e){var t="";return e&&e.message?t=e.message:"string"==typeof e&&(t=e),t},getConstructorName:function(e){var t=e;return e instanceof Error?t=o(e.constructor):"function"==typeof e&&(t=o(e).trim()||o(new e)),t}}},function(e,t){e.exports=Number.isNaN||
/*!
 * Chai - isNaN utility
 * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
 * MIT Licensed
 */
function(e){return e!=e}},function(e,t,n){
/*!
 * chai
 * http://chaijs.com
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(18);e.exports=function(e,t){
/*!
   * Module dependencies.
   */
var n=e.AssertionError,o=t.flag;
/*!
   * Module export.
   */
/*!
   * Assertion Constructor
   *
   * Creates object for chaining.
   *
   * `Assertion` objects contain metadata in the form of flags. Three flags can
   * be assigned during instantiation by passing arguments to this constructor:
   *
   * - `object`: This flag contains the target of the assertion. For example, in
   *   the assertion `expect(numKittens).to.equal(7);`, the `object` flag will
   *   contain `numKittens` so that the `equal` assertion can reference it when
   *   needed.
   *
   * - `message`: This flag contains an optional custom error message to be
   *   prepended to the error message that's generated by the assertion when it
   *   fails.
   *
   * - `ssfi`: This flag stands for "start stack function indicator". It
   *   contains a function reference that serves as the starting point for
   *   removing frames from the stack trace of the error that's created by the
   *   assertion when it fails. The goal is to provide a cleaner stack trace to
   *   end users by removing Chai's internal functions. Note that it only works
   *   in environments that support `Error.captureStackTrace`, and only when
   *   `Chai.config.includeStack` hasn't been set to `false`.
   *
   * - `lockSsfi`: This flag controls whether or not the given `ssfi` flag
   *   should retain its current value, even as assertions are chained off of
   *   this object. This is usually set to `true` when creating a new assertion
   *   from within another assertion. It's also temporarily set to `true` before
   *   an overwritten assertion gets called by the overwriting assertion.
   *
   * @param {Mixed} obj target of the assertion
   * @param {String} msg (optional) custom error message
   * @param {Function} ssfi (optional) starting point for removing stack frames
   * @param {Boolean} lockSsfi (optional) whether or not the ssfi flag is locked
   * @api private
   */function s(e,n,r,i){return o(this,"ssfi",r||s),o(this,"lockSsfi",i),o(this,"object",e),o(this,"message",n),t.proxify(this)}e.Assertion=s,Object.defineProperty(s,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack},set:function(e){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack=e}}),Object.defineProperty(s,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff},set:function(e){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff=e}}),s.addProperty=function(e,n){t.addProperty(this.prototype,e,n)},s.addMethod=function(e,n){t.addMethod(this.prototype,e,n)},s.addChainableMethod=function(e,n,r){t.addChainableMethod(this.prototype,e,n,r)},s.overwriteProperty=function(e,n){t.overwriteProperty(this.prototype,e,n)},s.overwriteMethod=function(e,n){t.overwriteMethod(this.prototype,e,n)},s.overwriteChainableMethod=function(e,n,r){t.overwriteChainableMethod(this.prototype,e,n,r)},s.prototype.assert=function(e,s,i,a,c,u){var l=t.test(this,arguments);if(!1!==u&&(u=!0),void 0===a&&void 0===c&&(u=!1),!0!==r.showDiff&&(u=!1),!l){s=t.getMessage(this,arguments);var d=t.getActual(this,arguments);throw new n(s,{actual:d,expected:a,showDiff:u},r.includeStack?this.assert:o(this,"ssfi"))}},
/*!
   * ### ._obj
   *
   * Quick reference to stored `actual` value for plugin developers.
   *
   * @api private
   */
Object.defineProperty(s.prototype,"_obj",{get:function(){return o(this,"object")},set:function(e){o(this,"object",e)}})}},function(e,t){
/*!
 * chai
 * http://chaijs.com
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){var n=e.Assertion,r=e.AssertionError,o=t.flag;function s(e,n){n&&o(this,"message",n),e=e.toLowerCase();var r=o(this,"object"),s=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an ":"a ";this.assert(e===t.type(r).toLowerCase(),"expected #{this} to be "+s+e,"expected #{this} not to be "+s+e)}function i(e,n){return t.isNaN(e)&&t.isNaN(n)||e===n}function a(){o(this,"contains",!0)}function c(e,s){s&&o(this,"message",s);var a=o(this,"object"),c=t.type(a).toLowerCase(),u=o(this,"message"),l=o(this,"negate"),d=o(this,"ssfi"),p=o(this,"deep"),h=p?"deep ":"";u=u?u+": ":"";var f=!1;switch(c){case"string":f=-1!==a.indexOf(e);break;case"weakset":if(p)throw new r(u+"unable to use .deep.include with WeakSet",void 0,d);f=a.has(e);break;case"map":var y=p?t.eql:i;a.forEach((function(t){f=f||y(t,e)}));break;case"set":p?a.forEach((function(n){f=f||t.eql(n,e)})):f=a.has(e);break;case"array":f=p?a.some((function(n){return t.eql(n,e)})):-1!==a.indexOf(e);break;default:if(e!==Object(e))throw new r(u+"object tested must be an array, a map, an object, a set, a string, or a weakset, but "+c+" given",void 0,d);var m=Object.keys(e),b=null,g=0;if(m.forEach((function(s){var i=new n(a);if(t.transferFlags(this,i,!0),o(i,"lockSsfi",!0),l&&1!==m.length)try{i.property(s,e[s])}catch(e){if(!t.checkError.compatibleConstructor(e,r))throw e;null===b&&(b=e),g++}else i.property(s,e[s])}),this),l&&m.length>1&&g===m.length)throw b;return}this.assert(f,"expected #{this} to "+h+"include "+t.inspect(e),"expected #{this} to not "+h+"include "+t.inspect(e))}function u(){var e=o(this,"object"),n=t.type(e);this.assert("Arguments"===n,"expected #{this} to be arguments but got "+n,"expected #{this} to not be arguments")}function l(e,t){t&&o(this,"message",t);var n=o(this,"object");if(o(this,"deep")){var r=o(this,"lockSsfi");o(this,"lockSsfi",!0),this.eql(e),o(this,"lockSsfi",r)}else this.assert(e===n,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",e,this._obj,!0)}function d(e,n){n&&o(this,"message",n),this.assert(t.eql(e,o(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",e,this._obj,!0)}function p(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to above must be a number":i=l+"the argument to above must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y>e,"expected #{this} to have a "+m+" above #{exp} but got #{act}","expected #{this} to not have a "+m+" above #{exp}",e,y)}else this.assert(a>e,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",e)}function h(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to least must be a number":i=l+"the argument to least must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y>=e,"expected #{this} to have a "+m+" at least #{exp} but got #{act}","expected #{this} to have a "+m+" below #{exp}",e,y)}else this.assert(a>=e,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",e)}function f(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to below must be a number":i=l+"the argument to below must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y<e,"expected #{this} to have a "+m+" below #{exp} but got #{act}","expected #{this} to not have a "+m+" below #{exp}",e,y)}else this.assert(a<e,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",e)}function y(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to most must be a number":i=l+"the argument to most must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y<=e,"expected #{this} to have a "+m+" at most #{exp} but got #{act}","expected #{this} to have a "+m+" above #{exp}",e,y)}else this.assert(a<=e,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",e)}function m(e,n){n&&o(this,"message",n);var s=o(this,"object"),i=o(this,"ssfi"),a=o(this,"message");try{var c=s instanceof e}catch(n){if(n instanceof TypeError)throw new r((a=a?a+": ":"")+"The instanceof assertion needs a constructor but "+t.type(e)+" was given.",void 0,i);throw n}var u=t.getName(e);null===u&&(u="an unnamed constructor"),this.assert(c,"expected #{this} to be an instance of "+u,"expected #{this} to not be an instance of "+u)}function b(e,n,s){s&&o(this,"message",s);var i=o(this,"nested"),a=o(this,"own"),c=o(this,"message"),u=o(this,"object"),l=o(this,"ssfi"),d=typeof e;if(c=c?c+": ":"",i){if("string"!==d)throw new r(c+"the argument to property must be a string when using nested syntax",void 0,l)}else if("string"!==d&&"number"!==d&&"symbol"!==d)throw new r(c+"the argument to property must be a string, number, or symbol",void 0,l);if(i&&a)throw new r(c+'The "nested" and "own" flags cannot be combined.',void 0,l);if(null==u)throw new r(c+"Target cannot be null or undefined.",void 0,l);var p,h=o(this,"deep"),f=o(this,"negate"),y=i?t.getPathInfo(u,e):null,m=i?y.value:u[e],b="";h&&(b+="deep "),a&&(b+="own "),i&&(b+="nested "),b+="property ",p=a?Object.prototype.hasOwnProperty.call(u,e):i?y.exists:t.hasProperty(u,e),f&&1!==arguments.length||this.assert(p,"expected #{this} to have "+b+t.inspect(e),"expected #{this} to not have "+b+t.inspect(e)),arguments.length>1&&this.assert(p&&(h?t.eql(n,m):n===m),"expected #{this} to have "+b+t.inspect(e)+" of #{exp}, but got #{act}","expected #{this} to not have "+b+t.inspect(e)+" of #{act}",n,m),o(this,"object",m)}function g(e,t,n){o(this,"own",!0),b.apply(this,arguments)}function w(e,n,r){"string"==typeof n&&(r=n,n=null),r&&o(this,"message",r);var s=o(this,"object"),i=Object.getOwnPropertyDescriptor(Object(s),e);i&&n?this.assert(t.eql(n,i),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to match "+t.inspect(n)+", got "+t.inspect(i),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to not match "+t.inspect(n),n,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+t.inspect(e),"expected #{this} to not have an own property descriptor for "+t.inspect(e)),o(this,"object",i)}function v(){o(this,"doLength",!0)}function _(e,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=t.type(i).toLowerCase(),c=o(this,"message"),u=o(this,"ssfi"),l="length";switch(a){case"map":case"set":l="size",s=i.size;break;default:new n(i,c,u,!0).to.have.property("length"),s=i.length}this.assert(s==e,"expected #{this} to have a "+l+" of #{exp} but got #{act}","expected #{this} to not have a "+l+" of #{act}",e,s)}function x(e,t){t&&o(this,"message",t);var n=o(this,"object");this.assert(e.exec(n),"expected #{this} to match "+e,"expected #{this} not to match "+e)}function E(e){var n,s,i=o(this,"object"),a=t.type(i),c=t.type(e),u=o(this,"ssfi"),l=o(this,"deep"),d="",p=!0,h=o(this,"message"),f=(h=h?h+": ":"")+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if("Map"===a||"Set"===a)d=l?"deeply ":"",s=[],i.forEach((function(e,t){s.push(t)})),"Array"!==c&&(e=Array.prototype.slice.call(arguments));else{switch(s=t.getOwnEnumerableProperties(i),c){case"Array":if(arguments.length>1)throw new r(f,void 0,u);break;case"Object":if(arguments.length>1)throw new r(f,void 0,u);e=Object.keys(e);break;default:e=Array.prototype.slice.call(arguments)}e=e.map((function(e){return"symbol"==typeof e?e:String(e)}))}if(!e.length)throw new r(h+"keys required",void 0,u);var y=e.length,m=o(this,"any"),b=o(this,"all"),g=e;if(m||b||(b=!0),m&&(p=g.some((function(e){return s.some((function(n){return l?t.eql(e,n):e===n}))}))),b&&(p=g.every((function(e){return s.some((function(n){return l?t.eql(e,n):e===n}))})),o(this,"contains")||(p=p&&e.length==s.length)),y>1){var w=(e=e.map((function(e){return t.inspect(e)}))).pop();b&&(n=e.join(", ")+", and "+w),m&&(n=e.join(", ")+", or "+w)}else n=t.inspect(e[0]);n=(y>1?"keys ":"key ")+n,n=(o(this,"contains")?"contain ":"have ")+n,this.assert(p,"expected #{this} to "+d+n,"expected #{this} to not "+d+n,g.slice(0).sort(t.compareByInspect),s.sort(t.compareByInspect),!0)}function S(e,r,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"ssfi"),u=o(this,"message"),l=o(this,"negate")||!1;new n(a,u,c,!0).is.a("function"),(e instanceof RegExp||"string"==typeof e)&&(r=e,e=null);try{a()}catch(e){i=e}var d=void 0===e&&void 0===r,p=Boolean(e&&r),h=!1,f=!1;if(d||!d&&!l){var y="an error";e instanceof Error?y="#{exp}":e&&(y=t.checkError.getConstructorName(e)),this.assert(i,"expected #{this} to throw "+y,"expected #{this} to not throw an error but #{act} was thrown",e&&e.toString(),i instanceof Error?i.toString():"string"==typeof i?i:i&&t.checkError.getConstructorName(i))}if(e&&i&&(e instanceof Error&&t.checkError.compatibleInstance(i,e)===l&&(p&&l?h=!0:this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i&&!l?" but #{act} was thrown":""),e.toString(),i.toString())),t.checkError.compatibleConstructor(i,e)===l&&(p&&l?h=!0:this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&t.checkError.getConstructorName(e),i instanceof Error?i.toString():i&&t.checkError.getConstructorName(i)))),i&&null!=r){var m="including";r instanceof RegExp&&(m="matching"),t.checkError.compatibleMessage(i,r)===l&&(p&&l?f=!0:this.assert(l,"expected #{this} to throw error "+m+" #{exp} but got #{act}","expected #{this} to throw error not "+m+" #{exp}",r,t.checkError.getMessage(i)))}h&&f&&this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&t.checkError.getConstructorName(e),i instanceof Error?i.toString():i&&t.checkError.getConstructorName(i)),o(this,"object",i)}function O(e,n){n&&o(this,"message",n);var r=o(this,"object"),s=o(this,"itself"),i="function"!=typeof r||s?r[e]:r.prototype[e];this.assert("function"==typeof i,"expected #{this} to respond to "+t.inspect(e),"expected #{this} to not respond to "+t.inspect(e))}function P(e,n){n&&o(this,"message",n);var r=e(o(this,"object"));this.assert(r,"expected #{this} to satisfy "+t.objDisplay(e),"expected #{this} to not satisfy"+t.objDisplay(e),!o(this,"negate"),r)}function k(e,t,s){s&&o(this,"message",s);var i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");if(new n(i,a,c,!0).is.a("number"),"number"!=typeof e||"number"!=typeof t)throw new r((a=a?a+": ":"")+"the arguments to closeTo or approximately must be numbers",void 0,c);this.assert(Math.abs(i-e)<=t,"expected #{this} to be close to "+e+" +/- "+t,"expected #{this} not to be close to "+e+" +/- "+t)}function j(e,t,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),s=e[t]):(new n(e,a,c,!0).is.a("function"),s=e()),i();var u=null==t?e():e[t],l=null==t?s:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",s),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","change"),o(this,"realDelta",u!==s),this.assert(s!==u,"expected "+l+" to change","expected "+l+" to not change")}function q(e,t,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),s=e[t]):(new n(e,a,c,!0).is.a("function"),s=e()),new n(s,a,c,!0).is.a("number"),i();var u=null==t?e():e[t],l=null==t?s:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",s),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","increase"),o(this,"realDelta",u-s),this.assert(u-s>0,"expected "+l+" to increase","expected "+l+" to not increase")}function T(e,t,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),s=e[t]):(new n(e,a,c,!0).is.a("function"),s=e()),new n(s,a,c,!0).is.a("number"),i();var u=null==t?e():e[t],l=null==t?s:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",s),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","decrease"),o(this,"realDelta",s-u),this.assert(u-s<0,"expected "+l+" to decrease","expected "+l+" to not decrease")}["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still"].forEach((function(e){n.addProperty(e)})),n.addProperty("not",(function(){o(this,"negate",!0)})),n.addProperty("deep",(function(){o(this,"deep",!0)})),n.addProperty("nested",(function(){o(this,"nested",!0)})),n.addProperty("own",(function(){o(this,"own",!0)})),n.addProperty("ordered",(function(){o(this,"ordered",!0)})),n.addProperty("any",(function(){o(this,"any",!0),o(this,"all",!1)})),n.addProperty("all",(function(){o(this,"all",!0),o(this,"any",!1)})),n.addChainableMethod("an",s),n.addChainableMethod("a",s),n.addChainableMethod("include",c,a),n.addChainableMethod("contain",c,a),n.addChainableMethod("contains",c,a),n.addChainableMethod("includes",c,a),n.addProperty("ok",(function(){this.assert(o(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")})),n.addProperty("true",(function(){this.assert(!0===o(this,"object"),"expected #{this} to be true","expected #{this} to be false",!o(this,"negate"))})),n.addProperty("false",(function(){this.assert(!1===o(this,"object"),"expected #{this} to be false","expected #{this} to be true",!!o(this,"negate"))})),n.addProperty("null",(function(){this.assert(null===o(this,"object"),"expected #{this} to be null","expected #{this} not to be null")})),n.addProperty("undefined",(function(){this.assert(void 0===o(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")})),n.addProperty("NaN",(function(){this.assert(t.isNaN(o(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")})),n.addProperty("exist",(function(){var e=o(this,"object");this.assert(null!=e,"expected #{this} to exist","expected #{this} to not exist")})),n.addProperty("empty",(function(){var e,n=o(this,"object"),s=o(this,"ssfi"),i=o(this,"message");switch(i=i?i+": ":"",t.type(n).toLowerCase()){case"array":case"string":e=n.length;break;case"map":case"set":e=n.size;break;case"weakmap":case"weakset":throw new r(i+".empty was passed a weak collection",void 0,s);case"function":var a=i+".empty was passed a function "+t.getName(n);throw new r(a.trim(),void 0,s);default:if(n!==Object(n))throw new r(i+".empty was passed non-string primitive "+t.inspect(n),void 0,s);e=Object.keys(n).length}this.assert(0===e,"expected #{this} to be empty","expected #{this} not to be empty")})),n.addProperty("arguments",u),n.addProperty("Arguments",u),n.addMethod("equal",l),n.addMethod("equals",l),n.addMethod("eq",l),n.addMethod("eql",d),n.addMethod("eqls",d),n.addMethod("above",p),n.addMethod("gt",p),n.addMethod("greaterThan",p),n.addMethod("least",h),n.addMethod("gte",h),n.addMethod("below",f),n.addMethod("lt",f),n.addMethod("lessThan",f),n.addMethod("most",y),n.addMethod("lte",y),n.addMethod("within",(function(e,s,i){i&&o(this,"message",i);var a,c=o(this,"object"),u=o(this,"doLength"),l=o(this,"message"),d=l?l+": ":"",p=o(this,"ssfi"),h=t.type(c).toLowerCase(),f=t.type(e).toLowerCase(),y=t.type(s).toLowerCase(),m=!0,b="date"===f&&"date"===y?e.toUTCString()+".."+s.toUTCString():e+".."+s;if(u&&"map"!==h&&"set"!==h&&new n(c,l,p,!0).to.have.property("length"),u||"date"!==h||"date"===f&&"date"===y?"number"===f&&"number"===y||!u&&"number"!==h?u||"date"===h||"number"===h?m=!1:a=d+"expected "+("string"===h?"'"+c+"'":c)+" to be a number or a date":a=d+"the arguments to within must be numbers":a=d+"the arguments to within must be dates",m)throw new r(a,void 0,p);if(u){var g,w="length";"map"===h||"set"===h?(w="size",g=c.size):g=c.length,this.assert(g>=e&&g<=s,"expected #{this} to have a "+w+" within "+b,"expected #{this} to not have a "+w+" within "+b)}else this.assert(c>=e&&c<=s,"expected #{this} to be within "+b,"expected #{this} to not be within "+b)})),n.addMethod("instanceof",m),n.addMethod("instanceOf",m),n.addMethod("property",b),n.addMethod("ownProperty",g),n.addMethod("haveOwnProperty",g),n.addMethod("ownPropertyDescriptor",w),n.addMethod("haveOwnPropertyDescriptor",w),n.addChainableMethod("length",_,v),n.addChainableMethod("lengthOf",_,v),n.addMethod("match",x),n.addMethod("matches",x),n.addMethod("string",(function(e,r){r&&o(this,"message",r);var s=o(this,"object"),i=o(this,"message"),a=o(this,"ssfi");new n(s,i,a,!0).is.a("string"),this.assert(~s.indexOf(e),"expected #{this} to contain "+t.inspect(e),"expected #{this} to not contain "+t.inspect(e))})),n.addMethod("keys",E),n.addMethod("key",E),n.addMethod("throw",S),n.addMethod("throws",S),n.addMethod("Throw",S),n.addMethod("respondTo",O),n.addMethod("respondsTo",O),n.addProperty("itself",(function(){o(this,"itself",!0)})),n.addMethod("satisfy",P),n.addMethod("satisfies",P),n.addMethod("closeTo",k),n.addMethod("approximately",k),n.addMethod("members",(function(e,r){r&&o(this,"message",r);var s=o(this,"object"),i=o(this,"message"),a=o(this,"ssfi");new n(s,i,a,!0).to.be.an("array"),new n(e,i,a,!0).to.be.an("array");var c,u,l,d=o(this,"contains"),p=o(this,"ordered");d?(u="expected #{this} to be "+(c=p?"an ordered superset":"a superset")+" of #{exp}",l="expected #{this} to not be "+c+" of #{exp}"):(u="expected #{this} to have the same "+(c=p?"ordered members":"members")+" as #{exp}",l="expected #{this} to not have the same "+c+" as #{exp}");var h=o(this,"deep")?t.eql:void 0;this.assert(function(e,t,n,r,o){if(!r){if(e.length!==t.length)return!1;t=t.slice()}return e.every((function(e,s){if(o)return n?n(e,t[s]):e===t[s];if(!n){var i=t.indexOf(e);return-1!==i&&(r||t.splice(i,1),!0)}return t.some((function(o,s){return!!n(e,o)&&(r||t.splice(s,1),!0)}))}))}(e,s,h,d,p),u,l,e,s,!0)})),n.addMethod("oneOf",(function(e,t){t&&o(this,"message",t);var r=o(this,"object"),s=o(this,"message"),i=o(this,"ssfi");new n(e,s,i,!0).to.be.an("array"),this.assert(e.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",e,r)})),n.addMethod("change",j),n.addMethod("changes",j),n.addMethod("increase",q),n.addMethod("increases",q),n.addMethod("decrease",T),n.addMethod("decreases",T),n.addMethod("by",(function(e,t){t&&o(this,"message",t);var n,r=o(this,"deltaMsgObj"),s=o(this,"initialDeltaValue"),i=o(this,"finalDeltaValue"),a=o(this,"deltaBehavior"),c=o(this,"realDelta");n="change"===a?Math.abs(i-s)===Math.abs(e):c===Math.abs(e),this.assert(n,"expected "+r+" to "+a+" by "+e,"expected "+r+" to not "+a+" by "+e)})),n.addProperty("extensible",(function(){var e=o(this,"object"),t=e===Object(e)&&Object.isExtensible(e);this.assert(t,"expected #{this} to be extensible","expected #{this} to not be extensible")})),n.addProperty("sealed",(function(){var e=o(this,"object"),t=e!==Object(e)||Object.isSealed(e);this.assert(t,"expected #{this} to be sealed","expected #{this} to not be sealed")})),n.addProperty("frozen",(function(){var e=o(this,"object"),t=e!==Object(e)||Object.isFrozen(e);this.assert(t,"expected #{this} to be frozen","expected #{this} to not be frozen")})),n.addProperty("finite",(function(e){var t=o(this,"object");this.assert("number"==typeof t&&isFinite(t),"expected #{this} to be a finite number","expected #{this} to not be a finite number")}))}},function(e,t){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){e.expect=function(t,n){return new e.Assertion(t,n)},e.expect.fail=function(t,n,r,o){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new e.AssertionError(r,{actual:t,expected:n,operator:o},e.expect.fail)}}},function(e,t){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){var n=e.Assertion;function r(){Object.defineProperty(Object.prototype,"should",{set:function(e){Object.defineProperty(this,"should",{value:e,enumerable:!0,configurable:!0,writable:!0})},get:function e(){return this instanceof String||this instanceof Number||this instanceof Boolean||"function"==typeof Symbol&&this instanceof Symbol?new n(this.valueOf(),null,e):new n(this,null,e)},configurable:!0});var t={fail:function(n,r,o,s){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new e.AssertionError(o,{actual:n,expected:r,operator:s},t.fail)},equal:function(e,t,r){new n(e,r).to.equal(t)},Throw:function(e,t,r,o){new n(e,o).to.Throw(t,r)},exist:function(e,t){new n(e,t).to.exist},not:{}};return t.not.equal=function(e,t,r){new n(e,r).to.not.equal(t)},t.not.Throw=function(e,t,r,o){new n(e,o).to.not.Throw(t,r)},t.not.exist=function(e,t){new n(e,t).to.not.exist},t.throw=t.Throw,t.not.throw=t.not.Throw,t}e.should=r,e.Should=r}},function(e,t){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){
/*!
   * Chai dependencies.
   */
var n=e.Assertion,r=t.flag,o=e.assert=function(t,r){new n(null,null,e.assert,!0).assert(t,r,"[ negation message unavailable ]")};
/*!
   * Module export.
   */o.fail=function(t,n,r,s){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new e.AssertionError(r,{actual:t,expected:n,operator:s},o.fail)},o.isOk=function(e,t){new n(e,t,o.isOk,!0).is.ok},o.isNotOk=function(e,t){new n(e,t,o.isNotOk,!0).is.not.ok},o.equal=function(e,t,s){var i=new n(e,s,o.equal,!0);i.assert(t==r(i,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",t,e,!0)},o.notEqual=function(e,t,s){var i=new n(e,s,o.notEqual,!0);i.assert(t!=r(i,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",t,e,!0)},o.strictEqual=function(e,t,r){new n(e,r,o.strictEqual,!0).to.equal(t)},o.notStrictEqual=function(e,t,r){new n(e,r,o.notStrictEqual,!0).to.not.equal(t)},o.deepEqual=o.deepStrictEqual=function(e,t,r){new n(e,r,o.deepEqual,!0).to.eql(t)},o.notDeepEqual=function(e,t,r){new n(e,r,o.notDeepEqual,!0).to.not.eql(t)},o.isAbove=function(e,t,r){new n(e,r,o.isAbove,!0).to.be.above(t)},o.isAtLeast=function(e,t,r){new n(e,r,o.isAtLeast,!0).to.be.least(t)},o.isBelow=function(e,t,r){new n(e,r,o.isBelow,!0).to.be.below(t)},o.isAtMost=function(e,t,r){new n(e,r,o.isAtMost,!0).to.be.most(t)},o.isTrue=function(e,t){new n(e,t,o.isTrue,!0).is.true},o.isNotTrue=function(e,t){new n(e,t,o.isNotTrue,!0).to.not.equal(!0)},o.isFalse=function(e,t){new n(e,t,o.isFalse,!0).is.false},o.isNotFalse=function(e,t){new n(e,t,o.isNotFalse,!0).to.not.equal(!1)},o.isNull=function(e,t){new n(e,t,o.isNull,!0).to.equal(null)},o.isNotNull=function(e,t){new n(e,t,o.isNotNull,!0).to.not.equal(null)},o.isNaN=function(e,t){new n(e,t,o.isNaN,!0).to.be.NaN},o.isNotNaN=function(e,t){new n(e,t,o.isNotNaN,!0).not.to.be.NaN},o.exists=function(e,t){new n(e,t,o.exists,!0).to.exist},o.notExists=function(e,t){new n(e,t,o.notExists,!0).to.not.exist},o.isUndefined=function(e,t){new n(e,t,o.isUndefined,!0).to.equal(void 0)},o.isDefined=function(e,t){new n(e,t,o.isDefined,!0).to.not.equal(void 0)},o.isFunction=function(e,t){new n(e,t,o.isFunction,!0).to.be.a("function")},o.isNotFunction=function(e,t){new n(e,t,o.isNotFunction,!0).to.not.be.a("function")},o.isObject=function(e,t){new n(e,t,o.isObject,!0).to.be.a("object")},o.isNotObject=function(e,t){new n(e,t,o.isNotObject,!0).to.not.be.a("object")},o.isArray=function(e,t){new n(e,t,o.isArray,!0).to.be.an("array")},o.isNotArray=function(e,t){new n(e,t,o.isNotArray,!0).to.not.be.an("array")},o.isString=function(e,t){new n(e,t,o.isString,!0).to.be.a("string")},o.isNotString=function(e,t){new n(e,t,o.isNotString,!0).to.not.be.a("string")},o.isNumber=function(e,t){new n(e,t,o.isNumber,!0).to.be.a("number")},o.isNotNumber=function(e,t){new n(e,t,o.isNotNumber,!0).to.not.be.a("number")},o.isFinite=function(e,t){new n(e,t,o.isFinite,!0).to.be.finite},o.isBoolean=function(e,t){new n(e,t,o.isBoolean,!0).to.be.a("boolean")},o.isNotBoolean=function(e,t){new n(e,t,o.isNotBoolean,!0).to.not.be.a("boolean")},o.typeOf=function(e,t,r){new n(e,r,o.typeOf,!0).to.be.a(t)},o.notTypeOf=function(e,t,r){new n(e,r,o.notTypeOf,!0).to.not.be.a(t)},o.instanceOf=function(e,t,r){new n(e,r,o.instanceOf,!0).to.be.instanceOf(t)},o.notInstanceOf=function(e,t,r){new n(e,r,o.notInstanceOf,!0).to.not.be.instanceOf(t)},o.include=function(e,t,r){new n(e,r,o.include,!0).include(t)},o.notInclude=function(e,t,r){new n(e,r,o.notInclude,!0).not.include(t)},o.deepInclude=function(e,t,r){new n(e,r,o.deepInclude,!0).deep.include(t)},o.notDeepInclude=function(e,t,r){new n(e,r,o.notDeepInclude,!0).not.deep.include(t)},o.nestedInclude=function(e,t,r){new n(e,r,o.nestedInclude,!0).nested.include(t)},o.notNestedInclude=function(e,t,r){new n(e,r,o.notNestedInclude,!0).not.nested.include(t)},o.deepNestedInclude=function(e,t,r){new n(e,r,o.deepNestedInclude,!0).deep.nested.include(t)},o.notDeepNestedInclude=function(e,t,r){new n(e,r,o.notDeepNestedInclude,!0).not.deep.nested.include(t)},o.ownInclude=function(e,t,r){new n(e,r,o.ownInclude,!0).own.include(t)},o.notOwnInclude=function(e,t,r){new n(e,r,o.notOwnInclude,!0).not.own.include(t)},o.deepOwnInclude=function(e,t,r){new n(e,r,o.deepOwnInclude,!0).deep.own.include(t)},o.notDeepOwnInclude=function(e,t,r){new n(e,r,o.notDeepOwnInclude,!0).not.deep.own.include(t)},o.match=function(e,t,r){new n(e,r,o.match,!0).to.match(t)},o.notMatch=function(e,t,r){new n(e,r,o.notMatch,!0).to.not.match(t)},o.property=function(e,t,r){new n(e,r,o.property,!0).to.have.property(t)},o.notProperty=function(e,t,r){new n(e,r,o.notProperty,!0).to.not.have.property(t)},o.propertyVal=function(e,t,r,s){new n(e,s,o.propertyVal,!0).to.have.property(t,r)},o.notPropertyVal=function(e,t,r,s){new n(e,s,o.notPropertyVal,!0).to.not.have.property(t,r)},o.deepPropertyVal=function(e,t,r,s){new n(e,s,o.deepPropertyVal,!0).to.have.deep.property(t,r)},o.notDeepPropertyVal=function(e,t,r,s){new n(e,s,o.notDeepPropertyVal,!0).to.not.have.deep.property(t,r)},o.ownProperty=function(e,t,r){new n(e,r,o.ownProperty,!0).to.have.own.property(t)},o.notOwnProperty=function(e,t,r){new n(e,r,o.notOwnProperty,!0).to.not.have.own.property(t)},o.ownPropertyVal=function(e,t,r,s){new n(e,s,o.ownPropertyVal,!0).to.have.own.property(t,r)},o.notOwnPropertyVal=function(e,t,r,s){new n(e,s,o.notOwnPropertyVal,!0).to.not.have.own.property(t,r)},o.deepOwnPropertyVal=function(e,t,r,s){new n(e,s,o.deepOwnPropertyVal,!0).to.have.deep.own.property(t,r)},o.notDeepOwnPropertyVal=function(e,t,r,s){new n(e,s,o.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(t,r)},o.nestedProperty=function(e,t,r){new n(e,r,o.nestedProperty,!0).to.have.nested.property(t)},o.notNestedProperty=function(e,t,r){new n(e,r,o.notNestedProperty,!0).to.not.have.nested.property(t)},o.nestedPropertyVal=function(e,t,r,s){new n(e,s,o.nestedPropertyVal,!0).to.have.nested.property(t,r)},o.notNestedPropertyVal=function(e,t,r,s){new n(e,s,o.notNestedPropertyVal,!0).to.not.have.nested.property(t,r)},o.deepNestedPropertyVal=function(e,t,r,s){new n(e,s,o.deepNestedPropertyVal,!0).to.have.deep.nested.property(t,r)},o.notDeepNestedPropertyVal=function(e,t,r,s){new n(e,s,o.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(t,r)},o.lengthOf=function(e,t,r){new n(e,r,o.lengthOf,!0).to.have.lengthOf(t)},o.hasAnyKeys=function(e,t,r){new n(e,r,o.hasAnyKeys,!0).to.have.any.keys(t)},o.hasAllKeys=function(e,t,r){new n(e,r,o.hasAllKeys,!0).to.have.all.keys(t)},o.containsAllKeys=function(e,t,r){new n(e,r,o.containsAllKeys,!0).to.contain.all.keys(t)},o.doesNotHaveAnyKeys=function(e,t,r){new n(e,r,o.doesNotHaveAnyKeys,!0).to.not.have.any.keys(t)},o.doesNotHaveAllKeys=function(e,t,r){new n(e,r,o.doesNotHaveAllKeys,!0).to.not.have.all.keys(t)},o.hasAnyDeepKeys=function(e,t,r){new n(e,r,o.hasAnyDeepKeys,!0).to.have.any.deep.keys(t)},o.hasAllDeepKeys=function(e,t,r){new n(e,r,o.hasAllDeepKeys,!0).to.have.all.deep.keys(t)},o.containsAllDeepKeys=function(e,t,r){new n(e,r,o.containsAllDeepKeys,!0).to.contain.all.deep.keys(t)},o.doesNotHaveAnyDeepKeys=function(e,t,r){new n(e,r,o.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(t)},o.doesNotHaveAllDeepKeys=function(e,t,r){new n(e,r,o.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(t)},o.throws=function(e,t,s,i){("string"==typeof t||t instanceof RegExp)&&(s=t,t=null);var a=new n(e,i,o.throws,!0).to.throw(t,s);return r(a,"object")},o.doesNotThrow=function(e,t,r,s){("string"==typeof t||t instanceof RegExp)&&(r=t,t=null),new n(e,s,o.doesNotThrow,!0).to.not.throw(t,r)},o.operator=function(s,i,a,c){var u;switch(i){case"==":u=s==a;break;case"===":u=s===a;break;case">":u=s>a;break;case">=":u=s>=a;break;case"<":u=s<a;break;case"<=":u=s<=a;break;case"!=":u=s!=a;break;case"!==":u=s!==a;break;default:throw c=c?c+": ":c,new e.AssertionError(c+'Invalid operator "'+i+'"',void 0,o.operator)}var l=new n(u,c,o.operator,!0);l.assert(!0===r(l,"object"),"expected "+t.inspect(s)+" to be "+i+" "+t.inspect(a),"expected "+t.inspect(s)+" to not be "+i+" "+t.inspect(a))},o.closeTo=function(e,t,r,s){new n(e,s,o.closeTo,!0).to.be.closeTo(t,r)},o.approximately=function(e,t,r,s){new n(e,s,o.approximately,!0).to.be.approximately(t,r)},o.sameMembers=function(e,t,r){new n(e,r,o.sameMembers,!0).to.have.same.members(t)},o.notSameMembers=function(e,t,r){new n(e,r,o.notSameMembers,!0).to.not.have.same.members(t)},o.sameDeepMembers=function(e,t,r){new n(e,r,o.sameDeepMembers,!0).to.have.same.deep.members(t)},o.notSameDeepMembers=function(e,t,r){new n(e,r,o.notSameDeepMembers,!0).to.not.have.same.deep.members(t)},o.sameOrderedMembers=function(e,t,r){new n(e,r,o.sameOrderedMembers,!0).to.have.same.ordered.members(t)},o.notSameOrderedMembers=function(e,t,r){new n(e,r,o.notSameOrderedMembers,!0).to.not.have.same.ordered.members(t)},o.sameDeepOrderedMembers=function(e,t,r){new n(e,r,o.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(t)},o.notSameDeepOrderedMembers=function(e,t,r){new n(e,r,o.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(t)},o.includeMembers=function(e,t,r){new n(e,r,o.includeMembers,!0).to.include.members(t)},o.notIncludeMembers=function(e,t,r){new n(e,r,o.notIncludeMembers,!0).to.not.include.members(t)},o.includeDeepMembers=function(e,t,r){new n(e,r,o.includeDeepMembers,!0).to.include.deep.members(t)},o.notIncludeDeepMembers=function(e,t,r){new n(e,r,o.notIncludeDeepMembers,!0).to.not.include.deep.members(t)},o.includeOrderedMembers=function(e,t,r){new n(e,r,o.includeOrderedMembers,!0).to.include.ordered.members(t)},o.notIncludeOrderedMembers=function(e,t,r){new n(e,r,o.notIncludeOrderedMembers,!0).to.not.include.ordered.members(t)},o.includeDeepOrderedMembers=function(e,t,r){new n(e,r,o.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(t)},o.notIncludeDeepOrderedMembers=function(e,t,r){new n(e,r,o.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(t)},o.oneOf=function(e,t,r){new n(e,r,o.oneOf,!0).to.be.oneOf(t)},o.changes=function(e,t,r,s){3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.changes,!0).to.change(t,r)},o.changesBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.changesBy,!0).to.change(t,r).by(s)},o.doesNotChange=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.doesNotChange,!0).to.not.change(t,r)},o.changesButNotBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.changesButNotBy,!0).to.change(t,r).but.not.by(s)},o.increases=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.increases,!0).to.increase(t,r)},o.increasesBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.increasesBy,!0).to.increase(t,r).by(s)},o.doesNotIncrease=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.doesNotIncrease,!0).to.not.increase(t,r)},o.increasesButNotBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.increasesButNotBy,!0).to.increase(t,r).but.not.by(s)},o.decreases=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.decreases,!0).to.decrease(t,r)},o.decreasesBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.decreasesBy,!0).to.decrease(t,r).by(s)},o.doesNotDecrease=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.doesNotDecrease,!0).to.not.decrease(t,r)},o.doesNotDecreaseBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);return new n(e,i,o.doesNotDecreaseBy,!0).to.not.decrease(t,r).by(s)},o.decreasesButNotBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.decreasesButNotBy,!0).to.decrease(t,r).but.not.by(s)}
/*!
   * ### .ifError(object)
   *
   * Asserts if value is not a false value, and throws if it is a true value.
   * This is added to allow for chai to be a drop-in replacement for Node's
   * assert class.
   *
   *     var err = new Error('I am a custom error');
   *     assert.ifError(err); // Rethrows err!
   *
   * @name ifError
   * @param {Object} object
   * @namespace Assert
   * @api public
   */,o.ifError=function(e){if(e)throw e},o.isExtensible=function(e,t){new n(e,t,o.isExtensible,!0).to.be.extensible},o.isNotExtensible=function(e,t){new n(e,t,o.isNotExtensible,!0).to.not.be.extensible},o.isSealed=function(e,t){new n(e,t,o.isSealed,!0).to.be.sealed},o.isNotSealed=function(e,t){new n(e,t,o.isNotSealed,!0).to.not.be.sealed},o.isFrozen=function(e,t){new n(e,t,o.isFrozen,!0).to.be.frozen},o.isNotFrozen=function(e,t){new n(e,t,o.isNotFrozen,!0).to.not.be.frozen},o.isEmpty=function(e,t){new n(e,t,o.isEmpty,!0).to.be.empty},o.isNotEmpty=function(e,t){new n(e,t,o.isNotEmpty,!0).to.not.be.empty},
/*!
   * Aliases.
   */
function e(t,n){return o[n]=o[t],e}("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")}},function(e,t,n){var r=n(22),o=n(37),s=n(24);e.exports=function(e){var t={};return"function"==typeof e&&(e=s.createServer(e)),r.forEach((function(n){t[n]=function(t){return new o(e,n,t)}})),t.del=t.delete,t},e.exports.Test=o,e.exports.agent=n(90)},function(e,t){e.exports=n(67)},function(e,t,n){var r=n(69).IncomingForm;r.IncomingForm=r,e.exports=r},function(e,t,n){var r;global.GENTLY&&(r=GENTLY.hijack(n(70)));var o=r("crypto"),s=r("fs"),i=r("util"),a=r("path"),c=r("./file"),u=r("./multipart_parser").MultipartParser,l=r("./querystring_parser").QuerystringParser,d=r("./octet_parser").OctetParser,p=r("./json_parser").JSONParser,h=r("string_decoder").StringDecoder,f=r("events").EventEmitter,y=r("stream").Stream,m=r("os");function b(e){return this instanceof b?(f.call(this),e=e||{},this.error=null,this.ended=!1,this.maxFields=e.maxFields||1e3,this.maxFieldsSize=e.maxFieldsSize||20971520,this.maxFileSize=e.maxFileSize||209715200,this.keepExtensions=e.keepExtensions||!1,this.uploadDir=e.uploadDir||m.tmpdir&&m.tmpdir()||m.tmpDir(),this.encoding=e.encoding||"utf-8",this.headers=null,this.type=null,this.hash=e.hash||!1,this.multiples=e.multiples||!1,this.bytesReceived=null,this.bytesExpected=null,this._parser=null,this._flushing=0,this._fieldsSize=0,this._fileSize=0,this.openedFiles=[],this):new b(e)}i.inherits(b,f),t.IncomingForm=b,b.prototype.parse=function(e,t){if(this.pause=function(){try{e.pause()}catch(e){return this.ended||this._error(e),!1}return!0},this.resume=function(){try{e.resume()}catch(e){return this.ended||this._error(e),!1}return!0},t){var n={},r={};this.on("field",(function(e,t){n[e]=t})).on("file",(function(e,t){this.multiples&&r[e]?(Array.isArray(r[e])||(r[e]=[r[e]]),r[e].push(t)):r[e]=t})).on("error",(function(e){t(e,n,r)})).on("end",(function(){t(null,n,r)}))}this.writeHeaders(e.headers);var o=this;return e.on("error",(function(e){o._error(e)})).on("aborted",(function(){o.emit("aborted"),o._error(new Error("Request aborted"))})).on("data",(function(e){o.write(e)})).on("end",(function(){if(!o.error){var e=o._parser.end();e&&o._error(e)}})),this},b.prototype.writeHeaders=function(e){this.headers=e,this._parseContentLength(),this._parseContentType()},b.prototype.write=function(e){if(!this.error){if(this._parser){this.bytesReceived+=e.length,this.emit("progress",this.bytesReceived,this.bytesExpected);var t=this._parser.write(e);return t!==e.length&&this._error(new Error("parser error, "+t+" of "+e.length+" bytes parsed")),t}this._error(new Error("uninitialized parser"))}},b.prototype.pause=function(){return!1},b.prototype.resume=function(){return!1},b.prototype.onPart=function(e){this.handlePart(e)},b.prototype.handlePart=function(e){var t=this;if(void 0===e.filename){var n="",r=new h(this.encoding);return e.on("data",(function(e){t._fieldsSize+=e.length,t._fieldsSize>t.maxFieldsSize?t._error(new Error("maxFieldsSize exceeded, received "+t._fieldsSize+" bytes of field data")):n+=r.write(e)})),void e.on("end",(function(){t.emit("field",e.name,n)}))}this._flushing++;var o=new c({path:this._uploadPath(e.filename),name:e.filename,type:e.mime,hash:t.hash});this.emit("fileBegin",e.name,o),o.open(),this.openedFiles.push(o),e.on("data",(function(e){t._fileSize+=e.length,t._fileSize>t.maxFileSize?t._error(new Error("maxFileSize exceeded, received "+t._fileSize+" bytes of file data")):0!=e.length&&(t.pause(),o.write(e,(function(){t.resume()})))})),e.on("end",(function(){o.end((function(){t._flushing--,t.emit("file",e.name,o),t._maybeEnd()}))}))},b.prototype._parseContentType=function(){if(0!==this.bytesExpected)if(this.headers["content-type"])if(this.headers["content-type"].match(/octet-stream/i))this._initOctetStream();else if(this.headers["content-type"].match(/urlencoded/i))this._initUrlencoded();else if(this.headers["content-type"].match(/multipart/i)){var e=this.headers["content-type"].match(/boundary=(?:"([^"]+)"|([^;]+))/i);e?this._initMultipart(e[1]||e[2]):this._error(new Error("bad content-type header, no multipart boundary"))}else this.headers["content-type"].match(/json/i)?this._initJSONencoded():this._error(new Error("bad content-type header, unknown content-type: "+this.headers["content-type"]));else this._error(new Error("bad content-type header, no content-type"));else this._parser=function(e){return{end:function(){return e.ended=!0,e._maybeEnd(),null}}}(this)},b.prototype._error=function(e){this.error||this.ended||(this.error=e,this.emit("error",e),Array.isArray(this.openedFiles)&&this.openedFiles.forEach((function(e){e._writeStream.destroy(),setTimeout(s.unlink,0,e.path,(function(e){}))})))},b.prototype._parseContentLength=function(){this.bytesReceived=0,this.headers["content-length"]?this.bytesExpected=parseInt(this.headers["content-length"],10):void 0===this.headers["transfer-encoding"]&&(this.bytesExpected=0),null!==this.bytesExpected&&this.emit("progress",this.bytesReceived,this.bytesExpected)},b.prototype._newParser=function(){return new u},b.prototype._initMultipart=function(e){this.type="multipart";var t,n,r,o=new u,s=this;o.initWithBoundary(e),o.onPartBegin=function(){(r=new y).readable=!0,r.headers={},r.name=null,r.filename=null,r.mime=null,r.transferEncoding="binary",r.transferBuffer="",t="",n=""},o.onHeaderField=function(e,n,r){t+=e.toString(s.encoding,n,r)},o.onHeaderValue=function(e,t,r){n+=e.toString(s.encoding,t,r)},o.onHeaderEnd=function(){t=t.toLowerCase(),r.headers[t]=n;var e=n.match(/\bname=("([^"]*)"|([^\(\)<>@,;:\\"\/\[\]\?=\{\}\s\t/]+))/i);"content-disposition"==t?(e&&(r.name=e[2]||e[3]||""),r.filename=s._fileName(n)):"content-type"==t?r.mime=n:"content-transfer-encoding"==t&&(r.transferEncoding=n.toLowerCase()),t="",n=""},o.onHeadersEnd=function(){switch(r.transferEncoding){case"binary":case"7bit":case"8bit":o.onPartData=function(e,t,n){r.emit("data",e.slice(t,n))},o.onPartEnd=function(){r.emit("end")};break;case"base64":o.onPartData=function(e,t,n){r.transferBuffer+=e.slice(t,n).toString("ascii");var o=4*parseInt(r.transferBuffer.length/4,10);r.emit("data",new Buffer(r.transferBuffer.substring(0,o),"base64")),r.transferBuffer=r.transferBuffer.substring(o)},o.onPartEnd=function(){r.emit("data",new Buffer(r.transferBuffer,"base64")),r.emit("end")};break;default:return s._error(new Error("unknown transfer-encoding"))}s.onPart(r)},o.onEnd=function(){s.ended=!0,s._maybeEnd()},this._parser=o},b.prototype._fileName=function(e){var t=e.match(/\bfilename=("(.*?)"|([^\(\)<>@,;:\\"\/\[\]\?=\{\}\s\t/]+))($|;\s)/i);if(t){var n=t[2]||t[3]||"",r=n.substr(n.lastIndexOf("\\")+1);return(r=r.replace(/%22/g,'"')).replace(/&#([\d]{4});/g,(function(e,t){return String.fromCharCode(t)}))}},b.prototype._initUrlencoded=function(){this.type="urlencoded";var e=new l(this.maxFields),t=this;e.onField=function(e,n){t.emit("field",e,n)},e.onEnd=function(){t.ended=!0,t._maybeEnd()},this._parser=e},b.prototype._initOctetStream=function(){this.type="octet-stream";var e=this.headers["x-file-name"],t=this.headers["content-type"],n=new c({path:this._uploadPath(e),name:e,type:t});this.emit("fileBegin",e,n),n.open(),this.openedFiles.push(n),this._flushing++;var r=this;r._parser=new d;var o=0;r._parser.on("data",(function(e){r.pause(),o++,n.write(e,(function(){o--,r.resume(),r.ended&&r._parser.emit("doneWritingFile")}))})),r._parser.on("end",(function(){r._flushing--,r.ended=!0;var e=function(){n.end((function(){r.emit("file","file",n),r._maybeEnd()}))};0===o?e():r._parser.once("doneWritingFile",e)}))},b.prototype._initJSONencoded=function(){this.type="json";var e=new p(this),t=this;e.onField=function(e,n){t.emit("field",e,n)},e.onEnd=function(){t.ended=!0,t._maybeEnd()},this._parser=e},b.prototype._uploadPath=function(e){var t="upload_"+o.randomBytes(16).toString("hex");if(this.keepExtensions){var n=a.extname(e);t+=n=n.replace(/(\.[a-z0-9]+).*/i,"$1")}return a.join(this.uploadDir,t)},b.prototype._maybeEnd=function(){!this.ended||this._flushing||this.error||this.emit("end")}},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=70},function(e,t){e.exports=n(71)},function(e,t,n){"use strict";const r=n(28),o=n(29),s=n(73);function i(e){o.call(this);const t=this.res=e.res;this.request=e,this.req=e.req,this.text=t.text,this.body=void 0!==t.body?t.body:{},this.files=t.files||{},this.buffered="string"==typeof this.text,this.header=this.headers=t.headers,this._setStatusProperties(t.statusCode),this._setHeaderProperties(this.header),this.setEncoding=t.setEncoding.bind(t),t.on("data",this.emit.bind(this,"data")),t.on("end",this.emit.bind(this,"end")),t.on("close",this.emit.bind(this,"close")),t.on("error",this.emit.bind(this,"error"))}e.exports=i,r.inherits(i,o),s(i.prototype),i.prototype.destroy=function(e){this.res.destroy(e)},i.prototype.pause=function(){this.res.pause()},i.prototype.resume=function(){this.res.resume()},i.prototype.toError=function(){const e=this.req,t=e.method,n=e.path,r=`cannot ${t} ${n} (${this.status})`,o=new Error(r);return o.status=this.status,o.text=this.text,o.method=t,o.path=n,o},i.prototype.setStatusProperties=function(e){return console.warn("In superagent 2.x setStatusProperties is a private method"),this._setStatusProperties(e)},i.prototype.toJSON=function(){return{req:this.request.toJSON(),header:this.header,status:this.status,text:this.text}}},function(e,t,n){"use strict";var r=n(38);function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}e.exports=o,o.prototype.get=function(e){return this.header[e.toLowerCase()]},o.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=r.type(t);var n=r.params(t);for(var o in n)this[o]=n[o];this.links={};try{e.link&&(this.links=r.parseLinks(e.link))}catch(e){}},o.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}},function(e,t,n){"use strict";const r=n(75).StringDecoder,o=n(29),s=n(39);t.unzip=(e,t)=>{const n=s.createUnzip(),i=new o;let a;i.req=e,n.on("error",e=>{e&&"Z_BUF_ERROR"===e.code?i.emit("end"):i.emit("error",e)}),t.pipe(n),t.setEncoding=e=>{a=new r(e)},n.on("data",e=>{if(a){const t=a.write(e);t.length&&i.emit("data",t)}else i.emit("data",e)}),n.on("end",()=>{i.emit("end")});const c=t.on;t.on=function(e,n){return"data"==e||"end"==e?i.on(e,n):"error"==e?(i.on(e,n),c.call(t,e,n)):c.call(t,e,n),this}}},function(e,t){e.exports=n(75)},function(e,t){e.exports=n(76)},function(e,t){e.exports=n(77)},function(e,t){e.exports=n(78)},function(e){e.exports=JSON.parse('{"name":"superagent","version":"3.8.3","description":"elegant & feature rich browser / node HTTP with a fluent API","scripts":{"prepare":"make all","test":"make test"},"keywords":["http","ajax","request","agent"],"license":"MIT","author":"TJ Holowaychuk <tj@vision-media.ca>","contributors":["Kornel Lesiński <kornel@geekhood.net>","Peter Lyons <pete@peterlyons.com>","Hunter Loftis <hunter@hunterloftis.com>"],"repository":{"type":"git","url":"git://github.com/visionmedia/superagent.git"},"dependencies":{"component-emitter":"^1.2.0","cookiejar":"^2.1.0","debug":"^3.1.0","extend":"^3.0.0","form-data":"^2.3.1","formidable":"^1.2.0","methods":"^1.1.1","mime":"^1.4.1","qs":"^6.5.1","readable-stream":"^2.3.5"},"devDependencies":{"Base64":"^1.0.1","basic-auth-connect":"^1.0.0","body-parser":"^1.18.2","browserify":"^14.1.0","cookie-parser":"^1.4.3","express":"^4.16.3","express-session":"^1.15.6","marked":"0.3.12","mocha":"^3.5.3","multer":"^1.3.0","should":"^11.2.0","should-http":"^0.1.1","zuul":"^3.11.1"},"browser":{"./lib/node/index.js":"./lib/client.js","./test/support/server.js":"./test/support/blank.js"},"component":{"scripts":{"superagent":"lib/client.js"}},"main":"./lib/node/index.js","engines":{"node":">= 4.0"}}')},function(e,t,n){"use strict";var r=n(81);function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}e.exports=o,o.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},o.prototype.parse=function(e){return this._parser=e,this},o.prototype.responseType=function(e){return this._responseType=e,this},o.prototype.serialize=function(e){return this._serializer=e,this},o.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},o.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var s=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];o.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(e,t);if(!0===n)return!0;if(!1===n)return!1}catch(e){console.error(e)}if(t&&t.status&&t.status>=500&&501!=t.status)return!0;if(e){if(e.code&&~s.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},o.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},o.prototype.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(e,t){n.end((function(n,r){n?t(n):e(r)}))}))}return this._fullfilledPromise.then(e,t)},o.prototype.catch=function(e){return this.then(void 0,e)},o.prototype.use=function(e){return e(this),this},o.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},o.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},o.prototype.get=function(e){return this._header[e.toLowerCase()]},o.prototype.getHeader=o.prototype.get,o.prototype.set=function(e,t){if(r(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},o.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},o.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),r(e)){for(var n in e)this.field(n,e[n]);return this}if(Array.isArray(t)){for(var o in t)this.field(e,t[o]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},o.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},o.prototype._auth=function(e,t,n,r){switch(n.type){case"basic":this.set("Authorization","Basic "+r(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},o.prototype.withCredentials=function(e){return null==e&&(e=!0),this._withCredentials=e,this},o.prototype.redirects=function(e){return this._maxRedirects=e,this},o.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},o.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},o.prototype.send=function(e){var t=r(e),n=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&r(this._data))for(var o in e)this._data[o]=e[o];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(n||this.type("json"),this)},o.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},o.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var n=this.url.substring(t+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,t)+"?"+n.join("&")}}},o.prototype._appendQueryString=function(){console.trace("Unsupported")},o.prototype._timeoutError=function(e,t,n){if(!this._aborted){var r=new Error(e+t+"ms exceeded");r.timeout=t,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},o.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))}},function(e,t,n){"use strict";e.exports=function(e){return null!==e&&"object"==typeof e}},function(e,t,n){"use strict";const r=n(30).CookieJar,o=n(30).CookieAccessInfo,s=n(23).parse,i=n(27),a=n(83);let c=n(22);function u(e){if(!(this instanceof u))return new u(e);a.call(this),this.jar=new r,e&&(e.ca&&this.ca(e.ca),e.key&&this.key(e.key),e.pfx&&this.pfx(e.pfx),e.cert&&this.cert(e.cert))}e.exports=u,u.prototype=Object.create(a.prototype),u.prototype._saveCookies=function(e){const t=e.headers["set-cookie"];t&&this.jar.setCookies(t)},u.prototype._attachCookies=function(e){const t=s(e.url),n=o(t.hostname,t.pathname,"https:"==t.protocol),r=this.jar.getCookies(n).toValueString();e.cookies=r},c.forEach(e=>{const t=e.toUpperCase();u.prototype[e]=function(e,n){const r=new i.Request(t,e);return r.on("response",this._saveCookies.bind(this)),r.on("redirect",this._saveCookies.bind(this)),r.on("redirect",this._attachCookies.bind(this,r)),this._attachCookies(r),this._setDefaults(r),n&&r.end(n),r}}),u.prototype.del=u.prototype.delete},function(e,t){function n(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach((function(e){n.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}})),n.prototype._setDefaults=function(e){this._defaults.forEach((function(t){e[t.fn].apply(e,t.arguments)}))},e.exports=n},function(e,t,n){"use strict";t["application/x-www-form-urlencoded"]=n(85),t["application/json"]=n(86),t.text=n(87);const r=n(88);t["application/octet-stream"]=r,t["application/pdf"]=r,t.image=r},function(e,t,n){"use strict";const r=n(41);e.exports=function(e,t){e.text="",e.setEncoding("ascii"),e.on("data",t=>{e.text+=t}),e.on("end",()=>{try{t(null,r.parse(e.text))}catch(e){t(e)}})}},function(e,t,n){"use strict";e.exports=function(e,t){e.text="",e.setEncoding("utf8"),e.on("data",t=>{e.text+=t}),e.on("end",()=>{try{var n=e.text&&JSON.parse(e.text)}catch(t){var r=t;r.rawResponse=e.text||null,r.statusCode=e.statusCode}finally{t(r,n)}})}},function(e,t,n){"use strict";e.exports=function(e,t){e.text="",e.setEncoding("utf8"),e.on("data",t=>{e.text+=t}),e.on("end",t)}},function(e,t,n){"use strict";e.exports=(e,t)=>{const n=[];e.on("data",e=>{n.push(e)}),e.on("end",()=>{t(null,Buffer.concat(n))})}},function(e,t){e.exports=n(89)},function(e,t,n){var r=n(27).agent,o=n(22),s=n(24),i=n(37);function a(e,t){if(!(this instanceof a))return new a(e,t);"function"==typeof e&&(e=s.createServer(e)),t&&(this._ca=t.ca,this._key=t.key,this._cert=t.cert),r.call(this),this.app=e}e.exports=a,Object.setPrototypeOf(a.prototype,r.prototype),a.prototype.host=function(e){return this._host=e,this},o.forEach((function(e){a.prototype[e]=function(t,n){var r=new i(this.app,e.toUpperCase(),t,this._host);return r.ca(this._ca),r.cert(this._cert),r.key(this._key),r.on("response",this._saveCookies.bind(this)),r.on("redirect",this._saveCookies.bind(this)),r.on("redirect",this._attachCookies.bind(this,r)),this._attachCookies(r),this._setDefaults(r),r}})),a.prototype.del=a.prototype.delete},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(14).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(42),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(10),A=n.n(C),L=n(11),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(10)},function(e,t){e.exports=n(11)},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(9);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(13)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(14)},function(e,t){
/*!
 * Chai - flag utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t,n){var r=e.__flags||(e.__flags=Object.create(null));if(3!==arguments.length)return r[t];r[t]=n}},function(e,t,n){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=[];
/*!
 * Chai version
 */t.version="4.2.0",
/*!
 * Assertion Error
 */
t.AssertionError=n(31);
/*!
 * Utils for plugins (not exported)
 */
var o=n(44);t.use=function(e){return~r.indexOf(e)||(e(t,o),r.push(e)),t},
/*!
 * Utility Functions
 */
t.util=o;
/*!
 * Configuration
 */
var s=n(18);t.config=s;
/*!
 * Primary `Assertion` prototype
 */
var i=n(61);t.use(i);
/*!
 * Core Assertions
 */
var a=n(62);t.use(a);
/*!
 * Expect interface
 */
var c=n(63);t.use(c);
/*!
 * Should interface
 */
var u=n(64);t.use(u);
/*!
 * Assert interface
 */
var l=n(65);t.use(l)},function(e,t){
/*!
 * Chai - transferFlags utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t,n){var r=e.__flags||(e.__flags=Object.create(null));for(var o in t.__flags||(t.__flags=Object.create(null)),n=3!==arguments.length||n,r)(n||"object"!==o&&"ssfi"!==o&&"lockSsfi"!==o&&"message"!=o)&&(t.__flags[o]=r[o])}},function(e,t){e.exports={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"]}},function(e,t,n){var r=n(18);
/*!
 * Chai - isProxyEnabled helper
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */e.exports=function(){return r.useProxy&&"undefined"!=typeof Proxy&&"undefined"!=typeof Reflect}},function(e,t){var n=Object.getOwnPropertyDescriptor((function(){}),"length");
/*!
 * Chai - addLengthGuard utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */e.exports=function(e,t,r){return n.configurable?(Object.defineProperty(e,"length",{get:function(){if(r)throw Error("Invalid Chai property: "+t+'.length. Due to a compatibility issue, "length" cannot directly follow "'+t+'". Use "'+t+'.lengthOf" instead.');throw Error("Invalid Chai property: "+t+'.length. See docs for proper usage of "'+t+'".')}}),e):e}},function(e,t,n){var r=n(18),o=n(15),s=n(35),i=n(19),a=["__flags","__methods","_obj","assert"];e.exports=function(e,t){return i()?new Proxy(e,{get:function e(n,i){if("string"==typeof i&&-1===r.proxyExcludedKeys.indexOf(i)&&!Reflect.has(n,i)){if(t)throw Error("Invalid Chai property: "+t+"."+i+'. See docs for proper usage of "'+t+'".');var c=null,u=4;throw s(n).forEach((function(e){if(!Object.prototype.hasOwnProperty(e)&&-1===a.indexOf(e)){var t=function(e,t,n){if(Math.abs(e.length-t.length)>=n)return n;for(var r=[],o=0;o<=e.length;o++)r[o]=Array(t.length+1).fill(0),r[o][0]=o;for(var s=0;s<t.length;s++)r[0][s]=s;for(o=1;o<=e.length;o++){var i=e.charCodeAt(o-1);for(s=1;s<=t.length;s++)Math.abs(o-s)>=n?r[o][s]=n:r[o][s]=Math.min(r[o-1][s]+1,r[o][s-1]+1,r[o-1][s-1]+(i===t.charCodeAt(s-1)?0:1))}return r[e.length][t.length]}(i,e,u);t<u&&(c=e,u=t)}})),null!==c?Error("Invalid Chai property: "+i+'. Did you mean "'+c+'"?'):Error("Invalid Chai property: "+i)}return-1!==a.indexOf(i)||o(n,"lockSsfi")||o(n,"ssfi",e),Reflect.get(n,i)}}):e}},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t,n){var r;r=function(){"use strict";var e="function"==typeof Promise,t="object"==typeof self?self:global,n="undefined"!=typeof Symbol,r="undefined"!=typeof Map,o="undefined"!=typeof Set,s="undefined"!=typeof WeakMap,i="undefined"!=typeof WeakSet,a="undefined"!=typeof DataView,c=n&&void 0!==Symbol.iterator,u=n&&void 0!==Symbol.toStringTag,l=o&&"function"==typeof Set.prototype.entries,d=r&&"function"==typeof Map.prototype.entries,p=l&&Object.getPrototypeOf((new Set).entries()),h=d&&Object.getPrototypeOf((new Map).entries()),f=c&&"function"==typeof Array.prototype[Symbol.iterator],y=f&&Object.getPrototypeOf([][Symbol.iterator]()),m=c&&"function"==typeof String.prototype[Symbol.iterator],b=m&&Object.getPrototypeOf(""[Symbol.iterator]());return function(n){var c=typeof n;if("object"!==c)return c;if(null===n)return"null";if(n===t)return"global";if(Array.isArray(n)&&(!1===u||!(Symbol.toStringTag in n)))return"Array";if("object"==typeof window&&null!==window){if("object"==typeof window.location&&n===window.location)return"Location";if("object"==typeof window.document&&n===window.document)return"Document";if("object"==typeof window.navigator){if("object"==typeof window.navigator.mimeTypes&&n===window.navigator.mimeTypes)return"MimeTypeArray";if("object"==typeof window.navigator.plugins&&n===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"==typeof window.HTMLElement)&&n instanceof window.HTMLElement){if("BLOCKQUOTE"===n.tagName)return"HTMLQuoteElement";if("TD"===n.tagName)return"HTMLTableDataCellElement";if("TH"===n.tagName)return"HTMLTableHeaderCellElement"}}var l=u&&n[Symbol.toStringTag];if("string"==typeof l)return l;var d=Object.getPrototypeOf(n);return d===RegExp.prototype?"RegExp":d===Date.prototype?"Date":e&&d===Promise.prototype?"Promise":o&&d===Set.prototype?"Set":r&&d===Map.prototype?"Map":i&&d===WeakSet.prototype?"WeakSet":s&&d===WeakMap.prototype?"WeakMap":a&&d===DataView.prototype?"DataView":r&&d===h?"Map Iterator":o&&d===p?"Set Iterator":f&&d===y?"Array Iterator":m&&d===b?"String Iterator":null===d?"Object":Object.prototype.toString.call(n).slice(8,-1)}},e.exports=r()},function(e,t,n){var r=n(34),o=n(35),s=n(49),i=n(18);e.exports=function(e,t,n,r){return c({showHidden:t,seen:[],stylize:function(e){return e}},e,void 0===n?2:n)};var a=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&"nodeType"in e&&1===e.nodeType&&"string"==typeof e.nodeName};function c(e,n,y){if(n&&"function"==typeof n.inspect&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var m=n.inspect(y,e);return"string"!=typeof m&&(m=c(e,m,y)),m}var b=function(e,t){switch(typeof t){case"undefined":return e.stylize("undefined","undefined");case"string":var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string");case"number":return 0===t&&1/t==-1/0?e.stylize("-0","number"):e.stylize(""+t,"number");case"boolean":return e.stylize(""+t,"boolean");case"symbol":return e.stylize(t.toString(),"symbol")}if(null===t)return e.stylize("null","null")}(e,n);if(b)return b;if(a(n)){if("outerHTML"in n)return n.outerHTML;try{if(document.xmlVersion)return(new XMLSerializer).serializeToString(n);var g=document.createElementNS("http://www.w3.org/1999/xhtml","_");g.appendChild(n.cloneNode(!1));var w=g.innerHTML.replace("><",">"+n.innerHTML+"<");return g.innerHTML="",w}catch(e){}}var v,_,x=s(n),E=e.showHidden?o(n):x;if(0===E.length||h(n)&&(1===E.length&&"stack"===E[0]||2===E.length&&"description"===E[0]&&"stack"===E[1])){if("function"==typeof n)return _=(v=r(n))?": "+v:"",e.stylize("[Function"+_+"]","special");if(d(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(p(n))return e.stylize(Date.prototype.toUTCString.call(n),"date");if(h(n))return u(n)}var S,O,P="",k=!1,j=!1,q=["{","}"];if("object"==typeof(S=n)&&/\w+Array]$/.test(f(S))&&(j=!0,q=["[","]"]),function(e){return Array.isArray(e)||"object"==typeof e&&"[object Array]"===f(e)}(n)&&(k=!0,q=["[","]"]),"function"==typeof n&&(P=" [Function"+(_=(v=r(n))?": "+v:"")+"]"),d(n)&&(P=" "+RegExp.prototype.toString.call(n)),p(n)&&(P=" "+Date.prototype.toUTCString.call(n)),h(n))return u(n);if(0===E.length&&(!k||0==n.length))return q[0]+P+q[1];if(y<0)return d(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");if(e.seen.push(n),k)O=function(e,t,n,r,o){for(var s=[],i=0,a=t.length;i<a;++i)Object.prototype.hasOwnProperty.call(t,String(i))?s.push(l(e,t,n,r,String(i),!0)):s.push("");return o.forEach((function(o){o.match(/^\d+$/)||s.push(l(e,t,n,r,o,!0))})),s}(e,n,y,x,E);else{if(j)return function(e){for(var t="[ ",n=0;n<e.length;++n){if(t.length>=i.truncateThreshold-7){t+="...";break}t+=e[n]+", "}return-1!==(t+=" ]").indexOf(",  ]")&&(t=t.replace(",  ]"," ]")),t}(n);O=E.map((function(t){return l(e,n,y,x,t,k)}))}return e.seen.pop(),function(e,t,n){return e.reduce((function(e,t){return e+t.length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(O,P,q)}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,n,r,o,s){var i,a,u=Object.getOwnPropertyDescriptor(t,o);if(u&&(u.get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special"))),r.indexOf(o)<0&&(i="["+o+"]"),a||(e.seen.indexOf(t[o])<0?(a=c(e,t[o],null===n?null:n-1)).indexOf("\n")>-1&&(a=s?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),void 0===i){if(s&&o.match(/^\d+$/))return a;(i=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+a}function d(e){return"object"==typeof e&&"[object RegExp]"===f(e)}function p(e){return"object"==typeof e&&"[object Date]"===f(e)}function h(e){return"object"==typeof e&&"[object Error]"===f(e)}function f(e){return Object.prototype.toString.call(e)}},function(e,t,n){"use strict";const r=n(67)("superagent"),o=n(68),s=n(71),i=n(72),a=n(23).parse,c=n(23).format,u=n(23).resolve;let l=n(22);const d=n(29),p=n(38),h=n(74).unzip,f=n(76),y=n(77),m=n(40),b=n(24),g=n(78),w=n(41),v=n(39),_=n(28),x=n(79),E=n(80),S=n(30);function O(e,n){return"function"==typeof n?new t.Request("GET",e).end(n):1==arguments.length?new t.Request("GET",e):new t.Request(e,n)}function P(){}function k(e){const t=`node-superagent/${x.version}`;e._header={"user-agent":t},e.header={"User-Agent":t}}function j(e,t){d.call(this),"string"!=typeof t&&(t=c(t)),this._agent=!1,this._formData=null,this.method=e,this.url=t,k(this),this.writable=!0,this._redirects=0,this.redirects("HEAD"===e?0:5),this.cookies="",this.qs={},this._query=[],this.qsRaw=this._query,this._redirectList=[],this._streamRequest=!1,this.once("end",this.clearTimeout.bind(this))}function q(e){return/[\/+]json($|[^-\w])/.test(e)}function T(e){return~[301,302,303,305,307,308].indexOf(e)}(t=e.exports=O).Request=j,t.agent=n(82),t.Response=i,y.define({"application/x-www-form-urlencoded":["form","urlencoded","form-data"]},!0),t.protocols={"http:":b,"https:":m},t.serialize={"application/x-www-form-urlencoded":w.stringify,"application/json":JSON.stringify},t.parse=n(84),_.inherits(j,d),E(j.prototype),j.prototype.attach=function(e,t,n){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");let o=n||{};"string"==typeof n&&(o={filename:n}),"string"==typeof t?(o.filename||(o.filename=t),r("creating `fs.ReadStream` instance for file: %s",t),t=g.createReadStream(t)):!o.filename&&t.path&&(o.filename=t.path),this._getFormData().append(e,t,o)}return this},j.prototype._getFormData=function(){return this._formData||(this._formData=new s,this._formData.on("error",e=>{this.emit("error",e),this.abort()})),this._formData},j.prototype.agent=function(e){return arguments.length?(this._agent=e,this):this._agent},j.prototype.type=function(e){return this.set("Content-Type",~e.indexOf("/")?e:y.lookup(e))},j.prototype.accept=function(e){return this.set("Accept",~e.indexOf("/")?e:y.lookup(e))},j.prototype.query=function(e){return"string"==typeof e?this._query.push(e):f(this.qs,e),this},j.prototype.write=function(e,t){const n=this.request();return this._streamRequest||(this._streamRequest=!0),n.write(e,t)},j.prototype.pipe=function(e,t){return this.piped=!0,this.buffer(!1),this.end(),this._pipeContinue(e,t)},j.prototype._pipeContinue=function(e,t){return this.req.once("response",n=>{if(T(n.statusCode)&&this._redirects++!=this._maxRedirects)return this._redirect(n)._pipeContinue(e,t);if(this.res=n,this._emitResponse(),!this._aborted){if(this._shouldUnzip(n)){const r=v.createUnzip();r.on("error",t=>{t&&"Z_BUF_ERROR"===t.code?e.emit("end"):e.emit("error",t)}),n.pipe(r).pipe(e,t)}else n.pipe(e,t);n.once("end",()=>{this.emit("end")})}}),e},j.prototype.buffer=function(e){return this._buffer=!1!==e,this},j.prototype._redirect=function(e){let t=e.headers.location;if(!t)return this.callback(new Error("No location header for redirect"),e);r("redirect %s -> %s",this.url,t),t=u(this.url,t),e.resume();let n=this.req._headers;const o=a(t).host!==a(this.url).host;return 301!=e.statusCode&&302!=e.statusCode||(n=p.cleanHeader(this.req._headers,o),this.method="HEAD"==this.method?"HEAD":"GET",this._data=null),303==e.statusCode&&(n=p.cleanHeader(this.req._headers,o),this.method="GET",this._data=null),delete n.host,delete this.req,delete this._formData,k(this),this._endCalled=!1,this.url=t,this.qs={},this._query.length=0,this.set(n),this.emit("redirect",e),this._redirectList.push(this.url),this.end(this._callback),this},j.prototype.auth=function(e,t,n){1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(n=t,t=""),n||(n={type:"basic"});var r=function(e){return new Buffer(e).toString("base64")};return this._auth(e,t,n,r)},j.prototype.ca=function(e){return this._ca=e,this},j.prototype.key=function(e){return this._key=e,this},j.prototype.pfx=function(e){return"object"!=typeof e||Buffer.isBuffer(e)?this._pfx=e:(this._pfx=e.pfx,this._passphrase=e.passphrase),this},j.prototype.cert=function(e){return this._cert=e,this},j.prototype.request=function(){if(this.req)return this.req;const e={};try{const e=w.stringify(this.qs,{indices:!1,strictNullHandling:!0});e&&(this.qs={},this._query.push(e)),this._finalizeQueryString()}catch(e){return this.emit("error",e)}let n=this.url;const r=this._retries;if(0!=n.indexOf("http")&&(n=`http://${n}`),n=a(n),!0===/^https?\+unix:/.test(n.protocol)){n.protocol=`${n.protocol.split("+")[0]}:`;const t=n.path.match(/^([^/]+)(.+)$/);e.socketPath=t[1].replace(/%2F/g,"/"),n.path=t[2]}e.method=this.method,e.port=n.port,e.path=n.path,e.host=n.hostname,e.ca=this._ca,e.key=this._key,e.pfx=this._pfx,e.cert=this._cert,e.passphrase=this._passphrase,e.agent=this._agent;const o=t.protocols[n.protocol],s=this.req=o.request(e);if(s.setNoDelay(!0),"HEAD"!=e.method&&s.setHeader("Accept-Encoding","gzip, deflate"),this.protocol=n.protocol,this.host=n.host,s.once("drain",()=>{this.emit("drain")}),s.once("error",e=>{this._aborted||this._retries===r&&(this.response||this.callback(e))}),n.auth){const e=n.auth.split(":");this.auth(e[0],e[1])}this.username&&this.password&&this.auth(this.username,this.password);for(const e in this.header)this.header.hasOwnProperty(e)&&s.setHeader(e,this.header[e]);if(this.cookies)if(this.header.hasOwnProperty("cookie")){const e=new S.CookieJar;e.setCookies(this.header.cookie.split(";")),e.setCookies(this.cookies.split(";")),s.setHeader("Cookie",e.getCookies(S.CookieAccessInfo.All).toValueString())}else s.setHeader("Cookie",this.cookies);return s},j.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();const n=this._callback||P;if(this.clearTimeout(),this.called)return console.warn("superagent: double callback bug");if(this.called=!0,!e)try{if(!this._isResponseOK(t)){let n="Unsuccessful HTTP response";t&&(n=b.STATUS_CODES[t.status]||n),(e=new Error(n)).status=t?t.status:void 0}}catch(t){e=t}if(!e)return n(null,t);e.response=t,this._maxRetries&&(e.retries=this._retries-1),e&&this.listeners("error").length>0&&this.emit("error",e),n(e,t)},j.prototype._isHost=function(e){return Buffer.isBuffer(e)||e instanceof d||e instanceof s},j.prototype._emitResponse=function(e,t){const n=new i(this);return this.response=n,n.redirects=this._redirectList,void 0!==e&&(n.body=e),n.files=t,this.emit("response",n),n},j.prototype.end=function(e){return this.request(),r("%s %s",this.method,this.url),this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||P,this._end()},j.prototype._end=function(){let e=this._data;const n=this.req;let s=this._buffer;const i=this.method;if(this._setTimeouts(),"HEAD"!=i&&!n._headerSent){if("string"!=typeof e){let r=n.getHeader("Content-Type");r&&(r=r.split(";")[0]);let o=t.serialize[r];!o&&q(r)&&(o=t.serialize["application/json"]),o&&(e=o(e))}e&&!n.getHeader("Content-Length")&&n.setHeader("Content-Length",Buffer.isBuffer(e)?e.length:Buffer.byteLength(e))}n.once("response",e=>{if(r("%s %s -> %s",this.method,this.url,e.statusCode),this._responseTimeoutTimer&&clearTimeout(this._responseTimeoutTimer),this.piped)return;const i=this._maxRedirects,a=p.type(e.headers["content-type"]||"")||"text/plain",c=a.split("/")[0],u="multipart"==c,l=T(e.statusCode);let d=this._parser;const f=this._responseType;if(this.res=e,l&&this._redirects++!=i)return this._redirect(e);if("HEAD"==this.method)return this.emit("end"),void this.callback(null,this._emitResponse());if(this._shouldUnzip(e)&&h(n,e),!d)if(f)d=t.parse.image,s=!0;else if(u){const e=new o.IncomingForm;d=e.parse.bind(e),s=!0}else!function(e){const t=e.split("/")[0];return"image"==t||"video"==t}(a)?t.parse[a]?d=t.parse[a]:"text"==c?(d=t.parse.text,s=!1!==s):q(a)?(d=t.parse["application/json"],s=!1!==s):s&&(d=t.parse.text):(d=t.parse.image,s=!0);(void 0===s&&function(e){const t=e.split("/"),n=t[0],r=t[1];return"text"==n||"x-www-form-urlencoded"==r}(a)||q(a))&&(s=!0);let y=!1;if(s){let t=this._maxResponseSize||2e8;e.on("data",n=>{if((t-=n.byteLength||n.length)<0){const t=Error("Maximum response size reached");t.code="ETOOLARGE",y=!1,e.destroy(t)}})}if(d)try{y=s,d(e,(e,t,n)=>{if(!this.timedout)return e&&!this._aborted?this.callback(e):void(y&&(this.emit("end"),this.callback(null,this._emitResponse(t,n))))})}catch(e){return void this.callback(e)}if(this.res=e,s)e.once("error",e=>{y=!1,this.callback(e,null)}),y||e.once("end",()=>{r("end %s %s",this.method,this.url),this.emit("end"),this.callback(null,this._emitResponse())});else{if(r("unbuffered %s %s",this.method,this.url),this.callback(null,this._emitResponse()),u)return;e.once("end",()=>{r("end %s %s",this.method,this.url),this.emit("end")})}}),this.emit("request",this);const a=()=>{const e=n.getHeader("Content-Length");let t=0;const r=new d.Transform;return r._transform=(n,r,o)=>{t+=n.length,this.emit("progress",{direction:"upload",lengthComputable:!0,loaded:t,total:e}),o(null,n)},r},c=this._formData;if(c){const e=c.getHeaders();for(const t in e)r('setting FormData header: "%s: %s"',t,e[t]),n.setHeader(t,e[t]);c.getLength((e,t)=>{r("got FormData Content-Length: %s",t),"number"==typeof t&&n.setHeader("Content-Length",t),c.pipe(a()).pipe(n)})}else Buffer.isBuffer(e)?(e=>{const t=new d.Readable,n=e.length,r=n%16384,o=n-r;for(let n=0;n<o;n+=16384){const r=e.slice(n,n+16384);t.push(r)}if(r>0){const n=e.slice(-r);t.push(n)}return t.push(null),t})(e).pipe(a()).pipe(n):n.end(e);return this},j.prototype._shouldUnzip=e=>204!==e.statusCode&&304!==e.statusCode&&"0"!==e.headers["content-length"]&&/^\s*(?:deflate|gzip)\s*$/.test(e.headers["content-encoding"]),-1==l.indexOf("del")&&(l=l.slice(0)).push("del"),l.forEach(e=>{const t=e;e=(e="del"==e?"delete":e).toUpperCase(),O[t]=(t,n,r)=>{const o=O(e,t);return"function"==typeof n&&(r=n,n=null),n&&("GET"===e||"HEAD"===e?o.query(n):o.send(n)),r&&o.end(r),o}})},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){!function(){"use strict";function e(t,n,r,o){return this instanceof e?(this.domain=t||void 0,this.path=n||"/",this.secure=!!r,this.script=!!o,this):new e(t,n,r,o)}function n(e,t,r){return e instanceof n?e:this instanceof n?(this.name=null,this.value=null,this.expiration_date=1/0,this.path=String(r||"/"),this.explicit_path=!1,this.domain=t||null,this.explicit_domain=!1,this.secure=!1,this.noscript=!1,e&&this.parse(e,t,r),this):new n(e,t,r)}e.All=Object.freeze(Object.create(null)),t.CookieAccessInfo=e,t.Cookie=n,n.prototype.toString=function(){var e=[this.name+"="+this.value];return this.expiration_date!==1/0&&e.push("expires="+new Date(this.expiration_date).toGMTString()),this.domain&&e.push("domain="+this.domain),this.path&&e.push("path="+this.path),this.secure&&e.push("secure"),this.noscript&&e.push("httponly"),e.join("; ")},n.prototype.toValueString=function(){return this.name+"="+this.value};var r=/[:](?=\s*[a-zA-Z0-9_\-]+\s*[=])/g;function o(){var e,t;return this instanceof o?(e=Object.create(null),this.setCookie=function(r,o,s){var i,a;if(i=(r=new n(r,o,s)).expiration_date<=Date.now(),void 0!==e[r.name]){for(t=e[r.name],a=0;a<t.length;a+=1)if(t[a].collidesWith(r))return i?(t.splice(a,1),0===t.length&&delete e[r.name],!1):(t[a]=r,r);return!i&&(t.push(r),r)}return!i&&(e[r.name]=[r],e[r.name])},this.getCookie=function(n,r){var o,s;if(t=e[n])for(s=0;s<t.length;s+=1)if((o=t[s]).expiration_date<=Date.now())0===t.length&&delete e[o.name];else if(o.matches(r))return o},this.getCookies=function(t){var n,r,o=[];for(n in e)(r=this.getCookie(n,t))&&o.push(r);return o.toString=function(){return o.join(":")},o.toValueString=function(){return o.map((function(e){return e.toValueString()})).join(";")},o},this):new o}n.prototype.parse=function(e,t,r){if(this instanceof n){var o,s=e.split(";").filter((function(e){return!!e})),i=s[0].match(/([^=]+)=([\s\S]*)/);if(!i)return void console.warn("Invalid cookie header encountered. Header: '"+e+"'");var a=i[1],c=i[2];if("string"!=typeof a||0===a.length||"string"!=typeof c)return void console.warn("Unable to extract values from cookie header. Cookie: '"+e+"'");for(this.name=a,this.value=c,o=1;o<s.length;o+=1)switch(a=(i=s[o].match(/([^=]+)(?:=([\s\S]*))?/))[1].trim().toLowerCase(),c=i[2],a){case"httponly":this.noscript=!0;break;case"expires":this.expiration_date=c?Number(Date.parse(c)):1/0;break;case"path":this.path=c?c.trim():"",this.explicit_path=!0;break;case"domain":this.domain=c?c.trim():"",this.explicit_domain=!!this.domain;break;case"secure":this.secure=!0}return this.explicit_path||(this.path=r||"/"),this.explicit_domain||(this.domain=t),this}return(new n).parse(e,t,r)},n.prototype.matches=function(t){return t===e.All||!(this.noscript&&t.script||this.secure&&!t.secure||!this.collidesWith(t))},n.prototype.collidesWith=function(e){if(this.path&&!e.path||this.domain&&!e.domain)return!1;if(this.path&&0!==e.path.indexOf(this.path))return!1;if(this.explicit_path&&0!==e.path.indexOf(this.path))return!1;var t=e.domain&&e.domain.replace(/^[\.]/,""),n=this.domain&&this.domain.replace(/^[\.]/,"");if(n===t)return!0;if(n){if(!this.explicit_domain)return!1;var r=t.indexOf(n);return-1!==r&&r===t.length-n.length}return!0},t.CookieJar=o,o.prototype.setCookies=function(e,t,o){var s,i,a=[];for(e=(e=Array.isArray(e)?e:e.split(r)).map((function(e){return new n(e,t,o)})),s=0;s<e.length;s+=1)i=e[s],this.setCookie(i,t,o)&&a.push(i);return a}}()},function(e,t){
/*!
 * assertion-error
 * Copyright(c) 2013 Jake Luer <jake@qualiancy.com>
 * MIT Licensed
 */
/*!
 * Return a function that will copy properties from
 * one object to another excluding any originally
 * listed. Returned function will create a new `{}`.
 *
 * @param {String} excluded properties ...
 * @return {Function}
 */
function n(){var e=[].slice.call(arguments);function t(t,n){Object.keys(n).forEach((function(r){~e.indexOf(r)||(t[r]=n[r])}))}return function(){for(var e=[].slice.call(arguments),n=0,r={};n<e.length;n++)t(r,e[n]);return r}}function r(e,t,o){var s=n("name","message","stack","constructor","toJSON")(t||{});for(var i in this.message=e||"Unspecified AssertionError",this.showDiff=!1,s)this[i]=s[i];if(o=o||r,Error.captureStackTrace)Error.captureStackTrace(this,o);else try{throw new Error}catch(e){this.stack=e.stack}}
/*!
 * Inherit from Error.prototype
 */
/*!
 * Primary Exports
 */e.exports=r,r.prototype=Object.create(Error.prototype),
/*!
 * Statically set name
 */
r.prototype.name="AssertionError",
/*!
 * Ensure correct constructor
 */
r.prototype.constructor=r,r.prototype.toJSON=function(e){var t=n("constructor","toJSON","stack")({name:this.name},this);return!1!==e&&this.stack&&(t.stack=this.stack),t}},function(e,t){
/*!
 * Chai - getActual utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){return t.length>4?t[4]:e._obj}},function(e,t,n){
/*!
 * Chai - flag utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(26),o=n(18);e.exports=function(e){var t=r(e),n=Object.prototype.toString.call(e);if(o.truncateThreshold&&t.length>=o.truncateThreshold){if("[object Function]"===n)return e.name&&""!==e.name?"[Function: "+e.name+"]":"[Function]";if("[object Array]"===n)return"[ Array("+e.length+") ]";if("[object Object]"===n){var s=Object.keys(e);return"{ Object ("+(s.length>2?s.splice(0,2).join(", ")+", ...":s.join(", "))+") }"}return t}return t}},function(e,t,n){"use strict";var r=Function.prototype.toString,o=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\s\(\/]+)/;e.exports=function(e){if("function"!=typeof e)return null;var t="";if(void 0===Function.prototype.name&&void 0===e.name){var n=r.call(e).match(o);n&&(t=n[1])}else t=e.name;return t}},function(e,t){
/*!
 * Chai - getProperties utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e){var t=Object.getOwnPropertyNames(e);function n(e){-1===t.indexOf(e)&&t.push(e)}for(var r=Object.getPrototypeOf(e);null!==r;)Object.getOwnPropertyNames(r).forEach(n),r=Object.getPrototypeOf(r);return t}},function(e,t){
/*!
 * Chai - getOwnEnumerablePropertySymbols utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e){return"function"!=typeof Object.getOwnPropertySymbols?[]:Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))}},function(e,t,n){var r=n(27),o=n(28),s=n(24),i=n(40),a=n(89),c=r.Request;function u(e,t,n,r){c.call(this,t.toUpperCase(),n),this.redirects(0),this.buffer(),this.app=e,this._asserts=[],this.url="string"==typeof e?e+n:this.serverAddress(e,n,r)}function l(e,t,n){var r=new Error(e);return r.expected=t,r.actual=n,r.showDiff=!0,r}e.exports=u,Object.setPrototypeOf(u.prototype,c.prototype),u.prototype.serverAddress=function(e,t,n){var r;return e.address()||(this._server=e.listen(0)),r=e.address().port,(e instanceof i.Server?"https":"http")+"://"+(n||"127.0.0.1")+":"+r+t},u.prototype.expect=function(e,t,n){return"function"==typeof e?(this._asserts.push(e),this):("function"==typeof t&&this.end(t),"function"==typeof n&&this.end(n),"number"==typeof e?(this._asserts.push(this._assertStatus.bind(this,e)),"function"!=typeof t&&arguments.length>1&&this._asserts.push(this._assertBody.bind(this,t)),this):"string"==typeof t||"number"==typeof t||t instanceof RegExp?(this._asserts.push(this._assertHeader.bind(this,{name:""+e,value:t})),this):(this._asserts.push(this._assertBody.bind(this,e)),this))},u.prototype.end=function(e){var t=this,n=this._server;return c.prototype.end.call(this,(function(r,o){if(n&&n._handle)return n.close(s);function s(){t.assert(r,o,e)}s()})),this},u.prototype.assert=function(e,t,n){var r,o,s={ECONNREFUSED:"Connection refused",ECONNRESET:"Connection reset by peer",EPIPE:"Broken pipe",ETIMEDOUT:"Operation timed out"};for(!t&&e&&(r=e instanceof Error&&"connect"===e.syscall&&Object.getOwnPropertyNames(s).indexOf(e.code)>=0?new Error(e.code+": "+s[e.code]):e),o=0;o<this._asserts.length&&!r;o+=1)r=this._assertFunction(this._asserts[o],t);r||!(e instanceof Error)||t&&e.status===t.status||(r=e),n.call(this,r||null,t)},u.prototype._assertBody=function(e,t){var n,r,s=e instanceof RegExp;if("object"!=typeof e||s){if(e!==t.text){if(n=o.inspect(e),r=o.inspect(t.text),!s)return l("expected "+n+" response body, got "+r,e,t.body);if(!e.test(t.text))return l("expected body "+r+" to match "+e,e,t.body)}}else try{a.deepStrictEqual(e,t.body)}catch(s){return l("expected "+(n=o.inspect(e))+" response body, got "+(r=o.inspect(t.body)),e,t.body)}},u.prototype._assertHeader=function(e,t){var n=e.name,r=t.header[n.toLowerCase()],o=e.value;return void 0===r?new Error('expected "'+n+'" header field'):Array.isArray(r)&&r.toString()===o||o===r?void 0:o instanceof RegExp?o.test(r)?void 0:new Error('expected "'+n+'" matching '+o+', got "'+r+'"'):new Error('expected "'+n+'" of "'+o+'", got "'+r+'"')},u.prototype._assertStatus=function(e,t){var n,r;if(t.status!==e)return n=s.STATUS_CODES[e],r=s.STATUS_CODES[t.status],new Error("expected "+e+' "'+n+'", got '+t.status+' "'+r+'"')},u.prototype._assertFunction=function(e,t){var n;try{n=e(t)}catch(e){n=e}if(n instanceof Error)return n}},function(e,t,n){"use strict";t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){return e.split(/ *; */).reduce((function(e,t){var n=t.split(/ *= */),r=n.shift(),o=n.shift();return r&&o&&(e[r]=o),e}),{})},t.parseLinks=function(e){return e.split(/ *, */).reduce((function(e,t){var n=t.split(/ *; */),r=n[0].slice(1,-1);return e[n[1].split(/ *= */)[1].slice(1,-1)]=r,e}),{})},t.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},function(e,t){e.exports=n(39)},function(e,t){e.exports=n(40)},function(e,t){e.exports=n(41)},function(e,t,n){const{expect:r}=n(43),o=n(66);n(91);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){e.exports=n(16)},function(e,t,n){
/*!
 * chai
 * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Dependencies that are used for multiple exports are required here only once
 */
var r=n(45);
/*!
 * test utility
 */t.test=n(46),
/*!
 * type utility
 */
t.type=n(25),
/*!
 * expectTypes utility
 */
t.expectTypes=n(47),
/*!
 * message utility
 */
t.getMessage=n(48),
/*!
 * actual utility
 */
t.getActual=n(32),
/*!
 * Inspect util
 */
t.inspect=n(26),
/*!
 * Object Display util
 */
t.objDisplay=n(33),
/*!
 * Flag utility
 */
t.flag=n(15),
/*!
 * Flag transferring utility
 */
t.transferFlags=n(17),
/*!
 * Deep equal utility
 */
t.eql=n(50),
/*!
 * Deep path info
 */
t.getPathInfo=r.getPathInfo,
/*!
 * Check if a property exists
 */
t.hasProperty=r.hasProperty,
/*!
 * Function name
 */
t.getName=n(34),
/*!
 * add Property
 */
t.addProperty=n(51),
/*!
 * add Method
 */
t.addMethod=n(52),
/*!
 * overwrite Property
 */
t.overwriteProperty=n(53),
/*!
 * overwrite Method
 */
t.overwriteMethod=n(54),
/*!
 * Add a chainable method
 */
t.addChainableMethod=n(55),
/*!
 * Overwrite chainable method
 */
t.overwriteChainableMethod=n(56),
/*!
 * Compare by inspect method
 */
t.compareByInspect=n(57),
/*!
 * Get own enumerable property symbols method
 */
t.getOwnEnumerablePropertySymbols=n(36),
/*!
 * Get own enumerable properties method
 */
t.getOwnEnumerableProperties=n(58),
/*!
 * Checks error against a given set of criteria
 */
t.checkError=n(59),
/*!
 * Proxify util
 */
t.proxify=n(21),
/*!
 * addLengthGuard util
 */
t.addLengthGuard=n(20),
/*!
 * isProxyEnabled helper
 */
t.isProxyEnabled=n(19),
/*!
 * isNaN method
 */
t.isNaN=n(60)},function(e,t,n){"use strict";function r(e,t){return null!=e&&t in Object(e)}function o(e){return e.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map((function(e){var t=/^\[(\d+)\]$/.exec(e);return t?{i:parseFloat(t[1])}:{p:e.replace(/\\([.\[\]])/g,"$1")}}))}function s(e,t,n){var r=e,o=null;n=void 0===n?t.length:n;for(var s=0;s<n;s++){var i=t[s];r&&(r=void 0===i.p?r[i.i]:r[i.p],s===n-1&&(o=r))}return o}function i(e,t){var n=o(t),i=n[n.length-1],a={parent:n.length>1?s(e,n,n.length-1):e,name:i.p||i.i,value:s(e,n)};return a.exists=r(a.parent,a.name),a}e.exports={hasProperty:r,getPathInfo:i,getPathValue:function(e,t){return i(e,t).value},setPathValue:function(e,t,n){return function(e,t,n){for(var r=e,o=n.length,s=null,i=0;i<o;i++){var a=null,c=null;if(s=n[i],i===o-1)r[a=void 0===s.p?s.i:s.p]=t;else if(void 0!==s.p&&r[s.p])r=r[s.p];else if(void 0!==s.i&&r[s.i])r=r[s.i];else{var u=n[i+1];a=void 0===s.p?s.i:s.p,c=void 0===u.p?[]:{},r[a]=c,r=r[a]}}}(e,n,o(t)),e}}},function(e,t,n){
/*!
 * Chai - test utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(15);e.exports=function(e,t){var n=r(e,"negate"),o=t[0];return n?!o:o}},function(e,t,n){
/*!
 * Chai - expectTypes utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(31),o=n(15),s=n(25);e.exports=function(e,t){var n=o(e,"message"),i=o(e,"ssfi");n=n?n+": ":"",e=o(e,"object"),(t=t.map((function(e){return e.toLowerCase()}))).sort();var a=t.map((function(e,n){var r=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an":"a";return(t.length>1&&n===t.length-1?"or ":"")+r+" "+e})).join(", "),c=s(e).toLowerCase();if(!t.some((function(e){return c===e})))throw new r(n+"object tested must be "+a+", but "+c+" given",void 0,i)}},function(e,t,n){
/*!
 * Chai - message composition utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(15),o=n(32),s=n(33);e.exports=function(e,t){var n=r(e,"negate"),i=r(e,"object"),a=t[3],c=o(e,t),u=n?t[2]:t[1],l=r(e,"message");return"function"==typeof u&&(u=u()),u=(u=u||"").replace(/#\{this\}/g,(function(){return s(i)})).replace(/#\{act\}/g,(function(){return s(c)})).replace(/#\{exp\}/g,(function(){return s(a)})),l?l+": "+u:u}},function(e,t){
/*!
 * Chai - getEnumerableProperties utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e){var t=[];for(var n in e)t.push(n);return t}},function(e,t,n){"use strict";
/*!
 * deep-eql
 * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */var r=n(25);function o(){this._key="chai/deep-eql__"+Math.random()+Date.now()}o.prototype={get:function(e){return e[this._key]},set:function(e,t){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:t,configurable:!0})}};var s="function"==typeof WeakMap?WeakMap:o;
/*!
 * Check to see if the MemoizeMap has recorded a result of the two operands
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {MemoizeMap} memoizeMap
 * @returns {Boolean|null} result
*/function i(e,t,n){if(!n||y(e)||y(t))return null;var r=n.get(e);if(r){var o=r.get(t);if("boolean"==typeof o)return o}return null}
/*!
 * Set the result of the equality into the MemoizeMap
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {MemoizeMap} memoizeMap
 * @param {Boolean} result
*/function a(e,t,n,r){if(n&&!y(e)&&!y(t)){var o=n.get(e);o?o.set(t,r):((o=new s).set(t,r),n.set(e,o))}}
/*!
 * Primary Export
 */function c(e,t,n){if(n&&n.comparator)return l(e,t,n);var r=u(e,t);return null!==r?r:l(e,t,n)}function u(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t||!y(e)&&!y(t)&&null}
/*!
 * The main logic of the `deepEqual` function.
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Object} [options] (optional) Additional options
 * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
 * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
    complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
    references to blow the stack.
 * @return {Boolean} equal match
*/function l(e,t,n){(n=n||{}).memoize=!1!==n.memoize&&(n.memoize||new s);var o=n&&n.comparator,l=i(e,t,n.memoize);if(null!==l)return l;var y=i(t,e,n.memoize);if(null!==y)return y;if(o){var m=o(e,t);if(!1===m||!0===m)return a(e,t,n.memoize,m),m;var b=u(e,t);if(null!==b)return b}var g=r(e);if(g!==r(t))return a(e,t,n.memoize,!1),!1;a(e,t,n.memoize,!0);var w=function(e,t,n,r){switch(n){case"String":case"Number":case"Boolean":case"Date":return c(e.valueOf(),t.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":case"Error":return e===t;case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return d(e,t,r);case"RegExp":
/*!
 * Compare two Regular Expressions for equality.
 *
 * @param {RegExp} leftHandOperand
 * @param {RegExp} rightHandOperand
 * @return {Boolean} result
 */
return function(e,t){return e.toString()===t.toString()}
/*!
 * Compare two Sets/Maps for equality. Faster than other equality functions.
 *
 * @param {Set} leftHandOperand
 * @param {Set} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */(e,t);case"Generator":
/*!
 * Simple equality for generator objects such as those returned by generator functions.
 *
 * @param {Iterable} leftHandOperand
 * @param {Iterable} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */
return function(e,t,n){return d(h(e),h(t),n)}
/*!
 * Determine if the given object has an @@iterator function.
 *
 * @param {Object} target
 * @return {Boolean} `true` if the object has an @@iterator function.
 */(e,t,r);case"DataView":return d(new Uint8Array(e.buffer),new Uint8Array(t.buffer),r);case"ArrayBuffer":return d(new Uint8Array(e),new Uint8Array(t),r);case"Set":case"Map":return function(e,t,n){if(e.size!==t.size)return!1;if(0===e.size)return!0;var r=[],o=[];return e.forEach((function(e,t){r.push([e,t])})),t.forEach((function(e,t){o.push([e,t])})),d(r.sort(),o.sort(),n);
/*!
 * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
 *
 * @param {Iterable} leftHandOperand
 * @param {Iterable} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */}(e,t,r);default:
/*!
 * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
 * for each enumerable key in the object.
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */
return function(e,t,n){var r=f(e),o=f(t);if(r.length&&r.length===o.length)return r.sort(),o.sort(),!1!==d(r,o)&&
/*!
 * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
 * each key. If any value of the given key is not equal, the function will return false (early).
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */
function(e,t,n,r){var o=n.length;if(0===o)return!0;for(var s=0;s<o;s+=1)if(!1===c(e[n[s]],t[n[s]],r))return!1;return!0}(e,t,r,n);var s=p(e),i=p(t);return s.length&&s.length===i.length?(s.sort(),i.sort(),d(s,i,n)):0===r.length&&0===s.length&&0===o.length&&0===i.length}
/*!
 * Returns true if the argument is a primitive.
 *
 * This intentionally returns true for all objects that can be compared by reference,
 * including functions and symbols.
 *
 * @param {Mixed} value
 * @return {Boolean} result
 */(e,t,r)}}(e,t,g,n);return a(e,t,n.memoize,w),w}function d(e,t,n){var r=e.length;if(r!==t.length)return!1;if(0===r)return!0;for(var o=-1;++o<r;)if(!1===c(e[o],t[o],n))return!1;return!0}
/*!
 * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
 * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
 *
 * @param {Object} target
 * @returns {Array} an array of entries from the @@iterator function
 */function p(e){if(function(e){return"undefined"!=typeof Symbol&&"object"==typeof e&&void 0!==Symbol.iterator&&"function"==typeof e[Symbol.iterator]}(e))try{return h(e[Symbol.iterator]())}catch(e){return[]}return[]}
/*!
 * Gets all entries from a Generator. This will consume the generator - which could have side effects.
 *
 * @param {Generator} target
 * @returns {Array} an array of entries from the Generator.
 */function h(e){for(var t=e.next(),n=[t.value];!1===t.done;)t=e.next(),n.push(t.value);return n}
/*!
 * Gets all own and inherited enumerable keys from a target.
 *
 * @param {Object} target
 * @returns {Array} an array of own and inherited enumerable keys from the target.
 */function f(e){var t=[];for(var n in e)t.push(n);return t}function y(e){return null===e||"object"!=typeof e}e.exports=c,e.exports.MemoizeMap=s},function(e,t,n){
/*!
 * Chai - addProperty utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(16),o=n(15),s=n(19),i=n(17);e.exports=function(e,t,n){n=void 0===n?function(){}:n,Object.defineProperty(e,t,{get:function e(){s()||o(this,"lockSsfi")||o(this,"ssfi",e);var t=n.call(this);if(void 0!==t)return t;var a=new r.Assertion;return i(this,a),a},configurable:!0})}},function(e,t,n){
/*!
 * Chai - addMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(20),o=n(16),s=n(15),i=n(21),a=n(17);e.exports=function(e,t,n){var c=function(){s(this,"lockSsfi")||s(this,"ssfi",c);var e=n.apply(this,arguments);if(void 0!==e)return e;var t=new o.Assertion;return a(this,t),t};r(c,t,!1),e[t]=i(c,t)}},function(e,t,n){
/*!
 * Chai - overwriteProperty utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(16),o=n(15),s=n(19),i=n(17);e.exports=function(e,t,n){var a=Object.getOwnPropertyDescriptor(e,t),c=function(){};a&&"function"==typeof a.get&&(c=a.get),Object.defineProperty(e,t,{get:function e(){s()||o(this,"lockSsfi")||o(this,"ssfi",e);var t=o(this,"lockSsfi");o(this,"lockSsfi",!0);var a=n(c).call(this);if(o(this,"lockSsfi",t),void 0!==a)return a;var u=new r.Assertion;return i(this,u),u},configurable:!0})}},function(e,t,n){
/*!
 * Chai - overwriteMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(20),o=n(16),s=n(15),i=n(21),a=n(17);e.exports=function(e,t,n){var c=e[t],u=function(){throw new Error(t+" is not a function")};c&&"function"==typeof c&&(u=c);var l=function(){s(this,"lockSsfi")||s(this,"ssfi",l);var e=s(this,"lockSsfi");s(this,"lockSsfi",!0);var t=n(u).apply(this,arguments);if(s(this,"lockSsfi",e),void 0!==t)return t;var r=new o.Assertion;return a(this,r),r};r(l,t,!1),e[t]=i(l,t)}},function(e,t,n){
/*!
 * Chai - addChainingMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(20),o=n(16),s=n(15),i=n(21),a=n(17),c="function"==typeof Object.setPrototypeOf,u=function(){},l=Object.getOwnPropertyNames(u).filter((function(e){var t=Object.getOwnPropertyDescriptor(u,e);return"object"!=typeof t||!t.configurable})),d=Function.prototype.call,p=Function.prototype.apply;e.exports=function(e,t,n,u){"function"!=typeof u&&(u=function(){});var h={method:n,chainingBehavior:u};e.__methods||(e.__methods={}),e.__methods[t]=h,Object.defineProperty(e,t,{get:function(){h.chainingBehavior.call(this);var n=function(){s(this,"lockSsfi")||s(this,"ssfi",n);var e=h.method.apply(this,arguments);if(void 0!==e)return e;var t=new o.Assertion;return a(this,t),t};if(r(n,t,!0),c){var u=Object.create(this);u.call=d,u.apply=p,Object.setPrototypeOf(n,u)}else Object.getOwnPropertyNames(e).forEach((function(t){if(-1===l.indexOf(t)){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r)}}));return a(this,n),i(n)},configurable:!0})}},function(e,t,n){
/*!
 * Chai - overwriteChainableMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(16),o=n(17);e.exports=function(e,t,n,s){var i=e.__methods[t],a=i.chainingBehavior;i.chainingBehavior=function(){var e=s(a).call(this);if(void 0!==e)return e;var t=new r.Assertion;return o(this,t),t};var c=i.method;i.method=function(){var e=n(c).apply(this,arguments);if(void 0!==e)return e;var t=new r.Assertion;return o(this,t),t}}},function(e,t,n){
/*!
 * Chai - compareByInspect utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(26);e.exports=function(e,t){return r(e)<r(t)?-1:1}},function(e,t,n){
/*!
 * Chai - getOwnEnumerableProperties utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var r=n(36);e.exports=function(e){return Object.keys(e).concat(r(e))}},function(e,t,n){"use strict";var r=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\(\/]+)/;function o(e){var t="";if(void 0===e.name){var n=String(e).match(r);n&&(t=n[1])}else t=e.name;return t}e.exports={compatibleInstance:function(e,t){return t instanceof Error&&e===t},compatibleConstructor:function(e,t){return t instanceof Error?e.constructor===t.constructor||e instanceof t.constructor:(t.prototype instanceof Error||t===Error)&&(e.constructor===t||e instanceof t)},compatibleMessage:function(e,t){var n="string"==typeof e?e:e.message;return t instanceof RegExp?t.test(n):"string"==typeof t&&-1!==n.indexOf(t)},getMessage:function(e){var t="";return e&&e.message?t=e.message:"string"==typeof e&&(t=e),t},getConstructorName:function(e){var t=e;return e instanceof Error?t=o(e.constructor):"function"==typeof e&&(t=o(e).trim()||o(new e)),t}}},function(e,t){e.exports=Number.isNaN||
/*!
 * Chai - isNaN utility
 * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
 * MIT Licensed
 */
function(e){return e!=e}},function(e,t,n){
/*!
 * chai
 * http://chaijs.com
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var r=n(18);e.exports=function(e,t){
/*!
   * Module dependencies.
   */
var n=e.AssertionError,o=t.flag;
/*!
   * Module export.
   */
/*!
   * Assertion Constructor
   *
   * Creates object for chaining.
   *
   * `Assertion` objects contain metadata in the form of flags. Three flags can
   * be assigned during instantiation by passing arguments to this constructor:
   *
   * - `object`: This flag contains the target of the assertion. For example, in
   *   the assertion `expect(numKittens).to.equal(7);`, the `object` flag will
   *   contain `numKittens` so that the `equal` assertion can reference it when
   *   needed.
   *
   * - `message`: This flag contains an optional custom error message to be
   *   prepended to the error message that's generated by the assertion when it
   *   fails.
   *
   * - `ssfi`: This flag stands for "start stack function indicator". It
   *   contains a function reference that serves as the starting point for
   *   removing frames from the stack trace of the error that's created by the
   *   assertion when it fails. The goal is to provide a cleaner stack trace to
   *   end users by removing Chai's internal functions. Note that it only works
   *   in environments that support `Error.captureStackTrace`, and only when
   *   `Chai.config.includeStack` hasn't been set to `false`.
   *
   * - `lockSsfi`: This flag controls whether or not the given `ssfi` flag
   *   should retain its current value, even as assertions are chained off of
   *   this object. This is usually set to `true` when creating a new assertion
   *   from within another assertion. It's also temporarily set to `true` before
   *   an overwritten assertion gets called by the overwriting assertion.
   *
   * @param {Mixed} obj target of the assertion
   * @param {String} msg (optional) custom error message
   * @param {Function} ssfi (optional) starting point for removing stack frames
   * @param {Boolean} lockSsfi (optional) whether or not the ssfi flag is locked
   * @api private
   */function s(e,n,r,i){return o(this,"ssfi",r||s),o(this,"lockSsfi",i),o(this,"object",e),o(this,"message",n),t.proxify(this)}e.Assertion=s,Object.defineProperty(s,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack},set:function(e){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack=e}}),Object.defineProperty(s,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff},set:function(e){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff=e}}),s.addProperty=function(e,n){t.addProperty(this.prototype,e,n)},s.addMethod=function(e,n){t.addMethod(this.prototype,e,n)},s.addChainableMethod=function(e,n,r){t.addChainableMethod(this.prototype,e,n,r)},s.overwriteProperty=function(e,n){t.overwriteProperty(this.prototype,e,n)},s.overwriteMethod=function(e,n){t.overwriteMethod(this.prototype,e,n)},s.overwriteChainableMethod=function(e,n,r){t.overwriteChainableMethod(this.prototype,e,n,r)},s.prototype.assert=function(e,s,i,a,c,u){var l=t.test(this,arguments);if(!1!==u&&(u=!0),void 0===a&&void 0===c&&(u=!1),!0!==r.showDiff&&(u=!1),!l){s=t.getMessage(this,arguments);var d=t.getActual(this,arguments);throw new n(s,{actual:d,expected:a,showDiff:u},r.includeStack?this.assert:o(this,"ssfi"))}},
/*!
   * ### ._obj
   *
   * Quick reference to stored `actual` value for plugin developers.
   *
   * @api private
   */
Object.defineProperty(s.prototype,"_obj",{get:function(){return o(this,"object")},set:function(e){o(this,"object",e)}})}},function(e,t){
/*!
 * chai
 * http://chaijs.com
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){var n=e.Assertion,r=e.AssertionError,o=t.flag;function s(e,n){n&&o(this,"message",n),e=e.toLowerCase();var r=o(this,"object"),s=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an ":"a ";this.assert(e===t.type(r).toLowerCase(),"expected #{this} to be "+s+e,"expected #{this} not to be "+s+e)}function i(e,n){return t.isNaN(e)&&t.isNaN(n)||e===n}function a(){o(this,"contains",!0)}function c(e,s){s&&o(this,"message",s);var a=o(this,"object"),c=t.type(a).toLowerCase(),u=o(this,"message"),l=o(this,"negate"),d=o(this,"ssfi"),p=o(this,"deep"),h=p?"deep ":"";u=u?u+": ":"";var f=!1;switch(c){case"string":f=-1!==a.indexOf(e);break;case"weakset":if(p)throw new r(u+"unable to use .deep.include with WeakSet",void 0,d);f=a.has(e);break;case"map":var y=p?t.eql:i;a.forEach((function(t){f=f||y(t,e)}));break;case"set":p?a.forEach((function(n){f=f||t.eql(n,e)})):f=a.has(e);break;case"array":f=p?a.some((function(n){return t.eql(n,e)})):-1!==a.indexOf(e);break;default:if(e!==Object(e))throw new r(u+"object tested must be an array, a map, an object, a set, a string, or a weakset, but "+c+" given",void 0,d);var m=Object.keys(e),b=null,g=0;if(m.forEach((function(s){var i=new n(a);if(t.transferFlags(this,i,!0),o(i,"lockSsfi",!0),l&&1!==m.length)try{i.property(s,e[s])}catch(e){if(!t.checkError.compatibleConstructor(e,r))throw e;null===b&&(b=e),g++}else i.property(s,e[s])}),this),l&&m.length>1&&g===m.length)throw b;return}this.assert(f,"expected #{this} to "+h+"include "+t.inspect(e),"expected #{this} to not "+h+"include "+t.inspect(e))}function u(){var e=o(this,"object"),n=t.type(e);this.assert("Arguments"===n,"expected #{this} to be arguments but got "+n,"expected #{this} to not be arguments")}function l(e,t){t&&o(this,"message",t);var n=o(this,"object");if(o(this,"deep")){var r=o(this,"lockSsfi");o(this,"lockSsfi",!0),this.eql(e),o(this,"lockSsfi",r)}else this.assert(e===n,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",e,this._obj,!0)}function d(e,n){n&&o(this,"message",n),this.assert(t.eql(e,o(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",e,this._obj,!0)}function p(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to above must be a number":i=l+"the argument to above must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y>e,"expected #{this} to have a "+m+" above #{exp} but got #{act}","expected #{this} to not have a "+m+" above #{exp}",e,y)}else this.assert(a>e,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",e)}function h(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to least must be a number":i=l+"the argument to least must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y>=e,"expected #{this} to have a "+m+" at least #{exp} but got #{act}","expected #{this} to have a "+m+" below #{exp}",e,y)}else this.assert(a>=e,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",e)}function f(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to below must be a number":i=l+"the argument to below must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y<e,"expected #{this} to have a "+m+" below #{exp} but got #{act}","expected #{this} to not have a "+m+" below #{exp}",e,y)}else this.assert(a<e,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",e)}function y(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to most must be a number":i=l+"the argument to most must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y<=e,"expected #{this} to have a "+m+" at most #{exp} but got #{act}","expected #{this} to have a "+m+" above #{exp}",e,y)}else this.assert(a<=e,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",e)}function m(e,n){n&&o(this,"message",n);var s=o(this,"object"),i=o(this,"ssfi"),a=o(this,"message");try{var c=s instanceof e}catch(n){if(n instanceof TypeError)throw new r((a=a?a+": ":"")+"The instanceof assertion needs a constructor but "+t.type(e)+" was given.",void 0,i);throw n}var u=t.getName(e);null===u&&(u="an unnamed constructor"),this.assert(c,"expected #{this} to be an instance of "+u,"expected #{this} to not be an instance of "+u)}function b(e,n,s){s&&o(this,"message",s);var i=o(this,"nested"),a=o(this,"own"),c=o(this,"message"),u=o(this,"object"),l=o(this,"ssfi"),d=typeof e;if(c=c?c+": ":"",i){if("string"!==d)throw new r(c+"the argument to property must be a string when using nested syntax",void 0,l)}else if("string"!==d&&"number"!==d&&"symbol"!==d)throw new r(c+"the argument to property must be a string, number, or symbol",void 0,l);if(i&&a)throw new r(c+'The "nested" and "own" flags cannot be combined.',void 0,l);if(null==u)throw new r(c+"Target cannot be null or undefined.",void 0,l);var p,h=o(this,"deep"),f=o(this,"negate"),y=i?t.getPathInfo(u,e):null,m=i?y.value:u[e],b="";h&&(b+="deep "),a&&(b+="own "),i&&(b+="nested "),b+="property ",p=a?Object.prototype.hasOwnProperty.call(u,e):i?y.exists:t.hasProperty(u,e),f&&1!==arguments.length||this.assert(p,"expected #{this} to have "+b+t.inspect(e),"expected #{this} to not have "+b+t.inspect(e)),arguments.length>1&&this.assert(p&&(h?t.eql(n,m):n===m),"expected #{this} to have "+b+t.inspect(e)+" of #{exp}, but got #{act}","expected #{this} to not have "+b+t.inspect(e)+" of #{act}",n,m),o(this,"object",m)}function g(e,t,n){o(this,"own",!0),b.apply(this,arguments)}function w(e,n,r){"string"==typeof n&&(r=n,n=null),r&&o(this,"message",r);var s=o(this,"object"),i=Object.getOwnPropertyDescriptor(Object(s),e);i&&n?this.assert(t.eql(n,i),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to match "+t.inspect(n)+", got "+t.inspect(i),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to not match "+t.inspect(n),n,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+t.inspect(e),"expected #{this} to not have an own property descriptor for "+t.inspect(e)),o(this,"object",i)}function v(){o(this,"doLength",!0)}function _(e,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=t.type(i).toLowerCase(),c=o(this,"message"),u=o(this,"ssfi"),l="length";switch(a){case"map":case"set":l="size",s=i.size;break;default:new n(i,c,u,!0).to.have.property("length"),s=i.length}this.assert(s==e,"expected #{this} to have a "+l+" of #{exp} but got #{act}","expected #{this} to not have a "+l+" of #{act}",e,s)}function x(e,t){t&&o(this,"message",t);var n=o(this,"object");this.assert(e.exec(n),"expected #{this} to match "+e,"expected #{this} not to match "+e)}function E(e){var n,s,i=o(this,"object"),a=t.type(i),c=t.type(e),u=o(this,"ssfi"),l=o(this,"deep"),d="",p=!0,h=o(this,"message"),f=(h=h?h+": ":"")+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if("Map"===a||"Set"===a)d=l?"deeply ":"",s=[],i.forEach((function(e,t){s.push(t)})),"Array"!==c&&(e=Array.prototype.slice.call(arguments));else{switch(s=t.getOwnEnumerableProperties(i),c){case"Array":if(arguments.length>1)throw new r(f,void 0,u);break;case"Object":if(arguments.length>1)throw new r(f,void 0,u);e=Object.keys(e);break;default:e=Array.prototype.slice.call(arguments)}e=e.map((function(e){return"symbol"==typeof e?e:String(e)}))}if(!e.length)throw new r(h+"keys required",void 0,u);var y=e.length,m=o(this,"any"),b=o(this,"all"),g=e;if(m||b||(b=!0),m&&(p=g.some((function(e){return s.some((function(n){return l?t.eql(e,n):e===n}))}))),b&&(p=g.every((function(e){return s.some((function(n){return l?t.eql(e,n):e===n}))})),o(this,"contains")||(p=p&&e.length==s.length)),y>1){var w=(e=e.map((function(e){return t.inspect(e)}))).pop();b&&(n=e.join(", ")+", and "+w),m&&(n=e.join(", ")+", or "+w)}else n=t.inspect(e[0]);n=(y>1?"keys ":"key ")+n,n=(o(this,"contains")?"contain ":"have ")+n,this.assert(p,"expected #{this} to "+d+n,"expected #{this} to not "+d+n,g.slice(0).sort(t.compareByInspect),s.sort(t.compareByInspect),!0)}function S(e,r,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"ssfi"),u=o(this,"message"),l=o(this,"negate")||!1;new n(a,u,c,!0).is.a("function"),(e instanceof RegExp||"string"==typeof e)&&(r=e,e=null);try{a()}catch(e){i=e}var d=void 0===e&&void 0===r,p=Boolean(e&&r),h=!1,f=!1;if(d||!d&&!l){var y="an error";e instanceof Error?y="#{exp}":e&&(y=t.checkError.getConstructorName(e)),this.assert(i,"expected #{this} to throw "+y,"expected #{this} to not throw an error but #{act} was thrown",e&&e.toString(),i instanceof Error?i.toString():"string"==typeof i?i:i&&t.checkError.getConstructorName(i))}if(e&&i&&(e instanceof Error&&t.checkError.compatibleInstance(i,e)===l&&(p&&l?h=!0:this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i&&!l?" but #{act} was thrown":""),e.toString(),i.toString())),t.checkError.compatibleConstructor(i,e)===l&&(p&&l?h=!0:this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&t.checkError.getConstructorName(e),i instanceof Error?i.toString():i&&t.checkError.getConstructorName(i)))),i&&null!=r){var m="including";r instanceof RegExp&&(m="matching"),t.checkError.compatibleMessage(i,r)===l&&(p&&l?f=!0:this.assert(l,"expected #{this} to throw error "+m+" #{exp} but got #{act}","expected #{this} to throw error not "+m+" #{exp}",r,t.checkError.getMessage(i)))}h&&f&&this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&t.checkError.getConstructorName(e),i instanceof Error?i.toString():i&&t.checkError.getConstructorName(i)),o(this,"object",i)}function O(e,n){n&&o(this,"message",n);var r=o(this,"object"),s=o(this,"itself"),i="function"!=typeof r||s?r[e]:r.prototype[e];this.assert("function"==typeof i,"expected #{this} to respond to "+t.inspect(e),"expected #{this} to not respond to "+t.inspect(e))}function P(e,n){n&&o(this,"message",n);var r=e(o(this,"object"));this.assert(r,"expected #{this} to satisfy "+t.objDisplay(e),"expected #{this} to not satisfy"+t.objDisplay(e),!o(this,"negate"),r)}function k(e,t,s){s&&o(this,"message",s);var i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");if(new n(i,a,c,!0).is.a("number"),"number"!=typeof e||"number"!=typeof t)throw new r((a=a?a+": ":"")+"the arguments to closeTo or approximately must be numbers",void 0,c);this.assert(Math.abs(i-e)<=t,"expected #{this} to be close to "+e+" +/- "+t,"expected #{this} not to be close to "+e+" +/- "+t)}function j(e,t,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),s=e[t]):(new n(e,a,c,!0).is.a("function"),s=e()),i();var u=null==t?e():e[t],l=null==t?s:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",s),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","change"),o(this,"realDelta",u!==s),this.assert(s!==u,"expected "+l+" to change","expected "+l+" to not change")}function q(e,t,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),s=e[t]):(new n(e,a,c,!0).is.a("function"),s=e()),new n(s,a,c,!0).is.a("number"),i();var u=null==t?e():e[t],l=null==t?s:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",s),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","increase"),o(this,"realDelta",u-s),this.assert(u-s>0,"expected "+l+" to increase","expected "+l+" to not increase")}function T(e,t,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),s=e[t]):(new n(e,a,c,!0).is.a("function"),s=e()),new n(s,a,c,!0).is.a("number"),i();var u=null==t?e():e[t],l=null==t?s:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",s),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","decrease"),o(this,"realDelta",s-u),this.assert(u-s<0,"expected "+l+" to decrease","expected "+l+" to not decrease")}["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still"].forEach((function(e){n.addProperty(e)})),n.addProperty("not",(function(){o(this,"negate",!0)})),n.addProperty("deep",(function(){o(this,"deep",!0)})),n.addProperty("nested",(function(){o(this,"nested",!0)})),n.addProperty("own",(function(){o(this,"own",!0)})),n.addProperty("ordered",(function(){o(this,"ordered",!0)})),n.addProperty("any",(function(){o(this,"any",!0),o(this,"all",!1)})),n.addProperty("all",(function(){o(this,"all",!0),o(this,"any",!1)})),n.addChainableMethod("an",s),n.addChainableMethod("a",s),n.addChainableMethod("include",c,a),n.addChainableMethod("contain",c,a),n.addChainableMethod("contains",c,a),n.addChainableMethod("includes",c,a),n.addProperty("ok",(function(){this.assert(o(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")})),n.addProperty("true",(function(){this.assert(!0===o(this,"object"),"expected #{this} to be true","expected #{this} to be false",!o(this,"negate"))})),n.addProperty("false",(function(){this.assert(!1===o(this,"object"),"expected #{this} to be false","expected #{this} to be true",!!o(this,"negate"))})),n.addProperty("null",(function(){this.assert(null===o(this,"object"),"expected #{this} to be null","expected #{this} not to be null")})),n.addProperty("undefined",(function(){this.assert(void 0===o(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")})),n.addProperty("NaN",(function(){this.assert(t.isNaN(o(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")})),n.addProperty("exist",(function(){var e=o(this,"object");this.assert(null!=e,"expected #{this} to exist","expected #{this} to not exist")})),n.addProperty("empty",(function(){var e,n=o(this,"object"),s=o(this,"ssfi"),i=o(this,"message");switch(i=i?i+": ":"",t.type(n).toLowerCase()){case"array":case"string":e=n.length;break;case"map":case"set":e=n.size;break;case"weakmap":case"weakset":throw new r(i+".empty was passed a weak collection",void 0,s);case"function":var a=i+".empty was passed a function "+t.getName(n);throw new r(a.trim(),void 0,s);default:if(n!==Object(n))throw new r(i+".empty was passed non-string primitive "+t.inspect(n),void 0,s);e=Object.keys(n).length}this.assert(0===e,"expected #{this} to be empty","expected #{this} not to be empty")})),n.addProperty("arguments",u),n.addProperty("Arguments",u),n.addMethod("equal",l),n.addMethod("equals",l),n.addMethod("eq",l),n.addMethod("eql",d),n.addMethod("eqls",d),n.addMethod("above",p),n.addMethod("gt",p),n.addMethod("greaterThan",p),n.addMethod("least",h),n.addMethod("gte",h),n.addMethod("below",f),n.addMethod("lt",f),n.addMethod("lessThan",f),n.addMethod("most",y),n.addMethod("lte",y),n.addMethod("within",(function(e,s,i){i&&o(this,"message",i);var a,c=o(this,"object"),u=o(this,"doLength"),l=o(this,"message"),d=l?l+": ":"",p=o(this,"ssfi"),h=t.type(c).toLowerCase(),f=t.type(e).toLowerCase(),y=t.type(s).toLowerCase(),m=!0,b="date"===f&&"date"===y?e.toUTCString()+".."+s.toUTCString():e+".."+s;if(u&&"map"!==h&&"set"!==h&&new n(c,l,p,!0).to.have.property("length"),u||"date"!==h||"date"===f&&"date"===y?"number"===f&&"number"===y||!u&&"number"!==h?u||"date"===h||"number"===h?m=!1:a=d+"expected "+("string"===h?"'"+c+"'":c)+" to be a number or a date":a=d+"the arguments to within must be numbers":a=d+"the arguments to within must be dates",m)throw new r(a,void 0,p);if(u){var g,w="length";"map"===h||"set"===h?(w="size",g=c.size):g=c.length,this.assert(g>=e&&g<=s,"expected #{this} to have a "+w+" within "+b,"expected #{this} to not have a "+w+" within "+b)}else this.assert(c>=e&&c<=s,"expected #{this} to be within "+b,"expected #{this} to not be within "+b)})),n.addMethod("instanceof",m),n.addMethod("instanceOf",m),n.addMethod("property",b),n.addMethod("ownProperty",g),n.addMethod("haveOwnProperty",g),n.addMethod("ownPropertyDescriptor",w),n.addMethod("haveOwnPropertyDescriptor",w),n.addChainableMethod("length",_,v),n.addChainableMethod("lengthOf",_,v),n.addMethod("match",x),n.addMethod("matches",x),n.addMethod("string",(function(e,r){r&&o(this,"message",r);var s=o(this,"object"),i=o(this,"message"),a=o(this,"ssfi");new n(s,i,a,!0).is.a("string"),this.assert(~s.indexOf(e),"expected #{this} to contain "+t.inspect(e),"expected #{this} to not contain "+t.inspect(e))})),n.addMethod("keys",E),n.addMethod("key",E),n.addMethod("throw",S),n.addMethod("throws",S),n.addMethod("Throw",S),n.addMethod("respondTo",O),n.addMethod("respondsTo",O),n.addProperty("itself",(function(){o(this,"itself",!0)})),n.addMethod("satisfy",P),n.addMethod("satisfies",P),n.addMethod("closeTo",k),n.addMethod("approximately",k),n.addMethod("members",(function(e,r){r&&o(this,"message",r);var s=o(this,"object"),i=o(this,"message"),a=o(this,"ssfi");new n(s,i,a,!0).to.be.an("array"),new n(e,i,a,!0).to.be.an("array");var c,u,l,d=o(this,"contains"),p=o(this,"ordered");d?(u="expected #{this} to be "+(c=p?"an ordered superset":"a superset")+" of #{exp}",l="expected #{this} to not be "+c+" of #{exp}"):(u="expected #{this} to have the same "+(c=p?"ordered members":"members")+" as #{exp}",l="expected #{this} to not have the same "+c+" as #{exp}");var h=o(this,"deep")?t.eql:void 0;this.assert(function(e,t,n,r,o){if(!r){if(e.length!==t.length)return!1;t=t.slice()}return e.every((function(e,s){if(o)return n?n(e,t[s]):e===t[s];if(!n){var i=t.indexOf(e);return-1!==i&&(r||t.splice(i,1),!0)}return t.some((function(o,s){return!!n(e,o)&&(r||t.splice(s,1),!0)}))}))}(e,s,h,d,p),u,l,e,s,!0)})),n.addMethod("oneOf",(function(e,t){t&&o(this,"message",t);var r=o(this,"object"),s=o(this,"message"),i=o(this,"ssfi");new n(e,s,i,!0).to.be.an("array"),this.assert(e.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",e,r)})),n.addMethod("change",j),n.addMethod("changes",j),n.addMethod("increase",q),n.addMethod("increases",q),n.addMethod("decrease",T),n.addMethod("decreases",T),n.addMethod("by",(function(e,t){t&&o(this,"message",t);var n,r=o(this,"deltaMsgObj"),s=o(this,"initialDeltaValue"),i=o(this,"finalDeltaValue"),a=o(this,"deltaBehavior"),c=o(this,"realDelta");n="change"===a?Math.abs(i-s)===Math.abs(e):c===Math.abs(e),this.assert(n,"expected "+r+" to "+a+" by "+e,"expected "+r+" to not "+a+" by "+e)})),n.addProperty("extensible",(function(){var e=o(this,"object"),t=e===Object(e)&&Object.isExtensible(e);this.assert(t,"expected #{this} to be extensible","expected #{this} to not be extensible")})),n.addProperty("sealed",(function(){var e=o(this,"object"),t=e!==Object(e)||Object.isSealed(e);this.assert(t,"expected #{this} to be sealed","expected #{this} to not be sealed")})),n.addProperty("frozen",(function(){var e=o(this,"object"),t=e!==Object(e)||Object.isFrozen(e);this.assert(t,"expected #{this} to be frozen","expected #{this} to not be frozen")})),n.addProperty("finite",(function(e){var t=o(this,"object");this.assert("number"==typeof t&&isFinite(t),"expected #{this} to be a finite number","expected #{this} to not be a finite number")}))}},function(e,t){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){e.expect=function(t,n){return new e.Assertion(t,n)},e.expect.fail=function(t,n,r,o){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new e.AssertionError(r,{actual:t,expected:n,operator:o},e.expect.fail)}}},function(e,t){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){var n=e.Assertion;function r(){Object.defineProperty(Object.prototype,"should",{set:function(e){Object.defineProperty(this,"should",{value:e,enumerable:!0,configurable:!0,writable:!0})},get:function e(){return this instanceof String||this instanceof Number||this instanceof Boolean||"function"==typeof Symbol&&this instanceof Symbol?new n(this.valueOf(),null,e):new n(this,null,e)},configurable:!0});var t={fail:function(n,r,o,s){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new e.AssertionError(o,{actual:n,expected:r,operator:s},t.fail)},equal:function(e,t,r){new n(e,r).to.equal(t)},Throw:function(e,t,r,o){new n(e,o).to.Throw(t,r)},exist:function(e,t){new n(e,t).to.exist},not:{}};return t.not.equal=function(e,t,r){new n(e,r).to.not.equal(t)},t.not.Throw=function(e,t,r,o){new n(e,o).to.not.Throw(t,r)},t.not.exist=function(e,t){new n(e,t).to.not.exist},t.throw=t.Throw,t.not.throw=t.not.Throw,t}e.should=r,e.Should=r}},function(e,t){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){
/*!
   * Chai dependencies.
   */
var n=e.Assertion,r=t.flag,o=e.assert=function(t,r){new n(null,null,e.assert,!0).assert(t,r,"[ negation message unavailable ]")};
/*!
   * Module export.
   */o.fail=function(t,n,r,s){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new e.AssertionError(r,{actual:t,expected:n,operator:s},o.fail)},o.isOk=function(e,t){new n(e,t,o.isOk,!0).is.ok},o.isNotOk=function(e,t){new n(e,t,o.isNotOk,!0).is.not.ok},o.equal=function(e,t,s){var i=new n(e,s,o.equal,!0);i.assert(t==r(i,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",t,e,!0)},o.notEqual=function(e,t,s){var i=new n(e,s,o.notEqual,!0);i.assert(t!=r(i,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",t,e,!0)},o.strictEqual=function(e,t,r){new n(e,r,o.strictEqual,!0).to.equal(t)},o.notStrictEqual=function(e,t,r){new n(e,r,o.notStrictEqual,!0).to.not.equal(t)},o.deepEqual=o.deepStrictEqual=function(e,t,r){new n(e,r,o.deepEqual,!0).to.eql(t)},o.notDeepEqual=function(e,t,r){new n(e,r,o.notDeepEqual,!0).to.not.eql(t)},o.isAbove=function(e,t,r){new n(e,r,o.isAbove,!0).to.be.above(t)},o.isAtLeast=function(e,t,r){new n(e,r,o.isAtLeast,!0).to.be.least(t)},o.isBelow=function(e,t,r){new n(e,r,o.isBelow,!0).to.be.below(t)},o.isAtMost=function(e,t,r){new n(e,r,o.isAtMost,!0).to.be.most(t)},o.isTrue=function(e,t){new n(e,t,o.isTrue,!0).is.true},o.isNotTrue=function(e,t){new n(e,t,o.isNotTrue,!0).to.not.equal(!0)},o.isFalse=function(e,t){new n(e,t,o.isFalse,!0).is.false},o.isNotFalse=function(e,t){new n(e,t,o.isNotFalse,!0).to.not.equal(!1)},o.isNull=function(e,t){new n(e,t,o.isNull,!0).to.equal(null)},o.isNotNull=function(e,t){new n(e,t,o.isNotNull,!0).to.not.equal(null)},o.isNaN=function(e,t){new n(e,t,o.isNaN,!0).to.be.NaN},o.isNotNaN=function(e,t){new n(e,t,o.isNotNaN,!0).not.to.be.NaN},o.exists=function(e,t){new n(e,t,o.exists,!0).to.exist},o.notExists=function(e,t){new n(e,t,o.notExists,!0).to.not.exist},o.isUndefined=function(e,t){new n(e,t,o.isUndefined,!0).to.equal(void 0)},o.isDefined=function(e,t){new n(e,t,o.isDefined,!0).to.not.equal(void 0)},o.isFunction=function(e,t){new n(e,t,o.isFunction,!0).to.be.a("function")},o.isNotFunction=function(e,t){new n(e,t,o.isNotFunction,!0).to.not.be.a("function")},o.isObject=function(e,t){new n(e,t,o.isObject,!0).to.be.a("object")},o.isNotObject=function(e,t){new n(e,t,o.isNotObject,!0).to.not.be.a("object")},o.isArray=function(e,t){new n(e,t,o.isArray,!0).to.be.an("array")},o.isNotArray=function(e,t){new n(e,t,o.isNotArray,!0).to.not.be.an("array")},o.isString=function(e,t){new n(e,t,o.isString,!0).to.be.a("string")},o.isNotString=function(e,t){new n(e,t,o.isNotString,!0).to.not.be.a("string")},o.isNumber=function(e,t){new n(e,t,o.isNumber,!0).to.be.a("number")},o.isNotNumber=function(e,t){new n(e,t,o.isNotNumber,!0).to.not.be.a("number")},o.isFinite=function(e,t){new n(e,t,o.isFinite,!0).to.be.finite},o.isBoolean=function(e,t){new n(e,t,o.isBoolean,!0).to.be.a("boolean")},o.isNotBoolean=function(e,t){new n(e,t,o.isNotBoolean,!0).to.not.be.a("boolean")},o.typeOf=function(e,t,r){new n(e,r,o.typeOf,!0).to.be.a(t)},o.notTypeOf=function(e,t,r){new n(e,r,o.notTypeOf,!0).to.not.be.a(t)},o.instanceOf=function(e,t,r){new n(e,r,o.instanceOf,!0).to.be.instanceOf(t)},o.notInstanceOf=function(e,t,r){new n(e,r,o.notInstanceOf,!0).to.not.be.instanceOf(t)},o.include=function(e,t,r){new n(e,r,o.include,!0).include(t)},o.notInclude=function(e,t,r){new n(e,r,o.notInclude,!0).not.include(t)},o.deepInclude=function(e,t,r){new n(e,r,o.deepInclude,!0).deep.include(t)},o.notDeepInclude=function(e,t,r){new n(e,r,o.notDeepInclude,!0).not.deep.include(t)},o.nestedInclude=function(e,t,r){new n(e,r,o.nestedInclude,!0).nested.include(t)},o.notNestedInclude=function(e,t,r){new n(e,r,o.notNestedInclude,!0).not.nested.include(t)},o.deepNestedInclude=function(e,t,r){new n(e,r,o.deepNestedInclude,!0).deep.nested.include(t)},o.notDeepNestedInclude=function(e,t,r){new n(e,r,o.notDeepNestedInclude,!0).not.deep.nested.include(t)},o.ownInclude=function(e,t,r){new n(e,r,o.ownInclude,!0).own.include(t)},o.notOwnInclude=function(e,t,r){new n(e,r,o.notOwnInclude,!0).not.own.include(t)},o.deepOwnInclude=function(e,t,r){new n(e,r,o.deepOwnInclude,!0).deep.own.include(t)},o.notDeepOwnInclude=function(e,t,r){new n(e,r,o.notDeepOwnInclude,!0).not.deep.own.include(t)},o.match=function(e,t,r){new n(e,r,o.match,!0).to.match(t)},o.notMatch=function(e,t,r){new n(e,r,o.notMatch,!0).to.not.match(t)},o.property=function(e,t,r){new n(e,r,o.property,!0).to.have.property(t)},o.notProperty=function(e,t,r){new n(e,r,o.notProperty,!0).to.not.have.property(t)},o.propertyVal=function(e,t,r,s){new n(e,s,o.propertyVal,!0).to.have.property(t,r)},o.notPropertyVal=function(e,t,r,s){new n(e,s,o.notPropertyVal,!0).to.not.have.property(t,r)},o.deepPropertyVal=function(e,t,r,s){new n(e,s,o.deepPropertyVal,!0).to.have.deep.property(t,r)},o.notDeepPropertyVal=function(e,t,r,s){new n(e,s,o.notDeepPropertyVal,!0).to.not.have.deep.property(t,r)},o.ownProperty=function(e,t,r){new n(e,r,o.ownProperty,!0).to.have.own.property(t)},o.notOwnProperty=function(e,t,r){new n(e,r,o.notOwnProperty,!0).to.not.have.own.property(t)},o.ownPropertyVal=function(e,t,r,s){new n(e,s,o.ownPropertyVal,!0).to.have.own.property(t,r)},o.notOwnPropertyVal=function(e,t,r,s){new n(e,s,o.notOwnPropertyVal,!0).to.not.have.own.property(t,r)},o.deepOwnPropertyVal=function(e,t,r,s){new n(e,s,o.deepOwnPropertyVal,!0).to.have.deep.own.property(t,r)},o.notDeepOwnPropertyVal=function(e,t,r,s){new n(e,s,o.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(t,r)},o.nestedProperty=function(e,t,r){new n(e,r,o.nestedProperty,!0).to.have.nested.property(t)},o.notNestedProperty=function(e,t,r){new n(e,r,o.notNestedProperty,!0).to.not.have.nested.property(t)},o.nestedPropertyVal=function(e,t,r,s){new n(e,s,o.nestedPropertyVal,!0).to.have.nested.property(t,r)},o.notNestedPropertyVal=function(e,t,r,s){new n(e,s,o.notNestedPropertyVal,!0).to.not.have.nested.property(t,r)},o.deepNestedPropertyVal=function(e,t,r,s){new n(e,s,o.deepNestedPropertyVal,!0).to.have.deep.nested.property(t,r)},o.notDeepNestedPropertyVal=function(e,t,r,s){new n(e,s,o.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(t,r)},o.lengthOf=function(e,t,r){new n(e,r,o.lengthOf,!0).to.have.lengthOf(t)},o.hasAnyKeys=function(e,t,r){new n(e,r,o.hasAnyKeys,!0).to.have.any.keys(t)},o.hasAllKeys=function(e,t,r){new n(e,r,o.hasAllKeys,!0).to.have.all.keys(t)},o.containsAllKeys=function(e,t,r){new n(e,r,o.containsAllKeys,!0).to.contain.all.keys(t)},o.doesNotHaveAnyKeys=function(e,t,r){new n(e,r,o.doesNotHaveAnyKeys,!0).to.not.have.any.keys(t)},o.doesNotHaveAllKeys=function(e,t,r){new n(e,r,o.doesNotHaveAllKeys,!0).to.not.have.all.keys(t)},o.hasAnyDeepKeys=function(e,t,r){new n(e,r,o.hasAnyDeepKeys,!0).to.have.any.deep.keys(t)},o.hasAllDeepKeys=function(e,t,r){new n(e,r,o.hasAllDeepKeys,!0).to.have.all.deep.keys(t)},o.containsAllDeepKeys=function(e,t,r){new n(e,r,o.containsAllDeepKeys,!0).to.contain.all.deep.keys(t)},o.doesNotHaveAnyDeepKeys=function(e,t,r){new n(e,r,o.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(t)},o.doesNotHaveAllDeepKeys=function(e,t,r){new n(e,r,o.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(t)},o.throws=function(e,t,s,i){("string"==typeof t||t instanceof RegExp)&&(s=t,t=null);var a=new n(e,i,o.throws,!0).to.throw(t,s);return r(a,"object")},o.doesNotThrow=function(e,t,r,s){("string"==typeof t||t instanceof RegExp)&&(r=t,t=null),new n(e,s,o.doesNotThrow,!0).to.not.throw(t,r)},o.operator=function(s,i,a,c){var u;switch(i){case"==":u=s==a;break;case"===":u=s===a;break;case">":u=s>a;break;case">=":u=s>=a;break;case"<":u=s<a;break;case"<=":u=s<=a;break;case"!=":u=s!=a;break;case"!==":u=s!==a;break;default:throw c=c?c+": ":c,new e.AssertionError(c+'Invalid operator "'+i+'"',void 0,o.operator)}var l=new n(u,c,o.operator,!0);l.assert(!0===r(l,"object"),"expected "+t.inspect(s)+" to be "+i+" "+t.inspect(a),"expected "+t.inspect(s)+" to not be "+i+" "+t.inspect(a))},o.closeTo=function(e,t,r,s){new n(e,s,o.closeTo,!0).to.be.closeTo(t,r)},o.approximately=function(e,t,r,s){new n(e,s,o.approximately,!0).to.be.approximately(t,r)},o.sameMembers=function(e,t,r){new n(e,r,o.sameMembers,!0).to.have.same.members(t)},o.notSameMembers=function(e,t,r){new n(e,r,o.notSameMembers,!0).to.not.have.same.members(t)},o.sameDeepMembers=function(e,t,r){new n(e,r,o.sameDeepMembers,!0).to.have.same.deep.members(t)},o.notSameDeepMembers=function(e,t,r){new n(e,r,o.notSameDeepMembers,!0).to.not.have.same.deep.members(t)},o.sameOrderedMembers=function(e,t,r){new n(e,r,o.sameOrderedMembers,!0).to.have.same.ordered.members(t)},o.notSameOrderedMembers=function(e,t,r){new n(e,r,o.notSameOrderedMembers,!0).to.not.have.same.ordered.members(t)},o.sameDeepOrderedMembers=function(e,t,r){new n(e,r,o.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(t)},o.notSameDeepOrderedMembers=function(e,t,r){new n(e,r,o.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(t)},o.includeMembers=function(e,t,r){new n(e,r,o.includeMembers,!0).to.include.members(t)},o.notIncludeMembers=function(e,t,r){new n(e,r,o.notIncludeMembers,!0).to.not.include.members(t)},o.includeDeepMembers=function(e,t,r){new n(e,r,o.includeDeepMembers,!0).to.include.deep.members(t)},o.notIncludeDeepMembers=function(e,t,r){new n(e,r,o.notIncludeDeepMembers,!0).to.not.include.deep.members(t)},o.includeOrderedMembers=function(e,t,r){new n(e,r,o.includeOrderedMembers,!0).to.include.ordered.members(t)},o.notIncludeOrderedMembers=function(e,t,r){new n(e,r,o.notIncludeOrderedMembers,!0).to.not.include.ordered.members(t)},o.includeDeepOrderedMembers=function(e,t,r){new n(e,r,o.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(t)},o.notIncludeDeepOrderedMembers=function(e,t,r){new n(e,r,o.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(t)},o.oneOf=function(e,t,r){new n(e,r,o.oneOf,!0).to.be.oneOf(t)},o.changes=function(e,t,r,s){3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.changes,!0).to.change(t,r)},o.changesBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.changesBy,!0).to.change(t,r).by(s)},o.doesNotChange=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.doesNotChange,!0).to.not.change(t,r)},o.changesButNotBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.changesButNotBy,!0).to.change(t,r).but.not.by(s)},o.increases=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.increases,!0).to.increase(t,r)},o.increasesBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.increasesBy,!0).to.increase(t,r).by(s)},o.doesNotIncrease=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.doesNotIncrease,!0).to.not.increase(t,r)},o.increasesButNotBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.increasesButNotBy,!0).to.increase(t,r).but.not.by(s)},o.decreases=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.decreases,!0).to.decrease(t,r)},o.decreasesBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.decreasesBy,!0).to.decrease(t,r).by(s)},o.doesNotDecrease=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.doesNotDecrease,!0).to.not.decrease(t,r)},o.doesNotDecreaseBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);return new n(e,i,o.doesNotDecreaseBy,!0).to.not.decrease(t,r).by(s)},o.decreasesButNotBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.decreasesButNotBy,!0).to.decrease(t,r).but.not.by(s)}
/*!
   * ### .ifError(object)
   *
   * Asserts if value is not a false value, and throws if it is a true value.
   * This is added to allow for chai to be a drop-in replacement for Node's
   * assert class.
   *
   *     var err = new Error('I am a custom error');
   *     assert.ifError(err); // Rethrows err!
   *
   * @name ifError
   * @param {Object} object
   * @namespace Assert
   * @api public
   */,o.ifError=function(e){if(e)throw e},o.isExtensible=function(e,t){new n(e,t,o.isExtensible,!0).to.be.extensible},o.isNotExtensible=function(e,t){new n(e,t,o.isNotExtensible,!0).to.not.be.extensible},o.isSealed=function(e,t){new n(e,t,o.isSealed,!0).to.be.sealed},o.isNotSealed=function(e,t){new n(e,t,o.isNotSealed,!0).to.not.be.sealed},o.isFrozen=function(e,t){new n(e,t,o.isFrozen,!0).to.be.frozen},o.isNotFrozen=function(e,t){new n(e,t,o.isNotFrozen,!0).to.not.be.frozen},o.isEmpty=function(e,t){new n(e,t,o.isEmpty,!0).to.be.empty},o.isNotEmpty=function(e,t){new n(e,t,o.isNotEmpty,!0).to.not.be.empty},
/*!
   * Aliases.
   */
function e(t,n){return o[n]=o[t],e}("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")}},function(e,t,n){var r=n(22),o=n(37),s=n(24);e.exports=function(e){var t={};return"function"==typeof e&&(e=s.createServer(e)),r.forEach((function(n){t[n]=function(t){return new o(e,n,t)}})),t.del=t.delete,t},e.exports.Test=o,e.exports.agent=n(90)},function(e,t){e.exports=n(67)},function(e,t,n){var r=n(69).IncomingForm;r.IncomingForm=r,e.exports=r},function(e,t,n){var r;global.GENTLY&&(r=GENTLY.hijack(n(70)));var o=r("crypto"),s=r("fs"),i=r("util"),a=r("path"),c=r("./file"),u=r("./multipart_parser").MultipartParser,l=r("./querystring_parser").QuerystringParser,d=r("./octet_parser").OctetParser,p=r("./json_parser").JSONParser,h=r("string_decoder").StringDecoder,f=r("events").EventEmitter,y=r("stream").Stream,m=r("os");function b(e){return this instanceof b?(f.call(this),e=e||{},this.error=null,this.ended=!1,this.maxFields=e.maxFields||1e3,this.maxFieldsSize=e.maxFieldsSize||20971520,this.maxFileSize=e.maxFileSize||209715200,this.keepExtensions=e.keepExtensions||!1,this.uploadDir=e.uploadDir||m.tmpdir&&m.tmpdir()||m.tmpDir(),this.encoding=e.encoding||"utf-8",this.headers=null,this.type=null,this.hash=e.hash||!1,this.multiples=e.multiples||!1,this.bytesReceived=null,this.bytesExpected=null,this._parser=null,this._flushing=0,this._fieldsSize=0,this._fileSize=0,this.openedFiles=[],this):new b(e)}i.inherits(b,f),t.IncomingForm=b,b.prototype.parse=function(e,t){if(this.pause=function(){try{e.pause()}catch(e){return this.ended||this._error(e),!1}return!0},this.resume=function(){try{e.resume()}catch(e){return this.ended||this._error(e),!1}return!0},t){var n={},r={};this.on("field",(function(e,t){n[e]=t})).on("file",(function(e,t){this.multiples&&r[e]?(Array.isArray(r[e])||(r[e]=[r[e]]),r[e].push(t)):r[e]=t})).on("error",(function(e){t(e,n,r)})).on("end",(function(){t(null,n,r)}))}this.writeHeaders(e.headers);var o=this;return e.on("error",(function(e){o._error(e)})).on("aborted",(function(){o.emit("aborted"),o._error(new Error("Request aborted"))})).on("data",(function(e){o.write(e)})).on("end",(function(){if(!o.error){var e=o._parser.end();e&&o._error(e)}})),this},b.prototype.writeHeaders=function(e){this.headers=e,this._parseContentLength(),this._parseContentType()},b.prototype.write=function(e){if(!this.error){if(this._parser){this.bytesReceived+=e.length,this.emit("progress",this.bytesReceived,this.bytesExpected);var t=this._parser.write(e);return t!==e.length&&this._error(new Error("parser error, "+t+" of "+e.length+" bytes parsed")),t}this._error(new Error("uninitialized parser"))}},b.prototype.pause=function(){return!1},b.prototype.resume=function(){return!1},b.prototype.onPart=function(e){this.handlePart(e)},b.prototype.handlePart=function(e){var t=this;if(void 0===e.filename){var n="",r=new h(this.encoding);return e.on("data",(function(e){t._fieldsSize+=e.length,t._fieldsSize>t.maxFieldsSize?t._error(new Error("maxFieldsSize exceeded, received "+t._fieldsSize+" bytes of field data")):n+=r.write(e)})),void e.on("end",(function(){t.emit("field",e.name,n)}))}this._flushing++;var o=new c({path:this._uploadPath(e.filename),name:e.filename,type:e.mime,hash:t.hash});this.emit("fileBegin",e.name,o),o.open(),this.openedFiles.push(o),e.on("data",(function(e){t._fileSize+=e.length,t._fileSize>t.maxFileSize?t._error(new Error("maxFileSize exceeded, received "+t._fileSize+" bytes of file data")):0!=e.length&&(t.pause(),o.write(e,(function(){t.resume()})))})),e.on("end",(function(){o.end((function(){t._flushing--,t.emit("file",e.name,o),t._maybeEnd()}))}))},b.prototype._parseContentType=function(){if(0!==this.bytesExpected)if(this.headers["content-type"])if(this.headers["content-type"].match(/octet-stream/i))this._initOctetStream();else if(this.headers["content-type"].match(/urlencoded/i))this._initUrlencoded();else if(this.headers["content-type"].match(/multipart/i)){var e=this.headers["content-type"].match(/boundary=(?:"([^"]+)"|([^;]+))/i);e?this._initMultipart(e[1]||e[2]):this._error(new Error("bad content-type header, no multipart boundary"))}else this.headers["content-type"].match(/json/i)?this._initJSONencoded():this._error(new Error("bad content-type header, unknown content-type: "+this.headers["content-type"]));else this._error(new Error("bad content-type header, no content-type"));else this._parser=function(e){return{end:function(){return e.ended=!0,e._maybeEnd(),null}}}(this)},b.prototype._error=function(e){this.error||this.ended||(this.error=e,this.emit("error",e),Array.isArray(this.openedFiles)&&this.openedFiles.forEach((function(e){e._writeStream.destroy(),setTimeout(s.unlink,0,e.path,(function(e){}))})))},b.prototype._parseContentLength=function(){this.bytesReceived=0,this.headers["content-length"]?this.bytesExpected=parseInt(this.headers["content-length"],10):void 0===this.headers["transfer-encoding"]&&(this.bytesExpected=0),null!==this.bytesExpected&&this.emit("progress",this.bytesReceived,this.bytesExpected)},b.prototype._newParser=function(){return new u},b.prototype._initMultipart=function(e){this.type="multipart";var t,n,r,o=new u,s=this;o.initWithBoundary(e),o.onPartBegin=function(){(r=new y).readable=!0,r.headers={},r.name=null,r.filename=null,r.mime=null,r.transferEncoding="binary",r.transferBuffer="",t="",n=""},o.onHeaderField=function(e,n,r){t+=e.toString(s.encoding,n,r)},o.onHeaderValue=function(e,t,r){n+=e.toString(s.encoding,t,r)},o.onHeaderEnd=function(){t=t.toLowerCase(),r.headers[t]=n;var e=n.match(/\bname=("([^"]*)"|([^\(\)<>@,;:\\"\/\[\]\?=\{\}\s\t/]+))/i);"content-disposition"==t?(e&&(r.name=e[2]||e[3]||""),r.filename=s._fileName(n)):"content-type"==t?r.mime=n:"content-transfer-encoding"==t&&(r.transferEncoding=n.toLowerCase()),t="",n=""},o.onHeadersEnd=function(){switch(r.transferEncoding){case"binary":case"7bit":case"8bit":o.onPartData=function(e,t,n){r.emit("data",e.slice(t,n))},o.onPartEnd=function(){r.emit("end")};break;case"base64":o.onPartData=function(e,t,n){r.transferBuffer+=e.slice(t,n).toString("ascii");var o=4*parseInt(r.transferBuffer.length/4,10);r.emit("data",new Buffer(r.transferBuffer.substring(0,o),"base64")),r.transferBuffer=r.transferBuffer.substring(o)},o.onPartEnd=function(){r.emit("data",new Buffer(r.transferBuffer,"base64")),r.emit("end")};break;default:return s._error(new Error("unknown transfer-encoding"))}s.onPart(r)},o.onEnd=function(){s.ended=!0,s._maybeEnd()},this._parser=o},b.prototype._fileName=function(e){var t=e.match(/\bfilename=("(.*?)"|([^\(\)<>@,;:\\"\/\[\]\?=\{\}\s\t/]+))($|;\s)/i);if(t){var n=t[2]||t[3]||"",r=n.substr(n.lastIndexOf("\\")+1);return(r=r.replace(/%22/g,'"')).replace(/&#([\d]{4});/g,(function(e,t){return String.fromCharCode(t)}))}},b.prototype._initUrlencoded=function(){this.type="urlencoded";var e=new l(this.maxFields),t=this;e.onField=function(e,n){t.emit("field",e,n)},e.onEnd=function(){t.ended=!0,t._maybeEnd()},this._parser=e},b.prototype._initOctetStream=function(){this.type="octet-stream";var e=this.headers["x-file-name"],t=this.headers["content-type"],n=new c({path:this._uploadPath(e),name:e,type:t});this.emit("fileBegin",e,n),n.open(),this.openedFiles.push(n),this._flushing++;var r=this;r._parser=new d;var o=0;r._parser.on("data",(function(e){r.pause(),o++,n.write(e,(function(){o--,r.resume(),r.ended&&r._parser.emit("doneWritingFile")}))})),r._parser.on("end",(function(){r._flushing--,r.ended=!0;var e=function(){n.end((function(){r.emit("file","file",n),r._maybeEnd()}))};0===o?e():r._parser.once("doneWritingFile",e)}))},b.prototype._initJSONencoded=function(){this.type="json";var e=new p(this),t=this;e.onField=function(e,n){t.emit("field",e,n)},e.onEnd=function(){t.ended=!0,t._maybeEnd()},this._parser=e},b.prototype._uploadPath=function(e){var t="upload_"+o.randomBytes(16).toString("hex");if(this.keepExtensions){var n=a.extname(e);t+=n=n.replace(/(\.[a-z0-9]+).*/i,"$1")}return a.join(this.uploadDir,t)},b.prototype._maybeEnd=function(){!this.ended||this._flushing||this.error||this.emit("end")}},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=70},function(e,t){e.exports=n(71)},function(e,t,n){"use strict";const r=n(28),o=n(29),s=n(73);function i(e){o.call(this);const t=this.res=e.res;this.request=e,this.req=e.req,this.text=t.text,this.body=void 0!==t.body?t.body:{},this.files=t.files||{},this.buffered="string"==typeof this.text,this.header=this.headers=t.headers,this._setStatusProperties(t.statusCode),this._setHeaderProperties(this.header),this.setEncoding=t.setEncoding.bind(t),t.on("data",this.emit.bind(this,"data")),t.on("end",this.emit.bind(this,"end")),t.on("close",this.emit.bind(this,"close")),t.on("error",this.emit.bind(this,"error"))}e.exports=i,r.inherits(i,o),s(i.prototype),i.prototype.destroy=function(e){this.res.destroy(e)},i.prototype.pause=function(){this.res.pause()},i.prototype.resume=function(){this.res.resume()},i.prototype.toError=function(){const e=this.req,t=e.method,n=e.path,r=`cannot ${t} ${n} (${this.status})`,o=new Error(r);return o.status=this.status,o.text=this.text,o.method=t,o.path=n,o},i.prototype.setStatusProperties=function(e){return console.warn("In superagent 2.x setStatusProperties is a private method"),this._setStatusProperties(e)},i.prototype.toJSON=function(){return{req:this.request.toJSON(),header:this.header,status:this.status,text:this.text}}},function(e,t,n){"use strict";var r=n(38);function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}e.exports=o,o.prototype.get=function(e){return this.header[e.toLowerCase()]},o.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=r.type(t);var n=r.params(t);for(var o in n)this[o]=n[o];this.links={};try{e.link&&(this.links=r.parseLinks(e.link))}catch(e){}},o.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}},function(e,t,n){"use strict";const r=n(75).StringDecoder,o=n(29),s=n(39);t.unzip=(e,t)=>{const n=s.createUnzip(),i=new o;let a;i.req=e,n.on("error",e=>{e&&"Z_BUF_ERROR"===e.code?i.emit("end"):i.emit("error",e)}),t.pipe(n),t.setEncoding=e=>{a=new r(e)},n.on("data",e=>{if(a){const t=a.write(e);t.length&&i.emit("data",t)}else i.emit("data",e)}),n.on("end",()=>{i.emit("end")});const c=t.on;t.on=function(e,n){return"data"==e||"end"==e?i.on(e,n):"error"==e?(i.on(e,n),c.call(t,e,n)):c.call(t,e,n),this}}},function(e,t){e.exports=n(75)},function(e,t){e.exports=n(76)},function(e,t){e.exports=n(77)},function(e,t){e.exports=n(78)},function(e){e.exports=JSON.parse('{"name":"superagent","version":"3.8.3","description":"elegant & feature rich browser / node HTTP with a fluent API","scripts":{"prepare":"make all","test":"make test"},"keywords":["http","ajax","request","agent"],"license":"MIT","author":"TJ Holowaychuk <tj@vision-media.ca>","contributors":["Kornel Lesiński <kornel@geekhood.net>","Peter Lyons <pete@peterlyons.com>","Hunter Loftis <hunter@hunterloftis.com>"],"repository":{"type":"git","url":"git://github.com/visionmedia/superagent.git"},"dependencies":{"component-emitter":"^1.2.0","cookiejar":"^2.1.0","debug":"^3.1.0","extend":"^3.0.0","form-data":"^2.3.1","formidable":"^1.2.0","methods":"^1.1.1","mime":"^1.4.1","qs":"^6.5.1","readable-stream":"^2.3.5"},"devDependencies":{"Base64":"^1.0.1","basic-auth-connect":"^1.0.0","body-parser":"^1.18.2","browserify":"^14.1.0","cookie-parser":"^1.4.3","express":"^4.16.3","express-session":"^1.15.6","marked":"0.3.12","mocha":"^3.5.3","multer":"^1.3.0","should":"^11.2.0","should-http":"^0.1.1","zuul":"^3.11.1"},"browser":{"./lib/node/index.js":"./lib/client.js","./test/support/server.js":"./test/support/blank.js"},"component":{"scripts":{"superagent":"lib/client.js"}},"main":"./lib/node/index.js","engines":{"node":">= 4.0"}}')},function(e,t,n){"use strict";var r=n(81);function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}e.exports=o,o.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},o.prototype.parse=function(e){return this._parser=e,this},o.prototype.responseType=function(e){return this._responseType=e,this},o.prototype.serialize=function(e){return this._serializer=e,this},o.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},o.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var s=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];o.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(e,t);if(!0===n)return!0;if(!1===n)return!1}catch(e){console.error(e)}if(t&&t.status&&t.status>=500&&501!=t.status)return!0;if(e){if(e.code&&~s.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},o.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},o.prototype.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(e,t){n.end((function(n,r){n?t(n):e(r)}))}))}return this._fullfilledPromise.then(e,t)},o.prototype.catch=function(e){return this.then(void 0,e)},o.prototype.use=function(e){return e(this),this},o.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},o.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},o.prototype.get=function(e){return this._header[e.toLowerCase()]},o.prototype.getHeader=o.prototype.get,o.prototype.set=function(e,t){if(r(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},o.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},o.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),r(e)){for(var n in e)this.field(n,e[n]);return this}if(Array.isArray(t)){for(var o in t)this.field(e,t[o]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},o.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},o.prototype._auth=function(e,t,n,r){switch(n.type){case"basic":this.set("Authorization","Basic "+r(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},o.prototype.withCredentials=function(e){return null==e&&(e=!0),this._withCredentials=e,this},o.prototype.redirects=function(e){return this._maxRedirects=e,this},o.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},o.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},o.prototype.send=function(e){var t=r(e),n=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&r(this._data))for(var o in e)this._data[o]=e[o];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(n||this.type("json"),this)},o.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},o.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var n=this.url.substring(t+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,t)+"?"+n.join("&")}}},o.prototype._appendQueryString=function(){console.trace("Unsupported")},o.prototype._timeoutError=function(e,t,n){if(!this._aborted){var r=new Error(e+t+"ms exceeded");r.timeout=t,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},o.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))}},function(e,t,n){"use strict";e.exports=function(e){return null!==e&&"object"==typeof e}},function(e,t,n){"use strict";const r=n(30).CookieJar,o=n(30).CookieAccessInfo,s=n(23).parse,i=n(27),a=n(83);let c=n(22);function u(e){if(!(this instanceof u))return new u(e);a.call(this),this.jar=new r,e&&(e.ca&&this.ca(e.ca),e.key&&this.key(e.key),e.pfx&&this.pfx(e.pfx),e.cert&&this.cert(e.cert))}e.exports=u,u.prototype=Object.create(a.prototype),u.prototype._saveCookies=function(e){const t=e.headers["set-cookie"];t&&this.jar.setCookies(t)},u.prototype._attachCookies=function(e){const t=s(e.url),n=o(t.hostname,t.pathname,"https:"==t.protocol),r=this.jar.getCookies(n).toValueString();e.cookies=r},c.forEach(e=>{const t=e.toUpperCase();u.prototype[e]=function(e,n){const r=new i.Request(t,e);return r.on("response",this._saveCookies.bind(this)),r.on("redirect",this._saveCookies.bind(this)),r.on("redirect",this._attachCookies.bind(this,r)),this._attachCookies(r),this._setDefaults(r),n&&r.end(n),r}}),u.prototype.del=u.prototype.delete},function(e,t){function n(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach((function(e){n.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}})),n.prototype._setDefaults=function(e){this._defaults.forEach((function(t){e[t.fn].apply(e,t.arguments)}))},e.exports=n},function(e,t,n){"use strict";t["application/x-www-form-urlencoded"]=n(85),t["application/json"]=n(86),t.text=n(87);const r=n(88);t["application/octet-stream"]=r,t["application/pdf"]=r,t.image=r},function(e,t,n){"use strict";const r=n(41);e.exports=function(e,t){e.text="",e.setEncoding("ascii"),e.on("data",t=>{e.text+=t}),e.on("end",()=>{try{t(null,r.parse(e.text))}catch(e){t(e)}})}},function(e,t,n){"use strict";e.exports=function(e,t){e.text="",e.setEncoding("utf8"),e.on("data",t=>{e.text+=t}),e.on("end",()=>{try{var n=e.text&&JSON.parse(e.text)}catch(t){var r=t;r.rawResponse=e.text||null,r.statusCode=e.statusCode}finally{t(r,n)}})}},function(e,t,n){"use strict";e.exports=function(e,t){e.text="",e.setEncoding("utf8"),e.on("data",t=>{e.text+=t}),e.on("end",t)}},function(e,t,n){"use strict";e.exports=(e,t)=>{const n=[];e.on("data",e=>{n.push(e)}),e.on("end",()=>{t(null,Buffer.concat(n))})}},function(e,t){e.exports=n(89)},function(e,t,n){var r=n(27).agent,o=n(22),s=n(24),i=n(37);function a(e,t){if(!(this instanceof a))return new a(e,t);"function"==typeof e&&(e=s.createServer(e)),t&&(this._ca=t.ca,this._key=t.key,this._cert=t.cert),r.call(this),this.app=e}e.exports=a,Object.setPrototypeOf(a.prototype,r.prototype),a.prototype.host=function(e){return this._host=e,this},o.forEach((function(e){a.prototype[e]=function(t,n){var r=new i(this.app,e.toUpperCase(),t,this._host);return r.ca(this._ca),r.cert(this._cert),r.key(this._key),r.on("response",this._saveCookies.bind(this)),r.on("redirect",this._saveCookies.bind(this)),r.on("redirect",this._attachCookies.bind(this,r)),this._attachCookies(r),this._setDefaults(r),r}})),a.prototype.del=a.prototype.delete},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(14).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(42),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(10),A=n.n(C),L=n(11),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(10)},function(e,t){e.exports=n(11)},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(9);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(13)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(14)},function(e,t){
/*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   */
e.exports=function(e,t,n){var r=e.__flags||(e.__flags=Object.create(null));if(3!==arguments.length)return r[t];r[t]=n}},function(e,t,n){
/*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   */
var r=[];
/*!
   * Chai version
   */t.version="4.2.0",
/*!
   * Assertion Error
   */
t.AssertionError=n(31);
/*!
   * Utils for plugins (not exported)
   */
var o=n(44);t.use=function(e){return~r.indexOf(e)||(e(t,o),r.push(e)),t},
/*!
   * Utility Functions
   */
t.util=o;
/*!
   * Configuration
   */
var s=n(18);t.config=s;
/*!
   * Primary `Assertion` prototype
   */
var i=n(61);t.use(i);
/*!
   * Core Assertions
   */
var a=n(62);t.use(a);
/*!
   * Expect interface
   */
var c=n(63);t.use(c);
/*!
   * Should interface
   */
var u=n(64);t.use(u);
/*!
   * Assert interface
   */
var l=n(65);t.use(l)},function(e,t){
/*!
   * Chai - transferFlags utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   */
e.exports=function(e,t,n){var r=e.__flags||(e.__flags=Object.create(null));for(var o in t.__flags||(t.__flags=Object.create(null)),n=3!==arguments.length||n,r)(n||"object"!==o&&"ssfi"!==o&&"lockSsfi"!==o&&"message"!=o)&&(t.__flags[o]=r[o])}},function(e,t){e.exports={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"]}},function(e,t,n){var r=n(18);
/*!
   * Chai - isProxyEnabled helper
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   */e.exports=function(){return r.useProxy&&"undefined"!=typeof Proxy&&"undefined"!=typeof Reflect}},function(e,t){var n=Object.getOwnPropertyDescriptor((function(){}),"length");
/*!
   * Chai - addLengthGuard utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   */e.exports=function(e,t,r){return n.configurable?(Object.defineProperty(e,"length",{get:function(){if(r)throw Error("Invalid Chai property: "+t+'.length. Due to a compatibility issue, "length" cannot directly follow "'+t+'". Use "'+t+'.lengthOf" instead.');throw Error("Invalid Chai property: "+t+'.length. See docs for proper usage of "'+t+'".')}}),e):e}},function(e,t,n){var r=n(18),o=n(15),s=n(35),i=n(19),a=["__flags","__methods","_obj","assert"];e.exports=function(e,t){return i()?new Proxy(e,{get:function e(n,i){if("string"==typeof i&&-1===r.proxyExcludedKeys.indexOf(i)&&!Reflect.has(n,i)){if(t)throw Error("Invalid Chai property: "+t+"."+i+'. See docs for proper usage of "'+t+'".');var c=null,u=4;throw s(n).forEach((function(e){if(!Object.prototype.hasOwnProperty(e)&&-1===a.indexOf(e)){var t=function(e,t,n){if(Math.abs(e.length-t.length)>=n)return n;for(var r=[],o=0;o<=e.length;o++)r[o]=Array(t.length+1).fill(0),r[o][0]=o;for(var s=0;s<t.length;s++)r[0][s]=s;for(o=1;o<=e.length;o++){var i=e.charCodeAt(o-1);for(s=1;s<=t.length;s++)Math.abs(o-s)>=n?r[o][s]=n:r[o][s]=Math.min(r[o-1][s]+1,r[o][s-1]+1,r[o-1][s-1]+(i===t.charCodeAt(s-1)?0:1))}return r[e.length][t.length]}(i,e,u);t<u&&(c=e,u=t)}})),null!==c?Error("Invalid Chai property: "+i+'. Did you mean "'+c+'"?'):Error("Invalid Chai property: "+i)}return-1!==a.indexOf(i)||o(n,"lockSsfi")||o(n,"ssfi",e),Reflect.get(n,i)}}):e}},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t,n){var r;r=function(){"use strict";var e="function"==typeof Promise,t="object"==typeof self?self:global,n="undefined"!=typeof Symbol,r="undefined"!=typeof Map,o="undefined"!=typeof Set,s="undefined"!=typeof WeakMap,i="undefined"!=typeof WeakSet,a="undefined"!=typeof DataView,c=n&&void 0!==Symbol.iterator,u=n&&void 0!==Symbol.toStringTag,l=o&&"function"==typeof Set.prototype.entries,d=r&&"function"==typeof Map.prototype.entries,p=l&&Object.getPrototypeOf((new Set).entries()),h=d&&Object.getPrototypeOf((new Map).entries()),f=c&&"function"==typeof Array.prototype[Symbol.iterator],y=f&&Object.getPrototypeOf([][Symbol.iterator]()),m=c&&"function"==typeof String.prototype[Symbol.iterator],b=m&&Object.getPrototypeOf(""[Symbol.iterator]());return function(n){var c=typeof n;if("object"!==c)return c;if(null===n)return"null";if(n===t)return"global";if(Array.isArray(n)&&(!1===u||!(Symbol.toStringTag in n)))return"Array";if("object"==typeof window&&null!==window){if("object"==typeof window.location&&n===window.location)return"Location";if("object"==typeof window.document&&n===window.document)return"Document";if("object"==typeof window.navigator){if("object"==typeof window.navigator.mimeTypes&&n===window.navigator.mimeTypes)return"MimeTypeArray";if("object"==typeof window.navigator.plugins&&n===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"==typeof window.HTMLElement)&&n instanceof window.HTMLElement){if("BLOCKQUOTE"===n.tagName)return"HTMLQuoteElement";if("TD"===n.tagName)return"HTMLTableDataCellElement";if("TH"===n.tagName)return"HTMLTableHeaderCellElement"}}var l=u&&n[Symbol.toStringTag];if("string"==typeof l)return l;var d=Object.getPrototypeOf(n);return d===RegExp.prototype?"RegExp":d===Date.prototype?"Date":e&&d===Promise.prototype?"Promise":o&&d===Set.prototype?"Set":r&&d===Map.prototype?"Map":i&&d===WeakSet.prototype?"WeakSet":s&&d===WeakMap.prototype?"WeakMap":a&&d===DataView.prototype?"DataView":r&&d===h?"Map Iterator":o&&d===p?"Set Iterator":f&&d===y?"Array Iterator":m&&d===b?"String Iterator":null===d?"Object":Object.prototype.toString.call(n).slice(8,-1)}},e.exports=r()},function(e,t,n){var r=n(34),o=n(35),s=n(49),i=n(18);e.exports=function(e,t,n,r){return c({showHidden:t,seen:[],stylize:function(e){return e}},e,void 0===n?2:n)};var a=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&"nodeType"in e&&1===e.nodeType&&"string"==typeof e.nodeName};function c(e,n,y){if(n&&"function"==typeof n.inspect&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var m=n.inspect(y,e);return"string"!=typeof m&&(m=c(e,m,y)),m}var b=function(e,t){switch(typeof t){case"undefined":return e.stylize("undefined","undefined");case"string":var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string");case"number":return 0===t&&1/t==-1/0?e.stylize("-0","number"):e.stylize(""+t,"number");case"boolean":return e.stylize(""+t,"boolean");case"symbol":return e.stylize(t.toString(),"symbol")}if(null===t)return e.stylize("null","null")}(e,n);if(b)return b;if(a(n)){if("outerHTML"in n)return n.outerHTML;try{if(document.xmlVersion)return(new XMLSerializer).serializeToString(n);var g=document.createElementNS("http://www.w3.org/1999/xhtml","_");g.appendChild(n.cloneNode(!1));var w=g.innerHTML.replace("><",">"+n.innerHTML+"<");return g.innerHTML="",w}catch(e){}}var v,_,x=s(n),E=e.showHidden?o(n):x;if(0===E.length||h(n)&&(1===E.length&&"stack"===E[0]||2===E.length&&"description"===E[0]&&"stack"===E[1])){if("function"==typeof n)return _=(v=r(n))?": "+v:"",e.stylize("[Function"+_+"]","special");if(d(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(p(n))return e.stylize(Date.prototype.toUTCString.call(n),"date");if(h(n))return u(n)}var S,O,P="",k=!1,j=!1,q=["{","}"];if("object"==typeof(S=n)&&/\w+Array]$/.test(f(S))&&(j=!0,q=["[","]"]),function(e){return Array.isArray(e)||"object"==typeof e&&"[object Array]"===f(e)}(n)&&(k=!0,q=["[","]"]),"function"==typeof n&&(P=" [Function"+(_=(v=r(n))?": "+v:"")+"]"),d(n)&&(P=" "+RegExp.prototype.toString.call(n)),p(n)&&(P=" "+Date.prototype.toUTCString.call(n)),h(n))return u(n);if(0===E.length&&(!k||0==n.length))return q[0]+P+q[1];if(y<0)return d(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");if(e.seen.push(n),k)O=function(e,t,n,r,o){for(var s=[],i=0,a=t.length;i<a;++i)Object.prototype.hasOwnProperty.call(t,String(i))?s.push(l(e,t,n,r,String(i),!0)):s.push("");return o.forEach((function(o){o.match(/^\d+$/)||s.push(l(e,t,n,r,o,!0))})),s}(e,n,y,x,E);else{if(j)return function(e){for(var t="[ ",n=0;n<e.length;++n){if(t.length>=i.truncateThreshold-7){t+="...";break}t+=e[n]+", "}return-1!==(t+=" ]").indexOf(",  ]")&&(t=t.replace(",  ]"," ]")),t}(n);O=E.map((function(t){return l(e,n,y,x,t,k)}))}return e.seen.pop(),function(e,t,n){return e.reduce((function(e,t){return e+t.length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(O,P,q)}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,n,r,o,s){var i,a,u=Object.getOwnPropertyDescriptor(t,o);if(u&&(u.get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special"))),r.indexOf(o)<0&&(i="["+o+"]"),a||(e.seen.indexOf(t[o])<0?(a=c(e,t[o],null===n?null:n-1)).indexOf("\n")>-1&&(a=s?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),void 0===i){if(s&&o.match(/^\d+$/))return a;(i=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+a}function d(e){return"object"==typeof e&&"[object RegExp]"===f(e)}function p(e){return"object"==typeof e&&"[object Date]"===f(e)}function h(e){return"object"==typeof e&&"[object Error]"===f(e)}function f(e){return Object.prototype.toString.call(e)}},function(e,t,n){"use strict";const r=n(67)("superagent"),o=n(68),s=n(71),i=n(72),a=n(23).parse,c=n(23).format,u=n(23).resolve;let l=n(22);const d=n(29),p=n(38),h=n(74).unzip,f=n(76),y=n(77),m=n(40),b=n(24),g=n(78),w=n(41),v=n(39),_=n(28),x=n(79),E=n(80),S=n(30);function O(e,n){return"function"==typeof n?new t.Request("GET",e).end(n):1==arguments.length?new t.Request("GET",e):new t.Request(e,n)}function P(){}function k(e){const t=`node-superagent/${x.version}`;e._header={"user-agent":t},e.header={"User-Agent":t}}function j(e,t){d.call(this),"string"!=typeof t&&(t=c(t)),this._agent=!1,this._formData=null,this.method=e,this.url=t,k(this),this.writable=!0,this._redirects=0,this.redirects("HEAD"===e?0:5),this.cookies="",this.qs={},this._query=[],this.qsRaw=this._query,this._redirectList=[],this._streamRequest=!1,this.once("end",this.clearTimeout.bind(this))}function q(e){return/[\/+]json($|[^-\w])/.test(e)}function T(e){return~[301,302,303,305,307,308].indexOf(e)}(t=e.exports=O).Request=j,t.agent=n(82),t.Response=i,y.define({"application/x-www-form-urlencoded":["form","urlencoded","form-data"]},!0),t.protocols={"http:":b,"https:":m},t.serialize={"application/x-www-form-urlencoded":w.stringify,"application/json":JSON.stringify},t.parse=n(84),_.inherits(j,d),E(j.prototype),j.prototype.attach=function(e,t,n){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");let o=n||{};"string"==typeof n&&(o={filename:n}),"string"==typeof t?(o.filename||(o.filename=t),r("creating `fs.ReadStream` instance for file: %s",t),t=g.createReadStream(t)):!o.filename&&t.path&&(o.filename=t.path),this._getFormData().append(e,t,o)}return this},j.prototype._getFormData=function(){return this._formData||(this._formData=new s,this._formData.on("error",e=>{this.emit("error",e),this.abort()})),this._formData},j.prototype.agent=function(e){return arguments.length?(this._agent=e,this):this._agent},j.prototype.type=function(e){return this.set("Content-Type",~e.indexOf("/")?e:y.lookup(e))},j.prototype.accept=function(e){return this.set("Accept",~e.indexOf("/")?e:y.lookup(e))},j.prototype.query=function(e){return"string"==typeof e?this._query.push(e):f(this.qs,e),this},j.prototype.write=function(e,t){const n=this.request();return this._streamRequest||(this._streamRequest=!0),n.write(e,t)},j.prototype.pipe=function(e,t){return this.piped=!0,this.buffer(!1),this.end(),this._pipeContinue(e,t)},j.prototype._pipeContinue=function(e,t){return this.req.once("response",n=>{if(T(n.statusCode)&&this._redirects++!=this._maxRedirects)return this._redirect(n)._pipeContinue(e,t);if(this.res=n,this._emitResponse(),!this._aborted){if(this._shouldUnzip(n)){const r=v.createUnzip();r.on("error",t=>{t&&"Z_BUF_ERROR"===t.code?e.emit("end"):e.emit("error",t)}),n.pipe(r).pipe(e,t)}else n.pipe(e,t);n.once("end",()=>{this.emit("end")})}}),e},j.prototype.buffer=function(e){return this._buffer=!1!==e,this},j.prototype._redirect=function(e){let t=e.headers.location;if(!t)return this.callback(new Error("No location header for redirect"),e);r("redirect %s -> %s",this.url,t),t=u(this.url,t),e.resume();let n=this.req._headers;const o=a(t).host!==a(this.url).host;return 301!=e.statusCode&&302!=e.statusCode||(n=p.cleanHeader(this.req._headers,o),this.method="HEAD"==this.method?"HEAD":"GET",this._data=null),303==e.statusCode&&(n=p.cleanHeader(this.req._headers,o),this.method="GET",this._data=null),delete n.host,delete this.req,delete this._formData,k(this),this._endCalled=!1,this.url=t,this.qs={},this._query.length=0,this.set(n),this.emit("redirect",e),this._redirectList.push(this.url),this.end(this._callback),this},j.prototype.auth=function(e,t,n){1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(n=t,t=""),n||(n={type:"basic"});var r=function(e){return new Buffer(e).toString("base64")};return this._auth(e,t,n,r)},j.prototype.ca=function(e){return this._ca=e,this},j.prototype.key=function(e){return this._key=e,this},j.prototype.pfx=function(e){return"object"!=typeof e||Buffer.isBuffer(e)?this._pfx=e:(this._pfx=e.pfx,this._passphrase=e.passphrase),this},j.prototype.cert=function(e){return this._cert=e,this},j.prototype.request=function(){if(this.req)return this.req;const e={};try{const e=w.stringify(this.qs,{indices:!1,strictNullHandling:!0});e&&(this.qs={},this._query.push(e)),this._finalizeQueryString()}catch(e){return this.emit("error",e)}let n=this.url;const r=this._retries;if(0!=n.indexOf("http")&&(n=`http://${n}`),n=a(n),!0===/^https?\+unix:/.test(n.protocol)){n.protocol=`${n.protocol.split("+")[0]}:`;const t=n.path.match(/^([^/]+)(.+)$/);e.socketPath=t[1].replace(/%2F/g,"/"),n.path=t[2]}e.method=this.method,e.port=n.port,e.path=n.path,e.host=n.hostname,e.ca=this._ca,e.key=this._key,e.pfx=this._pfx,e.cert=this._cert,e.passphrase=this._passphrase,e.agent=this._agent;const o=t.protocols[n.protocol],s=this.req=o.request(e);if(s.setNoDelay(!0),"HEAD"!=e.method&&s.setHeader("Accept-Encoding","gzip, deflate"),this.protocol=n.protocol,this.host=n.host,s.once("drain",()=>{this.emit("drain")}),s.once("error",e=>{this._aborted||this._retries===r&&(this.response||this.callback(e))}),n.auth){const e=n.auth.split(":");this.auth(e[0],e[1])}this.username&&this.password&&this.auth(this.username,this.password);for(const e in this.header)this.header.hasOwnProperty(e)&&s.setHeader(e,this.header[e]);if(this.cookies)if(this.header.hasOwnProperty("cookie")){const e=new S.CookieJar;e.setCookies(this.header.cookie.split(";")),e.setCookies(this.cookies.split(";")),s.setHeader("Cookie",e.getCookies(S.CookieAccessInfo.All).toValueString())}else s.setHeader("Cookie",this.cookies);return s},j.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();const n=this._callback||P;if(this.clearTimeout(),this.called)return console.warn("superagent: double callback bug");if(this.called=!0,!e)try{if(!this._isResponseOK(t)){let n="Unsuccessful HTTP response";t&&(n=b.STATUS_CODES[t.status]||n),(e=new Error(n)).status=t?t.status:void 0}}catch(t){e=t}if(!e)return n(null,t);e.response=t,this._maxRetries&&(e.retries=this._retries-1),e&&this.listeners("error").length>0&&this.emit("error",e),n(e,t)},j.prototype._isHost=function(e){return Buffer.isBuffer(e)||e instanceof d||e instanceof s},j.prototype._emitResponse=function(e,t){const n=new i(this);return this.response=n,n.redirects=this._redirectList,void 0!==e&&(n.body=e),n.files=t,this.emit("response",n),n},j.prototype.end=function(e){return this.request(),r("%s %s",this.method,this.url),this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||P,this._end()},j.prototype._end=function(){let e=this._data;const n=this.req;let s=this._buffer;const i=this.method;if(this._setTimeouts(),"HEAD"!=i&&!n._headerSent){if("string"!=typeof e){let r=n.getHeader("Content-Type");r&&(r=r.split(";")[0]);let o=t.serialize[r];!o&&q(r)&&(o=t.serialize["application/json"]),o&&(e=o(e))}e&&!n.getHeader("Content-Length")&&n.setHeader("Content-Length",Buffer.isBuffer(e)?e.length:Buffer.byteLength(e))}n.once("response",e=>{if(r("%s %s -> %s",this.method,this.url,e.statusCode),this._responseTimeoutTimer&&clearTimeout(this._responseTimeoutTimer),this.piped)return;const i=this._maxRedirects,a=p.type(e.headers["content-type"]||"")||"text/plain",c=a.split("/")[0],u="multipart"==c,l=T(e.statusCode);let d=this._parser;const f=this._responseType;if(this.res=e,l&&this._redirects++!=i)return this._redirect(e);if("HEAD"==this.method)return this.emit("end"),void this.callback(null,this._emitResponse());if(this._shouldUnzip(e)&&h(n,e),!d)if(f)d=t.parse.image,s=!0;else if(u){const e=new o.IncomingForm;d=e.parse.bind(e),s=!0}else!function(e){const t=e.split("/")[0];return"image"==t||"video"==t}(a)?t.parse[a]?d=t.parse[a]:"text"==c?(d=t.parse.text,s=!1!==s):q(a)?(d=t.parse["application/json"],s=!1!==s):s&&(d=t.parse.text):(d=t.parse.image,s=!0);(void 0===s&&function(e){const t=e.split("/"),n=t[0],r=t[1];return"text"==n||"x-www-form-urlencoded"==r}(a)||q(a))&&(s=!0);let y=!1;if(s){let t=this._maxResponseSize||2e8;e.on("data",n=>{if((t-=n.byteLength||n.length)<0){const t=Error("Maximum response size reached");t.code="ETOOLARGE",y=!1,e.destroy(t)}})}if(d)try{y=s,d(e,(e,t,n)=>{if(!this.timedout)return e&&!this._aborted?this.callback(e):void(y&&(this.emit("end"),this.callback(null,this._emitResponse(t,n))))})}catch(e){return void this.callback(e)}if(this.res=e,s)e.once("error",e=>{y=!1,this.callback(e,null)}),y||e.once("end",()=>{r("end %s %s",this.method,this.url),this.emit("end"),this.callback(null,this._emitResponse())});else{if(r("unbuffered %s %s",this.method,this.url),this.callback(null,this._emitResponse()),u)return;e.once("end",()=>{r("end %s %s",this.method,this.url),this.emit("end")})}}),this.emit("request",this);const a=()=>{const e=n.getHeader("Content-Length");let t=0;const r=new d.Transform;return r._transform=(n,r,o)=>{t+=n.length,this.emit("progress",{direction:"upload",lengthComputable:!0,loaded:t,total:e}),o(null,n)},r},c=this._formData;if(c){const e=c.getHeaders();for(const t in e)r('setting FormData header: "%s: %s"',t,e[t]),n.setHeader(t,e[t]);c.getLength((e,t)=>{r("got FormData Content-Length: %s",t),"number"==typeof t&&n.setHeader("Content-Length",t),c.pipe(a()).pipe(n)})}else Buffer.isBuffer(e)?(e=>{const t=new d.Readable,n=e.length,r=n%16384,o=n-r;for(let n=0;n<o;n+=16384){const r=e.slice(n,n+16384);t.push(r)}if(r>0){const n=e.slice(-r);t.push(n)}return t.push(null),t})(e).pipe(a()).pipe(n):n.end(e);return this},j.prototype._shouldUnzip=e=>204!==e.statusCode&&304!==e.statusCode&&"0"!==e.headers["content-length"]&&/^\s*(?:deflate|gzip)\s*$/.test(e.headers["content-encoding"]),-1==l.indexOf("del")&&(l=l.slice(0)).push("del"),l.forEach(e=>{const t=e;e=(e="del"==e?"delete":e).toUpperCase(),O[t]=(t,n,r)=>{const o=O(e,t);return"function"==typeof n&&(r=n,n=null),n&&("GET"===e||"HEAD"===e?o.query(n):o.send(n)),r&&o.end(r),o}})},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){!function(){"use strict";function e(t,n,r,o){return this instanceof e?(this.domain=t||void 0,this.path=n||"/",this.secure=!!r,this.script=!!o,this):new e(t,n,r,o)}function n(e,t,r){return e instanceof n?e:this instanceof n?(this.name=null,this.value=null,this.expiration_date=1/0,this.path=String(r||"/"),this.explicit_path=!1,this.domain=t||null,this.explicit_domain=!1,this.secure=!1,this.noscript=!1,e&&this.parse(e,t,r),this):new n(e,t,r)}e.All=Object.freeze(Object.create(null)),t.CookieAccessInfo=e,t.Cookie=n,n.prototype.toString=function(){var e=[this.name+"="+this.value];return this.expiration_date!==1/0&&e.push("expires="+new Date(this.expiration_date).toGMTString()),this.domain&&e.push("domain="+this.domain),this.path&&e.push("path="+this.path),this.secure&&e.push("secure"),this.noscript&&e.push("httponly"),e.join("; ")},n.prototype.toValueString=function(){return this.name+"="+this.value};var r=/[:](?=\s*[a-zA-Z0-9_\-]+\s*[=])/g;function o(){var e,t;return this instanceof o?(e=Object.create(null),this.setCookie=function(r,o,s){var i,a;if(i=(r=new n(r,o,s)).expiration_date<=Date.now(),void 0!==e[r.name]){for(t=e[r.name],a=0;a<t.length;a+=1)if(t[a].collidesWith(r))return i?(t.splice(a,1),0===t.length&&delete e[r.name],!1):(t[a]=r,r);return!i&&(t.push(r),r)}return!i&&(e[r.name]=[r],e[r.name])},this.getCookie=function(n,r){var o,s;if(t=e[n])for(s=0;s<t.length;s+=1)if((o=t[s]).expiration_date<=Date.now())0===t.length&&delete e[o.name];else if(o.matches(r))return o},this.getCookies=function(t){var n,r,o=[];for(n in e)(r=this.getCookie(n,t))&&o.push(r);return o.toString=function(){return o.join(":")},o.toValueString=function(){return o.map((function(e){return e.toValueString()})).join(";")},o},this):new o}n.prototype.parse=function(e,t,r){if(this instanceof n){var o,s=e.split(";").filter((function(e){return!!e})),i=s[0].match(/([^=]+)=([\s\S]*)/);if(!i)return void console.warn("Invalid cookie header encountered. Header: '"+e+"'");var a=i[1],c=i[2];if("string"!=typeof a||0===a.length||"string"!=typeof c)return void console.warn("Unable to extract values from cookie header. Cookie: '"+e+"'");for(this.name=a,this.value=c,o=1;o<s.length;o+=1)switch(a=(i=s[o].match(/([^=]+)(?:=([\s\S]*))?/))[1].trim().toLowerCase(),c=i[2],a){case"httponly":this.noscript=!0;break;case"expires":this.expiration_date=c?Number(Date.parse(c)):1/0;break;case"path":this.path=c?c.trim():"",this.explicit_path=!0;break;case"domain":this.domain=c?c.trim():"",this.explicit_domain=!!this.domain;break;case"secure":this.secure=!0}return this.explicit_path||(this.path=r||"/"),this.explicit_domain||(this.domain=t),this}return(new n).parse(e,t,r)},n.prototype.matches=function(t){return t===e.All||!(this.noscript&&t.script||this.secure&&!t.secure||!this.collidesWith(t))},n.prototype.collidesWith=function(e){if(this.path&&!e.path||this.domain&&!e.domain)return!1;if(this.path&&0!==e.path.indexOf(this.path))return!1;if(this.explicit_path&&0!==e.path.indexOf(this.path))return!1;var t=e.domain&&e.domain.replace(/^[\.]/,""),n=this.domain&&this.domain.replace(/^[\.]/,"");if(n===t)return!0;if(n){if(!this.explicit_domain)return!1;var r=t.indexOf(n);return-1!==r&&r===t.length-n.length}return!0},t.CookieJar=o,o.prototype.setCookies=function(e,t,o){var s,i,a=[];for(e=(e=Array.isArray(e)?e:e.split(r)).map((function(e){return new n(e,t,o)})),s=0;s<e.length;s+=1)i=e[s],this.setCookie(i,t,o)&&a.push(i);return a}}()},function(e,t){
/*!
   * assertion-error
   * Copyright(c) 2013 Jake Luer <jake@qualiancy.com>
   * MIT Licensed
   */
/*!
   * Return a function that will copy properties from
   * one object to another excluding any originally
   * listed. Returned function will create a new `{}`.
   *
   * @param {String} excluded properties ...
   * @return {Function}
   */
function n(){var e=[].slice.call(arguments);function t(t,n){Object.keys(n).forEach((function(r){~e.indexOf(r)||(t[r]=n[r])}))}return function(){for(var e=[].slice.call(arguments),n=0,r={};n<e.length;n++)t(r,e[n]);return r}}function r(e,t,o){var s=n("name","message","stack","constructor","toJSON")(t||{});for(var i in this.message=e||"Unspecified AssertionError",this.showDiff=!1,s)this[i]=s[i];if(o=o||r,Error.captureStackTrace)Error.captureStackTrace(this,o);else try{throw new Error}catch(e){this.stack=e.stack}}
/*!
   * Inherit from Error.prototype
   */
/*!
   * Primary Exports
   */e.exports=r,r.prototype=Object.create(Error.prototype),
/*!
   * Statically set name
   */
r.prototype.name="AssertionError",
/*!
   * Ensure correct constructor
   */
r.prototype.constructor=r,r.prototype.toJSON=function(e){var t=n("constructor","toJSON","stack")({name:this.name},this);return!1!==e&&this.stack&&(t.stack=this.stack),t}},function(e,t){
/*!
   * Chai - getActual utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   */
e.exports=function(e,t){return t.length>4?t[4]:e._obj}},function(e,t,n){
/*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   */
/*!
   * Module dependencies
   */
var r=n(26),o=n(18);e.exports=function(e){var t=r(e),n=Object.prototype.toString.call(e);if(o.truncateThreshold&&t.length>=o.truncateThreshold){if("[object Function]"===n)return e.name&&""!==e.name?"[Function: "+e.name+"]":"[Function]";if("[object Array]"===n)return"[ Array("+e.length+") ]";if("[object Object]"===n){var s=Object.keys(e);return"{ Object ("+(s.length>2?s.splice(0,2).join(", ")+", ...":s.join(", "))+") }"}return t}return t}},function(e,t,n){"use strict";var r=Function.prototype.toString,o=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\s\(\/]+)/;e.exports=function(e){if("function"!=typeof e)return null;var t="";if(void 0===Function.prototype.name&&void 0===e.name){var n=r.call(e).match(o);n&&(t=n[1])}else t=e.name;return t}},function(e,t){
/*!
   * Chai - getProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   */
e.exports=function(e){var t=Object.getOwnPropertyNames(e);function n(e){-1===t.indexOf(e)&&t.push(e)}for(var r=Object.getPrototypeOf(e);null!==r;)Object.getOwnPropertyNames(r).forEach(n),r=Object.getPrototypeOf(r);return t}},function(e,t){
/*!
   * Chai - getOwnEnumerablePropertySymbols utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   */
e.exports=function(e){return"function"!=typeof Object.getOwnPropertySymbols?[]:Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))}},function(e,t,n){var r=n(27),o=n(28),s=n(24),i=n(40),a=n(89),c=r.Request;function u(e,t,n,r){c.call(this,t.toUpperCase(),n),this.redirects(0),this.buffer(),this.app=e,this._asserts=[],this.url="string"==typeof e?e+n:this.serverAddress(e,n,r)}function l(e,t,n){var r=new Error(e);return r.expected=t,r.actual=n,r.showDiff=!0,r}e.exports=u,Object.setPrototypeOf(u.prototype,c.prototype),u.prototype.serverAddress=function(e,t,n){var r;return e.address()||(this._server=e.listen(0)),r=e.address().port,(e instanceof i.Server?"https":"http")+"://"+(n||"127.0.0.1")+":"+r+t},u.prototype.expect=function(e,t,n){return"function"==typeof e?(this._asserts.push(e),this):("function"==typeof t&&this.end(t),"function"==typeof n&&this.end(n),"number"==typeof e?(this._asserts.push(this._assertStatus.bind(this,e)),"function"!=typeof t&&arguments.length>1&&this._asserts.push(this._assertBody.bind(this,t)),this):"string"==typeof t||"number"==typeof t||t instanceof RegExp?(this._asserts.push(this._assertHeader.bind(this,{name:""+e,value:t})),this):(this._asserts.push(this._assertBody.bind(this,e)),this))},u.prototype.end=function(e){var t=this,n=this._server;return c.prototype.end.call(this,(function(r,o){if(n&&n._handle)return n.close(s);function s(){t.assert(r,o,e)}s()})),this},u.prototype.assert=function(e,t,n){var r,o,s={ECONNREFUSED:"Connection refused",ECONNRESET:"Connection reset by peer",EPIPE:"Broken pipe",ETIMEDOUT:"Operation timed out"};for(!t&&e&&(r=e instanceof Error&&"connect"===e.syscall&&Object.getOwnPropertyNames(s).indexOf(e.code)>=0?new Error(e.code+": "+s[e.code]):e),o=0;o<this._asserts.length&&!r;o+=1)r=this._assertFunction(this._asserts[o],t);r||!(e instanceof Error)||t&&e.status===t.status||(r=e),n.call(this,r||null,t)},u.prototype._assertBody=function(e,t){var n,r,s=e instanceof RegExp;if("object"!=typeof e||s){if(e!==t.text){if(n=o.inspect(e),r=o.inspect(t.text),!s)return l("expected "+n+" response body, got "+r,e,t.body);if(!e.test(t.text))return l("expected body "+r+" to match "+e,e,t.body)}}else try{a.deepStrictEqual(e,t.body)}catch(s){return l("expected "+(n=o.inspect(e))+" response body, got "+(r=o.inspect(t.body)),e,t.body)}},u.prototype._assertHeader=function(e,t){var n=e.name,r=t.header[n.toLowerCase()],o=e.value;return void 0===r?new Error('expected "'+n+'" header field'):Array.isArray(r)&&r.toString()===o||o===r?void 0:o instanceof RegExp?o.test(r)?void 0:new Error('expected "'+n+'" matching '+o+', got "'+r+'"'):new Error('expected "'+n+'" of "'+o+'", got "'+r+'"')},u.prototype._assertStatus=function(e,t){var n,r;if(t.status!==e)return n=s.STATUS_CODES[e],r=s.STATUS_CODES[t.status],new Error("expected "+e+' "'+n+'", got '+t.status+' "'+r+'"')},u.prototype._assertFunction=function(e,t){var n;try{n=e(t)}catch(e){n=e}if(n instanceof Error)return n}},function(e,t,n){"use strict";t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){return e.split(/ *; */).reduce((function(e,t){var n=t.split(/ *= */),r=n.shift(),o=n.shift();return r&&o&&(e[r]=o),e}),{})},t.parseLinks=function(e){return e.split(/ *, */).reduce((function(e,t){var n=t.split(/ *; */),r=n[0].slice(1,-1);return e[n[1].split(/ *= */)[1].slice(1,-1)]=r,e}),{})},t.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},function(e,t){e.exports=n(39)},function(e,t){e.exports=n(40)},function(e,t){e.exports=n(41)},function(e,t,n){const{expect:r}=n(43),o=n(66);n(91);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){e.exports=n(16)},function(e,t,n){
/*!
   * chai
   * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   */
/*!
   * Dependencies that are used for multiple exports are required here only once
   */
var r=n(45);
/*!
   * test utility
   */t.test=n(46),
/*!
   * type utility
   */
t.type=n(25),
/*!
   * expectTypes utility
   */
t.expectTypes=n(47),
/*!
   * message utility
   */
t.getMessage=n(48),
/*!
   * actual utility
   */
t.getActual=n(32),
/*!
   * Inspect util
   */
t.inspect=n(26),
/*!
   * Object Display util
   */
t.objDisplay=n(33),
/*!
   * Flag utility
   */
t.flag=n(15),
/*!
   * Flag transferring utility
   */
t.transferFlags=n(17),
/*!
   * Deep equal utility
   */
t.eql=n(50),
/*!
   * Deep path info
   */
t.getPathInfo=r.getPathInfo,
/*!
   * Check if a property exists
   */
t.hasProperty=r.hasProperty,
/*!
   * Function name
   */
t.getName=n(34),
/*!
   * add Property
   */
t.addProperty=n(51),
/*!
   * add Method
   */
t.addMethod=n(52),
/*!
   * overwrite Property
   */
t.overwriteProperty=n(53),
/*!
   * overwrite Method
   */
t.overwriteMethod=n(54),
/*!
   * Add a chainable method
   */
t.addChainableMethod=n(55),
/*!
   * Overwrite chainable method
   */
t.overwriteChainableMethod=n(56),
/*!
   * Compare by inspect method
   */
t.compareByInspect=n(57),
/*!
   * Get own enumerable property symbols method
   */
t.getOwnEnumerablePropertySymbols=n(36),
/*!
   * Get own enumerable properties method
   */
t.getOwnEnumerableProperties=n(58),
/*!
   * Checks error against a given set of criteria
   */
t.checkError=n(59),
/*!
   * Proxify util
   */
t.proxify=n(21),
/*!
   * addLengthGuard util
   */
t.addLengthGuard=n(20),
/*!
   * isProxyEnabled helper
   */
t.isProxyEnabled=n(19),
/*!
   * isNaN method
   */
t.isNaN=n(60)},function(e,t,n){"use strict";function r(e,t){return null!=e&&t in Object(e)}function o(e){return e.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map((function(e){var t=/^\[(\d+)\]$/.exec(e);return t?{i:parseFloat(t[1])}:{p:e.replace(/\\([.\[\]])/g,"$1")}}))}function s(e,t,n){var r=e,o=null;n=void 0===n?t.length:n;for(var s=0;s<n;s++){var i=t[s];r&&(r=void 0===i.p?r[i.i]:r[i.p],s===n-1&&(o=r))}return o}function i(e,t){var n=o(t),i=n[n.length-1],a={parent:n.length>1?s(e,n,n.length-1):e,name:i.p||i.i,value:s(e,n)};return a.exists=r(a.parent,a.name),a}e.exports={hasProperty:r,getPathInfo:i,getPathValue:function(e,t){return i(e,t).value},setPathValue:function(e,t,n){return function(e,t,n){for(var r=e,o=n.length,s=null,i=0;i<o;i++){var a=null,c=null;if(s=n[i],i===o-1)r[a=void 0===s.p?s.i:s.p]=t;else if(void 0!==s.p&&r[s.p])r=r[s.p];else if(void 0!==s.i&&r[s.i])r=r[s.i];else{var u=n[i+1];a=void 0===s.p?s.i:s.p,c=void 0===u.p?[]:{},r[a]=c,r=r[a]}}}(e,n,o(t)),e}}},function(e,t,n){
/*!
   * Chai - test utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   */
/*!
   * Module dependencies
   */
var r=n(15);e.exports=function(e,t){var n=r(e,"negate"),o=t[0];return n?!o:o}},function(e,t,n){
/*!
   * Chai - expectTypes utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   */
var r=n(31),o=n(15),s=n(25);e.exports=function(e,t){var n=o(e,"message"),i=o(e,"ssfi");n=n?n+": ":"",e=o(e,"object"),(t=t.map((function(e){return e.toLowerCase()}))).sort();var a=t.map((function(e,n){var r=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an":"a";return(t.length>1&&n===t.length-1?"or ":"")+r+" "+e})).join(", "),c=s(e).toLowerCase();if(!t.some((function(e){return c===e})))throw new r(n+"object tested must be "+a+", but "+c+" given",void 0,i)}},function(e,t,n){
/*!
   * Chai - message composition utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   */
/*!
   * Module dependencies
   */
var r=n(15),o=n(32),s=n(33);e.exports=function(e,t){var n=r(e,"negate"),i=r(e,"object"),a=t[3],c=o(e,t),u=n?t[2]:t[1],l=r(e,"message");return"function"==typeof u&&(u=u()),u=(u=u||"").replace(/#\{this\}/g,(function(){return s(i)})).replace(/#\{act\}/g,(function(){return s(c)})).replace(/#\{exp\}/g,(function(){return s(a)})),l?l+": "+u:u}},function(e,t){
/*!
   * Chai - getEnumerableProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   */
e.exports=function(e){var t=[];for(var n in e)t.push(n);return t}},function(e,t,n){"use strict";
/*!
   * deep-eql
   * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   */var r=n(25);function o(){this._key="chai/deep-eql__"+Math.random()+Date.now()}o.prototype={get:function(e){return e[this._key]},set:function(e,t){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:t,configurable:!0})}};var s="function"==typeof WeakMap?WeakMap:o;
/*!
   * Check to see if the MemoizeMap has recorded a result of the two operands
   *
   * @param {Mixed} leftHandOperand
   * @param {Mixed} rightHandOperand
   * @param {MemoizeMap} memoizeMap
   * @returns {Boolean|null} result
  */function i(e,t,n){if(!n||y(e)||y(t))return null;var r=n.get(e);if(r){var o=r.get(t);if("boolean"==typeof o)return o}return null}
/*!
   * Set the result of the equality into the MemoizeMap
   *
   * @param {Mixed} leftHandOperand
   * @param {Mixed} rightHandOperand
   * @param {MemoizeMap} memoizeMap
   * @param {Boolean} result
  */function a(e,t,n,r){if(n&&!y(e)&&!y(t)){var o=n.get(e);o?o.set(t,r):((o=new s).set(t,r),n.set(e,o))}}
/*!
   * Primary Export
   */function c(e,t,n){if(n&&n.comparator)return l(e,t,n);var r=u(e,t);return null!==r?r:l(e,t,n)}function u(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t||!y(e)&&!y(t)&&null}
/*!
   * The main logic of the `deepEqual` function.
   *
   * @param {Mixed} leftHandOperand
   * @param {Mixed} rightHandOperand
   * @param {Object} [options] (optional) Additional options
   * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
   * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
      complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
      references to blow the stack.
   * @return {Boolean} equal match
  */function l(e,t,n){(n=n||{}).memoize=!1!==n.memoize&&(n.memoize||new s);var o=n&&n.comparator,l=i(e,t,n.memoize);if(null!==l)return l;var y=i(t,e,n.memoize);if(null!==y)return y;if(o){var m=o(e,t);if(!1===m||!0===m)return a(e,t,n.memoize,m),m;var b=u(e,t);if(null!==b)return b}var g=r(e);if(g!==r(t))return a(e,t,n.memoize,!1),!1;a(e,t,n.memoize,!0);var w=function(e,t,n,r){switch(n){case"String":case"Number":case"Boolean":case"Date":return c(e.valueOf(),t.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":case"Error":return e===t;case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return d(e,t,r);case"RegExp":
/*!
           * Compare two Regular Expressions for equality.
           *
           * @param {RegExp} leftHandOperand
           * @param {RegExp} rightHandOperand
           * @return {Boolean} result
           */
return function(e,t){return e.toString()===t.toString()}
/*!
           * Compare two Sets/Maps for equality. Faster than other equality functions.
           *
           * @param {Set} leftHandOperand
           * @param {Set} rightHandOperand
           * @param {Object} [options] (Optional)
           * @return {Boolean} result
           */(e,t);case"Generator":
/*!
           * Simple equality for generator objects such as those returned by generator functions.
           *
           * @param {Iterable} leftHandOperand
           * @param {Iterable} rightHandOperand
           * @param {Object} [options] (Optional)
           * @return {Boolean} result
           */
return function(e,t,n){return d(h(e),h(t),n)}
/*!
           * Determine if the given object has an @@iterator function.
           *
           * @param {Object} target
           * @return {Boolean} `true` if the object has an @@iterator function.
           */(e,t,r);case"DataView":return d(new Uint8Array(e.buffer),new Uint8Array(t.buffer),r);case"ArrayBuffer":return d(new Uint8Array(e),new Uint8Array(t),r);case"Set":case"Map":return function(e,t,n){if(e.size!==t.size)return!1;if(0===e.size)return!0;var r=[],o=[];return e.forEach((function(e,t){r.push([e,t])})),t.forEach((function(e,t){o.push([e,t])})),d(r.sort(),o.sort(),n);
/*!
   * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
   *
   * @param {Iterable} leftHandOperand
   * @param {Iterable} rightHandOperand
   * @param {Object} [options] (Optional)
   * @return {Boolean} result
   */}(e,t,r);default:
/*!
           * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
           * for each enumerable key in the object.
           *
           * @param {Mixed} leftHandOperand
           * @param {Mixed} rightHandOperand
           * @param {Object} [options] (Optional)
           * @return {Boolean} result
           */
return function(e,t,n){var r=f(e),o=f(t);if(r.length&&r.length===o.length)return r.sort(),o.sort(),!1!==d(r,o)&&
/*!
             * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
             * each key. If any value of the given key is not equal, the function will return false (early).
             *
             * @param {Mixed} leftHandOperand
             * @param {Mixed} rightHandOperand
             * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
             * @param {Object} [options] (Optional)
             * @return {Boolean} result
             */
function(e,t,n,r){var o=n.length;if(0===o)return!0;for(var s=0;s<o;s+=1)if(!1===c(e[n[s]],t[n[s]],r))return!1;return!0}(e,t,r,n);var s=p(e),i=p(t);return s.length&&s.length===i.length?(s.sort(),i.sort(),d(s,i,n)):0===r.length&&0===s.length&&0===o.length&&0===i.length}
/*!
           * Returns true if the argument is a primitive.
           *
           * This intentionally returns true for all objects that can be compared by reference,
           * including functions and symbols.
           *
           * @param {Mixed} value
           * @return {Boolean} result
           */(e,t,r)}}(e,t,g,n);return a(e,t,n.memoize,w),w}function d(e,t,n){var r=e.length;if(r!==t.length)return!1;if(0===r)return!0;for(var o=-1;++o<r;)if(!1===c(e[o],t[o],n))return!1;return!0}
/*!
   * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
   * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
   *
   * @param {Object} target
   * @returns {Array} an array of entries from the @@iterator function
   */function p(e){if(function(e){return"undefined"!=typeof Symbol&&"object"==typeof e&&void 0!==Symbol.iterator&&"function"==typeof e[Symbol.iterator]}(e))try{return h(e[Symbol.iterator]())}catch(e){return[]}return[]}
/*!
   * Gets all entries from a Generator. This will consume the generator - which could have side effects.
   *
   * @param {Generator} target
   * @returns {Array} an array of entries from the Generator.
   */function h(e){for(var t=e.next(),n=[t.value];!1===t.done;)t=e.next(),n.push(t.value);return n}
/*!
   * Gets all own and inherited enumerable keys from a target.
   *
   * @param {Object} target
   * @returns {Array} an array of own and inherited enumerable keys from the target.
   */function f(e){var t=[];for(var n in e)t.push(n);return t}function y(e){return null===e||"object"!=typeof e}e.exports=c,e.exports.MemoizeMap=s},function(e,t,n){
/*!
   * Chai - addProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   */
var r=n(16),o=n(15),s=n(19),i=n(17);e.exports=function(e,t,n){n=void 0===n?function(){}:n,Object.defineProperty(e,t,{get:function e(){s()||o(this,"lockSsfi")||o(this,"ssfi",e);var t=n.call(this);if(void 0!==t)return t;var a=new r.Assertion;return i(this,a),a},configurable:!0})}},function(e,t,n){
/*!
   * Chai - addMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   */
var r=n(20),o=n(16),s=n(15),i=n(21),a=n(17);e.exports=function(e,t,n){var c=function(){s(this,"lockSsfi")||s(this,"ssfi",c);var e=n.apply(this,arguments);if(void 0!==e)return e;var t=new o.Assertion;return a(this,t),t};r(c,t,!1),e[t]=i(c,t)}},function(e,t,n){
/*!
   * Chai - overwriteProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   */
var r=n(16),o=n(15),s=n(19),i=n(17);e.exports=function(e,t,n){var a=Object.getOwnPropertyDescriptor(e,t),c=function(){};a&&"function"==typeof a.get&&(c=a.get),Object.defineProperty(e,t,{get:function e(){s()||o(this,"lockSsfi")||o(this,"ssfi",e);var t=o(this,"lockSsfi");o(this,"lockSsfi",!0);var a=n(c).call(this);if(o(this,"lockSsfi",t),void 0!==a)return a;var u=new r.Assertion;return i(this,u),u},configurable:!0})}},function(e,t,n){
/*!
   * Chai - overwriteMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   */
var r=n(20),o=n(16),s=n(15),i=n(21),a=n(17);e.exports=function(e,t,n){var c=e[t],u=function(){throw new Error(t+" is not a function")};c&&"function"==typeof c&&(u=c);var l=function(){s(this,"lockSsfi")||s(this,"ssfi",l);var e=s(this,"lockSsfi");s(this,"lockSsfi",!0);var t=n(u).apply(this,arguments);if(s(this,"lockSsfi",e),void 0!==t)return t;var r=new o.Assertion;return a(this,r),r};r(l,t,!1),e[t]=i(l,t)}},function(e,t,n){
/*!
   * Chai - addChainingMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   */
/*!
   * Module dependencies
   */
var r=n(20),o=n(16),s=n(15),i=n(21),a=n(17),c="function"==typeof Object.setPrototypeOf,u=function(){},l=Object.getOwnPropertyNames(u).filter((function(e){var t=Object.getOwnPropertyDescriptor(u,e);return"object"!=typeof t||!t.configurable})),d=Function.prototype.call,p=Function.prototype.apply;e.exports=function(e,t,n,u){"function"!=typeof u&&(u=function(){});var h={method:n,chainingBehavior:u};e.__methods||(e.__methods={}),e.__methods[t]=h,Object.defineProperty(e,t,{get:function(){h.chainingBehavior.call(this);var n=function(){s(this,"lockSsfi")||s(this,"ssfi",n);var e=h.method.apply(this,arguments);if(void 0!==e)return e;var t=new o.Assertion;return a(this,t),t};if(r(n,t,!0),c){var u=Object.create(this);u.call=d,u.apply=p,Object.setPrototypeOf(n,u)}else Object.getOwnPropertyNames(e).forEach((function(t){if(-1===l.indexOf(t)){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r)}}));return a(this,n),i(n)},configurable:!0})}},function(e,t,n){
/*!
   * Chai - overwriteChainableMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   */
var r=n(16),o=n(17);e.exports=function(e,t,n,s){var i=e.__methods[t],a=i.chainingBehavior;i.chainingBehavior=function(){var e=s(a).call(this);if(void 0!==e)return e;var t=new r.Assertion;return o(this,t),t};var c=i.method;i.method=function(){var e=n(c).apply(this,arguments);if(void 0!==e)return e;var t=new r.Assertion;return o(this,t),t}}},function(e,t,n){
/*!
   * Chai - compareByInspect utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   */
/*!
   * Module dependencies
   */
var r=n(26);e.exports=function(e,t){return r(e)<r(t)?-1:1}},function(e,t,n){
/*!
   * Chai - getOwnEnumerableProperties utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   */
/*!
   * Module dependencies
   */
var r=n(36);e.exports=function(e){return Object.keys(e).concat(r(e))}},function(e,t,n){"use strict";var r=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\(\/]+)/;function o(e){var t="";if(void 0===e.name){var n=String(e).match(r);n&&(t=n[1])}else t=e.name;return t}e.exports={compatibleInstance:function(e,t){return t instanceof Error&&e===t},compatibleConstructor:function(e,t){return t instanceof Error?e.constructor===t.constructor||e instanceof t.constructor:(t.prototype instanceof Error||t===Error)&&(e.constructor===t||e instanceof t)},compatibleMessage:function(e,t){var n="string"==typeof e?e:e.message;return t instanceof RegExp?t.test(n):"string"==typeof t&&-1!==n.indexOf(t)},getMessage:function(e){var t="";return e&&e.message?t=e.message:"string"==typeof e&&(t=e),t},getConstructorName:function(e){var t=e;return e instanceof Error?t=o(e.constructor):"function"==typeof e&&(t=o(e).trim()||o(new e)),t}}},function(e,t){e.exports=Number.isNaN||
/*!
   * Chai - isNaN utility
   * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
   * MIT Licensed
   */
function(e){return e!=e}},function(e,t,n){
/*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   */
var r=n(18);e.exports=function(e,t){
/*!
       * Module dependencies.
       */
var n=e.AssertionError,o=t.flag;
/*!
       * Module export.
       */
/*!
       * Assertion Constructor
       *
       * Creates object for chaining.
       *
       * `Assertion` objects contain metadata in the form of flags. Three flags can
       * be assigned during instantiation by passing arguments to this constructor:
       *
       * - `object`: This flag contains the target of the assertion. For example, in
       *   the assertion `expect(numKittens).to.equal(7);`, the `object` flag will
       *   contain `numKittens` so that the `equal` assertion can reference it when
       *   needed.
       *
       * - `message`: This flag contains an optional custom error message to be
       *   prepended to the error message that's generated by the assertion when it
       *   fails.
       *
       * - `ssfi`: This flag stands for "start stack function indicator". It
       *   contains a function reference that serves as the starting point for
       *   removing frames from the stack trace of the error that's created by the
       *   assertion when it fails. The goal is to provide a cleaner stack trace to
       *   end users by removing Chai's internal functions. Note that it only works
       *   in environments that support `Error.captureStackTrace`, and only when
       *   `Chai.config.includeStack` hasn't been set to `false`.
       *
       * - `lockSsfi`: This flag controls whether or not the given `ssfi` flag
       *   should retain its current value, even as assertions are chained off of
       *   this object. This is usually set to `true` when creating a new assertion
       *   from within another assertion. It's also temporarily set to `true` before
       *   an overwritten assertion gets called by the overwriting assertion.
       *
       * @param {Mixed} obj target of the assertion
       * @param {String} msg (optional) custom error message
       * @param {Function} ssfi (optional) starting point for removing stack frames
       * @param {Boolean} lockSsfi (optional) whether or not the ssfi flag is locked
       * @api private
       */function s(e,n,r,i){return o(this,"ssfi",r||s),o(this,"lockSsfi",i),o(this,"object",e),o(this,"message",n),t.proxify(this)}e.Assertion=s,Object.defineProperty(s,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack},set:function(e){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack=e}}),Object.defineProperty(s,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff},set:function(e){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff=e}}),s.addProperty=function(e,n){t.addProperty(this.prototype,e,n)},s.addMethod=function(e,n){t.addMethod(this.prototype,e,n)},s.addChainableMethod=function(e,n,r){t.addChainableMethod(this.prototype,e,n,r)},s.overwriteProperty=function(e,n){t.overwriteProperty(this.prototype,e,n)},s.overwriteMethod=function(e,n){t.overwriteMethod(this.prototype,e,n)},s.overwriteChainableMethod=function(e,n,r){t.overwriteChainableMethod(this.prototype,e,n,r)},s.prototype.assert=function(e,s,i,a,c,u){var l=t.test(this,arguments);if(!1!==u&&(u=!0),void 0===a&&void 0===c&&(u=!1),!0!==r.showDiff&&(u=!1),!l){s=t.getMessage(this,arguments);var d=t.getActual(this,arguments);throw new n(s,{actual:d,expected:a,showDiff:u},r.includeStack?this.assert:o(this,"ssfi"))}},
/*!
       * ### ._obj
       *
       * Quick reference to stored `actual` value for plugin developers.
       *
       * @api private
       */
Object.defineProperty(s.prototype,"_obj",{get:function(){return o(this,"object")},set:function(e){o(this,"object",e)}})}},function(e,t){
/*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   */
e.exports=function(e,t){var n=e.Assertion,r=e.AssertionError,o=t.flag;function s(e,n){n&&o(this,"message",n),e=e.toLowerCase();var r=o(this,"object"),s=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an ":"a ";this.assert(e===t.type(r).toLowerCase(),"expected #{this} to be "+s+e,"expected #{this} not to be "+s+e)}function i(e,n){return t.isNaN(e)&&t.isNaN(n)||e===n}function a(){o(this,"contains",!0)}function c(e,s){s&&o(this,"message",s);var a=o(this,"object"),c=t.type(a).toLowerCase(),u=o(this,"message"),l=o(this,"negate"),d=o(this,"ssfi"),p=o(this,"deep"),h=p?"deep ":"";u=u?u+": ":"";var f=!1;switch(c){case"string":f=-1!==a.indexOf(e);break;case"weakset":if(p)throw new r(u+"unable to use .deep.include with WeakSet",void 0,d);f=a.has(e);break;case"map":var y=p?t.eql:i;a.forEach((function(t){f=f||y(t,e)}));break;case"set":p?a.forEach((function(n){f=f||t.eql(n,e)})):f=a.has(e);break;case"array":f=p?a.some((function(n){return t.eql(n,e)})):-1!==a.indexOf(e);break;default:if(e!==Object(e))throw new r(u+"object tested must be an array, a map, an object, a set, a string, or a weakset, but "+c+" given",void 0,d);var m=Object.keys(e),b=null,g=0;if(m.forEach((function(s){var i=new n(a);if(t.transferFlags(this,i,!0),o(i,"lockSsfi",!0),l&&1!==m.length)try{i.property(s,e[s])}catch(e){if(!t.checkError.compatibleConstructor(e,r))throw e;null===b&&(b=e),g++}else i.property(s,e[s])}),this),l&&m.length>1&&g===m.length)throw b;return}this.assert(f,"expected #{this} to "+h+"include "+t.inspect(e),"expected #{this} to not "+h+"include "+t.inspect(e))}function u(){var e=o(this,"object"),n=t.type(e);this.assert("Arguments"===n,"expected #{this} to be arguments but got "+n,"expected #{this} to not be arguments")}function l(e,t){t&&o(this,"message",t);var n=o(this,"object");if(o(this,"deep")){var r=o(this,"lockSsfi");o(this,"lockSsfi",!0),this.eql(e),o(this,"lockSsfi",r)}else this.assert(e===n,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",e,this._obj,!0)}function d(e,n){n&&o(this,"message",n),this.assert(t.eql(e,o(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",e,this._obj,!0)}function p(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to above must be a number":i=l+"the argument to above must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y>e,"expected #{this} to have a "+m+" above #{exp} but got #{act}","expected #{this} to not have a "+m+" above #{exp}",e,y)}else this.assert(a>e,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",e)}function h(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to least must be a number":i=l+"the argument to least must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y>=e,"expected #{this} to have a "+m+" at least #{exp} but got #{act}","expected #{this} to have a "+m+" below #{exp}",e,y)}else this.assert(a>=e,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",e)}function f(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to below must be a number":i=l+"the argument to below must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y<e,"expected #{this} to have a "+m+" below #{exp} but got #{act}","expected #{this} to not have a "+m+" below #{exp}",e,y)}else this.assert(a<e,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",e)}function y(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to most must be a number":i=l+"the argument to most must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y<=e,"expected #{this} to have a "+m+" at most #{exp} but got #{act}","expected #{this} to have a "+m+" above #{exp}",e,y)}else this.assert(a<=e,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",e)}function m(e,n){n&&o(this,"message",n);var s=o(this,"object"),i=o(this,"ssfi"),a=o(this,"message");try{var c=s instanceof e}catch(n){if(n instanceof TypeError)throw new r((a=a?a+": ":"")+"The instanceof assertion needs a constructor but "+t.type(e)+" was given.",void 0,i);throw n}var u=t.getName(e);null===u&&(u="an unnamed constructor"),this.assert(c,"expected #{this} to be an instance of "+u,"expected #{this} to not be an instance of "+u)}function b(e,n,s){s&&o(this,"message",s);var i=o(this,"nested"),a=o(this,"own"),c=o(this,"message"),u=o(this,"object"),l=o(this,"ssfi"),d=typeof e;if(c=c?c+": ":"",i){if("string"!==d)throw new r(c+"the argument to property must be a string when using nested syntax",void 0,l)}else if("string"!==d&&"number"!==d&&"symbol"!==d)throw new r(c+"the argument to property must be a string, number, or symbol",void 0,l);if(i&&a)throw new r(c+'The "nested" and "own" flags cannot be combined.',void 0,l);if(null==u)throw new r(c+"Target cannot be null or undefined.",void 0,l);var p,h=o(this,"deep"),f=o(this,"negate"),y=i?t.getPathInfo(u,e):null,m=i?y.value:u[e],b="";h&&(b+="deep "),a&&(b+="own "),i&&(b+="nested "),b+="property ",p=a?Object.prototype.hasOwnProperty.call(u,e):i?y.exists:t.hasProperty(u,e),f&&1!==arguments.length||this.assert(p,"expected #{this} to have "+b+t.inspect(e),"expected #{this} to not have "+b+t.inspect(e)),arguments.length>1&&this.assert(p&&(h?t.eql(n,m):n===m),"expected #{this} to have "+b+t.inspect(e)+" of #{exp}, but got #{act}","expected #{this} to not have "+b+t.inspect(e)+" of #{act}",n,m),o(this,"object",m)}function g(e,t,n){o(this,"own",!0),b.apply(this,arguments)}function w(e,n,r){"string"==typeof n&&(r=n,n=null),r&&o(this,"message",r);var s=o(this,"object"),i=Object.getOwnPropertyDescriptor(Object(s),e);i&&n?this.assert(t.eql(n,i),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to match "+t.inspect(n)+", got "+t.inspect(i),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to not match "+t.inspect(n),n,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+t.inspect(e),"expected #{this} to not have an own property descriptor for "+t.inspect(e)),o(this,"object",i)}function v(){o(this,"doLength",!0)}function _(e,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=t.type(i).toLowerCase(),c=o(this,"message"),u=o(this,"ssfi"),l="length";switch(a){case"map":case"set":l="size",s=i.size;break;default:new n(i,c,u,!0).to.have.property("length"),s=i.length}this.assert(s==e,"expected #{this} to have a "+l+" of #{exp} but got #{act}","expected #{this} to not have a "+l+" of #{act}",e,s)}function x(e,t){t&&o(this,"message",t);var n=o(this,"object");this.assert(e.exec(n),"expected #{this} to match "+e,"expected #{this} not to match "+e)}function E(e){var n,s,i=o(this,"object"),a=t.type(i),c=t.type(e),u=o(this,"ssfi"),l=o(this,"deep"),d="",p=!0,h=o(this,"message"),f=(h=h?h+": ":"")+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if("Map"===a||"Set"===a)d=l?"deeply ":"",s=[],i.forEach((function(e,t){s.push(t)})),"Array"!==c&&(e=Array.prototype.slice.call(arguments));else{switch(s=t.getOwnEnumerableProperties(i),c){case"Array":if(arguments.length>1)throw new r(f,void 0,u);break;case"Object":if(arguments.length>1)throw new r(f,void 0,u);e=Object.keys(e);break;default:e=Array.prototype.slice.call(arguments)}e=e.map((function(e){return"symbol"==typeof e?e:String(e)}))}if(!e.length)throw new r(h+"keys required",void 0,u);var y=e.length,m=o(this,"any"),b=o(this,"all"),g=e;if(m||b||(b=!0),m&&(p=g.some((function(e){return s.some((function(n){return l?t.eql(e,n):e===n}))}))),b&&(p=g.every((function(e){return s.some((function(n){return l?t.eql(e,n):e===n}))})),o(this,"contains")||(p=p&&e.length==s.length)),y>1){var w=(e=e.map((function(e){return t.inspect(e)}))).pop();b&&(n=e.join(", ")+", and "+w),m&&(n=e.join(", ")+", or "+w)}else n=t.inspect(e[0]);n=(y>1?"keys ":"key ")+n,n=(o(this,"contains")?"contain ":"have ")+n,this.assert(p,"expected #{this} to "+d+n,"expected #{this} to not "+d+n,g.slice(0).sort(t.compareByInspect),s.sort(t.compareByInspect),!0)}function S(e,r,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"ssfi"),u=o(this,"message"),l=o(this,"negate")||!1;new n(a,u,c,!0).is.a("function"),(e instanceof RegExp||"string"==typeof e)&&(r=e,e=null);try{a()}catch(e){i=e}var d=void 0===e&&void 0===r,p=Boolean(e&&r),h=!1,f=!1;if(d||!d&&!l){var y="an error";e instanceof Error?y="#{exp}":e&&(y=t.checkError.getConstructorName(e)),this.assert(i,"expected #{this} to throw "+y,"expected #{this} to not throw an error but #{act} was thrown",e&&e.toString(),i instanceof Error?i.toString():"string"==typeof i?i:i&&t.checkError.getConstructorName(i))}if(e&&i&&(e instanceof Error&&t.checkError.compatibleInstance(i,e)===l&&(p&&l?h=!0:this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i&&!l?" but #{act} was thrown":""),e.toString(),i.toString())),t.checkError.compatibleConstructor(i,e)===l&&(p&&l?h=!0:this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&t.checkError.getConstructorName(e),i instanceof Error?i.toString():i&&t.checkError.getConstructorName(i)))),i&&null!=r){var m="including";r instanceof RegExp&&(m="matching"),t.checkError.compatibleMessage(i,r)===l&&(p&&l?f=!0:this.assert(l,"expected #{this} to throw error "+m+" #{exp} but got #{act}","expected #{this} to throw error not "+m+" #{exp}",r,t.checkError.getMessage(i)))}h&&f&&this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&t.checkError.getConstructorName(e),i instanceof Error?i.toString():i&&t.checkError.getConstructorName(i)),o(this,"object",i)}function O(e,n){n&&o(this,"message",n);var r=o(this,"object"),s=o(this,"itself"),i="function"!=typeof r||s?r[e]:r.prototype[e];this.assert("function"==typeof i,"expected #{this} to respond to "+t.inspect(e),"expected #{this} to not respond to "+t.inspect(e))}function P(e,n){n&&o(this,"message",n);var r=e(o(this,"object"));this.assert(r,"expected #{this} to satisfy "+t.objDisplay(e),"expected #{this} to not satisfy"+t.objDisplay(e),!o(this,"negate"),r)}function k(e,t,s){s&&o(this,"message",s);var i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");if(new n(i,a,c,!0).is.a("number"),"number"!=typeof e||"number"!=typeof t)throw new r((a=a?a+": ":"")+"the arguments to closeTo or approximately must be numbers",void 0,c);this.assert(Math.abs(i-e)<=t,"expected #{this} to be close to "+e+" +/- "+t,"expected #{this} not to be close to "+e+" +/- "+t)}function j(e,t,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),s=e[t]):(new n(e,a,c,!0).is.a("function"),s=e()),i();var u=null==t?e():e[t],l=null==t?s:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",s),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","change"),o(this,"realDelta",u!==s),this.assert(s!==u,"expected "+l+" to change","expected "+l+" to not change")}function q(e,t,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),s=e[t]):(new n(e,a,c,!0).is.a("function"),s=e()),new n(s,a,c,!0).is.a("number"),i();var u=null==t?e():e[t],l=null==t?s:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",s),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","increase"),o(this,"realDelta",u-s),this.assert(u-s>0,"expected "+l+" to increase","expected "+l+" to not increase")}function T(e,t,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),s=e[t]):(new n(e,a,c,!0).is.a("function"),s=e()),new n(s,a,c,!0).is.a("number"),i();var u=null==t?e():e[t],l=null==t?s:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",s),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","decrease"),o(this,"realDelta",s-u),this.assert(u-s<0,"expected "+l+" to decrease","expected "+l+" to not decrease")}["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still"].forEach((function(e){n.addProperty(e)})),n.addProperty("not",(function(){o(this,"negate",!0)})),n.addProperty("deep",(function(){o(this,"deep",!0)})),n.addProperty("nested",(function(){o(this,"nested",!0)})),n.addProperty("own",(function(){o(this,"own",!0)})),n.addProperty("ordered",(function(){o(this,"ordered",!0)})),n.addProperty("any",(function(){o(this,"any",!0),o(this,"all",!1)})),n.addProperty("all",(function(){o(this,"all",!0),o(this,"any",!1)})),n.addChainableMethod("an",s),n.addChainableMethod("a",s),n.addChainableMethod("include",c,a),n.addChainableMethod("contain",c,a),n.addChainableMethod("contains",c,a),n.addChainableMethod("includes",c,a),n.addProperty("ok",(function(){this.assert(o(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")})),n.addProperty("true",(function(){this.assert(!0===o(this,"object"),"expected #{this} to be true","expected #{this} to be false",!o(this,"negate"))})),n.addProperty("false",(function(){this.assert(!1===o(this,"object"),"expected #{this} to be false","expected #{this} to be true",!!o(this,"negate"))})),n.addProperty("null",(function(){this.assert(null===o(this,"object"),"expected #{this} to be null","expected #{this} not to be null")})),n.addProperty("undefined",(function(){this.assert(void 0===o(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")})),n.addProperty("NaN",(function(){this.assert(t.isNaN(o(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")})),n.addProperty("exist",(function(){var e=o(this,"object");this.assert(null!=e,"expected #{this} to exist","expected #{this} to not exist")})),n.addProperty("empty",(function(){var e,n=o(this,"object"),s=o(this,"ssfi"),i=o(this,"message");switch(i=i?i+": ":"",t.type(n).toLowerCase()){case"array":case"string":e=n.length;break;case"map":case"set":e=n.size;break;case"weakmap":case"weakset":throw new r(i+".empty was passed a weak collection",void 0,s);case"function":var a=i+".empty was passed a function "+t.getName(n);throw new r(a.trim(),void 0,s);default:if(n!==Object(n))throw new r(i+".empty was passed non-string primitive "+t.inspect(n),void 0,s);e=Object.keys(n).length}this.assert(0===e,"expected #{this} to be empty","expected #{this} not to be empty")})),n.addProperty("arguments",u),n.addProperty("Arguments",u),n.addMethod("equal",l),n.addMethod("equals",l),n.addMethod("eq",l),n.addMethod("eql",d),n.addMethod("eqls",d),n.addMethod("above",p),n.addMethod("gt",p),n.addMethod("greaterThan",p),n.addMethod("least",h),n.addMethod("gte",h),n.addMethod("below",f),n.addMethod("lt",f),n.addMethod("lessThan",f),n.addMethod("most",y),n.addMethod("lte",y),n.addMethod("within",(function(e,s,i){i&&o(this,"message",i);var a,c=o(this,"object"),u=o(this,"doLength"),l=o(this,"message"),d=l?l+": ":"",p=o(this,"ssfi"),h=t.type(c).toLowerCase(),f=t.type(e).toLowerCase(),y=t.type(s).toLowerCase(),m=!0,b="date"===f&&"date"===y?e.toUTCString()+".."+s.toUTCString():e+".."+s;if(u&&"map"!==h&&"set"!==h&&new n(c,l,p,!0).to.have.property("length"),u||"date"!==h||"date"===f&&"date"===y?"number"===f&&"number"===y||!u&&"number"!==h?u||"date"===h||"number"===h?m=!1:a=d+"expected "+("string"===h?"'"+c+"'":c)+" to be a number or a date":a=d+"the arguments to within must be numbers":a=d+"the arguments to within must be dates",m)throw new r(a,void 0,p);if(u){var g,w="length";"map"===h||"set"===h?(w="size",g=c.size):g=c.length,this.assert(g>=e&&g<=s,"expected #{this} to have a "+w+" within "+b,"expected #{this} to not have a "+w+" within "+b)}else this.assert(c>=e&&c<=s,"expected #{this} to be within "+b,"expected #{this} to not be within "+b)})),n.addMethod("instanceof",m),n.addMethod("instanceOf",m),n.addMethod("property",b),n.addMethod("ownProperty",g),n.addMethod("haveOwnProperty",g),n.addMethod("ownPropertyDescriptor",w),n.addMethod("haveOwnPropertyDescriptor",w),n.addChainableMethod("length",_,v),n.addChainableMethod("lengthOf",_,v),n.addMethod("match",x),n.addMethod("matches",x),n.addMethod("string",(function(e,r){r&&o(this,"message",r);var s=o(this,"object"),i=o(this,"message"),a=o(this,"ssfi");new n(s,i,a,!0).is.a("string"),this.assert(~s.indexOf(e),"expected #{this} to contain "+t.inspect(e),"expected #{this} to not contain "+t.inspect(e))})),n.addMethod("keys",E),n.addMethod("key",E),n.addMethod("throw",S),n.addMethod("throws",S),n.addMethod("Throw",S),n.addMethod("respondTo",O),n.addMethod("respondsTo",O),n.addProperty("itself",(function(){o(this,"itself",!0)})),n.addMethod("satisfy",P),n.addMethod("satisfies",P),n.addMethod("closeTo",k),n.addMethod("approximately",k),n.addMethod("members",(function(e,r){r&&o(this,"message",r);var s=o(this,"object"),i=o(this,"message"),a=o(this,"ssfi");new n(s,i,a,!0).to.be.an("array"),new n(e,i,a,!0).to.be.an("array");var c,u,l,d=o(this,"contains"),p=o(this,"ordered");d?(u="expected #{this} to be "+(c=p?"an ordered superset":"a superset")+" of #{exp}",l="expected #{this} to not be "+c+" of #{exp}"):(u="expected #{this} to have the same "+(c=p?"ordered members":"members")+" as #{exp}",l="expected #{this} to not have the same "+c+" as #{exp}");var h=o(this,"deep")?t.eql:void 0;this.assert(function(e,t,n,r,o){if(!r){if(e.length!==t.length)return!1;t=t.slice()}return e.every((function(e,s){if(o)return n?n(e,t[s]):e===t[s];if(!n){var i=t.indexOf(e);return-1!==i&&(r||t.splice(i,1),!0)}return t.some((function(o,s){return!!n(e,o)&&(r||t.splice(s,1),!0)}))}))}(e,s,h,d,p),u,l,e,s,!0)})),n.addMethod("oneOf",(function(e,t){t&&o(this,"message",t);var r=o(this,"object"),s=o(this,"message"),i=o(this,"ssfi");new n(e,s,i,!0).to.be.an("array"),this.assert(e.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",e,r)})),n.addMethod("change",j),n.addMethod("changes",j),n.addMethod("increase",q),n.addMethod("increases",q),n.addMethod("decrease",T),n.addMethod("decreases",T),n.addMethod("by",(function(e,t){t&&o(this,"message",t);var n,r=o(this,"deltaMsgObj"),s=o(this,"initialDeltaValue"),i=o(this,"finalDeltaValue"),a=o(this,"deltaBehavior"),c=o(this,"realDelta");n="change"===a?Math.abs(i-s)===Math.abs(e):c===Math.abs(e),this.assert(n,"expected "+r+" to "+a+" by "+e,"expected "+r+" to not "+a+" by "+e)})),n.addProperty("extensible",(function(){var e=o(this,"object"),t=e===Object(e)&&Object.isExtensible(e);this.assert(t,"expected #{this} to be extensible","expected #{this} to not be extensible")})),n.addProperty("sealed",(function(){var e=o(this,"object"),t=e!==Object(e)||Object.isSealed(e);this.assert(t,"expected #{this} to be sealed","expected #{this} to not be sealed")})),n.addProperty("frozen",(function(){var e=o(this,"object"),t=e!==Object(e)||Object.isFrozen(e);this.assert(t,"expected #{this} to be frozen","expected #{this} to not be frozen")})),n.addProperty("finite",(function(e){var t=o(this,"object");this.assert("number"==typeof t&&isFinite(t),"expected #{this} to be a finite number","expected #{this} to not be a finite number")}))}},function(e,t){
/*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   */
e.exports=function(e,t){e.expect=function(t,n){return new e.Assertion(t,n)},e.expect.fail=function(t,n,r,o){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new e.AssertionError(r,{actual:t,expected:n,operator:o},e.expect.fail)}}},function(e,t){
/*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   */
e.exports=function(e,t){var n=e.Assertion;function r(){Object.defineProperty(Object.prototype,"should",{set:function(e){Object.defineProperty(this,"should",{value:e,enumerable:!0,configurable:!0,writable:!0})},get:function e(){return this instanceof String||this instanceof Number||this instanceof Boolean||"function"==typeof Symbol&&this instanceof Symbol?new n(this.valueOf(),null,e):new n(this,null,e)},configurable:!0});var t={fail:function(n,r,o,s){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new e.AssertionError(o,{actual:n,expected:r,operator:s},t.fail)},equal:function(e,t,r){new n(e,r).to.equal(t)},Throw:function(e,t,r,o){new n(e,o).to.Throw(t,r)},exist:function(e,t){new n(e,t).to.exist},not:{}};return t.not.equal=function(e,t,r){new n(e,r).to.not.equal(t)},t.not.Throw=function(e,t,r,o){new n(e,o).to.not.Throw(t,r)},t.not.exist=function(e,t){new n(e,t).to.not.exist},t.throw=t.Throw,t.not.throw=t.not.Throw,t}e.should=r,e.Should=r}},function(e,t){
/*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   */
e.exports=function(e,t){
/*!
       * Chai dependencies.
       */
var n=e.Assertion,r=t.flag,o=e.assert=function(t,r){new n(null,null,e.assert,!0).assert(t,r,"[ negation message unavailable ]")};
/*!
       * Module export.
       */o.fail=function(t,n,r,s){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new e.AssertionError(r,{actual:t,expected:n,operator:s},o.fail)},o.isOk=function(e,t){new n(e,t,o.isOk,!0).is.ok},o.isNotOk=function(e,t){new n(e,t,o.isNotOk,!0).is.not.ok},o.equal=function(e,t,s){var i=new n(e,s,o.equal,!0);i.assert(t==r(i,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",t,e,!0)},o.notEqual=function(e,t,s){var i=new n(e,s,o.notEqual,!0);i.assert(t!=r(i,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",t,e,!0)},o.strictEqual=function(e,t,r){new n(e,r,o.strictEqual,!0).to.equal(t)},o.notStrictEqual=function(e,t,r){new n(e,r,o.notStrictEqual,!0).to.not.equal(t)},o.deepEqual=o.deepStrictEqual=function(e,t,r){new n(e,r,o.deepEqual,!0).to.eql(t)},o.notDeepEqual=function(e,t,r){new n(e,r,o.notDeepEqual,!0).to.not.eql(t)},o.isAbove=function(e,t,r){new n(e,r,o.isAbove,!0).to.be.above(t)},o.isAtLeast=function(e,t,r){new n(e,r,o.isAtLeast,!0).to.be.least(t)},o.isBelow=function(e,t,r){new n(e,r,o.isBelow,!0).to.be.below(t)},o.isAtMost=function(e,t,r){new n(e,r,o.isAtMost,!0).to.be.most(t)},o.isTrue=function(e,t){new n(e,t,o.isTrue,!0).is.true},o.isNotTrue=function(e,t){new n(e,t,o.isNotTrue,!0).to.not.equal(!0)},o.isFalse=function(e,t){new n(e,t,o.isFalse,!0).is.false},o.isNotFalse=function(e,t){new n(e,t,o.isNotFalse,!0).to.not.equal(!1)},o.isNull=function(e,t){new n(e,t,o.isNull,!0).to.equal(null)},o.isNotNull=function(e,t){new n(e,t,o.isNotNull,!0).to.not.equal(null)},o.isNaN=function(e,t){new n(e,t,o.isNaN,!0).to.be.NaN},o.isNotNaN=function(e,t){new n(e,t,o.isNotNaN,!0).not.to.be.NaN},o.exists=function(e,t){new n(e,t,o.exists,!0).to.exist},o.notExists=function(e,t){new n(e,t,o.notExists,!0).to.not.exist},o.isUndefined=function(e,t){new n(e,t,o.isUndefined,!0).to.equal(void 0)},o.isDefined=function(e,t){new n(e,t,o.isDefined,!0).to.not.equal(void 0)},o.isFunction=function(e,t){new n(e,t,o.isFunction,!0).to.be.a("function")},o.isNotFunction=function(e,t){new n(e,t,o.isNotFunction,!0).to.not.be.a("function")},o.isObject=function(e,t){new n(e,t,o.isObject,!0).to.be.a("object")},o.isNotObject=function(e,t){new n(e,t,o.isNotObject,!0).to.not.be.a("object")},o.isArray=function(e,t){new n(e,t,o.isArray,!0).to.be.an("array")},o.isNotArray=function(e,t){new n(e,t,o.isNotArray,!0).to.not.be.an("array")},o.isString=function(e,t){new n(e,t,o.isString,!0).to.be.a("string")},o.isNotString=function(e,t){new n(e,t,o.isNotString,!0).to.not.be.a("string")},o.isNumber=function(e,t){new n(e,t,o.isNumber,!0).to.be.a("number")},o.isNotNumber=function(e,t){new n(e,t,o.isNotNumber,!0).to.not.be.a("number")},o.isFinite=function(e,t){new n(e,t,o.isFinite,!0).to.be.finite},o.isBoolean=function(e,t){new n(e,t,o.isBoolean,!0).to.be.a("boolean")},o.isNotBoolean=function(e,t){new n(e,t,o.isNotBoolean,!0).to.not.be.a("boolean")},o.typeOf=function(e,t,r){new n(e,r,o.typeOf,!0).to.be.a(t)},o.notTypeOf=function(e,t,r){new n(e,r,o.notTypeOf,!0).to.not.be.a(t)},o.instanceOf=function(e,t,r){new n(e,r,o.instanceOf,!0).to.be.instanceOf(t)},o.notInstanceOf=function(e,t,r){new n(e,r,o.notInstanceOf,!0).to.not.be.instanceOf(t)},o.include=function(e,t,r){new n(e,r,o.include,!0).include(t)},o.notInclude=function(e,t,r){new n(e,r,o.notInclude,!0).not.include(t)},o.deepInclude=function(e,t,r){new n(e,r,o.deepInclude,!0).deep.include(t)},o.notDeepInclude=function(e,t,r){new n(e,r,o.notDeepInclude,!0).not.deep.include(t)},o.nestedInclude=function(e,t,r){new n(e,r,o.nestedInclude,!0).nested.include(t)},o.notNestedInclude=function(e,t,r){new n(e,r,o.notNestedInclude,!0).not.nested.include(t)},o.deepNestedInclude=function(e,t,r){new n(e,r,o.deepNestedInclude,!0).deep.nested.include(t)},o.notDeepNestedInclude=function(e,t,r){new n(e,r,o.notDeepNestedInclude,!0).not.deep.nested.include(t)},o.ownInclude=function(e,t,r){new n(e,r,o.ownInclude,!0).own.include(t)},o.notOwnInclude=function(e,t,r){new n(e,r,o.notOwnInclude,!0).not.own.include(t)},o.deepOwnInclude=function(e,t,r){new n(e,r,o.deepOwnInclude,!0).deep.own.include(t)},o.notDeepOwnInclude=function(e,t,r){new n(e,r,o.notDeepOwnInclude,!0).not.deep.own.include(t)},o.match=function(e,t,r){new n(e,r,o.match,!0).to.match(t)},o.notMatch=function(e,t,r){new n(e,r,o.notMatch,!0).to.not.match(t)},o.property=function(e,t,r){new n(e,r,o.property,!0).to.have.property(t)},o.notProperty=function(e,t,r){new n(e,r,o.notProperty,!0).to.not.have.property(t)},o.propertyVal=function(e,t,r,s){new n(e,s,o.propertyVal,!0).to.have.property(t,r)},o.notPropertyVal=function(e,t,r,s){new n(e,s,o.notPropertyVal,!0).to.not.have.property(t,r)},o.deepPropertyVal=function(e,t,r,s){new n(e,s,o.deepPropertyVal,!0).to.have.deep.property(t,r)},o.notDeepPropertyVal=function(e,t,r,s){new n(e,s,o.notDeepPropertyVal,!0).to.not.have.deep.property(t,r)},o.ownProperty=function(e,t,r){new n(e,r,o.ownProperty,!0).to.have.own.property(t)},o.notOwnProperty=function(e,t,r){new n(e,r,o.notOwnProperty,!0).to.not.have.own.property(t)},o.ownPropertyVal=function(e,t,r,s){new n(e,s,o.ownPropertyVal,!0).to.have.own.property(t,r)},o.notOwnPropertyVal=function(e,t,r,s){new n(e,s,o.notOwnPropertyVal,!0).to.not.have.own.property(t,r)},o.deepOwnPropertyVal=function(e,t,r,s){new n(e,s,o.deepOwnPropertyVal,!0).to.have.deep.own.property(t,r)},o.notDeepOwnPropertyVal=function(e,t,r,s){new n(e,s,o.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(t,r)},o.nestedProperty=function(e,t,r){new n(e,r,o.nestedProperty,!0).to.have.nested.property(t)},o.notNestedProperty=function(e,t,r){new n(e,r,o.notNestedProperty,!0).to.not.have.nested.property(t)},o.nestedPropertyVal=function(e,t,r,s){new n(e,s,o.nestedPropertyVal,!0).to.have.nested.property(t,r)},o.notNestedPropertyVal=function(e,t,r,s){new n(e,s,o.notNestedPropertyVal,!0).to.not.have.nested.property(t,r)},o.deepNestedPropertyVal=function(e,t,r,s){new n(e,s,o.deepNestedPropertyVal,!0).to.have.deep.nested.property(t,r)},o.notDeepNestedPropertyVal=function(e,t,r,s){new n(e,s,o.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(t,r)},o.lengthOf=function(e,t,r){new n(e,r,o.lengthOf,!0).to.have.lengthOf(t)},o.hasAnyKeys=function(e,t,r){new n(e,r,o.hasAnyKeys,!0).to.have.any.keys(t)},o.hasAllKeys=function(e,t,r){new n(e,r,o.hasAllKeys,!0).to.have.all.keys(t)},o.containsAllKeys=function(e,t,r){new n(e,r,o.containsAllKeys,!0).to.contain.all.keys(t)},o.doesNotHaveAnyKeys=function(e,t,r){new n(e,r,o.doesNotHaveAnyKeys,!0).to.not.have.any.keys(t)},o.doesNotHaveAllKeys=function(e,t,r){new n(e,r,o.doesNotHaveAllKeys,!0).to.not.have.all.keys(t)},o.hasAnyDeepKeys=function(e,t,r){new n(e,r,o.hasAnyDeepKeys,!0).to.have.any.deep.keys(t)},o.hasAllDeepKeys=function(e,t,r){new n(e,r,o.hasAllDeepKeys,!0).to.have.all.deep.keys(t)},o.containsAllDeepKeys=function(e,t,r){new n(e,r,o.containsAllDeepKeys,!0).to.contain.all.deep.keys(t)},o.doesNotHaveAnyDeepKeys=function(e,t,r){new n(e,r,o.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(t)},o.doesNotHaveAllDeepKeys=function(e,t,r){new n(e,r,o.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(t)},o.throws=function(e,t,s,i){("string"==typeof t||t instanceof RegExp)&&(s=t,t=null);var a=new n(e,i,o.throws,!0).to.throw(t,s);return r(a,"object")},o.doesNotThrow=function(e,t,r,s){("string"==typeof t||t instanceof RegExp)&&(r=t,t=null),new n(e,s,o.doesNotThrow,!0).to.not.throw(t,r)},o.operator=function(s,i,a,c){var u;switch(i){case"==":u=s==a;break;case"===":u=s===a;break;case">":u=s>a;break;case">=":u=s>=a;break;case"<":u=s<a;break;case"<=":u=s<=a;break;case"!=":u=s!=a;break;case"!==":u=s!==a;break;default:throw c=c?c+": ":c,new e.AssertionError(c+'Invalid operator "'+i+'"',void 0,o.operator)}var l=new n(u,c,o.operator,!0);l.assert(!0===r(l,"object"),"expected "+t.inspect(s)+" to be "+i+" "+t.inspect(a),"expected "+t.inspect(s)+" to not be "+i+" "+t.inspect(a))},o.closeTo=function(e,t,r,s){new n(e,s,o.closeTo,!0).to.be.closeTo(t,r)},o.approximately=function(e,t,r,s){new n(e,s,o.approximately,!0).to.be.approximately(t,r)},o.sameMembers=function(e,t,r){new n(e,r,o.sameMembers,!0).to.have.same.members(t)},o.notSameMembers=function(e,t,r){new n(e,r,o.notSameMembers,!0).to.not.have.same.members(t)},o.sameDeepMembers=function(e,t,r){new n(e,r,o.sameDeepMembers,!0).to.have.same.deep.members(t)},o.notSameDeepMembers=function(e,t,r){new n(e,r,o.notSameDeepMembers,!0).to.not.have.same.deep.members(t)},o.sameOrderedMembers=function(e,t,r){new n(e,r,o.sameOrderedMembers,!0).to.have.same.ordered.members(t)},o.notSameOrderedMembers=function(e,t,r){new n(e,r,o.notSameOrderedMembers,!0).to.not.have.same.ordered.members(t)},o.sameDeepOrderedMembers=function(e,t,r){new n(e,r,o.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(t)},o.notSameDeepOrderedMembers=function(e,t,r){new n(e,r,o.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(t)},o.includeMembers=function(e,t,r){new n(e,r,o.includeMembers,!0).to.include.members(t)},o.notIncludeMembers=function(e,t,r){new n(e,r,o.notIncludeMembers,!0).to.not.include.members(t)},o.includeDeepMembers=function(e,t,r){new n(e,r,o.includeDeepMembers,!0).to.include.deep.members(t)},o.notIncludeDeepMembers=function(e,t,r){new n(e,r,o.notIncludeDeepMembers,!0).to.not.include.deep.members(t)},o.includeOrderedMembers=function(e,t,r){new n(e,r,o.includeOrderedMembers,!0).to.include.ordered.members(t)},o.notIncludeOrderedMembers=function(e,t,r){new n(e,r,o.notIncludeOrderedMembers,!0).to.not.include.ordered.members(t)},o.includeDeepOrderedMembers=function(e,t,r){new n(e,r,o.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(t)},o.notIncludeDeepOrderedMembers=function(e,t,r){new n(e,r,o.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(t)},o.oneOf=function(e,t,r){new n(e,r,o.oneOf,!0).to.be.oneOf(t)},o.changes=function(e,t,r,s){3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.changes,!0).to.change(t,r)},o.changesBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.changesBy,!0).to.change(t,r).by(s)},o.doesNotChange=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.doesNotChange,!0).to.not.change(t,r)},o.changesButNotBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.changesButNotBy,!0).to.change(t,r).but.not.by(s)},o.increases=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.increases,!0).to.increase(t,r)},o.increasesBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.increasesBy,!0).to.increase(t,r).by(s)},o.doesNotIncrease=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.doesNotIncrease,!0).to.not.increase(t,r)},o.increasesButNotBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.increasesButNotBy,!0).to.increase(t,r).but.not.by(s)},o.decreases=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.decreases,!0).to.decrease(t,r)},o.decreasesBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.decreasesBy,!0).to.decrease(t,r).by(s)},o.doesNotDecrease=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.doesNotDecrease,!0).to.not.decrease(t,r)},o.doesNotDecreaseBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);return new n(e,i,o.doesNotDecreaseBy,!0).to.not.decrease(t,r).by(s)},o.decreasesButNotBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.decreasesButNotBy,!0).to.decrease(t,r).but.not.by(s)}
/*!
       * ### .ifError(object)
       *
       * Asserts if value is not a false value, and throws if it is a true value.
       * This is added to allow for chai to be a drop-in replacement for Node's
       * assert class.
       *
       *     var err = new Error('I am a custom error');
       *     assert.ifError(err); // Rethrows err!
       *
       * @name ifError
       * @param {Object} object
       * @namespace Assert
       * @api public
       */,o.ifError=function(e){if(e)throw e},o.isExtensible=function(e,t){new n(e,t,o.isExtensible,!0).to.be.extensible},o.isNotExtensible=function(e,t){new n(e,t,o.isNotExtensible,!0).to.not.be.extensible},o.isSealed=function(e,t){new n(e,t,o.isSealed,!0).to.be.sealed},o.isNotSealed=function(e,t){new n(e,t,o.isNotSealed,!0).to.not.be.sealed},o.isFrozen=function(e,t){new n(e,t,o.isFrozen,!0).to.be.frozen},o.isNotFrozen=function(e,t){new n(e,t,o.isNotFrozen,!0).to.not.be.frozen},o.isEmpty=function(e,t){new n(e,t,o.isEmpty,!0).to.be.empty},o.isNotEmpty=function(e,t){new n(e,t,o.isNotEmpty,!0).to.not.be.empty},
/*!
       * Aliases.
       */
function e(t,n){return o[n]=o[t],e}("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")}},function(e,t,n){var r=n(22),o=n(37),s=n(24);e.exports=function(e){var t={};return"function"==typeof e&&(e=s.createServer(e)),r.forEach((function(n){t[n]=function(t){return new o(e,n,t)}})),t.del=t.delete,t},e.exports.Test=o,e.exports.agent=n(90)},function(e,t){e.exports=n(67)},function(e,t,n){var r=n(69).IncomingForm;r.IncomingForm=r,e.exports=r},function(e,t,n){var r;global.GENTLY&&(r=GENTLY.hijack(n(70)));var o=r("crypto"),s=r("fs"),i=r("util"),a=r("path"),c=r("./file"),u=r("./multipart_parser").MultipartParser,l=r("./querystring_parser").QuerystringParser,d=r("./octet_parser").OctetParser,p=r("./json_parser").JSONParser,h=r("string_decoder").StringDecoder,f=r("events").EventEmitter,y=r("stream").Stream,m=r("os");function b(e){return this instanceof b?(f.call(this),e=e||{},this.error=null,this.ended=!1,this.maxFields=e.maxFields||1e3,this.maxFieldsSize=e.maxFieldsSize||20971520,this.maxFileSize=e.maxFileSize||209715200,this.keepExtensions=e.keepExtensions||!1,this.uploadDir=e.uploadDir||m.tmpdir&&m.tmpdir()||m.tmpDir(),this.encoding=e.encoding||"utf-8",this.headers=null,this.type=null,this.hash=e.hash||!1,this.multiples=e.multiples||!1,this.bytesReceived=null,this.bytesExpected=null,this._parser=null,this._flushing=0,this._fieldsSize=0,this._fileSize=0,this.openedFiles=[],this):new b(e)}i.inherits(b,f),t.IncomingForm=b,b.prototype.parse=function(e,t){if(this.pause=function(){try{e.pause()}catch(e){return this.ended||this._error(e),!1}return!0},this.resume=function(){try{e.resume()}catch(e){return this.ended||this._error(e),!1}return!0},t){var n={},r={};this.on("field",(function(e,t){n[e]=t})).on("file",(function(e,t){this.multiples&&r[e]?(Array.isArray(r[e])||(r[e]=[r[e]]),r[e].push(t)):r[e]=t})).on("error",(function(e){t(e,n,r)})).on("end",(function(){t(null,n,r)}))}this.writeHeaders(e.headers);var o=this;return e.on("error",(function(e){o._error(e)})).on("aborted",(function(){o.emit("aborted"),o._error(new Error("Request aborted"))})).on("data",(function(e){o.write(e)})).on("end",(function(){if(!o.error){var e=o._parser.end();e&&o._error(e)}})),this},b.prototype.writeHeaders=function(e){this.headers=e,this._parseContentLength(),this._parseContentType()},b.prototype.write=function(e){if(!this.error){if(this._parser){this.bytesReceived+=e.length,this.emit("progress",this.bytesReceived,this.bytesExpected);var t=this._parser.write(e);return t!==e.length&&this._error(new Error("parser error, "+t+" of "+e.length+" bytes parsed")),t}this._error(new Error("uninitialized parser"))}},b.prototype.pause=function(){return!1},b.prototype.resume=function(){return!1},b.prototype.onPart=function(e){this.handlePart(e)},b.prototype.handlePart=function(e){var t=this;if(void 0===e.filename){var n="",r=new h(this.encoding);return e.on("data",(function(e){t._fieldsSize+=e.length,t._fieldsSize>t.maxFieldsSize?t._error(new Error("maxFieldsSize exceeded, received "+t._fieldsSize+" bytes of field data")):n+=r.write(e)})),void e.on("end",(function(){t.emit("field",e.name,n)}))}this._flushing++;var o=new c({path:this._uploadPath(e.filename),name:e.filename,type:e.mime,hash:t.hash});this.emit("fileBegin",e.name,o),o.open(),this.openedFiles.push(o),e.on("data",(function(e){t._fileSize+=e.length,t._fileSize>t.maxFileSize?t._error(new Error("maxFileSize exceeded, received "+t._fileSize+" bytes of file data")):0!=e.length&&(t.pause(),o.write(e,(function(){t.resume()})))})),e.on("end",(function(){o.end((function(){t._flushing--,t.emit("file",e.name,o),t._maybeEnd()}))}))},b.prototype._parseContentType=function(){if(0!==this.bytesExpected)if(this.headers["content-type"])if(this.headers["content-type"].match(/octet-stream/i))this._initOctetStream();else if(this.headers["content-type"].match(/urlencoded/i))this._initUrlencoded();else if(this.headers["content-type"].match(/multipart/i)){var e=this.headers["content-type"].match(/boundary=(?:"([^"]+)"|([^;]+))/i);e?this._initMultipart(e[1]||e[2]):this._error(new Error("bad content-type header, no multipart boundary"))}else this.headers["content-type"].match(/json/i)?this._initJSONencoded():this._error(new Error("bad content-type header, unknown content-type: "+this.headers["content-type"]));else this._error(new Error("bad content-type header, no content-type"));else this._parser=function(e){return{end:function(){return e.ended=!0,e._maybeEnd(),null}}}(this)},b.prototype._error=function(e){this.error||this.ended||(this.error=e,this.emit("error",e),Array.isArray(this.openedFiles)&&this.openedFiles.forEach((function(e){e._writeStream.destroy(),setTimeout(s.unlink,0,e.path,(function(e){}))})))},b.prototype._parseContentLength=function(){this.bytesReceived=0,this.headers["content-length"]?this.bytesExpected=parseInt(this.headers["content-length"],10):void 0===this.headers["transfer-encoding"]&&(this.bytesExpected=0),null!==this.bytesExpected&&this.emit("progress",this.bytesReceived,this.bytesExpected)},b.prototype._newParser=function(){return new u},b.prototype._initMultipart=function(e){this.type="multipart";var t,n,r,o=new u,s=this;o.initWithBoundary(e),o.onPartBegin=function(){(r=new y).readable=!0,r.headers={},r.name=null,r.filename=null,r.mime=null,r.transferEncoding="binary",r.transferBuffer="",t="",n=""},o.onHeaderField=function(e,n,r){t+=e.toString(s.encoding,n,r)},o.onHeaderValue=function(e,t,r){n+=e.toString(s.encoding,t,r)},o.onHeaderEnd=function(){t=t.toLowerCase(),r.headers[t]=n;var e=n.match(/\bname=("([^"]*)"|([^\(\)<>@,;:\\"\/\[\]\?=\{\}\s\t/]+))/i);"content-disposition"==t?(e&&(r.name=e[2]||e[3]||""),r.filename=s._fileName(n)):"content-type"==t?r.mime=n:"content-transfer-encoding"==t&&(r.transferEncoding=n.toLowerCase()),t="",n=""},o.onHeadersEnd=function(){switch(r.transferEncoding){case"binary":case"7bit":case"8bit":o.onPartData=function(e,t,n){r.emit("data",e.slice(t,n))},o.onPartEnd=function(){r.emit("end")};break;case"base64":o.onPartData=function(e,t,n){r.transferBuffer+=e.slice(t,n).toString("ascii");var o=4*parseInt(r.transferBuffer.length/4,10);r.emit("data",new Buffer(r.transferBuffer.substring(0,o),"base64")),r.transferBuffer=r.transferBuffer.substring(o)},o.onPartEnd=function(){r.emit("data",new Buffer(r.transferBuffer,"base64")),r.emit("end")};break;default:return s._error(new Error("unknown transfer-encoding"))}s.onPart(r)},o.onEnd=function(){s.ended=!0,s._maybeEnd()},this._parser=o},b.prototype._fileName=function(e){var t=e.match(/\bfilename=("(.*?)"|([^\(\)<>@,;:\\"\/\[\]\?=\{\}\s\t/]+))($|;\s)/i);if(t){var n=t[2]||t[3]||"",r=n.substr(n.lastIndexOf("\\")+1);return(r=r.replace(/%22/g,'"')).replace(/&#([\d]{4});/g,(function(e,t){return String.fromCharCode(t)}))}},b.prototype._initUrlencoded=function(){this.type="urlencoded";var e=new l(this.maxFields),t=this;e.onField=function(e,n){t.emit("field",e,n)},e.onEnd=function(){t.ended=!0,t._maybeEnd()},this._parser=e},b.prototype._initOctetStream=function(){this.type="octet-stream";var e=this.headers["x-file-name"],t=this.headers["content-type"],n=new c({path:this._uploadPath(e),name:e,type:t});this.emit("fileBegin",e,n),n.open(),this.openedFiles.push(n),this._flushing++;var r=this;r._parser=new d;var o=0;r._parser.on("data",(function(e){r.pause(),o++,n.write(e,(function(){o--,r.resume(),r.ended&&r._parser.emit("doneWritingFile")}))})),r._parser.on("end",(function(){r._flushing--,r.ended=!0;var e=function(){n.end((function(){r.emit("file","file",n),r._maybeEnd()}))};0===o?e():r._parser.once("doneWritingFile",e)}))},b.prototype._initJSONencoded=function(){this.type="json";var e=new p(this),t=this;e.onField=function(e,n){t.emit("field",e,n)},e.onEnd=function(){t.ended=!0,t._maybeEnd()},this._parser=e},b.prototype._uploadPath=function(e){var t="upload_"+o.randomBytes(16).toString("hex");if(this.keepExtensions){var n=a.extname(e);t+=n=n.replace(/(\.[a-z0-9]+).*/i,"$1")}return a.join(this.uploadDir,t)},b.prototype._maybeEnd=function(){!this.ended||this._flushing||this.error||this.emit("end")}},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=70},function(e,t){e.exports=n(71)},function(e,t,n){"use strict";const r=n(28),o=n(29),s=n(73);function i(e){o.call(this);const t=this.res=e.res;this.request=e,this.req=e.req,this.text=t.text,this.body=void 0!==t.body?t.body:{},this.files=t.files||{},this.buffered="string"==typeof this.text,this.header=this.headers=t.headers,this._setStatusProperties(t.statusCode),this._setHeaderProperties(this.header),this.setEncoding=t.setEncoding.bind(t),t.on("data",this.emit.bind(this,"data")),t.on("end",this.emit.bind(this,"end")),t.on("close",this.emit.bind(this,"close")),t.on("error",this.emit.bind(this,"error"))}e.exports=i,r.inherits(i,o),s(i.prototype),i.prototype.destroy=function(e){this.res.destroy(e)},i.prototype.pause=function(){this.res.pause()},i.prototype.resume=function(){this.res.resume()},i.prototype.toError=function(){const e=this.req,t=e.method,n=e.path,r=`cannot ${t} ${n} (${this.status})`,o=new Error(r);return o.status=this.status,o.text=this.text,o.method=t,o.path=n,o},i.prototype.setStatusProperties=function(e){return console.warn("In superagent 2.x setStatusProperties is a private method"),this._setStatusProperties(e)},i.prototype.toJSON=function(){return{req:this.request.toJSON(),header:this.header,status:this.status,text:this.text}}},function(e,t,n){"use strict";var r=n(38);function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}e.exports=o,o.prototype.get=function(e){return this.header[e.toLowerCase()]},o.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=r.type(t);var n=r.params(t);for(var o in n)this[o]=n[o];this.links={};try{e.link&&(this.links=r.parseLinks(e.link))}catch(e){}},o.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}},function(e,t,n){"use strict";const r=n(75).StringDecoder,o=n(29),s=n(39);t.unzip=(e,t)=>{const n=s.createUnzip(),i=new o;let a;i.req=e,n.on("error",e=>{e&&"Z_BUF_ERROR"===e.code?i.emit("end"):i.emit("error",e)}),t.pipe(n),t.setEncoding=e=>{a=new r(e)},n.on("data",e=>{if(a){const t=a.write(e);t.length&&i.emit("data",t)}else i.emit("data",e)}),n.on("end",()=>{i.emit("end")});const c=t.on;t.on=function(e,n){return"data"==e||"end"==e?i.on(e,n):"error"==e?(i.on(e,n),c.call(t,e,n)):c.call(t,e,n),this}}},function(e,t){e.exports=n(75)},function(e,t){e.exports=n(76)},function(e,t){e.exports=n(77)},function(e,t){e.exports=n(78)},function(e){e.exports=JSON.parse('{"name":"superagent","version":"3.8.3","description":"elegant & feature rich browser / node HTTP with a fluent API","scripts":{"prepare":"make all","test":"make test"},"keywords":["http","ajax","request","agent"],"license":"MIT","author":"TJ Holowaychuk <tj@vision-media.ca>","contributors":["Kornel Lesiński <kornel@geekhood.net>","Peter Lyons <pete@peterlyons.com>","Hunter Loftis <hunter@hunterloftis.com>"],"repository":{"type":"git","url":"git://github.com/visionmedia/superagent.git"},"dependencies":{"component-emitter":"^1.2.0","cookiejar":"^2.1.0","debug":"^3.1.0","extend":"^3.0.0","form-data":"^2.3.1","formidable":"^1.2.0","methods":"^1.1.1","mime":"^1.4.1","qs":"^6.5.1","readable-stream":"^2.3.5"},"devDependencies":{"Base64":"^1.0.1","basic-auth-connect":"^1.0.0","body-parser":"^1.18.2","browserify":"^14.1.0","cookie-parser":"^1.4.3","express":"^4.16.3","express-session":"^1.15.6","marked":"0.3.12","mocha":"^3.5.3","multer":"^1.3.0","should":"^11.2.0","should-http":"^0.1.1","zuul":"^3.11.1"},"browser":{"./lib/node/index.js":"./lib/client.js","./test/support/server.js":"./test/support/blank.js"},"component":{"scripts":{"superagent":"lib/client.js"}},"main":"./lib/node/index.js","engines":{"node":">= 4.0"}}')},function(e,t,n){"use strict";var r=n(81);function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}e.exports=o,o.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},o.prototype.parse=function(e){return this._parser=e,this},o.prototype.responseType=function(e){return this._responseType=e,this},o.prototype.serialize=function(e){return this._serializer=e,this},o.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},o.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var s=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];o.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(e,t);if(!0===n)return!0;if(!1===n)return!1}catch(e){console.error(e)}if(t&&t.status&&t.status>=500&&501!=t.status)return!0;if(e){if(e.code&&~s.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},o.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},o.prototype.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(e,t){n.end((function(n,r){n?t(n):e(r)}))}))}return this._fullfilledPromise.then(e,t)},o.prototype.catch=function(e){return this.then(void 0,e)},o.prototype.use=function(e){return e(this),this},o.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},o.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},o.prototype.get=function(e){return this._header[e.toLowerCase()]},o.prototype.getHeader=o.prototype.get,o.prototype.set=function(e,t){if(r(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},o.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},o.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),r(e)){for(var n in e)this.field(n,e[n]);return this}if(Array.isArray(t)){for(var o in t)this.field(e,t[o]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},o.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},o.prototype._auth=function(e,t,n,r){switch(n.type){case"basic":this.set("Authorization","Basic "+r(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},o.prototype.withCredentials=function(e){return null==e&&(e=!0),this._withCredentials=e,this},o.prototype.redirects=function(e){return this._maxRedirects=e,this},o.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},o.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},o.prototype.send=function(e){var t=r(e),n=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&r(this._data))for(var o in e)this._data[o]=e[o];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(n||this.type("json"),this)},o.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},o.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var n=this.url.substring(t+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,t)+"?"+n.join("&")}}},o.prototype._appendQueryString=function(){console.trace("Unsupported")},o.prototype._timeoutError=function(e,t,n){if(!this._aborted){var r=new Error(e+t+"ms exceeded");r.timeout=t,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},o.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))}},function(e,t,n){"use strict";e.exports=function(e){return null!==e&&"object"==typeof e}},function(e,t,n){"use strict";const r=n(30).CookieJar,o=n(30).CookieAccessInfo,s=n(23).parse,i=n(27),a=n(83);let c=n(22);function u(e){if(!(this instanceof u))return new u(e);a.call(this),this.jar=new r,e&&(e.ca&&this.ca(e.ca),e.key&&this.key(e.key),e.pfx&&this.pfx(e.pfx),e.cert&&this.cert(e.cert))}e.exports=u,u.prototype=Object.create(a.prototype),u.prototype._saveCookies=function(e){const t=e.headers["set-cookie"];t&&this.jar.setCookies(t)},u.prototype._attachCookies=function(e){const t=s(e.url),n=o(t.hostname,t.pathname,"https:"==t.protocol),r=this.jar.getCookies(n).toValueString();e.cookies=r},c.forEach(e=>{const t=e.toUpperCase();u.prototype[e]=function(e,n){const r=new i.Request(t,e);return r.on("response",this._saveCookies.bind(this)),r.on("redirect",this._saveCookies.bind(this)),r.on("redirect",this._attachCookies.bind(this,r)),this._attachCookies(r),this._setDefaults(r),n&&r.end(n),r}}),u.prototype.del=u.prototype.delete},function(e,t){function n(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach((function(e){n.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}})),n.prototype._setDefaults=function(e){this._defaults.forEach((function(t){e[t.fn].apply(e,t.arguments)}))},e.exports=n},function(e,t,n){"use strict";t["application/x-www-form-urlencoded"]=n(85),t["application/json"]=n(86),t.text=n(87);const r=n(88);t["application/octet-stream"]=r,t["application/pdf"]=r,t.image=r},function(e,t,n){"use strict";const r=n(41);e.exports=function(e,t){e.text="",e.setEncoding("ascii"),e.on("data",t=>{e.text+=t}),e.on("end",()=>{try{t(null,r.parse(e.text))}catch(e){t(e)}})}},function(e,t,n){"use strict";e.exports=function(e,t){e.text="",e.setEncoding("utf8"),e.on("data",t=>{e.text+=t}),e.on("end",()=>{try{var n=e.text&&JSON.parse(e.text)}catch(t){var r=t;r.rawResponse=e.text||null,r.statusCode=e.statusCode}finally{t(r,n)}})}},function(e,t,n){"use strict";e.exports=function(e,t){e.text="",e.setEncoding("utf8"),e.on("data",t=>{e.text+=t}),e.on("end",t)}},function(e,t,n){"use strict";e.exports=(e,t)=>{const n=[];e.on("data",e=>{n.push(e)}),e.on("end",()=>{t(null,Buffer.concat(n))})}},function(e,t){e.exports=n(89)},function(e,t,n){var r=n(27).agent,o=n(22),s=n(24),i=n(37);function a(e,t){if(!(this instanceof a))return new a(e,t);"function"==typeof e&&(e=s.createServer(e)),t&&(this._ca=t.ca,this._key=t.key,this._cert=t.cert),r.call(this),this.app=e}e.exports=a,Object.setPrototypeOf(a.prototype,r.prototype),a.prototype.host=function(e){return this._host=e,this},o.forEach((function(e){a.prototype[e]=function(t,n){var r=new i(this.app,e.toUpperCase(),t,this._host);return r.ca(this._ca),r.cert(this._cert),r.key(this._key),r.on("response",this._saveCookies.bind(this)),r.on("redirect",this._saveCookies.bind(this)),r.on("redirect",this._attachCookies.bind(this,r)),this._attachCookies(r),this._setDefaults(r),r}})),a.prototype.del=a.prototype.delete},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(14).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(42),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(10),A=n.n(C),L=n(11),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(10)},function(e,t){e.exports=n(11)},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(9);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(13)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(14)},function(e,t){
/*!
       * Chai - flag utility
       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
       * MIT Licensed
       */
e.exports=function(e,t,n){var r=e.__flags||(e.__flags=Object.create(null));if(3!==arguments.length)return r[t];r[t]=n}},function(e,t,n){
/*!
       * chai
       * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
       * MIT Licensed
       */
var r=[];
/*!
       * Chai version
       */t.version="4.2.0",
/*!
       * Assertion Error
       */
t.AssertionError=n(31);
/*!
       * Utils for plugins (not exported)
       */
var o=n(44);t.use=function(e){return~r.indexOf(e)||(e(t,o),r.push(e)),t},
/*!
       * Utility Functions
       */
t.util=o;
/*!
       * Configuration
       */
var s=n(18);t.config=s;
/*!
       * Primary `Assertion` prototype
       */
var i=n(61);t.use(i);
/*!
       * Core Assertions
       */
var a=n(62);t.use(a);
/*!
       * Expect interface
       */
var c=n(63);t.use(c);
/*!
       * Should interface
       */
var u=n(64);t.use(u);
/*!
       * Assert interface
       */
var l=n(65);t.use(l)},function(e,t){
/*!
       * Chai - transferFlags utility
       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
       * MIT Licensed
       */
e.exports=function(e,t,n){var r=e.__flags||(e.__flags=Object.create(null));for(var o in t.__flags||(t.__flags=Object.create(null)),n=3!==arguments.length||n,r)(n||"object"!==o&&"ssfi"!==o&&"lockSsfi"!==o&&"message"!=o)&&(t.__flags[o]=r[o])}},function(e,t){e.exports={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"]}},function(e,t,n){var r=n(18);
/*!
       * Chai - isProxyEnabled helper
       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
       * MIT Licensed
       */e.exports=function(){return r.useProxy&&"undefined"!=typeof Proxy&&"undefined"!=typeof Reflect}},function(e,t){var n=Object.getOwnPropertyDescriptor((function(){}),"length");
/*!
       * Chai - addLengthGuard utility
       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
       * MIT Licensed
       */e.exports=function(e,t,r){return n.configurable?(Object.defineProperty(e,"length",{get:function(){if(r)throw Error("Invalid Chai property: "+t+'.length. Due to a compatibility issue, "length" cannot directly follow "'+t+'". Use "'+t+'.lengthOf" instead.');throw Error("Invalid Chai property: "+t+'.length. See docs for proper usage of "'+t+'".')}}),e):e}},function(e,t,n){var r=n(18),o=n(15),s=n(35),i=n(19),a=["__flags","__methods","_obj","assert"];e.exports=function(e,t){return i()?new Proxy(e,{get:function e(n,i){if("string"==typeof i&&-1===r.proxyExcludedKeys.indexOf(i)&&!Reflect.has(n,i)){if(t)throw Error("Invalid Chai property: "+t+"."+i+'. See docs for proper usage of "'+t+'".');var c=null,u=4;throw s(n).forEach((function(e){if(!Object.prototype.hasOwnProperty(e)&&-1===a.indexOf(e)){var t=function(e,t,n){if(Math.abs(e.length-t.length)>=n)return n;for(var r=[],o=0;o<=e.length;o++)r[o]=Array(t.length+1).fill(0),r[o][0]=o;for(var s=0;s<t.length;s++)r[0][s]=s;for(o=1;o<=e.length;o++){var i=e.charCodeAt(o-1);for(s=1;s<=t.length;s++)Math.abs(o-s)>=n?r[o][s]=n:r[o][s]=Math.min(r[o-1][s]+1,r[o][s-1]+1,r[o-1][s-1]+(i===t.charCodeAt(s-1)?0:1))}return r[e.length][t.length]}(i,e,u);t<u&&(c=e,u=t)}})),null!==c?Error("Invalid Chai property: "+i+'. Did you mean "'+c+'"?'):Error("Invalid Chai property: "+i)}return-1!==a.indexOf(i)||o(n,"lockSsfi")||o(n,"ssfi",e),Reflect.get(n,i)}}):e}},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t,n){var r;r=function(){"use strict";var e="function"==typeof Promise,t="object"==typeof self?self:global,n="undefined"!=typeof Symbol,r="undefined"!=typeof Map,o="undefined"!=typeof Set,s="undefined"!=typeof WeakMap,i="undefined"!=typeof WeakSet,a="undefined"!=typeof DataView,c=n&&void 0!==Symbol.iterator,u=n&&void 0!==Symbol.toStringTag,l=o&&"function"==typeof Set.prototype.entries,d=r&&"function"==typeof Map.prototype.entries,p=l&&Object.getPrototypeOf((new Set).entries()),h=d&&Object.getPrototypeOf((new Map).entries()),f=c&&"function"==typeof Array.prototype[Symbol.iterator],y=f&&Object.getPrototypeOf([][Symbol.iterator]()),m=c&&"function"==typeof String.prototype[Symbol.iterator],b=m&&Object.getPrototypeOf(""[Symbol.iterator]());return function(n){var c=typeof n;if("object"!==c)return c;if(null===n)return"null";if(n===t)return"global";if(Array.isArray(n)&&(!1===u||!(Symbol.toStringTag in n)))return"Array";if("object"==typeof window&&null!==window){if("object"==typeof window.location&&n===window.location)return"Location";if("object"==typeof window.document&&n===window.document)return"Document";if("object"==typeof window.navigator){if("object"==typeof window.navigator.mimeTypes&&n===window.navigator.mimeTypes)return"MimeTypeArray";if("object"==typeof window.navigator.plugins&&n===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"==typeof window.HTMLElement)&&n instanceof window.HTMLElement){if("BLOCKQUOTE"===n.tagName)return"HTMLQuoteElement";if("TD"===n.tagName)return"HTMLTableDataCellElement";if("TH"===n.tagName)return"HTMLTableHeaderCellElement"}}var l=u&&n[Symbol.toStringTag];if("string"==typeof l)return l;var d=Object.getPrototypeOf(n);return d===RegExp.prototype?"RegExp":d===Date.prototype?"Date":e&&d===Promise.prototype?"Promise":o&&d===Set.prototype?"Set":r&&d===Map.prototype?"Map":i&&d===WeakSet.prototype?"WeakSet":s&&d===WeakMap.prototype?"WeakMap":a&&d===DataView.prototype?"DataView":r&&d===h?"Map Iterator":o&&d===p?"Set Iterator":f&&d===y?"Array Iterator":m&&d===b?"String Iterator":null===d?"Object":Object.prototype.toString.call(n).slice(8,-1)}},e.exports=r()},function(e,t,n){var r=n(34),o=n(35),s=n(49),i=n(18);e.exports=function(e,t,n,r){return c({showHidden:t,seen:[],stylize:function(e){return e}},e,void 0===n?2:n)};var a=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&"nodeType"in e&&1===e.nodeType&&"string"==typeof e.nodeName};function c(e,n,y){if(n&&"function"==typeof n.inspect&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var m=n.inspect(y,e);return"string"!=typeof m&&(m=c(e,m,y)),m}var b=function(e,t){switch(typeof t){case"undefined":return e.stylize("undefined","undefined");case"string":var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string");case"number":return 0===t&&1/t==-1/0?e.stylize("-0","number"):e.stylize(""+t,"number");case"boolean":return e.stylize(""+t,"boolean");case"symbol":return e.stylize(t.toString(),"symbol")}if(null===t)return e.stylize("null","null")}(e,n);if(b)return b;if(a(n)){if("outerHTML"in n)return n.outerHTML;try{if(document.xmlVersion)return(new XMLSerializer).serializeToString(n);var g=document.createElementNS("http://www.w3.org/1999/xhtml","_");g.appendChild(n.cloneNode(!1));var w=g.innerHTML.replace("><",">"+n.innerHTML+"<");return g.innerHTML="",w}catch(e){}}var v,_,x=s(n),E=e.showHidden?o(n):x;if(0===E.length||h(n)&&(1===E.length&&"stack"===E[0]||2===E.length&&"description"===E[0]&&"stack"===E[1])){if("function"==typeof n)return _=(v=r(n))?": "+v:"",e.stylize("[Function"+_+"]","special");if(d(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(p(n))return e.stylize(Date.prototype.toUTCString.call(n),"date");if(h(n))return u(n)}var S,O,P="",k=!1,j=!1,q=["{","}"];if("object"==typeof(S=n)&&/\w+Array]$/.test(f(S))&&(j=!0,q=["[","]"]),function(e){return Array.isArray(e)||"object"==typeof e&&"[object Array]"===f(e)}(n)&&(k=!0,q=["[","]"]),"function"==typeof n&&(P=" [Function"+(_=(v=r(n))?": "+v:"")+"]"),d(n)&&(P=" "+RegExp.prototype.toString.call(n)),p(n)&&(P=" "+Date.prototype.toUTCString.call(n)),h(n))return u(n);if(0===E.length&&(!k||0==n.length))return q[0]+P+q[1];if(y<0)return d(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");if(e.seen.push(n),k)O=function(e,t,n,r,o){for(var s=[],i=0,a=t.length;i<a;++i)Object.prototype.hasOwnProperty.call(t,String(i))?s.push(l(e,t,n,r,String(i),!0)):s.push("");return o.forEach((function(o){o.match(/^\d+$/)||s.push(l(e,t,n,r,o,!0))})),s}(e,n,y,x,E);else{if(j)return function(e){for(var t="[ ",n=0;n<e.length;++n){if(t.length>=i.truncateThreshold-7){t+="...";break}t+=e[n]+", "}return-1!==(t+=" ]").indexOf(",  ]")&&(t=t.replace(",  ]"," ]")),t}(n);O=E.map((function(t){return l(e,n,y,x,t,k)}))}return e.seen.pop(),function(e,t,n){return e.reduce((function(e,t){return e+t.length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(O,P,q)}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,n,r,o,s){var i,a,u=Object.getOwnPropertyDescriptor(t,o);if(u&&(u.get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special"))),r.indexOf(o)<0&&(i="["+o+"]"),a||(e.seen.indexOf(t[o])<0?(a=c(e,t[o],null===n?null:n-1)).indexOf("\n")>-1&&(a=s?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),void 0===i){if(s&&o.match(/^\d+$/))return a;(i=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+a}function d(e){return"object"==typeof e&&"[object RegExp]"===f(e)}function p(e){return"object"==typeof e&&"[object Date]"===f(e)}function h(e){return"object"==typeof e&&"[object Error]"===f(e)}function f(e){return Object.prototype.toString.call(e)}},function(e,t,n){"use strict";const r=n(67)("superagent"),o=n(68),s=n(71),i=n(72),a=n(23).parse,c=n(23).format,u=n(23).resolve;let l=n(22);const d=n(29),p=n(38),h=n(74).unzip,f=n(76),y=n(77),m=n(40),b=n(24),g=n(78),w=n(41),v=n(39),_=n(28),x=n(79),E=n(80),S=n(30);function O(e,n){return"function"==typeof n?new t.Request("GET",e).end(n):1==arguments.length?new t.Request("GET",e):new t.Request(e,n)}function P(){}function k(e){const t=`node-superagent/${x.version}`;e._header={"user-agent":t},e.header={"User-Agent":t}}function j(e,t){d.call(this),"string"!=typeof t&&(t=c(t)),this._agent=!1,this._formData=null,this.method=e,this.url=t,k(this),this.writable=!0,this._redirects=0,this.redirects("HEAD"===e?0:5),this.cookies="",this.qs={},this._query=[],this.qsRaw=this._query,this._redirectList=[],this._streamRequest=!1,this.once("end",this.clearTimeout.bind(this))}function q(e){return/[\/+]json($|[^-\w])/.test(e)}function T(e){return~[301,302,303,305,307,308].indexOf(e)}(t=e.exports=O).Request=j,t.agent=n(82),t.Response=i,y.define({"application/x-www-form-urlencoded":["form","urlencoded","form-data"]},!0),t.protocols={"http:":b,"https:":m},t.serialize={"application/x-www-form-urlencoded":w.stringify,"application/json":JSON.stringify},t.parse=n(84),_.inherits(j,d),E(j.prototype),j.prototype.attach=function(e,t,n){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");let o=n||{};"string"==typeof n&&(o={filename:n}),"string"==typeof t?(o.filename||(o.filename=t),r("creating `fs.ReadStream` instance for file: %s",t),t=g.createReadStream(t)):!o.filename&&t.path&&(o.filename=t.path),this._getFormData().append(e,t,o)}return this},j.prototype._getFormData=function(){return this._formData||(this._formData=new s,this._formData.on("error",e=>{this.emit("error",e),this.abort()})),this._formData},j.prototype.agent=function(e){return arguments.length?(this._agent=e,this):this._agent},j.prototype.type=function(e){return this.set("Content-Type",~e.indexOf("/")?e:y.lookup(e))},j.prototype.accept=function(e){return this.set("Accept",~e.indexOf("/")?e:y.lookup(e))},j.prototype.query=function(e){return"string"==typeof e?this._query.push(e):f(this.qs,e),this},j.prototype.write=function(e,t){const n=this.request();return this._streamRequest||(this._streamRequest=!0),n.write(e,t)},j.prototype.pipe=function(e,t){return this.piped=!0,this.buffer(!1),this.end(),this._pipeContinue(e,t)},j.prototype._pipeContinue=function(e,t){return this.req.once("response",n=>{if(T(n.statusCode)&&this._redirects++!=this._maxRedirects)return this._redirect(n)._pipeContinue(e,t);if(this.res=n,this._emitResponse(),!this._aborted){if(this._shouldUnzip(n)){const r=v.createUnzip();r.on("error",t=>{t&&"Z_BUF_ERROR"===t.code?e.emit("end"):e.emit("error",t)}),n.pipe(r).pipe(e,t)}else n.pipe(e,t);n.once("end",()=>{this.emit("end")})}}),e},j.prototype.buffer=function(e){return this._buffer=!1!==e,this},j.prototype._redirect=function(e){let t=e.headers.location;if(!t)return this.callback(new Error("No location header for redirect"),e);r("redirect %s -> %s",this.url,t),t=u(this.url,t),e.resume();let n=this.req._headers;const o=a(t).host!==a(this.url).host;return 301!=e.statusCode&&302!=e.statusCode||(n=p.cleanHeader(this.req._headers,o),this.method="HEAD"==this.method?"HEAD":"GET",this._data=null),303==e.statusCode&&(n=p.cleanHeader(this.req._headers,o),this.method="GET",this._data=null),delete n.host,delete this.req,delete this._formData,k(this),this._endCalled=!1,this.url=t,this.qs={},this._query.length=0,this.set(n),this.emit("redirect",e),this._redirectList.push(this.url),this.end(this._callback),this},j.prototype.auth=function(e,t,n){1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(n=t,t=""),n||(n={type:"basic"});var r=function(e){return new Buffer(e).toString("base64")};return this._auth(e,t,n,r)},j.prototype.ca=function(e){return this._ca=e,this},j.prototype.key=function(e){return this._key=e,this},j.prototype.pfx=function(e){return"object"!=typeof e||Buffer.isBuffer(e)?this._pfx=e:(this._pfx=e.pfx,this._passphrase=e.passphrase),this},j.prototype.cert=function(e){return this._cert=e,this},j.prototype.request=function(){if(this.req)return this.req;const e={};try{const e=w.stringify(this.qs,{indices:!1,strictNullHandling:!0});e&&(this.qs={},this._query.push(e)),this._finalizeQueryString()}catch(e){return this.emit("error",e)}let n=this.url;const r=this._retries;if(0!=n.indexOf("http")&&(n=`http://${n}`),n=a(n),!0===/^https?\+unix:/.test(n.protocol)){n.protocol=`${n.protocol.split("+")[0]}:`;const t=n.path.match(/^([^/]+)(.+)$/);e.socketPath=t[1].replace(/%2F/g,"/"),n.path=t[2]}e.method=this.method,e.port=n.port,e.path=n.path,e.host=n.hostname,e.ca=this._ca,e.key=this._key,e.pfx=this._pfx,e.cert=this._cert,e.passphrase=this._passphrase,e.agent=this._agent;const o=t.protocols[n.protocol],s=this.req=o.request(e);if(s.setNoDelay(!0),"HEAD"!=e.method&&s.setHeader("Accept-Encoding","gzip, deflate"),this.protocol=n.protocol,this.host=n.host,s.once("drain",()=>{this.emit("drain")}),s.once("error",e=>{this._aborted||this._retries===r&&(this.response||this.callback(e))}),n.auth){const e=n.auth.split(":");this.auth(e[0],e[1])}this.username&&this.password&&this.auth(this.username,this.password);for(const e in this.header)this.header.hasOwnProperty(e)&&s.setHeader(e,this.header[e]);if(this.cookies)if(this.header.hasOwnProperty("cookie")){const e=new S.CookieJar;e.setCookies(this.header.cookie.split(";")),e.setCookies(this.cookies.split(";")),s.setHeader("Cookie",e.getCookies(S.CookieAccessInfo.All).toValueString())}else s.setHeader("Cookie",this.cookies);return s},j.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();const n=this._callback||P;if(this.clearTimeout(),this.called)return console.warn("superagent: double callback bug");if(this.called=!0,!e)try{if(!this._isResponseOK(t)){let n="Unsuccessful HTTP response";t&&(n=b.STATUS_CODES[t.status]||n),(e=new Error(n)).status=t?t.status:void 0}}catch(t){e=t}if(!e)return n(null,t);e.response=t,this._maxRetries&&(e.retries=this._retries-1),e&&this.listeners("error").length>0&&this.emit("error",e),n(e,t)},j.prototype._isHost=function(e){return Buffer.isBuffer(e)||e instanceof d||e instanceof s},j.prototype._emitResponse=function(e,t){const n=new i(this);return this.response=n,n.redirects=this._redirectList,void 0!==e&&(n.body=e),n.files=t,this.emit("response",n),n},j.prototype.end=function(e){return this.request(),r("%s %s",this.method,this.url),this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||P,this._end()},j.prototype._end=function(){let e=this._data;const n=this.req;let s=this._buffer;const i=this.method;if(this._setTimeouts(),"HEAD"!=i&&!n._headerSent){if("string"!=typeof e){let r=n.getHeader("Content-Type");r&&(r=r.split(";")[0]);let o=t.serialize[r];!o&&q(r)&&(o=t.serialize["application/json"]),o&&(e=o(e))}e&&!n.getHeader("Content-Length")&&n.setHeader("Content-Length",Buffer.isBuffer(e)?e.length:Buffer.byteLength(e))}n.once("response",e=>{if(r("%s %s -> %s",this.method,this.url,e.statusCode),this._responseTimeoutTimer&&clearTimeout(this._responseTimeoutTimer),this.piped)return;const i=this._maxRedirects,a=p.type(e.headers["content-type"]||"")||"text/plain",c=a.split("/")[0],u="multipart"==c,l=T(e.statusCode);let d=this._parser;const f=this._responseType;if(this.res=e,l&&this._redirects++!=i)return this._redirect(e);if("HEAD"==this.method)return this.emit("end"),void this.callback(null,this._emitResponse());if(this._shouldUnzip(e)&&h(n,e),!d)if(f)d=t.parse.image,s=!0;else if(u){const e=new o.IncomingForm;d=e.parse.bind(e),s=!0}else!function(e){const t=e.split("/")[0];return"image"==t||"video"==t}(a)?t.parse[a]?d=t.parse[a]:"text"==c?(d=t.parse.text,s=!1!==s):q(a)?(d=t.parse["application/json"],s=!1!==s):s&&(d=t.parse.text):(d=t.parse.image,s=!0);(void 0===s&&function(e){const t=e.split("/"),n=t[0],r=t[1];return"text"==n||"x-www-form-urlencoded"==r}(a)||q(a))&&(s=!0);let y=!1;if(s){let t=this._maxResponseSize||2e8;e.on("data",n=>{if((t-=n.byteLength||n.length)<0){const t=Error("Maximum response size reached");t.code="ETOOLARGE",y=!1,e.destroy(t)}})}if(d)try{y=s,d(e,(e,t,n)=>{if(!this.timedout)return e&&!this._aborted?this.callback(e):void(y&&(this.emit("end"),this.callback(null,this._emitResponse(t,n))))})}catch(e){return void this.callback(e)}if(this.res=e,s)e.once("error",e=>{y=!1,this.callback(e,null)}),y||e.once("end",()=>{r("end %s %s",this.method,this.url),this.emit("end"),this.callback(null,this._emitResponse())});else{if(r("unbuffered %s %s",this.method,this.url),this.callback(null,this._emitResponse()),u)return;e.once("end",()=>{r("end %s %s",this.method,this.url),this.emit("end")})}}),this.emit("request",this);const a=()=>{const e=n.getHeader("Content-Length");let t=0;const r=new d.Transform;return r._transform=(n,r,o)=>{t+=n.length,this.emit("progress",{direction:"upload",lengthComputable:!0,loaded:t,total:e}),o(null,n)},r},c=this._formData;if(c){const e=c.getHeaders();for(const t in e)r('setting FormData header: "%s: %s"',t,e[t]),n.setHeader(t,e[t]);c.getLength((e,t)=>{r("got FormData Content-Length: %s",t),"number"==typeof t&&n.setHeader("Content-Length",t),c.pipe(a()).pipe(n)})}else Buffer.isBuffer(e)?(e=>{const t=new d.Readable,n=e.length,r=n%16384,o=n-r;for(let n=0;n<o;n+=16384){const r=e.slice(n,n+16384);t.push(r)}if(r>0){const n=e.slice(-r);t.push(n)}return t.push(null),t})(e).pipe(a()).pipe(n):n.end(e);return this},j.prototype._shouldUnzip=e=>204!==e.statusCode&&304!==e.statusCode&&"0"!==e.headers["content-length"]&&/^\s*(?:deflate|gzip)\s*$/.test(e.headers["content-encoding"]),-1==l.indexOf("del")&&(l=l.slice(0)).push("del"),l.forEach(e=>{const t=e;e=(e="del"==e?"delete":e).toUpperCase(),O[t]=(t,n,r)=>{const o=O(e,t);return"function"==typeof n&&(r=n,n=null),n&&("GET"===e||"HEAD"===e?o.query(n):o.send(n)),r&&o.end(r),o}})},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){!function(){"use strict";function e(t,n,r,o){return this instanceof e?(this.domain=t||void 0,this.path=n||"/",this.secure=!!r,this.script=!!o,this):new e(t,n,r,o)}function n(e,t,r){return e instanceof n?e:this instanceof n?(this.name=null,this.value=null,this.expiration_date=1/0,this.path=String(r||"/"),this.explicit_path=!1,this.domain=t||null,this.explicit_domain=!1,this.secure=!1,this.noscript=!1,e&&this.parse(e,t,r),this):new n(e,t,r)}e.All=Object.freeze(Object.create(null)),t.CookieAccessInfo=e,t.Cookie=n,n.prototype.toString=function(){var e=[this.name+"="+this.value];return this.expiration_date!==1/0&&e.push("expires="+new Date(this.expiration_date).toGMTString()),this.domain&&e.push("domain="+this.domain),this.path&&e.push("path="+this.path),this.secure&&e.push("secure"),this.noscript&&e.push("httponly"),e.join("; ")},n.prototype.toValueString=function(){return this.name+"="+this.value};var r=/[:](?=\s*[a-zA-Z0-9_\-]+\s*[=])/g;function o(){var e,t;return this instanceof o?(e=Object.create(null),this.setCookie=function(r,o,s){var i,a;if(i=(r=new n(r,o,s)).expiration_date<=Date.now(),void 0!==e[r.name]){for(t=e[r.name],a=0;a<t.length;a+=1)if(t[a].collidesWith(r))return i?(t.splice(a,1),0===t.length&&delete e[r.name],!1):(t[a]=r,r);return!i&&(t.push(r),r)}return!i&&(e[r.name]=[r],e[r.name])},this.getCookie=function(n,r){var o,s;if(t=e[n])for(s=0;s<t.length;s+=1)if((o=t[s]).expiration_date<=Date.now())0===t.length&&delete e[o.name];else if(o.matches(r))return o},this.getCookies=function(t){var n,r,o=[];for(n in e)(r=this.getCookie(n,t))&&o.push(r);return o.toString=function(){return o.join(":")},o.toValueString=function(){return o.map((function(e){return e.toValueString()})).join(";")},o},this):new o}n.prototype.parse=function(e,t,r){if(this instanceof n){var o,s=e.split(";").filter((function(e){return!!e})),i=s[0].match(/([^=]+)=([\s\S]*)/);if(!i)return void console.warn("Invalid cookie header encountered. Header: '"+e+"'");var a=i[1],c=i[2];if("string"!=typeof a||0===a.length||"string"!=typeof c)return void console.warn("Unable to extract values from cookie header. Cookie: '"+e+"'");for(this.name=a,this.value=c,o=1;o<s.length;o+=1)switch(a=(i=s[o].match(/([^=]+)(?:=([\s\S]*))?/))[1].trim().toLowerCase(),c=i[2],a){case"httponly":this.noscript=!0;break;case"expires":this.expiration_date=c?Number(Date.parse(c)):1/0;break;case"path":this.path=c?c.trim():"",this.explicit_path=!0;break;case"domain":this.domain=c?c.trim():"",this.explicit_domain=!!this.domain;break;case"secure":this.secure=!0}return this.explicit_path||(this.path=r||"/"),this.explicit_domain||(this.domain=t),this}return(new n).parse(e,t,r)},n.prototype.matches=function(t){return t===e.All||!(this.noscript&&t.script||this.secure&&!t.secure||!this.collidesWith(t))},n.prototype.collidesWith=function(e){if(this.path&&!e.path||this.domain&&!e.domain)return!1;if(this.path&&0!==e.path.indexOf(this.path))return!1;if(this.explicit_path&&0!==e.path.indexOf(this.path))return!1;var t=e.domain&&e.domain.replace(/^[\.]/,""),n=this.domain&&this.domain.replace(/^[\.]/,"");if(n===t)return!0;if(n){if(!this.explicit_domain)return!1;var r=t.indexOf(n);return-1!==r&&r===t.length-n.length}return!0},t.CookieJar=o,o.prototype.setCookies=function(e,t,o){var s,i,a=[];for(e=(e=Array.isArray(e)?e:e.split(r)).map((function(e){return new n(e,t,o)})),s=0;s<e.length;s+=1)i=e[s],this.setCookie(i,t,o)&&a.push(i);return a}}()},function(e,t){
/*!
       * assertion-error
       * Copyright(c) 2013 Jake Luer <jake@qualiancy.com>
       * MIT Licensed
       */
/*!
       * Return a function that will copy properties from
       * one object to another excluding any originally
       * listed. Returned function will create a new `{}`.
       *
       * @param {String} excluded properties ...
       * @return {Function}
       */
function n(){var e=[].slice.call(arguments);function t(t,n){Object.keys(n).forEach((function(r){~e.indexOf(r)||(t[r]=n[r])}))}return function(){for(var e=[].slice.call(arguments),n=0,r={};n<e.length;n++)t(r,e[n]);return r}}function r(e,t,o){var s=n("name","message","stack","constructor","toJSON")(t||{});for(var i in this.message=e||"Unspecified AssertionError",this.showDiff=!1,s)this[i]=s[i];if(o=o||r,Error.captureStackTrace)Error.captureStackTrace(this,o);else try{throw new Error}catch(e){this.stack=e.stack}}
/*!
       * Inherit from Error.prototype
       */
/*!
       * Primary Exports
       */e.exports=r,r.prototype=Object.create(Error.prototype),
/*!
       * Statically set name
       */
r.prototype.name="AssertionError",
/*!
       * Ensure correct constructor
       */
r.prototype.constructor=r,r.prototype.toJSON=function(e){var t=n("constructor","toJSON","stack")({name:this.name},this);return!1!==e&&this.stack&&(t.stack=this.stack),t}},function(e,t){
/*!
       * Chai - getActual utility
       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
       * MIT Licensed
       */
e.exports=function(e,t){return t.length>4?t[4]:e._obj}},function(e,t,n){
/*!
       * Chai - flag utility
       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
       * MIT Licensed
       */
/*!
       * Module dependencies
       */
var r=n(26),o=n(18);e.exports=function(e){var t=r(e),n=Object.prototype.toString.call(e);if(o.truncateThreshold&&t.length>=o.truncateThreshold){if("[object Function]"===n)return e.name&&""!==e.name?"[Function: "+e.name+"]":"[Function]";if("[object Array]"===n)return"[ Array("+e.length+") ]";if("[object Object]"===n){var s=Object.keys(e);return"{ Object ("+(s.length>2?s.splice(0,2).join(", ")+", ...":s.join(", "))+") }"}return t}return t}},function(e,t,n){"use strict";var r=Function.prototype.toString,o=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\s\(\/]+)/;e.exports=function(e){if("function"!=typeof e)return null;var t="";if(void 0===Function.prototype.name&&void 0===e.name){var n=r.call(e).match(o);n&&(t=n[1])}else t=e.name;return t}},function(e,t){
/*!
       * Chai - getProperties utility
       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
       * MIT Licensed
       */
e.exports=function(e){var t=Object.getOwnPropertyNames(e);function n(e){-1===t.indexOf(e)&&t.push(e)}for(var r=Object.getPrototypeOf(e);null!==r;)Object.getOwnPropertyNames(r).forEach(n),r=Object.getPrototypeOf(r);return t}},function(e,t){
/*!
       * Chai - getOwnEnumerablePropertySymbols utility
       * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
       * MIT Licensed
       */
e.exports=function(e){return"function"!=typeof Object.getOwnPropertySymbols?[]:Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))}},function(e,t,n){var r=n(27),o=n(28),s=n(24),i=n(40),a=n(89),c=r.Request;function u(e,t,n,r){c.call(this,t.toUpperCase(),n),this.redirects(0),this.buffer(),this.app=e,this._asserts=[],this.url="string"==typeof e?e+n:this.serverAddress(e,n,r)}function l(e,t,n){var r=new Error(e);return r.expected=t,r.actual=n,r.showDiff=!0,r}e.exports=u,Object.setPrototypeOf(u.prototype,c.prototype),u.prototype.serverAddress=function(e,t,n){var r;return e.address()||(this._server=e.listen(0)),r=e.address().port,(e instanceof i.Server?"https":"http")+"://"+(n||"127.0.0.1")+":"+r+t},u.prototype.expect=function(e,t,n){return"function"==typeof e?(this._asserts.push(e),this):("function"==typeof t&&this.end(t),"function"==typeof n&&this.end(n),"number"==typeof e?(this._asserts.push(this._assertStatus.bind(this,e)),"function"!=typeof t&&arguments.length>1&&this._asserts.push(this._assertBody.bind(this,t)),this):"string"==typeof t||"number"==typeof t||t instanceof RegExp?(this._asserts.push(this._assertHeader.bind(this,{name:""+e,value:t})),this):(this._asserts.push(this._assertBody.bind(this,e)),this))},u.prototype.end=function(e){var t=this,n=this._server;return c.prototype.end.call(this,(function(r,o){if(n&&n._handle)return n.close(s);function s(){t.assert(r,o,e)}s()})),this},u.prototype.assert=function(e,t,n){var r,o,s={ECONNREFUSED:"Connection refused",ECONNRESET:"Connection reset by peer",EPIPE:"Broken pipe",ETIMEDOUT:"Operation timed out"};for(!t&&e&&(r=e instanceof Error&&"connect"===e.syscall&&Object.getOwnPropertyNames(s).indexOf(e.code)>=0?new Error(e.code+": "+s[e.code]):e),o=0;o<this._asserts.length&&!r;o+=1)r=this._assertFunction(this._asserts[o],t);r||!(e instanceof Error)||t&&e.status===t.status||(r=e),n.call(this,r||null,t)},u.prototype._assertBody=function(e,t){var n,r,s=e instanceof RegExp;if("object"!=typeof e||s){if(e!==t.text){if(n=o.inspect(e),r=o.inspect(t.text),!s)return l("expected "+n+" response body, got "+r,e,t.body);if(!e.test(t.text))return l("expected body "+r+" to match "+e,e,t.body)}}else try{a.deepStrictEqual(e,t.body)}catch(s){return l("expected "+(n=o.inspect(e))+" response body, got "+(r=o.inspect(t.body)),e,t.body)}},u.prototype._assertHeader=function(e,t){var n=e.name,r=t.header[n.toLowerCase()],o=e.value;return void 0===r?new Error('expected "'+n+'" header field'):Array.isArray(r)&&r.toString()===o||o===r?void 0:o instanceof RegExp?o.test(r)?void 0:new Error('expected "'+n+'" matching '+o+', got "'+r+'"'):new Error('expected "'+n+'" of "'+o+'", got "'+r+'"')},u.prototype._assertStatus=function(e,t){var n,r;if(t.status!==e)return n=s.STATUS_CODES[e],r=s.STATUS_CODES[t.status],new Error("expected "+e+' "'+n+'", got '+t.status+' "'+r+'"')},u.prototype._assertFunction=function(e,t){var n;try{n=e(t)}catch(e){n=e}if(n instanceof Error)return n}},function(e,t,n){"use strict";t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){return e.split(/ *; */).reduce((function(e,t){var n=t.split(/ *= */),r=n.shift(),o=n.shift();return r&&o&&(e[r]=o),e}),{})},t.parseLinks=function(e){return e.split(/ *, */).reduce((function(e,t){var n=t.split(/ *; */),r=n[0].slice(1,-1);return e[n[1].split(/ *= */)[1].slice(1,-1)]=r,e}),{})},t.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},function(e,t){e.exports=n(39)},function(e,t){e.exports=n(40)},function(e,t){e.exports=n(41)},function(e,t,n){const{expect:r}=n(43),o=n(66);n(91);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){e.exports=n(16)},function(e,t,n){
/*!
       * chai
       * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
       * MIT Licensed
       */
/*!
       * Dependencies that are used for multiple exports are required here only once
       */
var r=n(45);
/*!
       * test utility
       */t.test=n(46),
/*!
       * type utility
       */
t.type=n(25),
/*!
       * expectTypes utility
       */
t.expectTypes=n(47),
/*!
       * message utility
       */
t.getMessage=n(48),
/*!
       * actual utility
       */
t.getActual=n(32),
/*!
       * Inspect util
       */
t.inspect=n(26),
/*!
       * Object Display util
       */
t.objDisplay=n(33),
/*!
       * Flag utility
       */
t.flag=n(15),
/*!
       * Flag transferring utility
       */
t.transferFlags=n(17),
/*!
       * Deep equal utility
       */
t.eql=n(50),
/*!
       * Deep path info
       */
t.getPathInfo=r.getPathInfo,
/*!
       * Check if a property exists
       */
t.hasProperty=r.hasProperty,
/*!
       * Function name
       */
t.getName=n(34),
/*!
       * add Property
       */
t.addProperty=n(51),
/*!
       * add Method
       */
t.addMethod=n(52),
/*!
       * overwrite Property
       */
t.overwriteProperty=n(53),
/*!
       * overwrite Method
       */
t.overwriteMethod=n(54),
/*!
       * Add a chainable method
       */
t.addChainableMethod=n(55),
/*!
       * Overwrite chainable method
       */
t.overwriteChainableMethod=n(56),
/*!
       * Compare by inspect method
       */
t.compareByInspect=n(57),
/*!
       * Get own enumerable property symbols method
       */
t.getOwnEnumerablePropertySymbols=n(36),
/*!
       * Get own enumerable properties method
       */
t.getOwnEnumerableProperties=n(58),
/*!
       * Checks error against a given set of criteria
       */
t.checkError=n(59),
/*!
       * Proxify util
       */
t.proxify=n(21),
/*!
       * addLengthGuard util
       */
t.addLengthGuard=n(20),
/*!
       * isProxyEnabled helper
       */
t.isProxyEnabled=n(19),
/*!
       * isNaN method
       */
t.isNaN=n(60)},function(e,t,n){"use strict";function r(e,t){return null!=e&&t in Object(e)}function o(e){return e.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map((function(e){var t=/^\[(\d+)\]$/.exec(e);return t?{i:parseFloat(t[1])}:{p:e.replace(/\\([.\[\]])/g,"$1")}}))}function s(e,t,n){var r=e,o=null;n=void 0===n?t.length:n;for(var s=0;s<n;s++){var i=t[s];r&&(r=void 0===i.p?r[i.i]:r[i.p],s===n-1&&(o=r))}return o}function i(e,t){var n=o(t),i=n[n.length-1],a={parent:n.length>1?s(e,n,n.length-1):e,name:i.p||i.i,value:s(e,n)};return a.exists=r(a.parent,a.name),a}e.exports={hasProperty:r,getPathInfo:i,getPathValue:function(e,t){return i(e,t).value},setPathValue:function(e,t,n){return function(e,t,n){for(var r=e,o=n.length,s=null,i=0;i<o;i++){var a=null,c=null;if(s=n[i],i===o-1)r[a=void 0===s.p?s.i:s.p]=t;else if(void 0!==s.p&&r[s.p])r=r[s.p];else if(void 0!==s.i&&r[s.i])r=r[s.i];else{var u=n[i+1];a=void 0===s.p?s.i:s.p,c=void 0===u.p?[]:{},r[a]=c,r=r[a]}}}(e,n,o(t)),e}}},function(e,t,n){
/*!
       * Chai - test utility
       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
       * MIT Licensed
       */
/*!
       * Module dependencies
       */
var r=n(15);e.exports=function(e,t){var n=r(e,"negate"),o=t[0];return n?!o:o}},function(e,t,n){
/*!
       * Chai - expectTypes utility
       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
       * MIT Licensed
       */
var r=n(31),o=n(15),s=n(25);e.exports=function(e,t){var n=o(e,"message"),i=o(e,"ssfi");n=n?n+": ":"",e=o(e,"object"),(t=t.map((function(e){return e.toLowerCase()}))).sort();var a=t.map((function(e,n){var r=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an":"a";return(t.length>1&&n===t.length-1?"or ":"")+r+" "+e})).join(", "),c=s(e).toLowerCase();if(!t.some((function(e){return c===e})))throw new r(n+"object tested must be "+a+", but "+c+" given",void 0,i)}},function(e,t,n){
/*!
       * Chai - message composition utility
       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
       * MIT Licensed
       */
/*!
       * Module dependencies
       */
var r=n(15),o=n(32),s=n(33);e.exports=function(e,t){var n=r(e,"negate"),i=r(e,"object"),a=t[3],c=o(e,t),u=n?t[2]:t[1],l=r(e,"message");return"function"==typeof u&&(u=u()),u=(u=u||"").replace(/#\{this\}/g,(function(){return s(i)})).replace(/#\{act\}/g,(function(){return s(c)})).replace(/#\{exp\}/g,(function(){return s(a)})),l?l+": "+u:u}},function(e,t){
/*!
       * Chai - getEnumerableProperties utility
       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
       * MIT Licensed
       */
e.exports=function(e){var t=[];for(var n in e)t.push(n);return t}},function(e,t,n){"use strict";
/*!
       * deep-eql
       * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
       * MIT Licensed
       */var r=n(25);function o(){this._key="chai/deep-eql__"+Math.random()+Date.now()}o.prototype={get:function(e){return e[this._key]},set:function(e,t){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:t,configurable:!0})}};var s="function"==typeof WeakMap?WeakMap:o;
/*!
       * Check to see if the MemoizeMap has recorded a result of the two operands
       *
       * @param {Mixed} leftHandOperand
       * @param {Mixed} rightHandOperand
       * @param {MemoizeMap} memoizeMap
       * @returns {Boolean|null} result
      */function i(e,t,n){if(!n||y(e)||y(t))return null;var r=n.get(e);if(r){var o=r.get(t);if("boolean"==typeof o)return o}return null}
/*!
       * Set the result of the equality into the MemoizeMap
       *
       * @param {Mixed} leftHandOperand
       * @param {Mixed} rightHandOperand
       * @param {MemoizeMap} memoizeMap
       * @param {Boolean} result
      */function a(e,t,n,r){if(n&&!y(e)&&!y(t)){var o=n.get(e);o?o.set(t,r):((o=new s).set(t,r),n.set(e,o))}}
/*!
       * Primary Export
       */function c(e,t,n){if(n&&n.comparator)return l(e,t,n);var r=u(e,t);return null!==r?r:l(e,t,n)}function u(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t||!y(e)&&!y(t)&&null}
/*!
       * The main logic of the `deepEqual` function.
       *
       * @param {Mixed} leftHandOperand
       * @param {Mixed} rightHandOperand
       * @param {Object} [options] (optional) Additional options
       * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
       * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
          complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
          references to blow the stack.
       * @return {Boolean} equal match
      */function l(e,t,n){(n=n||{}).memoize=!1!==n.memoize&&(n.memoize||new s);var o=n&&n.comparator,l=i(e,t,n.memoize);if(null!==l)return l;var y=i(t,e,n.memoize);if(null!==y)return y;if(o){var m=o(e,t);if(!1===m||!0===m)return a(e,t,n.memoize,m),m;var b=u(e,t);if(null!==b)return b}var g=r(e);if(g!==r(t))return a(e,t,n.memoize,!1),!1;a(e,t,n.memoize,!0);var w=function(e,t,n,r){switch(n){case"String":case"Number":case"Boolean":case"Date":return c(e.valueOf(),t.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":case"Error":return e===t;case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return d(e,t,r);case"RegExp":
/*!
                       * Compare two Regular Expressions for equality.
                       *
                       * @param {RegExp} leftHandOperand
                       * @param {RegExp} rightHandOperand
                       * @return {Boolean} result
                       */
return function(e,t){return e.toString()===t.toString()}
/*!
                       * Compare two Sets/Maps for equality. Faster than other equality functions.
                       *
                       * @param {Set} leftHandOperand
                       * @param {Set} rightHandOperand
                       * @param {Object} [options] (Optional)
                       * @return {Boolean} result
                       */(e,t);case"Generator":
/*!
                       * Simple equality for generator objects such as those returned by generator functions.
                       *
                       * @param {Iterable} leftHandOperand
                       * @param {Iterable} rightHandOperand
                       * @param {Object} [options] (Optional)
                       * @return {Boolean} result
                       */
return function(e,t,n){return d(h(e),h(t),n)}
/*!
                       * Determine if the given object has an @@iterator function.
                       *
                       * @param {Object} target
                       * @return {Boolean} `true` if the object has an @@iterator function.
                       */(e,t,r);case"DataView":return d(new Uint8Array(e.buffer),new Uint8Array(t.buffer),r);case"ArrayBuffer":return d(new Uint8Array(e),new Uint8Array(t),r);case"Set":case"Map":return function(e,t,n){if(e.size!==t.size)return!1;if(0===e.size)return!0;var r=[],o=[];return e.forEach((function(e,t){r.push([e,t])})),t.forEach((function(e,t){o.push([e,t])})),d(r.sort(),o.sort(),n);
/*!
                 * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
                 *
                 * @param {Iterable} leftHandOperand
                 * @param {Iterable} rightHandOperand
                 * @param {Object} [options] (Optional)
                 * @return {Boolean} result
                 */}(e,t,r);default:
/*!
                       * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
                       * for each enumerable key in the object.
                       *
                       * @param {Mixed} leftHandOperand
                       * @param {Mixed} rightHandOperand
                       * @param {Object} [options] (Optional)
                       * @return {Boolean} result
                       */
return function(e,t,n){var r=f(e),o=f(t);if(r.length&&r.length===o.length)return r.sort(),o.sort(),!1!==d(r,o)&&
/*!
                           * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
                           * each key. If any value of the given key is not equal, the function will return false (early).
                           *
                           * @param {Mixed} leftHandOperand
                           * @param {Mixed} rightHandOperand
                           * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
                           * @param {Object} [options] (Optional)
                           * @return {Boolean} result
                           */
function(e,t,n,r){var o=n.length;if(0===o)return!0;for(var s=0;s<o;s+=1)if(!1===c(e[n[s]],t[n[s]],r))return!1;return!0}(e,t,r,n);var s=p(e),i=p(t);return s.length&&s.length===i.length?(s.sort(),i.sort(),d(s,i,n)):0===r.length&&0===s.length&&0===o.length&&0===i.length}
/*!
                       * Returns true if the argument is a primitive.
                       *
                       * This intentionally returns true for all objects that can be compared by reference,
                       * including functions and symbols.
                       *
                       * @param {Mixed} value
                       * @return {Boolean} result
                       */(e,t,r)}}(e,t,g,n);return a(e,t,n.memoize,w),w}function d(e,t,n){var r=e.length;if(r!==t.length)return!1;if(0===r)return!0;for(var o=-1;++o<r;)if(!1===c(e[o],t[o],n))return!1;return!0}
/*!
       * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
       * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
       *
       * @param {Object} target
       * @returns {Array} an array of entries from the @@iterator function
       */function p(e){if(function(e){return"undefined"!=typeof Symbol&&"object"==typeof e&&void 0!==Symbol.iterator&&"function"==typeof e[Symbol.iterator]}(e))try{return h(e[Symbol.iterator]())}catch(e){return[]}return[]}
/*!
       * Gets all entries from a Generator. This will consume the generator - which could have side effects.
       *
       * @param {Generator} target
       * @returns {Array} an array of entries from the Generator.
       */function h(e){for(var t=e.next(),n=[t.value];!1===t.done;)t=e.next(),n.push(t.value);return n}
/*!
       * Gets all own and inherited enumerable keys from a target.
       *
       * @param {Object} target
       * @returns {Array} an array of own and inherited enumerable keys from the target.
       */function f(e){var t=[];for(var n in e)t.push(n);return t}function y(e){return null===e||"object"!=typeof e}e.exports=c,e.exports.MemoizeMap=s},function(e,t,n){
/*!
       * Chai - addProperty utility
       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
       * MIT Licensed
       */
var r=n(16),o=n(15),s=n(19),i=n(17);e.exports=function(e,t,n){n=void 0===n?function(){}:n,Object.defineProperty(e,t,{get:function e(){s()||o(this,"lockSsfi")||o(this,"ssfi",e);var t=n.call(this);if(void 0!==t)return t;var a=new r.Assertion;return i(this,a),a},configurable:!0})}},function(e,t,n){
/*!
       * Chai - addMethod utility
       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
       * MIT Licensed
       */
var r=n(20),o=n(16),s=n(15),i=n(21),a=n(17);e.exports=function(e,t,n){var c=function(){s(this,"lockSsfi")||s(this,"ssfi",c);var e=n.apply(this,arguments);if(void 0!==e)return e;var t=new o.Assertion;return a(this,t),t};r(c,t,!1),e[t]=i(c,t)}},function(e,t,n){
/*!
       * Chai - overwriteProperty utility
       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
       * MIT Licensed
       */
var r=n(16),o=n(15),s=n(19),i=n(17);e.exports=function(e,t,n){var a=Object.getOwnPropertyDescriptor(e,t),c=function(){};a&&"function"==typeof a.get&&(c=a.get),Object.defineProperty(e,t,{get:function e(){s()||o(this,"lockSsfi")||o(this,"ssfi",e);var t=o(this,"lockSsfi");o(this,"lockSsfi",!0);var a=n(c).call(this);if(o(this,"lockSsfi",t),void 0!==a)return a;var u=new r.Assertion;return i(this,u),u},configurable:!0})}},function(e,t,n){
/*!
       * Chai - overwriteMethod utility
       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
       * MIT Licensed
       */
var r=n(20),o=n(16),s=n(15),i=n(21),a=n(17);e.exports=function(e,t,n){var c=e[t],u=function(){throw new Error(t+" is not a function")};c&&"function"==typeof c&&(u=c);var l=function(){s(this,"lockSsfi")||s(this,"ssfi",l);var e=s(this,"lockSsfi");s(this,"lockSsfi",!0);var t=n(u).apply(this,arguments);if(s(this,"lockSsfi",e),void 0!==t)return t;var r=new o.Assertion;return a(this,r),r};r(l,t,!1),e[t]=i(l,t)}},function(e,t,n){
/*!
       * Chai - addChainingMethod utility
       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
       * MIT Licensed
       */
/*!
       * Module dependencies
       */
var r=n(20),o=n(16),s=n(15),i=n(21),a=n(17),c="function"==typeof Object.setPrototypeOf,u=function(){},l=Object.getOwnPropertyNames(u).filter((function(e){var t=Object.getOwnPropertyDescriptor(u,e);return"object"!=typeof t||!t.configurable})),d=Function.prototype.call,p=Function.prototype.apply;e.exports=function(e,t,n,u){"function"!=typeof u&&(u=function(){});var h={method:n,chainingBehavior:u};e.__methods||(e.__methods={}),e.__methods[t]=h,Object.defineProperty(e,t,{get:function(){h.chainingBehavior.call(this);var n=function(){s(this,"lockSsfi")||s(this,"ssfi",n);var e=h.method.apply(this,arguments);if(void 0!==e)return e;var t=new o.Assertion;return a(this,t),t};if(r(n,t,!0),c){var u=Object.create(this);u.call=d,u.apply=p,Object.setPrototypeOf(n,u)}else Object.getOwnPropertyNames(e).forEach((function(t){if(-1===l.indexOf(t)){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r)}}));return a(this,n),i(n)},configurable:!0})}},function(e,t,n){
/*!
       * Chai - overwriteChainableMethod utility
       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
       * MIT Licensed
       */
var r=n(16),o=n(17);e.exports=function(e,t,n,s){var i=e.__methods[t],a=i.chainingBehavior;i.chainingBehavior=function(){var e=s(a).call(this);if(void 0!==e)return e;var t=new r.Assertion;return o(this,t),t};var c=i.method;i.method=function(){var e=n(c).apply(this,arguments);if(void 0!==e)return e;var t=new r.Assertion;return o(this,t),t}}},function(e,t,n){
/*!
       * Chai - compareByInspect utility
       * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
       * MIT Licensed
       */
/*!
       * Module dependencies
       */
var r=n(26);e.exports=function(e,t){return r(e)<r(t)?-1:1}},function(e,t,n){
/*!
       * Chai - getOwnEnumerableProperties utility
       * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
       * MIT Licensed
       */
/*!
       * Module dependencies
       */
var r=n(36);e.exports=function(e){return Object.keys(e).concat(r(e))}},function(e,t,n){"use strict";var r=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\(\/]+)/;function o(e){var t="";if(void 0===e.name){var n=String(e).match(r);n&&(t=n[1])}else t=e.name;return t}e.exports={compatibleInstance:function(e,t){return t instanceof Error&&e===t},compatibleConstructor:function(e,t){return t instanceof Error?e.constructor===t.constructor||e instanceof t.constructor:(t.prototype instanceof Error||t===Error)&&(e.constructor===t||e instanceof t)},compatibleMessage:function(e,t){var n="string"==typeof e?e:e.message;return t instanceof RegExp?t.test(n):"string"==typeof t&&-1!==n.indexOf(t)},getMessage:function(e){var t="";return e&&e.message?t=e.message:"string"==typeof e&&(t=e),t},getConstructorName:function(e){var t=e;return e instanceof Error?t=o(e.constructor):"function"==typeof e&&(t=o(e).trim()||o(new e)),t}}},function(e,t){e.exports=Number.isNaN||
/*!
       * Chai - isNaN utility
       * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
       * MIT Licensed
       */
function(e){return e!=e}},function(e,t,n){
/*!
       * chai
       * http://chaijs.com
       * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
       * MIT Licensed
       */
var r=n(18);e.exports=function(e,t){
/*!
             * Module dependencies.
             */
var n=e.AssertionError,o=t.flag;
/*!
             * Module export.
             */
/*!
             * Assertion Constructor
             *
             * Creates object for chaining.
             *
             * `Assertion` objects contain metadata in the form of flags. Three flags can
             * be assigned during instantiation by passing arguments to this constructor:
             *
             * - `object`: This flag contains the target of the assertion. For example, in
             *   the assertion `expect(numKittens).to.equal(7);`, the `object` flag will
             *   contain `numKittens` so that the `equal` assertion can reference it when
             *   needed.
             *
             * - `message`: This flag contains an optional custom error message to be
             *   prepended to the error message that's generated by the assertion when it
             *   fails.
             *
             * - `ssfi`: This flag stands for "start stack function indicator". It
             *   contains a function reference that serves as the starting point for
             *   removing frames from the stack trace of the error that's created by the
             *   assertion when it fails. The goal is to provide a cleaner stack trace to
             *   end users by removing Chai's internal functions. Note that it only works
             *   in environments that support `Error.captureStackTrace`, and only when
             *   `Chai.config.includeStack` hasn't been set to `false`.
             *
             * - `lockSsfi`: This flag controls whether or not the given `ssfi` flag
             *   should retain its current value, even as assertions are chained off of
             *   this object. This is usually set to `true` when creating a new assertion
             *   from within another assertion. It's also temporarily set to `true` before
             *   an overwritten assertion gets called by the overwriting assertion.
             *
             * @param {Mixed} obj target of the assertion
             * @param {String} msg (optional) custom error message
             * @param {Function} ssfi (optional) starting point for removing stack frames
             * @param {Boolean} lockSsfi (optional) whether or not the ssfi flag is locked
             * @api private
             */function s(e,n,r,i){return o(this,"ssfi",r||s),o(this,"lockSsfi",i),o(this,"object",e),o(this,"message",n),t.proxify(this)}e.Assertion=s,Object.defineProperty(s,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack},set:function(e){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack=e}}),Object.defineProperty(s,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff},set:function(e){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff=e}}),s.addProperty=function(e,n){t.addProperty(this.prototype,e,n)},s.addMethod=function(e,n){t.addMethod(this.prototype,e,n)},s.addChainableMethod=function(e,n,r){t.addChainableMethod(this.prototype,e,n,r)},s.overwriteProperty=function(e,n){t.overwriteProperty(this.prototype,e,n)},s.overwriteMethod=function(e,n){t.overwriteMethod(this.prototype,e,n)},s.overwriteChainableMethod=function(e,n,r){t.overwriteChainableMethod(this.prototype,e,n,r)},s.prototype.assert=function(e,s,i,a,c,u){var l=t.test(this,arguments);if(!1!==u&&(u=!0),void 0===a&&void 0===c&&(u=!1),!0!==r.showDiff&&(u=!1),!l){s=t.getMessage(this,arguments);var d=t.getActual(this,arguments);throw new n(s,{actual:d,expected:a,showDiff:u},r.includeStack?this.assert:o(this,"ssfi"))}},
/*!
             * ### ._obj
             *
             * Quick reference to stored `actual` value for plugin developers.
             *
             * @api private
             */
Object.defineProperty(s.prototype,"_obj",{get:function(){return o(this,"object")},set:function(e){o(this,"object",e)}})}},function(e,t){
/*!
       * chai
       * http://chaijs.com
       * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
       * MIT Licensed
       */
e.exports=function(e,t){var n=e.Assertion,r=e.AssertionError,o=t.flag;function s(e,n){n&&o(this,"message",n),e=e.toLowerCase();var r=o(this,"object"),s=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an ":"a ";this.assert(e===t.type(r).toLowerCase(),"expected #{this} to be "+s+e,"expected #{this} not to be "+s+e)}function i(e,n){return t.isNaN(e)&&t.isNaN(n)||e===n}function a(){o(this,"contains",!0)}function c(e,s){s&&o(this,"message",s);var a=o(this,"object"),c=t.type(a).toLowerCase(),u=o(this,"message"),l=o(this,"negate"),d=o(this,"ssfi"),p=o(this,"deep"),h=p?"deep ":"";u=u?u+": ":"";var f=!1;switch(c){case"string":f=-1!==a.indexOf(e);break;case"weakset":if(p)throw new r(u+"unable to use .deep.include with WeakSet",void 0,d);f=a.has(e);break;case"map":var y=p?t.eql:i;a.forEach((function(t){f=f||y(t,e)}));break;case"set":p?a.forEach((function(n){f=f||t.eql(n,e)})):f=a.has(e);break;case"array":f=p?a.some((function(n){return t.eql(n,e)})):-1!==a.indexOf(e);break;default:if(e!==Object(e))throw new r(u+"object tested must be an array, a map, an object, a set, a string, or a weakset, but "+c+" given",void 0,d);var m=Object.keys(e),b=null,g=0;if(m.forEach((function(s){var i=new n(a);if(t.transferFlags(this,i,!0),o(i,"lockSsfi",!0),l&&1!==m.length)try{i.property(s,e[s])}catch(e){if(!t.checkError.compatibleConstructor(e,r))throw e;null===b&&(b=e),g++}else i.property(s,e[s])}),this),l&&m.length>1&&g===m.length)throw b;return}this.assert(f,"expected #{this} to "+h+"include "+t.inspect(e),"expected #{this} to not "+h+"include "+t.inspect(e))}function u(){var e=o(this,"object"),n=t.type(e);this.assert("Arguments"===n,"expected #{this} to be arguments but got "+n,"expected #{this} to not be arguments")}function l(e,t){t&&o(this,"message",t);var n=o(this,"object");if(o(this,"deep")){var r=o(this,"lockSsfi");o(this,"lockSsfi",!0),this.eql(e),o(this,"lockSsfi",r)}else this.assert(e===n,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",e,this._obj,!0)}function d(e,n){n&&o(this,"message",n),this.assert(t.eql(e,o(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",e,this._obj,!0)}function p(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to above must be a number":i=l+"the argument to above must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y>e,"expected #{this} to have a "+m+" above #{exp} but got #{act}","expected #{this} to not have a "+m+" above #{exp}",e,y)}else this.assert(a>e,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",e)}function h(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to least must be a number":i=l+"the argument to least must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y>=e,"expected #{this} to have a "+m+" at least #{exp} but got #{act}","expected #{this} to have a "+m+" below #{exp}",e,y)}else this.assert(a>=e,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",e)}function f(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to below must be a number":i=l+"the argument to below must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y<e,"expected #{this} to have a "+m+" below #{exp} but got #{act}","expected #{this} to not have a "+m+" below #{exp}",e,y)}else this.assert(a<e,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",e)}function y(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to most must be a number":i=l+"the argument to most must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y<=e,"expected #{this} to have a "+m+" at most #{exp} but got #{act}","expected #{this} to have a "+m+" above #{exp}",e,y)}else this.assert(a<=e,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",e)}function m(e,n){n&&o(this,"message",n);var s=o(this,"object"),i=o(this,"ssfi"),a=o(this,"message");try{var c=s instanceof e}catch(n){if(n instanceof TypeError)throw new r((a=a?a+": ":"")+"The instanceof assertion needs a constructor but "+t.type(e)+" was given.",void 0,i);throw n}var u=t.getName(e);null===u&&(u="an unnamed constructor"),this.assert(c,"expected #{this} to be an instance of "+u,"expected #{this} to not be an instance of "+u)}function b(e,n,s){s&&o(this,"message",s);var i=o(this,"nested"),a=o(this,"own"),c=o(this,"message"),u=o(this,"object"),l=o(this,"ssfi"),d=typeof e;if(c=c?c+": ":"",i){if("string"!==d)throw new r(c+"the argument to property must be a string when using nested syntax",void 0,l)}else if("string"!==d&&"number"!==d&&"symbol"!==d)throw new r(c+"the argument to property must be a string, number, or symbol",void 0,l);if(i&&a)throw new r(c+'The "nested" and "own" flags cannot be combined.',void 0,l);if(null==u)throw new r(c+"Target cannot be null or undefined.",void 0,l);var p,h=o(this,"deep"),f=o(this,"negate"),y=i?t.getPathInfo(u,e):null,m=i?y.value:u[e],b="";h&&(b+="deep "),a&&(b+="own "),i&&(b+="nested "),b+="property ",p=a?Object.prototype.hasOwnProperty.call(u,e):i?y.exists:t.hasProperty(u,e),f&&1!==arguments.length||this.assert(p,"expected #{this} to have "+b+t.inspect(e),"expected #{this} to not have "+b+t.inspect(e)),arguments.length>1&&this.assert(p&&(h?t.eql(n,m):n===m),"expected #{this} to have "+b+t.inspect(e)+" of #{exp}, but got #{act}","expected #{this} to not have "+b+t.inspect(e)+" of #{act}",n,m),o(this,"object",m)}function g(e,t,n){o(this,"own",!0),b.apply(this,arguments)}function w(e,n,r){"string"==typeof n&&(r=n,n=null),r&&o(this,"message",r);var s=o(this,"object"),i=Object.getOwnPropertyDescriptor(Object(s),e);i&&n?this.assert(t.eql(n,i),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to match "+t.inspect(n)+", got "+t.inspect(i),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to not match "+t.inspect(n),n,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+t.inspect(e),"expected #{this} to not have an own property descriptor for "+t.inspect(e)),o(this,"object",i)}function v(){o(this,"doLength",!0)}function _(e,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=t.type(i).toLowerCase(),c=o(this,"message"),u=o(this,"ssfi"),l="length";switch(a){case"map":case"set":l="size",s=i.size;break;default:new n(i,c,u,!0).to.have.property("length"),s=i.length}this.assert(s==e,"expected #{this} to have a "+l+" of #{exp} but got #{act}","expected #{this} to not have a "+l+" of #{act}",e,s)}function x(e,t){t&&o(this,"message",t);var n=o(this,"object");this.assert(e.exec(n),"expected #{this} to match "+e,"expected #{this} not to match "+e)}function E(e){var n,s,i=o(this,"object"),a=t.type(i),c=t.type(e),u=o(this,"ssfi"),l=o(this,"deep"),d="",p=!0,h=o(this,"message"),f=(h=h?h+": ":"")+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if("Map"===a||"Set"===a)d=l?"deeply ":"",s=[],i.forEach((function(e,t){s.push(t)})),"Array"!==c&&(e=Array.prototype.slice.call(arguments));else{switch(s=t.getOwnEnumerableProperties(i),c){case"Array":if(arguments.length>1)throw new r(f,void 0,u);break;case"Object":if(arguments.length>1)throw new r(f,void 0,u);e=Object.keys(e);break;default:e=Array.prototype.slice.call(arguments)}e=e.map((function(e){return"symbol"==typeof e?e:String(e)}))}if(!e.length)throw new r(h+"keys required",void 0,u);var y=e.length,m=o(this,"any"),b=o(this,"all"),g=e;if(m||b||(b=!0),m&&(p=g.some((function(e){return s.some((function(n){return l?t.eql(e,n):e===n}))}))),b&&(p=g.every((function(e){return s.some((function(n){return l?t.eql(e,n):e===n}))})),o(this,"contains")||(p=p&&e.length==s.length)),y>1){var w=(e=e.map((function(e){return t.inspect(e)}))).pop();b&&(n=e.join(", ")+", and "+w),m&&(n=e.join(", ")+", or "+w)}else n=t.inspect(e[0]);n=(y>1?"keys ":"key ")+n,n=(o(this,"contains")?"contain ":"have ")+n,this.assert(p,"expected #{this} to "+d+n,"expected #{this} to not "+d+n,g.slice(0).sort(t.compareByInspect),s.sort(t.compareByInspect),!0)}function S(e,r,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"ssfi"),u=o(this,"message"),l=o(this,"negate")||!1;new n(a,u,c,!0).is.a("function"),(e instanceof RegExp||"string"==typeof e)&&(r=e,e=null);try{a()}catch(e){i=e}var d=void 0===e&&void 0===r,p=Boolean(e&&r),h=!1,f=!1;if(d||!d&&!l){var y="an error";e instanceof Error?y="#{exp}":e&&(y=t.checkError.getConstructorName(e)),this.assert(i,"expected #{this} to throw "+y,"expected #{this} to not throw an error but #{act} was thrown",e&&e.toString(),i instanceof Error?i.toString():"string"==typeof i?i:i&&t.checkError.getConstructorName(i))}if(e&&i&&(e instanceof Error&&t.checkError.compatibleInstance(i,e)===l&&(p&&l?h=!0:this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i&&!l?" but #{act} was thrown":""),e.toString(),i.toString())),t.checkError.compatibleConstructor(i,e)===l&&(p&&l?h=!0:this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&t.checkError.getConstructorName(e),i instanceof Error?i.toString():i&&t.checkError.getConstructorName(i)))),i&&null!=r){var m="including";r instanceof RegExp&&(m="matching"),t.checkError.compatibleMessage(i,r)===l&&(p&&l?f=!0:this.assert(l,"expected #{this} to throw error "+m+" #{exp} but got #{act}","expected #{this} to throw error not "+m+" #{exp}",r,t.checkError.getMessage(i)))}h&&f&&this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&t.checkError.getConstructorName(e),i instanceof Error?i.toString():i&&t.checkError.getConstructorName(i)),o(this,"object",i)}function O(e,n){n&&o(this,"message",n);var r=o(this,"object"),s=o(this,"itself"),i="function"!=typeof r||s?r[e]:r.prototype[e];this.assert("function"==typeof i,"expected #{this} to respond to "+t.inspect(e),"expected #{this} to not respond to "+t.inspect(e))}function P(e,n){n&&o(this,"message",n);var r=e(o(this,"object"));this.assert(r,"expected #{this} to satisfy "+t.objDisplay(e),"expected #{this} to not satisfy"+t.objDisplay(e),!o(this,"negate"),r)}function k(e,t,s){s&&o(this,"message",s);var i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");if(new n(i,a,c,!0).is.a("number"),"number"!=typeof e||"number"!=typeof t)throw new r((a=a?a+": ":"")+"the arguments to closeTo or approximately must be numbers",void 0,c);this.assert(Math.abs(i-e)<=t,"expected #{this} to be close to "+e+" +/- "+t,"expected #{this} not to be close to "+e+" +/- "+t)}function j(e,t,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),s=e[t]):(new n(e,a,c,!0).is.a("function"),s=e()),i();var u=null==t?e():e[t],l=null==t?s:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",s),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","change"),o(this,"realDelta",u!==s),this.assert(s!==u,"expected "+l+" to change","expected "+l+" to not change")}function q(e,t,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),s=e[t]):(new n(e,a,c,!0).is.a("function"),s=e()),new n(s,a,c,!0).is.a("number"),i();var u=null==t?e():e[t],l=null==t?s:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",s),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","increase"),o(this,"realDelta",u-s),this.assert(u-s>0,"expected "+l+" to increase","expected "+l+" to not increase")}function T(e,t,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),s=e[t]):(new n(e,a,c,!0).is.a("function"),s=e()),new n(s,a,c,!0).is.a("number"),i();var u=null==t?e():e[t],l=null==t?s:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",s),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","decrease"),o(this,"realDelta",s-u),this.assert(u-s<0,"expected "+l+" to decrease","expected "+l+" to not decrease")}["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still"].forEach((function(e){n.addProperty(e)})),n.addProperty("not",(function(){o(this,"negate",!0)})),n.addProperty("deep",(function(){o(this,"deep",!0)})),n.addProperty("nested",(function(){o(this,"nested",!0)})),n.addProperty("own",(function(){o(this,"own",!0)})),n.addProperty("ordered",(function(){o(this,"ordered",!0)})),n.addProperty("any",(function(){o(this,"any",!0),o(this,"all",!1)})),n.addProperty("all",(function(){o(this,"all",!0),o(this,"any",!1)})),n.addChainableMethod("an",s),n.addChainableMethod("a",s),n.addChainableMethod("include",c,a),n.addChainableMethod("contain",c,a),n.addChainableMethod("contains",c,a),n.addChainableMethod("includes",c,a),n.addProperty("ok",(function(){this.assert(o(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")})),n.addProperty("true",(function(){this.assert(!0===o(this,"object"),"expected #{this} to be true","expected #{this} to be false",!o(this,"negate"))})),n.addProperty("false",(function(){this.assert(!1===o(this,"object"),"expected #{this} to be false","expected #{this} to be true",!!o(this,"negate"))})),n.addProperty("null",(function(){this.assert(null===o(this,"object"),"expected #{this} to be null","expected #{this} not to be null")})),n.addProperty("undefined",(function(){this.assert(void 0===o(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")})),n.addProperty("NaN",(function(){this.assert(t.isNaN(o(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")})),n.addProperty("exist",(function(){var e=o(this,"object");this.assert(null!=e,"expected #{this} to exist","expected #{this} to not exist")})),n.addProperty("empty",(function(){var e,n=o(this,"object"),s=o(this,"ssfi"),i=o(this,"message");switch(i=i?i+": ":"",t.type(n).toLowerCase()){case"array":case"string":e=n.length;break;case"map":case"set":e=n.size;break;case"weakmap":case"weakset":throw new r(i+".empty was passed a weak collection",void 0,s);case"function":var a=i+".empty was passed a function "+t.getName(n);throw new r(a.trim(),void 0,s);default:if(n!==Object(n))throw new r(i+".empty was passed non-string primitive "+t.inspect(n),void 0,s);e=Object.keys(n).length}this.assert(0===e,"expected #{this} to be empty","expected #{this} not to be empty")})),n.addProperty("arguments",u),n.addProperty("Arguments",u),n.addMethod("equal",l),n.addMethod("equals",l),n.addMethod("eq",l),n.addMethod("eql",d),n.addMethod("eqls",d),n.addMethod("above",p),n.addMethod("gt",p),n.addMethod("greaterThan",p),n.addMethod("least",h),n.addMethod("gte",h),n.addMethod("below",f),n.addMethod("lt",f),n.addMethod("lessThan",f),n.addMethod("most",y),n.addMethod("lte",y),n.addMethod("within",(function(e,s,i){i&&o(this,"message",i);var a,c=o(this,"object"),u=o(this,"doLength"),l=o(this,"message"),d=l?l+": ":"",p=o(this,"ssfi"),h=t.type(c).toLowerCase(),f=t.type(e).toLowerCase(),y=t.type(s).toLowerCase(),m=!0,b="date"===f&&"date"===y?e.toUTCString()+".."+s.toUTCString():e+".."+s;if(u&&"map"!==h&&"set"!==h&&new n(c,l,p,!0).to.have.property("length"),u||"date"!==h||"date"===f&&"date"===y?"number"===f&&"number"===y||!u&&"number"!==h?u||"date"===h||"number"===h?m=!1:a=d+"expected "+("string"===h?"'"+c+"'":c)+" to be a number or a date":a=d+"the arguments to within must be numbers":a=d+"the arguments to within must be dates",m)throw new r(a,void 0,p);if(u){var g,w="length";"map"===h||"set"===h?(w="size",g=c.size):g=c.length,this.assert(g>=e&&g<=s,"expected #{this} to have a "+w+" within "+b,"expected #{this} to not have a "+w+" within "+b)}else this.assert(c>=e&&c<=s,"expected #{this} to be within "+b,"expected #{this} to not be within "+b)})),n.addMethod("instanceof",m),n.addMethod("instanceOf",m),n.addMethod("property",b),n.addMethod("ownProperty",g),n.addMethod("haveOwnProperty",g),n.addMethod("ownPropertyDescriptor",w),n.addMethod("haveOwnPropertyDescriptor",w),n.addChainableMethod("length",_,v),n.addChainableMethod("lengthOf",_,v),n.addMethod("match",x),n.addMethod("matches",x),n.addMethod("string",(function(e,r){r&&o(this,"message",r);var s=o(this,"object"),i=o(this,"message"),a=o(this,"ssfi");new n(s,i,a,!0).is.a("string"),this.assert(~s.indexOf(e),"expected #{this} to contain "+t.inspect(e),"expected #{this} to not contain "+t.inspect(e))})),n.addMethod("keys",E),n.addMethod("key",E),n.addMethod("throw",S),n.addMethod("throws",S),n.addMethod("Throw",S),n.addMethod("respondTo",O),n.addMethod("respondsTo",O),n.addProperty("itself",(function(){o(this,"itself",!0)})),n.addMethod("satisfy",P),n.addMethod("satisfies",P),n.addMethod("closeTo",k),n.addMethod("approximately",k),n.addMethod("members",(function(e,r){r&&o(this,"message",r);var s=o(this,"object"),i=o(this,"message"),a=o(this,"ssfi");new n(s,i,a,!0).to.be.an("array"),new n(e,i,a,!0).to.be.an("array");var c,u,l,d=o(this,"contains"),p=o(this,"ordered");d?(u="expected #{this} to be "+(c=p?"an ordered superset":"a superset")+" of #{exp}",l="expected #{this} to not be "+c+" of #{exp}"):(u="expected #{this} to have the same "+(c=p?"ordered members":"members")+" as #{exp}",l="expected #{this} to not have the same "+c+" as #{exp}");var h=o(this,"deep")?t.eql:void 0;this.assert(function(e,t,n,r,o){if(!r){if(e.length!==t.length)return!1;t=t.slice()}return e.every((function(e,s){if(o)return n?n(e,t[s]):e===t[s];if(!n){var i=t.indexOf(e);return-1!==i&&(r||t.splice(i,1),!0)}return t.some((function(o,s){return!!n(e,o)&&(r||t.splice(s,1),!0)}))}))}(e,s,h,d,p),u,l,e,s,!0)})),n.addMethod("oneOf",(function(e,t){t&&o(this,"message",t);var r=o(this,"object"),s=o(this,"message"),i=o(this,"ssfi");new n(e,s,i,!0).to.be.an("array"),this.assert(e.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",e,r)})),n.addMethod("change",j),n.addMethod("changes",j),n.addMethod("increase",q),n.addMethod("increases",q),n.addMethod("decrease",T),n.addMethod("decreases",T),n.addMethod("by",(function(e,t){t&&o(this,"message",t);var n,r=o(this,"deltaMsgObj"),s=o(this,"initialDeltaValue"),i=o(this,"finalDeltaValue"),a=o(this,"deltaBehavior"),c=o(this,"realDelta");n="change"===a?Math.abs(i-s)===Math.abs(e):c===Math.abs(e),this.assert(n,"expected "+r+" to "+a+" by "+e,"expected "+r+" to not "+a+" by "+e)})),n.addProperty("extensible",(function(){var e=o(this,"object"),t=e===Object(e)&&Object.isExtensible(e);this.assert(t,"expected #{this} to be extensible","expected #{this} to not be extensible")})),n.addProperty("sealed",(function(){var e=o(this,"object"),t=e!==Object(e)||Object.isSealed(e);this.assert(t,"expected #{this} to be sealed","expected #{this} to not be sealed")})),n.addProperty("frozen",(function(){var e=o(this,"object"),t=e!==Object(e)||Object.isFrozen(e);this.assert(t,"expected #{this} to be frozen","expected #{this} to not be frozen")})),n.addProperty("finite",(function(e){var t=o(this,"object");this.assert("number"==typeof t&&isFinite(t),"expected #{this} to be a finite number","expected #{this} to not be a finite number")}))}},function(e,t){
/*!
       * chai
       * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
       * MIT Licensed
       */
e.exports=function(e,t){e.expect=function(t,n){return new e.Assertion(t,n)},e.expect.fail=function(t,n,r,o){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new e.AssertionError(r,{actual:t,expected:n,operator:o},e.expect.fail)}}},function(e,t){
/*!
       * chai
       * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
       * MIT Licensed
       */
e.exports=function(e,t){var n=e.Assertion;function r(){Object.defineProperty(Object.prototype,"should",{set:function(e){Object.defineProperty(this,"should",{value:e,enumerable:!0,configurable:!0,writable:!0})},get:function e(){return this instanceof String||this instanceof Number||this instanceof Boolean||"function"==typeof Symbol&&this instanceof Symbol?new n(this.valueOf(),null,e):new n(this,null,e)},configurable:!0});var t={fail:function(n,r,o,s){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new e.AssertionError(o,{actual:n,expected:r,operator:s},t.fail)},equal:function(e,t,r){new n(e,r).to.equal(t)},Throw:function(e,t,r,o){new n(e,o).to.Throw(t,r)},exist:function(e,t){new n(e,t).to.exist},not:{}};return t.not.equal=function(e,t,r){new n(e,r).to.not.equal(t)},t.not.Throw=function(e,t,r,o){new n(e,o).to.not.Throw(t,r)},t.not.exist=function(e,t){new n(e,t).to.not.exist},t.throw=t.Throw,t.not.throw=t.not.Throw,t}e.should=r,e.Should=r}},function(e,t){
/*!
       * chai
       * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
       * MIT Licensed
       */
e.exports=function(e,t){
/*!
             * Chai dependencies.
             */
var n=e.Assertion,r=t.flag,o=e.assert=function(t,r){new n(null,null,e.assert,!0).assert(t,r,"[ negation message unavailable ]")};
/*!
             * Module export.
             */o.fail=function(t,n,r,s){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new e.AssertionError(r,{actual:t,expected:n,operator:s},o.fail)},o.isOk=function(e,t){new n(e,t,o.isOk,!0).is.ok},o.isNotOk=function(e,t){new n(e,t,o.isNotOk,!0).is.not.ok},o.equal=function(e,t,s){var i=new n(e,s,o.equal,!0);i.assert(t==r(i,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",t,e,!0)},o.notEqual=function(e,t,s){var i=new n(e,s,o.notEqual,!0);i.assert(t!=r(i,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",t,e,!0)},o.strictEqual=function(e,t,r){new n(e,r,o.strictEqual,!0).to.equal(t)},o.notStrictEqual=function(e,t,r){new n(e,r,o.notStrictEqual,!0).to.not.equal(t)},o.deepEqual=o.deepStrictEqual=function(e,t,r){new n(e,r,o.deepEqual,!0).to.eql(t)},o.notDeepEqual=function(e,t,r){new n(e,r,o.notDeepEqual,!0).to.not.eql(t)},o.isAbove=function(e,t,r){new n(e,r,o.isAbove,!0).to.be.above(t)},o.isAtLeast=function(e,t,r){new n(e,r,o.isAtLeast,!0).to.be.least(t)},o.isBelow=function(e,t,r){new n(e,r,o.isBelow,!0).to.be.below(t)},o.isAtMost=function(e,t,r){new n(e,r,o.isAtMost,!0).to.be.most(t)},o.isTrue=function(e,t){new n(e,t,o.isTrue,!0).is.true},o.isNotTrue=function(e,t){new n(e,t,o.isNotTrue,!0).to.not.equal(!0)},o.isFalse=function(e,t){new n(e,t,o.isFalse,!0).is.false},o.isNotFalse=function(e,t){new n(e,t,o.isNotFalse,!0).to.not.equal(!1)},o.isNull=function(e,t){new n(e,t,o.isNull,!0).to.equal(null)},o.isNotNull=function(e,t){new n(e,t,o.isNotNull,!0).to.not.equal(null)},o.isNaN=function(e,t){new n(e,t,o.isNaN,!0).to.be.NaN},o.isNotNaN=function(e,t){new n(e,t,o.isNotNaN,!0).not.to.be.NaN},o.exists=function(e,t){new n(e,t,o.exists,!0).to.exist},o.notExists=function(e,t){new n(e,t,o.notExists,!0).to.not.exist},o.isUndefined=function(e,t){new n(e,t,o.isUndefined,!0).to.equal(void 0)},o.isDefined=function(e,t){new n(e,t,o.isDefined,!0).to.not.equal(void 0)},o.isFunction=function(e,t){new n(e,t,o.isFunction,!0).to.be.a("function")},o.isNotFunction=function(e,t){new n(e,t,o.isNotFunction,!0).to.not.be.a("function")},o.isObject=function(e,t){new n(e,t,o.isObject,!0).to.be.a("object")},o.isNotObject=function(e,t){new n(e,t,o.isNotObject,!0).to.not.be.a("object")},o.isArray=function(e,t){new n(e,t,o.isArray,!0).to.be.an("array")},o.isNotArray=function(e,t){new n(e,t,o.isNotArray,!0).to.not.be.an("array")},o.isString=function(e,t){new n(e,t,o.isString,!0).to.be.a("string")},o.isNotString=function(e,t){new n(e,t,o.isNotString,!0).to.not.be.a("string")},o.isNumber=function(e,t){new n(e,t,o.isNumber,!0).to.be.a("number")},o.isNotNumber=function(e,t){new n(e,t,o.isNotNumber,!0).to.not.be.a("number")},o.isFinite=function(e,t){new n(e,t,o.isFinite,!0).to.be.finite},o.isBoolean=function(e,t){new n(e,t,o.isBoolean,!0).to.be.a("boolean")},o.isNotBoolean=function(e,t){new n(e,t,o.isNotBoolean,!0).to.not.be.a("boolean")},o.typeOf=function(e,t,r){new n(e,r,o.typeOf,!0).to.be.a(t)},o.notTypeOf=function(e,t,r){new n(e,r,o.notTypeOf,!0).to.not.be.a(t)},o.instanceOf=function(e,t,r){new n(e,r,o.instanceOf,!0).to.be.instanceOf(t)},o.notInstanceOf=function(e,t,r){new n(e,r,o.notInstanceOf,!0).to.not.be.instanceOf(t)},o.include=function(e,t,r){new n(e,r,o.include,!0).include(t)},o.notInclude=function(e,t,r){new n(e,r,o.notInclude,!0).not.include(t)},o.deepInclude=function(e,t,r){new n(e,r,o.deepInclude,!0).deep.include(t)},o.notDeepInclude=function(e,t,r){new n(e,r,o.notDeepInclude,!0).not.deep.include(t)},o.nestedInclude=function(e,t,r){new n(e,r,o.nestedInclude,!0).nested.include(t)},o.notNestedInclude=function(e,t,r){new n(e,r,o.notNestedInclude,!0).not.nested.include(t)},o.deepNestedInclude=function(e,t,r){new n(e,r,o.deepNestedInclude,!0).deep.nested.include(t)},o.notDeepNestedInclude=function(e,t,r){new n(e,r,o.notDeepNestedInclude,!0).not.deep.nested.include(t)},o.ownInclude=function(e,t,r){new n(e,r,o.ownInclude,!0).own.include(t)},o.notOwnInclude=function(e,t,r){new n(e,r,o.notOwnInclude,!0).not.own.include(t)},o.deepOwnInclude=function(e,t,r){new n(e,r,o.deepOwnInclude,!0).deep.own.include(t)},o.notDeepOwnInclude=function(e,t,r){new n(e,r,o.notDeepOwnInclude,!0).not.deep.own.include(t)},o.match=function(e,t,r){new n(e,r,o.match,!0).to.match(t)},o.notMatch=function(e,t,r){new n(e,r,o.notMatch,!0).to.not.match(t)},o.property=function(e,t,r){new n(e,r,o.property,!0).to.have.property(t)},o.notProperty=function(e,t,r){new n(e,r,o.notProperty,!0).to.not.have.property(t)},o.propertyVal=function(e,t,r,s){new n(e,s,o.propertyVal,!0).to.have.property(t,r)},o.notPropertyVal=function(e,t,r,s){new n(e,s,o.notPropertyVal,!0).to.not.have.property(t,r)},o.deepPropertyVal=function(e,t,r,s){new n(e,s,o.deepPropertyVal,!0).to.have.deep.property(t,r)},o.notDeepPropertyVal=function(e,t,r,s){new n(e,s,o.notDeepPropertyVal,!0).to.not.have.deep.property(t,r)},o.ownProperty=function(e,t,r){new n(e,r,o.ownProperty,!0).to.have.own.property(t)},o.notOwnProperty=function(e,t,r){new n(e,r,o.notOwnProperty,!0).to.not.have.own.property(t)},o.ownPropertyVal=function(e,t,r,s){new n(e,s,o.ownPropertyVal,!0).to.have.own.property(t,r)},o.notOwnPropertyVal=function(e,t,r,s){new n(e,s,o.notOwnPropertyVal,!0).to.not.have.own.property(t,r)},o.deepOwnPropertyVal=function(e,t,r,s){new n(e,s,o.deepOwnPropertyVal,!0).to.have.deep.own.property(t,r)},o.notDeepOwnPropertyVal=function(e,t,r,s){new n(e,s,o.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(t,r)},o.nestedProperty=function(e,t,r){new n(e,r,o.nestedProperty,!0).to.have.nested.property(t)},o.notNestedProperty=function(e,t,r){new n(e,r,o.notNestedProperty,!0).to.not.have.nested.property(t)},o.nestedPropertyVal=function(e,t,r,s){new n(e,s,o.nestedPropertyVal,!0).to.have.nested.property(t,r)},o.notNestedPropertyVal=function(e,t,r,s){new n(e,s,o.notNestedPropertyVal,!0).to.not.have.nested.property(t,r)},o.deepNestedPropertyVal=function(e,t,r,s){new n(e,s,o.deepNestedPropertyVal,!0).to.have.deep.nested.property(t,r)},o.notDeepNestedPropertyVal=function(e,t,r,s){new n(e,s,o.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(t,r)},o.lengthOf=function(e,t,r){new n(e,r,o.lengthOf,!0).to.have.lengthOf(t)},o.hasAnyKeys=function(e,t,r){new n(e,r,o.hasAnyKeys,!0).to.have.any.keys(t)},o.hasAllKeys=function(e,t,r){new n(e,r,o.hasAllKeys,!0).to.have.all.keys(t)},o.containsAllKeys=function(e,t,r){new n(e,r,o.containsAllKeys,!0).to.contain.all.keys(t)},o.doesNotHaveAnyKeys=function(e,t,r){new n(e,r,o.doesNotHaveAnyKeys,!0).to.not.have.any.keys(t)},o.doesNotHaveAllKeys=function(e,t,r){new n(e,r,o.doesNotHaveAllKeys,!0).to.not.have.all.keys(t)},o.hasAnyDeepKeys=function(e,t,r){new n(e,r,o.hasAnyDeepKeys,!0).to.have.any.deep.keys(t)},o.hasAllDeepKeys=function(e,t,r){new n(e,r,o.hasAllDeepKeys,!0).to.have.all.deep.keys(t)},o.containsAllDeepKeys=function(e,t,r){new n(e,r,o.containsAllDeepKeys,!0).to.contain.all.deep.keys(t)},o.doesNotHaveAnyDeepKeys=function(e,t,r){new n(e,r,o.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(t)},o.doesNotHaveAllDeepKeys=function(e,t,r){new n(e,r,o.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(t)},o.throws=function(e,t,s,i){("string"==typeof t||t instanceof RegExp)&&(s=t,t=null);var a=new n(e,i,o.throws,!0).to.throw(t,s);return r(a,"object")},o.doesNotThrow=function(e,t,r,s){("string"==typeof t||t instanceof RegExp)&&(r=t,t=null),new n(e,s,o.doesNotThrow,!0).to.not.throw(t,r)},o.operator=function(s,i,a,c){var u;switch(i){case"==":u=s==a;break;case"===":u=s===a;break;case">":u=s>a;break;case">=":u=s>=a;break;case"<":u=s<a;break;case"<=":u=s<=a;break;case"!=":u=s!=a;break;case"!==":u=s!==a;break;default:throw c=c?c+": ":c,new e.AssertionError(c+'Invalid operator "'+i+'"',void 0,o.operator)}var l=new n(u,c,o.operator,!0);l.assert(!0===r(l,"object"),"expected "+t.inspect(s)+" to be "+i+" "+t.inspect(a),"expected "+t.inspect(s)+" to not be "+i+" "+t.inspect(a))},o.closeTo=function(e,t,r,s){new n(e,s,o.closeTo,!0).to.be.closeTo(t,r)},o.approximately=function(e,t,r,s){new n(e,s,o.approximately,!0).to.be.approximately(t,r)},o.sameMembers=function(e,t,r){new n(e,r,o.sameMembers,!0).to.have.same.members(t)},o.notSameMembers=function(e,t,r){new n(e,r,o.notSameMembers,!0).to.not.have.same.members(t)},o.sameDeepMembers=function(e,t,r){new n(e,r,o.sameDeepMembers,!0).to.have.same.deep.members(t)},o.notSameDeepMembers=function(e,t,r){new n(e,r,o.notSameDeepMembers,!0).to.not.have.same.deep.members(t)},o.sameOrderedMembers=function(e,t,r){new n(e,r,o.sameOrderedMembers,!0).to.have.same.ordered.members(t)},o.notSameOrderedMembers=function(e,t,r){new n(e,r,o.notSameOrderedMembers,!0).to.not.have.same.ordered.members(t)},o.sameDeepOrderedMembers=function(e,t,r){new n(e,r,o.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(t)},o.notSameDeepOrderedMembers=function(e,t,r){new n(e,r,o.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(t)},o.includeMembers=function(e,t,r){new n(e,r,o.includeMembers,!0).to.include.members(t)},o.notIncludeMembers=function(e,t,r){new n(e,r,o.notIncludeMembers,!0).to.not.include.members(t)},o.includeDeepMembers=function(e,t,r){new n(e,r,o.includeDeepMembers,!0).to.include.deep.members(t)},o.notIncludeDeepMembers=function(e,t,r){new n(e,r,o.notIncludeDeepMembers,!0).to.not.include.deep.members(t)},o.includeOrderedMembers=function(e,t,r){new n(e,r,o.includeOrderedMembers,!0).to.include.ordered.members(t)},o.notIncludeOrderedMembers=function(e,t,r){new n(e,r,o.notIncludeOrderedMembers,!0).to.not.include.ordered.members(t)},o.includeDeepOrderedMembers=function(e,t,r){new n(e,r,o.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(t)},o.notIncludeDeepOrderedMembers=function(e,t,r){new n(e,r,o.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(t)},o.oneOf=function(e,t,r){new n(e,r,o.oneOf,!0).to.be.oneOf(t)},o.changes=function(e,t,r,s){3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.changes,!0).to.change(t,r)},o.changesBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.changesBy,!0).to.change(t,r).by(s)},o.doesNotChange=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.doesNotChange,!0).to.not.change(t,r)},o.changesButNotBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.changesButNotBy,!0).to.change(t,r).but.not.by(s)},o.increases=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.increases,!0).to.increase(t,r)},o.increasesBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.increasesBy,!0).to.increase(t,r).by(s)},o.doesNotIncrease=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.doesNotIncrease,!0).to.not.increase(t,r)},o.increasesButNotBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.increasesButNotBy,!0).to.increase(t,r).but.not.by(s)},o.decreases=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.decreases,!0).to.decrease(t,r)},o.decreasesBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.decreasesBy,!0).to.decrease(t,r).by(s)},o.doesNotDecrease=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.doesNotDecrease,!0).to.not.decrease(t,r)},o.doesNotDecreaseBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);return new n(e,i,o.doesNotDecreaseBy,!0).to.not.decrease(t,r).by(s)},o.decreasesButNotBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.decreasesButNotBy,!0).to.decrease(t,r).but.not.by(s)}
/*!
             * ### .ifError(object)
             *
             * Asserts if value is not a false value, and throws if it is a true value.
             * This is added to allow for chai to be a drop-in replacement for Node's
             * assert class.
             *
             *     var err = new Error('I am a custom error');
             *     assert.ifError(err); // Rethrows err!
             *
             * @name ifError
             * @param {Object} object
             * @namespace Assert
             * @api public
             */,o.ifError=function(e){if(e)throw e},o.isExtensible=function(e,t){new n(e,t,o.isExtensible,!0).to.be.extensible},o.isNotExtensible=function(e,t){new n(e,t,o.isNotExtensible,!0).to.not.be.extensible},o.isSealed=function(e,t){new n(e,t,o.isSealed,!0).to.be.sealed},o.isNotSealed=function(e,t){new n(e,t,o.isNotSealed,!0).to.not.be.sealed},o.isFrozen=function(e,t){new n(e,t,o.isFrozen,!0).to.be.frozen},o.isNotFrozen=function(e,t){new n(e,t,o.isNotFrozen,!0).to.not.be.frozen},o.isEmpty=function(e,t){new n(e,t,o.isEmpty,!0).to.be.empty},o.isNotEmpty=function(e,t){new n(e,t,o.isNotEmpty,!0).to.not.be.empty},
/*!
             * Aliases.
             */
function e(t,n){return o[n]=o[t],e}("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")}},function(e,t,n){var r=n(22),o=n(37),s=n(24);e.exports=function(e){var t={};return"function"==typeof e&&(e=s.createServer(e)),r.forEach((function(n){t[n]=function(t){return new o(e,n,t)}})),t.del=t.delete,t},e.exports.Test=o,e.exports.agent=n(90)},function(e,t){e.exports=n(67)},function(e,t,n){var r=n(69).IncomingForm;r.IncomingForm=r,e.exports=r},function(e,t,n){var r;global.GENTLY&&(r=GENTLY.hijack(n(70)));var o=r("crypto"),s=r("fs"),i=r("util"),a=r("path"),c=r("./file"),u=r("./multipart_parser").MultipartParser,l=r("./querystring_parser").QuerystringParser,d=r("./octet_parser").OctetParser,p=r("./json_parser").JSONParser,h=r("string_decoder").StringDecoder,f=r("events").EventEmitter,y=r("stream").Stream,m=r("os");function b(e){return this instanceof b?(f.call(this),e=e||{},this.error=null,this.ended=!1,this.maxFields=e.maxFields||1e3,this.maxFieldsSize=e.maxFieldsSize||20971520,this.maxFileSize=e.maxFileSize||209715200,this.keepExtensions=e.keepExtensions||!1,this.uploadDir=e.uploadDir||m.tmpdir&&m.tmpdir()||m.tmpDir(),this.encoding=e.encoding||"utf-8",this.headers=null,this.type=null,this.hash=e.hash||!1,this.multiples=e.multiples||!1,this.bytesReceived=null,this.bytesExpected=null,this._parser=null,this._flushing=0,this._fieldsSize=0,this._fileSize=0,this.openedFiles=[],this):new b(e)}i.inherits(b,f),t.IncomingForm=b,b.prototype.parse=function(e,t){if(this.pause=function(){try{e.pause()}catch(e){return this.ended||this._error(e),!1}return!0},this.resume=function(){try{e.resume()}catch(e){return this.ended||this._error(e),!1}return!0},t){var n={},r={};this.on("field",(function(e,t){n[e]=t})).on("file",(function(e,t){this.multiples&&r[e]?(Array.isArray(r[e])||(r[e]=[r[e]]),r[e].push(t)):r[e]=t})).on("error",(function(e){t(e,n,r)})).on("end",(function(){t(null,n,r)}))}this.writeHeaders(e.headers);var o=this;return e.on("error",(function(e){o._error(e)})).on("aborted",(function(){o.emit("aborted"),o._error(new Error("Request aborted"))})).on("data",(function(e){o.write(e)})).on("end",(function(){if(!o.error){var e=o._parser.end();e&&o._error(e)}})),this},b.prototype.writeHeaders=function(e){this.headers=e,this._parseContentLength(),this._parseContentType()},b.prototype.write=function(e){if(!this.error){if(this._parser){this.bytesReceived+=e.length,this.emit("progress",this.bytesReceived,this.bytesExpected);var t=this._parser.write(e);return t!==e.length&&this._error(new Error("parser error, "+t+" of "+e.length+" bytes parsed")),t}this._error(new Error("uninitialized parser"))}},b.prototype.pause=function(){return!1},b.prototype.resume=function(){return!1},b.prototype.onPart=function(e){this.handlePart(e)},b.prototype.handlePart=function(e){var t=this;if(void 0===e.filename){var n="",r=new h(this.encoding);return e.on("data",(function(e){t._fieldsSize+=e.length,t._fieldsSize>t.maxFieldsSize?t._error(new Error("maxFieldsSize exceeded, received "+t._fieldsSize+" bytes of field data")):n+=r.write(e)})),void e.on("end",(function(){t.emit("field",e.name,n)}))}this._flushing++;var o=new c({path:this._uploadPath(e.filename),name:e.filename,type:e.mime,hash:t.hash});this.emit("fileBegin",e.name,o),o.open(),this.openedFiles.push(o),e.on("data",(function(e){t._fileSize+=e.length,t._fileSize>t.maxFileSize?t._error(new Error("maxFileSize exceeded, received "+t._fileSize+" bytes of file data")):0!=e.length&&(t.pause(),o.write(e,(function(){t.resume()})))})),e.on("end",(function(){o.end((function(){t._flushing--,t.emit("file",e.name,o),t._maybeEnd()}))}))},b.prototype._parseContentType=function(){if(0!==this.bytesExpected)if(this.headers["content-type"])if(this.headers["content-type"].match(/octet-stream/i))this._initOctetStream();else if(this.headers["content-type"].match(/urlencoded/i))this._initUrlencoded();else if(this.headers["content-type"].match(/multipart/i)){var e=this.headers["content-type"].match(/boundary=(?:"([^"]+)"|([^;]+))/i);e?this._initMultipart(e[1]||e[2]):this._error(new Error("bad content-type header, no multipart boundary"))}else this.headers["content-type"].match(/json/i)?this._initJSONencoded():this._error(new Error("bad content-type header, unknown content-type: "+this.headers["content-type"]));else this._error(new Error("bad content-type header, no content-type"));else this._parser=function(e){return{end:function(){return e.ended=!0,e._maybeEnd(),null}}}(this)},b.prototype._error=function(e){this.error||this.ended||(this.error=e,this.emit("error",e),Array.isArray(this.openedFiles)&&this.openedFiles.forEach((function(e){e._writeStream.destroy(),setTimeout(s.unlink,0,e.path,(function(e){}))})))},b.prototype._parseContentLength=function(){this.bytesReceived=0,this.headers["content-length"]?this.bytesExpected=parseInt(this.headers["content-length"],10):void 0===this.headers["transfer-encoding"]&&(this.bytesExpected=0),null!==this.bytesExpected&&this.emit("progress",this.bytesReceived,this.bytesExpected)},b.prototype._newParser=function(){return new u},b.prototype._initMultipart=function(e){this.type="multipart";var t,n,r,o=new u,s=this;o.initWithBoundary(e),o.onPartBegin=function(){(r=new y).readable=!0,r.headers={},r.name=null,r.filename=null,r.mime=null,r.transferEncoding="binary",r.transferBuffer="",t="",n=""},o.onHeaderField=function(e,n,r){t+=e.toString(s.encoding,n,r)},o.onHeaderValue=function(e,t,r){n+=e.toString(s.encoding,t,r)},o.onHeaderEnd=function(){t=t.toLowerCase(),r.headers[t]=n;var e=n.match(/\bname=("([^"]*)"|([^\(\)<>@,;:\\"\/\[\]\?=\{\}\s\t/]+))/i);"content-disposition"==t?(e&&(r.name=e[2]||e[3]||""),r.filename=s._fileName(n)):"content-type"==t?r.mime=n:"content-transfer-encoding"==t&&(r.transferEncoding=n.toLowerCase()),t="",n=""},o.onHeadersEnd=function(){switch(r.transferEncoding){case"binary":case"7bit":case"8bit":o.onPartData=function(e,t,n){r.emit("data",e.slice(t,n))},o.onPartEnd=function(){r.emit("end")};break;case"base64":o.onPartData=function(e,t,n){r.transferBuffer+=e.slice(t,n).toString("ascii");var o=4*parseInt(r.transferBuffer.length/4,10);r.emit("data",new Buffer(r.transferBuffer.substring(0,o),"base64")),r.transferBuffer=r.transferBuffer.substring(o)},o.onPartEnd=function(){r.emit("data",new Buffer(r.transferBuffer,"base64")),r.emit("end")};break;default:return s._error(new Error("unknown transfer-encoding"))}s.onPart(r)},o.onEnd=function(){s.ended=!0,s._maybeEnd()},this._parser=o},b.prototype._fileName=function(e){var t=e.match(/\bfilename=("(.*?)"|([^\(\)<>@,;:\\"\/\[\]\?=\{\}\s\t/]+))($|;\s)/i);if(t){var n=t[2]||t[3]||"",r=n.substr(n.lastIndexOf("\\")+1);return(r=r.replace(/%22/g,'"')).replace(/&#([\d]{4});/g,(function(e,t){return String.fromCharCode(t)}))}},b.prototype._initUrlencoded=function(){this.type="urlencoded";var e=new l(this.maxFields),t=this;e.onField=function(e,n){t.emit("field",e,n)},e.onEnd=function(){t.ended=!0,t._maybeEnd()},this._parser=e},b.prototype._initOctetStream=function(){this.type="octet-stream";var e=this.headers["x-file-name"],t=this.headers["content-type"],n=new c({path:this._uploadPath(e),name:e,type:t});this.emit("fileBegin",e,n),n.open(),this.openedFiles.push(n),this._flushing++;var r=this;r._parser=new d;var o=0;r._parser.on("data",(function(e){r.pause(),o++,n.write(e,(function(){o--,r.resume(),r.ended&&r._parser.emit("doneWritingFile")}))})),r._parser.on("end",(function(){r._flushing--,r.ended=!0;var e=function(){n.end((function(){r.emit("file","file",n),r._maybeEnd()}))};0===o?e():r._parser.once("doneWritingFile",e)}))},b.prototype._initJSONencoded=function(){this.type="json";var e=new p(this),t=this;e.onField=function(e,n){t.emit("field",e,n)},e.onEnd=function(){t.ended=!0,t._maybeEnd()},this._parser=e},b.prototype._uploadPath=function(e){var t="upload_"+o.randomBytes(16).toString("hex");if(this.keepExtensions){var n=a.extname(e);t+=n=n.replace(/(\.[a-z0-9]+).*/i,"$1")}return a.join(this.uploadDir,t)},b.prototype._maybeEnd=function(){!this.ended||this._flushing||this.error||this.emit("end")}},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=70},function(e,t){e.exports=n(71)},function(e,t,n){"use strict";const r=n(28),o=n(29),s=n(73);function i(e){o.call(this);const t=this.res=e.res;this.request=e,this.req=e.req,this.text=t.text,this.body=void 0!==t.body?t.body:{},this.files=t.files||{},this.buffered="string"==typeof this.text,this.header=this.headers=t.headers,this._setStatusProperties(t.statusCode),this._setHeaderProperties(this.header),this.setEncoding=t.setEncoding.bind(t),t.on("data",this.emit.bind(this,"data")),t.on("end",this.emit.bind(this,"end")),t.on("close",this.emit.bind(this,"close")),t.on("error",this.emit.bind(this,"error"))}e.exports=i,r.inherits(i,o),s(i.prototype),i.prototype.destroy=function(e){this.res.destroy(e)},i.prototype.pause=function(){this.res.pause()},i.prototype.resume=function(){this.res.resume()},i.prototype.toError=function(){const e=this.req,t=e.method,n=e.path,r=`cannot ${t} ${n} (${this.status})`,o=new Error(r);return o.status=this.status,o.text=this.text,o.method=t,o.path=n,o},i.prototype.setStatusProperties=function(e){return console.warn("In superagent 2.x setStatusProperties is a private method"),this._setStatusProperties(e)},i.prototype.toJSON=function(){return{req:this.request.toJSON(),header:this.header,status:this.status,text:this.text}}},function(e,t,n){"use strict";var r=n(38);function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}e.exports=o,o.prototype.get=function(e){return this.header[e.toLowerCase()]},o.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=r.type(t);var n=r.params(t);for(var o in n)this[o]=n[o];this.links={};try{e.link&&(this.links=r.parseLinks(e.link))}catch(e){}},o.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}},function(e,t,n){"use strict";const r=n(75).StringDecoder,o=n(29),s=n(39);t.unzip=(e,t)=>{const n=s.createUnzip(),i=new o;let a;i.req=e,n.on("error",e=>{e&&"Z_BUF_ERROR"===e.code?i.emit("end"):i.emit("error",e)}),t.pipe(n),t.setEncoding=e=>{a=new r(e)},n.on("data",e=>{if(a){const t=a.write(e);t.length&&i.emit("data",t)}else i.emit("data",e)}),n.on("end",()=>{i.emit("end")});const c=t.on;t.on=function(e,n){return"data"==e||"end"==e?i.on(e,n):"error"==e?(i.on(e,n),c.call(t,e,n)):c.call(t,e,n),this}}},function(e,t){e.exports=n(75)},function(e,t){e.exports=n(76)},function(e,t){e.exports=n(77)},function(e,t){e.exports=n(78)},function(e){e.exports=JSON.parse('{"name":"superagent","version":"3.8.3","description":"elegant & feature rich browser / node HTTP with a fluent API","scripts":{"prepare":"make all","test":"make test"},"keywords":["http","ajax","request","agent"],"license":"MIT","author":"TJ Holowaychuk <tj@vision-media.ca>","contributors":["Kornel Lesiński <kornel@geekhood.net>","Peter Lyons <pete@peterlyons.com>","Hunter Loftis <hunter@hunterloftis.com>"],"repository":{"type":"git","url":"git://github.com/visionmedia/superagent.git"},"dependencies":{"component-emitter":"^1.2.0","cookiejar":"^2.1.0","debug":"^3.1.0","extend":"^3.0.0","form-data":"^2.3.1","formidable":"^1.2.0","methods":"^1.1.1","mime":"^1.4.1","qs":"^6.5.1","readable-stream":"^2.3.5"},"devDependencies":{"Base64":"^1.0.1","basic-auth-connect":"^1.0.0","body-parser":"^1.18.2","browserify":"^14.1.0","cookie-parser":"^1.4.3","express":"^4.16.3","express-session":"^1.15.6","marked":"0.3.12","mocha":"^3.5.3","multer":"^1.3.0","should":"^11.2.0","should-http":"^0.1.1","zuul":"^3.11.1"},"browser":{"./lib/node/index.js":"./lib/client.js","./test/support/server.js":"./test/support/blank.js"},"component":{"scripts":{"superagent":"lib/client.js"}},"main":"./lib/node/index.js","engines":{"node":">= 4.0"}}')},function(e,t,n){"use strict";var r=n(81);function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}e.exports=o,o.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},o.prototype.parse=function(e){return this._parser=e,this},o.prototype.responseType=function(e){return this._responseType=e,this},o.prototype.serialize=function(e){return this._serializer=e,this},o.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},o.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var s=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];o.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(e,t);if(!0===n)return!0;if(!1===n)return!1}catch(e){console.error(e)}if(t&&t.status&&t.status>=500&&501!=t.status)return!0;if(e){if(e.code&&~s.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},o.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},o.prototype.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(e,t){n.end((function(n,r){n?t(n):e(r)}))}))}return this._fullfilledPromise.then(e,t)},o.prototype.catch=function(e){return this.then(void 0,e)},o.prototype.use=function(e){return e(this),this},o.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},o.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},o.prototype.get=function(e){return this._header[e.toLowerCase()]},o.prototype.getHeader=o.prototype.get,o.prototype.set=function(e,t){if(r(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},o.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},o.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),r(e)){for(var n in e)this.field(n,e[n]);return this}if(Array.isArray(t)){for(var o in t)this.field(e,t[o]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},o.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},o.prototype._auth=function(e,t,n,r){switch(n.type){case"basic":this.set("Authorization","Basic "+r(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},o.prototype.withCredentials=function(e){return null==e&&(e=!0),this._withCredentials=e,this},o.prototype.redirects=function(e){return this._maxRedirects=e,this},o.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},o.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},o.prototype.send=function(e){var t=r(e),n=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&r(this._data))for(var o in e)this._data[o]=e[o];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(n||this.type("json"),this)},o.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},o.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var n=this.url.substring(t+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,t)+"?"+n.join("&")}}},o.prototype._appendQueryString=function(){console.trace("Unsupported")},o.prototype._timeoutError=function(e,t,n){if(!this._aborted){var r=new Error(e+t+"ms exceeded");r.timeout=t,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},o.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))}},function(e,t,n){"use strict";e.exports=function(e){return null!==e&&"object"==typeof e}},function(e,t,n){"use strict";const r=n(30).CookieJar,o=n(30).CookieAccessInfo,s=n(23).parse,i=n(27),a=n(83);let c=n(22);function u(e){if(!(this instanceof u))return new u(e);a.call(this),this.jar=new r,e&&(e.ca&&this.ca(e.ca),e.key&&this.key(e.key),e.pfx&&this.pfx(e.pfx),e.cert&&this.cert(e.cert))}e.exports=u,u.prototype=Object.create(a.prototype),u.prototype._saveCookies=function(e){const t=e.headers["set-cookie"];t&&this.jar.setCookies(t)},u.prototype._attachCookies=function(e){const t=s(e.url),n=o(t.hostname,t.pathname,"https:"==t.protocol),r=this.jar.getCookies(n).toValueString();e.cookies=r},c.forEach(e=>{const t=e.toUpperCase();u.prototype[e]=function(e,n){const r=new i.Request(t,e);return r.on("response",this._saveCookies.bind(this)),r.on("redirect",this._saveCookies.bind(this)),r.on("redirect",this._attachCookies.bind(this,r)),this._attachCookies(r),this._setDefaults(r),n&&r.end(n),r}}),u.prototype.del=u.prototype.delete},function(e,t){function n(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach((function(e){n.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}})),n.prototype._setDefaults=function(e){this._defaults.forEach((function(t){e[t.fn].apply(e,t.arguments)}))},e.exports=n},function(e,t,n){"use strict";t["application/x-www-form-urlencoded"]=n(85),t["application/json"]=n(86),t.text=n(87);const r=n(88);t["application/octet-stream"]=r,t["application/pdf"]=r,t.image=r},function(e,t,n){"use strict";const r=n(41);e.exports=function(e,t){e.text="",e.setEncoding("ascii"),e.on("data",t=>{e.text+=t}),e.on("end",()=>{try{t(null,r.parse(e.text))}catch(e){t(e)}})}},function(e,t,n){"use strict";e.exports=function(e,t){e.text="",e.setEncoding("utf8"),e.on("data",t=>{e.text+=t}),e.on("end",()=>{try{var n=e.text&&JSON.parse(e.text)}catch(t){var r=t;r.rawResponse=e.text||null,r.statusCode=e.statusCode}finally{t(r,n)}})}},function(e,t,n){"use strict";e.exports=function(e,t){e.text="",e.setEncoding("utf8"),e.on("data",t=>{e.text+=t}),e.on("end",t)}},function(e,t,n){"use strict";e.exports=(e,t)=>{const n=[];e.on("data",e=>{n.push(e)}),e.on("end",()=>{t(null,Buffer.concat(n))})}},function(e,t){e.exports=n(89)},function(e,t,n){var r=n(27).agent,o=n(22),s=n(24),i=n(37);function a(e,t){if(!(this instanceof a))return new a(e,t);"function"==typeof e&&(e=s.createServer(e)),t&&(this._ca=t.ca,this._key=t.key,this._cert=t.cert),r.call(this),this.app=e}e.exports=a,Object.setPrototypeOf(a.prototype,r.prototype),a.prototype.host=function(e){return this._host=e,this},o.forEach((function(e){a.prototype[e]=function(t,n){var r=new i(this.app,e.toUpperCase(),t,this._host);return r.ca(this._ca),r.cert(this._cert),r.key(this._key),r.on("response",this._saveCookies.bind(this)),r.on("redirect",this._saveCookies.bind(this)),r.on("redirect",this._attachCookies.bind(this,r)),this._attachCookies(r),this._setDefaults(r),r}})),a.prototype.del=a.prototype.delete},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(14).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(42),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(10),A=n.n(C),L=n(11),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(10)},function(e,t){e.exports=n(11)},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(9);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(13)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(14)},function(e,t){
/*!
              * Chai - flag utility
              * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
              * MIT Licensed
              */
e.exports=function(e,t,n){var r=e.__flags||(e.__flags=Object.create(null));if(3!==arguments.length)return r[t];r[t]=n}},function(e,t,n){
/*!
              * chai
              * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
              * MIT Licensed
              */
var r=[];
/*!
              * Chai version
              */t.version="4.2.0",
/*!
              * Assertion Error
              */
t.AssertionError=n(31);
/*!
              * Utils for plugins (not exported)
              */
var o=n(44);t.use=function(e){return~r.indexOf(e)||(e(t,o),r.push(e)),t},
/*!
              * Utility Functions
              */
t.util=o;
/*!
              * Configuration
              */
var s=n(18);t.config=s;
/*!
              * Primary `Assertion` prototype
              */
var i=n(61);t.use(i);
/*!
              * Core Assertions
              */
var a=n(62);t.use(a);
/*!
              * Expect interface
              */
var c=n(63);t.use(c);
/*!
              * Should interface
              */
var u=n(64);t.use(u);
/*!
              * Assert interface
              */
var l=n(65);t.use(l)},function(e,t){
/*!
              * Chai - transferFlags utility
              * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
              * MIT Licensed
              */
e.exports=function(e,t,n){var r=e.__flags||(e.__flags=Object.create(null));for(var o in t.__flags||(t.__flags=Object.create(null)),n=3!==arguments.length||n,r)(n||"object"!==o&&"ssfi"!==o&&"lockSsfi"!==o&&"message"!=o)&&(t.__flags[o]=r[o])}},function(e,t){e.exports={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"]}},function(e,t,n){var r=n(18);
/*!
              * Chai - isProxyEnabled helper
              * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
              * MIT Licensed
              */e.exports=function(){return r.useProxy&&"undefined"!=typeof Proxy&&"undefined"!=typeof Reflect}},function(e,t){var n=Object.getOwnPropertyDescriptor((function(){}),"length");
/*!
              * Chai - addLengthGuard utility
              * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
              * MIT Licensed
              */e.exports=function(e,t,r){return n.configurable?(Object.defineProperty(e,"length",{get:function(){if(r)throw Error("Invalid Chai property: "+t+'.length. Due to a compatibility issue, "length" cannot directly follow "'+t+'". Use "'+t+'.lengthOf" instead.');throw Error("Invalid Chai property: "+t+'.length. See docs for proper usage of "'+t+'".')}}),e):e}},function(e,t,n){var r=n(18),o=n(15),s=n(35),i=n(19),a=["__flags","__methods","_obj","assert"];e.exports=function(e,t){return i()?new Proxy(e,{get:function e(n,i){if("string"==typeof i&&-1===r.proxyExcludedKeys.indexOf(i)&&!Reflect.has(n,i)){if(t)throw Error("Invalid Chai property: "+t+"."+i+'. See docs for proper usage of "'+t+'".');var c=null,u=4;throw s(n).forEach((function(e){if(!Object.prototype.hasOwnProperty(e)&&-1===a.indexOf(e)){var t=function(e,t,n){if(Math.abs(e.length-t.length)>=n)return n;for(var r=[],o=0;o<=e.length;o++)r[o]=Array(t.length+1).fill(0),r[o][0]=o;for(var s=0;s<t.length;s++)r[0][s]=s;for(o=1;o<=e.length;o++){var i=e.charCodeAt(o-1);for(s=1;s<=t.length;s++)Math.abs(o-s)>=n?r[o][s]=n:r[o][s]=Math.min(r[o-1][s]+1,r[o][s-1]+1,r[o-1][s-1]+(i===t.charCodeAt(s-1)?0:1))}return r[e.length][t.length]}(i,e,u);t<u&&(c=e,u=t)}})),null!==c?Error("Invalid Chai property: "+i+'. Did you mean "'+c+'"?'):Error("Invalid Chai property: "+i)}return-1!==a.indexOf(i)||o(n,"lockSsfi")||o(n,"ssfi",e),Reflect.get(n,i)}}):e}},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t,n){var r;r=function(){"use strict";var e="function"==typeof Promise,t="object"==typeof self?self:global,n="undefined"!=typeof Symbol,r="undefined"!=typeof Map,o="undefined"!=typeof Set,s="undefined"!=typeof WeakMap,i="undefined"!=typeof WeakSet,a="undefined"!=typeof DataView,c=n&&void 0!==Symbol.iterator,u=n&&void 0!==Symbol.toStringTag,l=o&&"function"==typeof Set.prototype.entries,d=r&&"function"==typeof Map.prototype.entries,p=l&&Object.getPrototypeOf((new Set).entries()),h=d&&Object.getPrototypeOf((new Map).entries()),f=c&&"function"==typeof Array.prototype[Symbol.iterator],y=f&&Object.getPrototypeOf([][Symbol.iterator]()),m=c&&"function"==typeof String.prototype[Symbol.iterator],b=m&&Object.getPrototypeOf(""[Symbol.iterator]());return function(n){var c=typeof n;if("object"!==c)return c;if(null===n)return"null";if(n===t)return"global";if(Array.isArray(n)&&(!1===u||!(Symbol.toStringTag in n)))return"Array";if("object"==typeof window&&null!==window){if("object"==typeof window.location&&n===window.location)return"Location";if("object"==typeof window.document&&n===window.document)return"Document";if("object"==typeof window.navigator){if("object"==typeof window.navigator.mimeTypes&&n===window.navigator.mimeTypes)return"MimeTypeArray";if("object"==typeof window.navigator.plugins&&n===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"==typeof window.HTMLElement)&&n instanceof window.HTMLElement){if("BLOCKQUOTE"===n.tagName)return"HTMLQuoteElement";if("TD"===n.tagName)return"HTMLTableDataCellElement";if("TH"===n.tagName)return"HTMLTableHeaderCellElement"}}var l=u&&n[Symbol.toStringTag];if("string"==typeof l)return l;var d=Object.getPrototypeOf(n);return d===RegExp.prototype?"RegExp":d===Date.prototype?"Date":e&&d===Promise.prototype?"Promise":o&&d===Set.prototype?"Set":r&&d===Map.prototype?"Map":i&&d===WeakSet.prototype?"WeakSet":s&&d===WeakMap.prototype?"WeakMap":a&&d===DataView.prototype?"DataView":r&&d===h?"Map Iterator":o&&d===p?"Set Iterator":f&&d===y?"Array Iterator":m&&d===b?"String Iterator":null===d?"Object":Object.prototype.toString.call(n).slice(8,-1)}},e.exports=r()},function(e,t,n){var r=n(34),o=n(35),s=n(49),i=n(18);e.exports=function(e,t,n,r){return c({showHidden:t,seen:[],stylize:function(e){return e}},e,void 0===n?2:n)};var a=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&"nodeType"in e&&1===e.nodeType&&"string"==typeof e.nodeName};function c(e,n,y){if(n&&"function"==typeof n.inspect&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var m=n.inspect(y,e);return"string"!=typeof m&&(m=c(e,m,y)),m}var b=function(e,t){switch(typeof t){case"undefined":return e.stylize("undefined","undefined");case"string":var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string");case"number":return 0===t&&1/t==-1/0?e.stylize("-0","number"):e.stylize(""+t,"number");case"boolean":return e.stylize(""+t,"boolean");case"symbol":return e.stylize(t.toString(),"symbol")}if(null===t)return e.stylize("null","null")}(e,n);if(b)return b;if(a(n)){if("outerHTML"in n)return n.outerHTML;try{if(document.xmlVersion)return(new XMLSerializer).serializeToString(n);var g=document.createElementNS("http://www.w3.org/1999/xhtml","_");g.appendChild(n.cloneNode(!1));var w=g.innerHTML.replace("><",">"+n.innerHTML+"<");return g.innerHTML="",w}catch(e){}}var v,_,x=s(n),E=e.showHidden?o(n):x;if(0===E.length||h(n)&&(1===E.length&&"stack"===E[0]||2===E.length&&"description"===E[0]&&"stack"===E[1])){if("function"==typeof n)return _=(v=r(n))?": "+v:"",e.stylize("[Function"+_+"]","special");if(d(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(p(n))return e.stylize(Date.prototype.toUTCString.call(n),"date");if(h(n))return u(n)}var S,O,P="",k=!1,j=!1,q=["{","}"];if("object"==typeof(S=n)&&/\w+Array]$/.test(f(S))&&(j=!0,q=["[","]"]),function(e){return Array.isArray(e)||"object"==typeof e&&"[object Array]"===f(e)}(n)&&(k=!0,q=["[","]"]),"function"==typeof n&&(P=" [Function"+(_=(v=r(n))?": "+v:"")+"]"),d(n)&&(P=" "+RegExp.prototype.toString.call(n)),p(n)&&(P=" "+Date.prototype.toUTCString.call(n)),h(n))return u(n);if(0===E.length&&(!k||0==n.length))return q[0]+P+q[1];if(y<0)return d(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");if(e.seen.push(n),k)O=function(e,t,n,r,o){for(var s=[],i=0,a=t.length;i<a;++i)Object.prototype.hasOwnProperty.call(t,String(i))?s.push(l(e,t,n,r,String(i),!0)):s.push("");return o.forEach((function(o){o.match(/^\d+$/)||s.push(l(e,t,n,r,o,!0))})),s}(e,n,y,x,E);else{if(j)return function(e){for(var t="[ ",n=0;n<e.length;++n){if(t.length>=i.truncateThreshold-7){t+="...";break}t+=e[n]+", "}return-1!==(t+=" ]").indexOf(",  ]")&&(t=t.replace(",  ]"," ]")),t}(n);O=E.map((function(t){return l(e,n,y,x,t,k)}))}return e.seen.pop(),function(e,t,n){return e.reduce((function(e,t){return e+t.length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(O,P,q)}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,n,r,o,s){var i,a,u=Object.getOwnPropertyDescriptor(t,o);if(u&&(u.get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special"))),r.indexOf(o)<0&&(i="["+o+"]"),a||(e.seen.indexOf(t[o])<0?(a=c(e,t[o],null===n?null:n-1)).indexOf("\n")>-1&&(a=s?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),void 0===i){if(s&&o.match(/^\d+$/))return a;(i=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+a}function d(e){return"object"==typeof e&&"[object RegExp]"===f(e)}function p(e){return"object"==typeof e&&"[object Date]"===f(e)}function h(e){return"object"==typeof e&&"[object Error]"===f(e)}function f(e){return Object.prototype.toString.call(e)}},function(e,t,n){"use strict";const r=n(67)("superagent"),o=n(68),s=n(71),i=n(72),a=n(23).parse,c=n(23).format,u=n(23).resolve;let l=n(22);const d=n(29),p=n(38),h=n(74).unzip,f=n(76),y=n(77),m=n(40),b=n(24),g=n(78),w=n(41),v=n(39),_=n(28),x=n(79),E=n(80),S=n(30);function O(e,n){return"function"==typeof n?new t.Request("GET",e).end(n):1==arguments.length?new t.Request("GET",e):new t.Request(e,n)}function P(){}function k(e){const t=`node-superagent/${x.version}`;e._header={"user-agent":t},e.header={"User-Agent":t}}function j(e,t){d.call(this),"string"!=typeof t&&(t=c(t)),this._agent=!1,this._formData=null,this.method=e,this.url=t,k(this),this.writable=!0,this._redirects=0,this.redirects("HEAD"===e?0:5),this.cookies="",this.qs={},this._query=[],this.qsRaw=this._query,this._redirectList=[],this._streamRequest=!1,this.once("end",this.clearTimeout.bind(this))}function q(e){return/[\/+]json($|[^-\w])/.test(e)}function T(e){return~[301,302,303,305,307,308].indexOf(e)}(t=e.exports=O).Request=j,t.agent=n(82),t.Response=i,y.define({"application/x-www-form-urlencoded":["form","urlencoded","form-data"]},!0),t.protocols={"http:":b,"https:":m},t.serialize={"application/x-www-form-urlencoded":w.stringify,"application/json":JSON.stringify},t.parse=n(84),_.inherits(j,d),E(j.prototype),j.prototype.attach=function(e,t,n){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");let o=n||{};"string"==typeof n&&(o={filename:n}),"string"==typeof t?(o.filename||(o.filename=t),r("creating `fs.ReadStream` instance for file: %s",t),t=g.createReadStream(t)):!o.filename&&t.path&&(o.filename=t.path),this._getFormData().append(e,t,o)}return this},j.prototype._getFormData=function(){return this._formData||(this._formData=new s,this._formData.on("error",e=>{this.emit("error",e),this.abort()})),this._formData},j.prototype.agent=function(e){return arguments.length?(this._agent=e,this):this._agent},j.prototype.type=function(e){return this.set("Content-Type",~e.indexOf("/")?e:y.lookup(e))},j.prototype.accept=function(e){return this.set("Accept",~e.indexOf("/")?e:y.lookup(e))},j.prototype.query=function(e){return"string"==typeof e?this._query.push(e):f(this.qs,e),this},j.prototype.write=function(e,t){const n=this.request();return this._streamRequest||(this._streamRequest=!0),n.write(e,t)},j.prototype.pipe=function(e,t){return this.piped=!0,this.buffer(!1),this.end(),this._pipeContinue(e,t)},j.prototype._pipeContinue=function(e,t){return this.req.once("response",n=>{if(T(n.statusCode)&&this._redirects++!=this._maxRedirects)return this._redirect(n)._pipeContinue(e,t);if(this.res=n,this._emitResponse(),!this._aborted){if(this._shouldUnzip(n)){const r=v.createUnzip();r.on("error",t=>{t&&"Z_BUF_ERROR"===t.code?e.emit("end"):e.emit("error",t)}),n.pipe(r).pipe(e,t)}else n.pipe(e,t);n.once("end",()=>{this.emit("end")})}}),e},j.prototype.buffer=function(e){return this._buffer=!1!==e,this},j.prototype._redirect=function(e){let t=e.headers.location;if(!t)return this.callback(new Error("No location header for redirect"),e);r("redirect %s -> %s",this.url,t),t=u(this.url,t),e.resume();let n=this.req._headers;const o=a(t).host!==a(this.url).host;return 301!=e.statusCode&&302!=e.statusCode||(n=p.cleanHeader(this.req._headers,o),this.method="HEAD"==this.method?"HEAD":"GET",this._data=null),303==e.statusCode&&(n=p.cleanHeader(this.req._headers,o),this.method="GET",this._data=null),delete n.host,delete this.req,delete this._formData,k(this),this._endCalled=!1,this.url=t,this.qs={},this._query.length=0,this.set(n),this.emit("redirect",e),this._redirectList.push(this.url),this.end(this._callback),this},j.prototype.auth=function(e,t,n){1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(n=t,t=""),n||(n={type:"basic"});var r=function(e){return new Buffer(e).toString("base64")};return this._auth(e,t,n,r)},j.prototype.ca=function(e){return this._ca=e,this},j.prototype.key=function(e){return this._key=e,this},j.prototype.pfx=function(e){return"object"!=typeof e||Buffer.isBuffer(e)?this._pfx=e:(this._pfx=e.pfx,this._passphrase=e.passphrase),this},j.prototype.cert=function(e){return this._cert=e,this},j.prototype.request=function(){if(this.req)return this.req;const e={};try{const e=w.stringify(this.qs,{indices:!1,strictNullHandling:!0});e&&(this.qs={},this._query.push(e)),this._finalizeQueryString()}catch(e){return this.emit("error",e)}let n=this.url;const r=this._retries;if(0!=n.indexOf("http")&&(n=`http://${n}`),n=a(n),!0===/^https?\+unix:/.test(n.protocol)){n.protocol=`${n.protocol.split("+")[0]}:`;const t=n.path.match(/^([^/]+)(.+)$/);e.socketPath=t[1].replace(/%2F/g,"/"),n.path=t[2]}e.method=this.method,e.port=n.port,e.path=n.path,e.host=n.hostname,e.ca=this._ca,e.key=this._key,e.pfx=this._pfx,e.cert=this._cert,e.passphrase=this._passphrase,e.agent=this._agent;const o=t.protocols[n.protocol],s=this.req=o.request(e);if(s.setNoDelay(!0),"HEAD"!=e.method&&s.setHeader("Accept-Encoding","gzip, deflate"),this.protocol=n.protocol,this.host=n.host,s.once("drain",()=>{this.emit("drain")}),s.once("error",e=>{this._aborted||this._retries===r&&(this.response||this.callback(e))}),n.auth){const e=n.auth.split(":");this.auth(e[0],e[1])}this.username&&this.password&&this.auth(this.username,this.password);for(const e in this.header)this.header.hasOwnProperty(e)&&s.setHeader(e,this.header[e]);if(this.cookies)if(this.header.hasOwnProperty("cookie")){const e=new S.CookieJar;e.setCookies(this.header.cookie.split(";")),e.setCookies(this.cookies.split(";")),s.setHeader("Cookie",e.getCookies(S.CookieAccessInfo.All).toValueString())}else s.setHeader("Cookie",this.cookies);return s},j.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();const n=this._callback||P;if(this.clearTimeout(),this.called)return console.warn("superagent: double callback bug");if(this.called=!0,!e)try{if(!this._isResponseOK(t)){let n="Unsuccessful HTTP response";t&&(n=b.STATUS_CODES[t.status]||n),(e=new Error(n)).status=t?t.status:void 0}}catch(t){e=t}if(!e)return n(null,t);e.response=t,this._maxRetries&&(e.retries=this._retries-1),e&&this.listeners("error").length>0&&this.emit("error",e),n(e,t)},j.prototype._isHost=function(e){return Buffer.isBuffer(e)||e instanceof d||e instanceof s},j.prototype._emitResponse=function(e,t){const n=new i(this);return this.response=n,n.redirects=this._redirectList,void 0!==e&&(n.body=e),n.files=t,this.emit("response",n),n},j.prototype.end=function(e){return this.request(),r("%s %s",this.method,this.url),this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||P,this._end()},j.prototype._end=function(){let e=this._data;const n=this.req;let s=this._buffer;const i=this.method;if(this._setTimeouts(),"HEAD"!=i&&!n._headerSent){if("string"!=typeof e){let r=n.getHeader("Content-Type");r&&(r=r.split(";")[0]);let o=t.serialize[r];!o&&q(r)&&(o=t.serialize["application/json"]),o&&(e=o(e))}e&&!n.getHeader("Content-Length")&&n.setHeader("Content-Length",Buffer.isBuffer(e)?e.length:Buffer.byteLength(e))}n.once("response",e=>{if(r("%s %s -> %s",this.method,this.url,e.statusCode),this._responseTimeoutTimer&&clearTimeout(this._responseTimeoutTimer),this.piped)return;const i=this._maxRedirects,a=p.type(e.headers["content-type"]||"")||"text/plain",c=a.split("/")[0],u="multipart"==c,l=T(e.statusCode);let d=this._parser;const f=this._responseType;if(this.res=e,l&&this._redirects++!=i)return this._redirect(e);if("HEAD"==this.method)return this.emit("end"),void this.callback(null,this._emitResponse());if(this._shouldUnzip(e)&&h(n,e),!d)if(f)d=t.parse.image,s=!0;else if(u){const e=new o.IncomingForm;d=e.parse.bind(e),s=!0}else!function(e){const t=e.split("/")[0];return"image"==t||"video"==t}(a)?t.parse[a]?d=t.parse[a]:"text"==c?(d=t.parse.text,s=!1!==s):q(a)?(d=t.parse["application/json"],s=!1!==s):s&&(d=t.parse.text):(d=t.parse.image,s=!0);(void 0===s&&function(e){const t=e.split("/"),n=t[0],r=t[1];return"text"==n||"x-www-form-urlencoded"==r}(a)||q(a))&&(s=!0);let y=!1;if(s){let t=this._maxResponseSize||2e8;e.on("data",n=>{if((t-=n.byteLength||n.length)<0){const t=Error("Maximum response size reached");t.code="ETOOLARGE",y=!1,e.destroy(t)}})}if(d)try{y=s,d(e,(e,t,n)=>{if(!this.timedout)return e&&!this._aborted?this.callback(e):void(y&&(this.emit("end"),this.callback(null,this._emitResponse(t,n))))})}catch(e){return void this.callback(e)}if(this.res=e,s)e.once("error",e=>{y=!1,this.callback(e,null)}),y||e.once("end",()=>{r("end %s %s",this.method,this.url),this.emit("end"),this.callback(null,this._emitResponse())});else{if(r("unbuffered %s %s",this.method,this.url),this.callback(null,this._emitResponse()),u)return;e.once("end",()=>{r("end %s %s",this.method,this.url),this.emit("end")})}}),this.emit("request",this);const a=()=>{const e=n.getHeader("Content-Length");let t=0;const r=new d.Transform;return r._transform=(n,r,o)=>{t+=n.length,this.emit("progress",{direction:"upload",lengthComputable:!0,loaded:t,total:e}),o(null,n)},r},c=this._formData;if(c){const e=c.getHeaders();for(const t in e)r('setting FormData header: "%s: %s"',t,e[t]),n.setHeader(t,e[t]);c.getLength((e,t)=>{r("got FormData Content-Length: %s",t),"number"==typeof t&&n.setHeader("Content-Length",t),c.pipe(a()).pipe(n)})}else Buffer.isBuffer(e)?(e=>{const t=new d.Readable,n=e.length,r=n%16384,o=n-r;for(let n=0;n<o;n+=16384){const r=e.slice(n,n+16384);t.push(r)}if(r>0){const n=e.slice(-r);t.push(n)}return t.push(null),t})(e).pipe(a()).pipe(n):n.end(e);return this},j.prototype._shouldUnzip=e=>204!==e.statusCode&&304!==e.statusCode&&"0"!==e.headers["content-length"]&&/^\s*(?:deflate|gzip)\s*$/.test(e.headers["content-encoding"]),-1==l.indexOf("del")&&(l=l.slice(0)).push("del"),l.forEach(e=>{const t=e;e=(e="del"==e?"delete":e).toUpperCase(),O[t]=(t,n,r)=>{const o=O(e,t);return"function"==typeof n&&(r=n,n=null),n&&("GET"===e||"HEAD"===e?o.query(n):o.send(n)),r&&o.end(r),o}})},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){!function(){"use strict";function e(t,n,r,o){return this instanceof e?(this.domain=t||void 0,this.path=n||"/",this.secure=!!r,this.script=!!o,this):new e(t,n,r,o)}function n(e,t,r){return e instanceof n?e:this instanceof n?(this.name=null,this.value=null,this.expiration_date=1/0,this.path=String(r||"/"),this.explicit_path=!1,this.domain=t||null,this.explicit_domain=!1,this.secure=!1,this.noscript=!1,e&&this.parse(e,t,r),this):new n(e,t,r)}e.All=Object.freeze(Object.create(null)),t.CookieAccessInfo=e,t.Cookie=n,n.prototype.toString=function(){var e=[this.name+"="+this.value];return this.expiration_date!==1/0&&e.push("expires="+new Date(this.expiration_date).toGMTString()),this.domain&&e.push("domain="+this.domain),this.path&&e.push("path="+this.path),this.secure&&e.push("secure"),this.noscript&&e.push("httponly"),e.join("; ")},n.prototype.toValueString=function(){return this.name+"="+this.value};var r=/[:](?=\s*[a-zA-Z0-9_\-]+\s*[=])/g;function o(){var e,t;return this instanceof o?(e=Object.create(null),this.setCookie=function(r,o,s){var i,a;if(i=(r=new n(r,o,s)).expiration_date<=Date.now(),void 0!==e[r.name]){for(t=e[r.name],a=0;a<t.length;a+=1)if(t[a].collidesWith(r))return i?(t.splice(a,1),0===t.length&&delete e[r.name],!1):(t[a]=r,r);return!i&&(t.push(r),r)}return!i&&(e[r.name]=[r],e[r.name])},this.getCookie=function(n,r){var o,s;if(t=e[n])for(s=0;s<t.length;s+=1)if((o=t[s]).expiration_date<=Date.now())0===t.length&&delete e[o.name];else if(o.matches(r))return o},this.getCookies=function(t){var n,r,o=[];for(n in e)(r=this.getCookie(n,t))&&o.push(r);return o.toString=function(){return o.join(":")},o.toValueString=function(){return o.map((function(e){return e.toValueString()})).join(";")},o},this):new o}n.prototype.parse=function(e,t,r){if(this instanceof n){var o,s=e.split(";").filter((function(e){return!!e})),i=s[0].match(/([^=]+)=([\s\S]*)/);if(!i)return void console.warn("Invalid cookie header encountered. Header: '"+e+"'");var a=i[1],c=i[2];if("string"!=typeof a||0===a.length||"string"!=typeof c)return void console.warn("Unable to extract values from cookie header. Cookie: '"+e+"'");for(this.name=a,this.value=c,o=1;o<s.length;o+=1)switch(a=(i=s[o].match(/([^=]+)(?:=([\s\S]*))?/))[1].trim().toLowerCase(),c=i[2],a){case"httponly":this.noscript=!0;break;case"expires":this.expiration_date=c?Number(Date.parse(c)):1/0;break;case"path":this.path=c?c.trim():"",this.explicit_path=!0;break;case"domain":this.domain=c?c.trim():"",this.explicit_domain=!!this.domain;break;case"secure":this.secure=!0}return this.explicit_path||(this.path=r||"/"),this.explicit_domain||(this.domain=t),this}return(new n).parse(e,t,r)},n.prototype.matches=function(t){return t===e.All||!(this.noscript&&t.script||this.secure&&!t.secure||!this.collidesWith(t))},n.prototype.collidesWith=function(e){if(this.path&&!e.path||this.domain&&!e.domain)return!1;if(this.path&&0!==e.path.indexOf(this.path))return!1;if(this.explicit_path&&0!==e.path.indexOf(this.path))return!1;var t=e.domain&&e.domain.replace(/^[\.]/,""),n=this.domain&&this.domain.replace(/^[\.]/,"");if(n===t)return!0;if(n){if(!this.explicit_domain)return!1;var r=t.indexOf(n);return-1!==r&&r===t.length-n.length}return!0},t.CookieJar=o,o.prototype.setCookies=function(e,t,o){var s,i,a=[];for(e=(e=Array.isArray(e)?e:e.split(r)).map((function(e){return new n(e,t,o)})),s=0;s<e.length;s+=1)i=e[s],this.setCookie(i,t,o)&&a.push(i);return a}}()},function(e,t){
/*!
              * assertion-error
              * Copyright(c) 2013 Jake Luer <jake@qualiancy.com>
              * MIT Licensed
              */
/*!
              * Return a function that will copy properties from
              * one object to another excluding any originally
              * listed. Returned function will create a new `{}`.
              *
              * @param {String} excluded properties ...
              * @return {Function}
              */
function n(){var e=[].slice.call(arguments);function t(t,n){Object.keys(n).forEach((function(r){~e.indexOf(r)||(t[r]=n[r])}))}return function(){for(var e=[].slice.call(arguments),n=0,r={};n<e.length;n++)t(r,e[n]);return r}}function r(e,t,o){var s=n("name","message","stack","constructor","toJSON")(t||{});for(var i in this.message=e||"Unspecified AssertionError",this.showDiff=!1,s)this[i]=s[i];if(o=o||r,Error.captureStackTrace)Error.captureStackTrace(this,o);else try{throw new Error}catch(e){this.stack=e.stack}}
/*!
              * Inherit from Error.prototype
              */
/*!
              * Primary Exports
              */e.exports=r,r.prototype=Object.create(Error.prototype),
/*!
              * Statically set name
              */
r.prototype.name="AssertionError",
/*!
              * Ensure correct constructor
              */
r.prototype.constructor=r,r.prototype.toJSON=function(e){var t=n("constructor","toJSON","stack")({name:this.name},this);return!1!==e&&this.stack&&(t.stack=this.stack),t}},function(e,t){
/*!
              * Chai - getActual utility
              * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
              * MIT Licensed
              */
e.exports=function(e,t){return t.length>4?t[4]:e._obj}},function(e,t,n){
/*!
              * Chai - flag utility
              * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
              * MIT Licensed
              */
/*!
              * Module dependencies
              */
var r=n(26),o=n(18);e.exports=function(e){var t=r(e),n=Object.prototype.toString.call(e);if(o.truncateThreshold&&t.length>=o.truncateThreshold){if("[object Function]"===n)return e.name&&""!==e.name?"[Function: "+e.name+"]":"[Function]";if("[object Array]"===n)return"[ Array("+e.length+") ]";if("[object Object]"===n){var s=Object.keys(e);return"{ Object ("+(s.length>2?s.splice(0,2).join(", ")+", ...":s.join(", "))+") }"}return t}return t}},function(e,t,n){"use strict";var r=Function.prototype.toString,o=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\s\(\/]+)/;e.exports=function(e){if("function"!=typeof e)return null;var t="";if(void 0===Function.prototype.name&&void 0===e.name){var n=r.call(e).match(o);n&&(t=n[1])}else t=e.name;return t}},function(e,t){
/*!
              * Chai - getProperties utility
              * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
              * MIT Licensed
              */
e.exports=function(e){var t=Object.getOwnPropertyNames(e);function n(e){-1===t.indexOf(e)&&t.push(e)}for(var r=Object.getPrototypeOf(e);null!==r;)Object.getOwnPropertyNames(r).forEach(n),r=Object.getPrototypeOf(r);return t}},function(e,t){
/*!
              * Chai - getOwnEnumerablePropertySymbols utility
              * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
              * MIT Licensed
              */
e.exports=function(e){return"function"!=typeof Object.getOwnPropertySymbols?[]:Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))}},function(e,t,n){var r=n(27),o=n(28),s=n(24),i=n(40),a=n(89),c=r.Request;function u(e,t,n,r){c.call(this,t.toUpperCase(),n),this.redirects(0),this.buffer(),this.app=e,this._asserts=[],this.url="string"==typeof e?e+n:this.serverAddress(e,n,r)}function l(e,t,n){var r=new Error(e);return r.expected=t,r.actual=n,r.showDiff=!0,r}e.exports=u,Object.setPrototypeOf(u.prototype,c.prototype),u.prototype.serverAddress=function(e,t,n){var r;return e.address()||(this._server=e.listen(0)),r=e.address().port,(e instanceof i.Server?"https":"http")+"://"+(n||"127.0.0.1")+":"+r+t},u.prototype.expect=function(e,t,n){return"function"==typeof e?(this._asserts.push(e),this):("function"==typeof t&&this.end(t),"function"==typeof n&&this.end(n),"number"==typeof e?(this._asserts.push(this._assertStatus.bind(this,e)),"function"!=typeof t&&arguments.length>1&&this._asserts.push(this._assertBody.bind(this,t)),this):"string"==typeof t||"number"==typeof t||t instanceof RegExp?(this._asserts.push(this._assertHeader.bind(this,{name:""+e,value:t})),this):(this._asserts.push(this._assertBody.bind(this,e)),this))},u.prototype.end=function(e){var t=this,n=this._server;return c.prototype.end.call(this,(function(r,o){if(n&&n._handle)return n.close(s);function s(){t.assert(r,o,e)}s()})),this},u.prototype.assert=function(e,t,n){var r,o,s={ECONNREFUSED:"Connection refused",ECONNRESET:"Connection reset by peer",EPIPE:"Broken pipe",ETIMEDOUT:"Operation timed out"};for(!t&&e&&(r=e instanceof Error&&"connect"===e.syscall&&Object.getOwnPropertyNames(s).indexOf(e.code)>=0?new Error(e.code+": "+s[e.code]):e),o=0;o<this._asserts.length&&!r;o+=1)r=this._assertFunction(this._asserts[o],t);r||!(e instanceof Error)||t&&e.status===t.status||(r=e),n.call(this,r||null,t)},u.prototype._assertBody=function(e,t){var n,r,s=e instanceof RegExp;if("object"!=typeof e||s){if(e!==t.text){if(n=o.inspect(e),r=o.inspect(t.text),!s)return l("expected "+n+" response body, got "+r,e,t.body);if(!e.test(t.text))return l("expected body "+r+" to match "+e,e,t.body)}}else try{a.deepStrictEqual(e,t.body)}catch(s){return l("expected "+(n=o.inspect(e))+" response body, got "+(r=o.inspect(t.body)),e,t.body)}},u.prototype._assertHeader=function(e,t){var n=e.name,r=t.header[n.toLowerCase()],o=e.value;return void 0===r?new Error('expected "'+n+'" header field'):Array.isArray(r)&&r.toString()===o||o===r?void 0:o instanceof RegExp?o.test(r)?void 0:new Error('expected "'+n+'" matching '+o+', got "'+r+'"'):new Error('expected "'+n+'" of "'+o+'", got "'+r+'"')},u.prototype._assertStatus=function(e,t){var n,r;if(t.status!==e)return n=s.STATUS_CODES[e],r=s.STATUS_CODES[t.status],new Error("expected "+e+' "'+n+'", got '+t.status+' "'+r+'"')},u.prototype._assertFunction=function(e,t){var n;try{n=e(t)}catch(e){n=e}if(n instanceof Error)return n}},function(e,t,n){"use strict";t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){return e.split(/ *; */).reduce((function(e,t){var n=t.split(/ *= */),r=n.shift(),o=n.shift();return r&&o&&(e[r]=o),e}),{})},t.parseLinks=function(e){return e.split(/ *, */).reduce((function(e,t){var n=t.split(/ *; */),r=n[0].slice(1,-1);return e[n[1].split(/ *= */)[1].slice(1,-1)]=r,e}),{})},t.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},function(e,t){e.exports=n(39)},function(e,t){e.exports=n(40)},function(e,t){e.exports=n(41)},function(e,t,n){const{expect:r}=n(43),o=n(66);n(91);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){e.exports=n(16)},function(e,t,n){
/*!
              * chai
              * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
              * MIT Licensed
              */
/*!
              * Dependencies that are used for multiple exports are required here only once
              */
var r=n(45);
/*!
              * test utility
              */t.test=n(46),
/*!
              * type utility
              */
t.type=n(25),
/*!
              * expectTypes utility
              */
t.expectTypes=n(47),
/*!
              * message utility
              */
t.getMessage=n(48),
/*!
              * actual utility
              */
t.getActual=n(32),
/*!
              * Inspect util
              */
t.inspect=n(26),
/*!
              * Object Display util
              */
t.objDisplay=n(33),
/*!
              * Flag utility
              */
t.flag=n(15),
/*!
              * Flag transferring utility
              */
t.transferFlags=n(17),
/*!
              * Deep equal utility
              */
t.eql=n(50),
/*!
              * Deep path info
              */
t.getPathInfo=r.getPathInfo,
/*!
              * Check if a property exists
              */
t.hasProperty=r.hasProperty,
/*!
              * Function name
              */
t.getName=n(34),
/*!
              * add Property
              */
t.addProperty=n(51),
/*!
              * add Method
              */
t.addMethod=n(52),
/*!
              * overwrite Property
              */
t.overwriteProperty=n(53),
/*!
              * overwrite Method
              */
t.overwriteMethod=n(54),
/*!
              * Add a chainable method
              */
t.addChainableMethod=n(55),
/*!
              * Overwrite chainable method
              */
t.overwriteChainableMethod=n(56),
/*!
              * Compare by inspect method
              */
t.compareByInspect=n(57),
/*!
              * Get own enumerable property symbols method
              */
t.getOwnEnumerablePropertySymbols=n(36),
/*!
              * Get own enumerable properties method
              */
t.getOwnEnumerableProperties=n(58),
/*!
              * Checks error against a given set of criteria
              */
t.checkError=n(59),
/*!
              * Proxify util
              */
t.proxify=n(21),
/*!
              * addLengthGuard util
              */
t.addLengthGuard=n(20),
/*!
              * isProxyEnabled helper
              */
t.isProxyEnabled=n(19),
/*!
              * isNaN method
              */
t.isNaN=n(60)},function(e,t,n){"use strict";function r(e,t){return null!=e&&t in Object(e)}function o(e){return e.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map((function(e){var t=/^\[(\d+)\]$/.exec(e);return t?{i:parseFloat(t[1])}:{p:e.replace(/\\([.\[\]])/g,"$1")}}))}function s(e,t,n){var r=e,o=null;n=void 0===n?t.length:n;for(var s=0;s<n;s++){var i=t[s];r&&(r=void 0===i.p?r[i.i]:r[i.p],s===n-1&&(o=r))}return o}function i(e,t){var n=o(t),i=n[n.length-1],a={parent:n.length>1?s(e,n,n.length-1):e,name:i.p||i.i,value:s(e,n)};return a.exists=r(a.parent,a.name),a}e.exports={hasProperty:r,getPathInfo:i,getPathValue:function(e,t){return i(e,t).value},setPathValue:function(e,t,n){return function(e,t,n){for(var r=e,o=n.length,s=null,i=0;i<o;i++){var a=null,c=null;if(s=n[i],i===o-1)r[a=void 0===s.p?s.i:s.p]=t;else if(void 0!==s.p&&r[s.p])r=r[s.p];else if(void 0!==s.i&&r[s.i])r=r[s.i];else{var u=n[i+1];a=void 0===s.p?s.i:s.p,c=void 0===u.p?[]:{},r[a]=c,r=r[a]}}}(e,n,o(t)),e}}},function(e,t,n){
/*!
              * Chai - test utility
              * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
              * MIT Licensed
              */
/*!
              * Module dependencies
              */
var r=n(15);e.exports=function(e,t){var n=r(e,"negate"),o=t[0];return n?!o:o}},function(e,t,n){
/*!
              * Chai - expectTypes utility
              * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
              * MIT Licensed
              */
var r=n(31),o=n(15),s=n(25);e.exports=function(e,t){var n=o(e,"message"),i=o(e,"ssfi");n=n?n+": ":"",e=o(e,"object"),(t=t.map((function(e){return e.toLowerCase()}))).sort();var a=t.map((function(e,n){var r=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an":"a";return(t.length>1&&n===t.length-1?"or ":"")+r+" "+e})).join(", "),c=s(e).toLowerCase();if(!t.some((function(e){return c===e})))throw new r(n+"object tested must be "+a+", but "+c+" given",void 0,i)}},function(e,t,n){
/*!
              * Chai - message composition utility
              * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
              * MIT Licensed
              */
/*!
              * Module dependencies
              */
var r=n(15),o=n(32),s=n(33);e.exports=function(e,t){var n=r(e,"negate"),i=r(e,"object"),a=t[3],c=o(e,t),u=n?t[2]:t[1],l=r(e,"message");return"function"==typeof u&&(u=u()),u=(u=u||"").replace(/#\{this\}/g,(function(){return s(i)})).replace(/#\{act\}/g,(function(){return s(c)})).replace(/#\{exp\}/g,(function(){return s(a)})),l?l+": "+u:u}},function(e,t){
/*!
              * Chai - getEnumerableProperties utility
              * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
              * MIT Licensed
              */
e.exports=function(e){var t=[];for(var n in e)t.push(n);return t}},function(e,t,n){"use strict";
/*!
              * deep-eql
              * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
              * MIT Licensed
              */var r=n(25);function o(){this._key="chai/deep-eql__"+Math.random()+Date.now()}o.prototype={get:function(e){return e[this._key]},set:function(e,t){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:t,configurable:!0})}};var s="function"==typeof WeakMap?WeakMap:o;
/*!
              * Check to see if the MemoizeMap has recorded a result of the two operands
              *
              * @param {Mixed} leftHandOperand
              * @param {Mixed} rightHandOperand
              * @param {MemoizeMap} memoizeMap
              * @returns {Boolean|null} result
             */function i(e,t,n){if(!n||y(e)||y(t))return null;var r=n.get(e);if(r){var o=r.get(t);if("boolean"==typeof o)return o}return null}
/*!
              * Set the result of the equality into the MemoizeMap
              *
              * @param {Mixed} leftHandOperand
              * @param {Mixed} rightHandOperand
              * @param {MemoizeMap} memoizeMap
              * @param {Boolean} result
             */function a(e,t,n,r){if(n&&!y(e)&&!y(t)){var o=n.get(e);o?o.set(t,r):((o=new s).set(t,r),n.set(e,o))}}
/*!
              * Primary Export
              */function c(e,t,n){if(n&&n.comparator)return l(e,t,n);var r=u(e,t);return null!==r?r:l(e,t,n)}function u(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t||!y(e)&&!y(t)&&null}
/*!
              * The main logic of the `deepEqual` function.
              *
              * @param {Mixed} leftHandOperand
              * @param {Mixed} rightHandOperand
              * @param {Object} [options] (optional) Additional options
              * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
              * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
                 complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
                 references to blow the stack.
              * @return {Boolean} equal match
             */function l(e,t,n){(n=n||{}).memoize=!1!==n.memoize&&(n.memoize||new s);var o=n&&n.comparator,l=i(e,t,n.memoize);if(null!==l)return l;var y=i(t,e,n.memoize);if(null!==y)return y;if(o){var m=o(e,t);if(!1===m||!0===m)return a(e,t,n.memoize,m),m;var b=u(e,t);if(null!==b)return b}var g=r(e);if(g!==r(t))return a(e,t,n.memoize,!1),!1;a(e,t,n.memoize,!0);var w=function(e,t,n,r){switch(n){case"String":case"Number":case"Boolean":case"Date":return c(e.valueOf(),t.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":case"Error":return e===t;case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return d(e,t,r);case"RegExp":
/*!
                                          * Compare two Regular Expressions for equality.
                                          *
                                          * @param {RegExp} leftHandOperand
                                          * @param {RegExp} rightHandOperand
                                          * @return {Boolean} result
                                          */
return function(e,t){return e.toString()===t.toString()}
/*!
                                          * Compare two Sets/Maps for equality. Faster than other equality functions.
                                          *
                                          * @param {Set} leftHandOperand
                                          * @param {Set} rightHandOperand
                                          * @param {Object} [options] (Optional)
                                          * @return {Boolean} result
                                          */(e,t);case"Generator":
/*!
                                          * Simple equality for generator objects such as those returned by generator functions.
                                          *
                                          * @param {Iterable} leftHandOperand
                                          * @param {Iterable} rightHandOperand
                                          * @param {Object} [options] (Optional)
                                          * @return {Boolean} result
                                          */
return function(e,t,n){return d(h(e),h(t),n)}
/*!
                                          * Determine if the given object has an @@iterator function.
                                          *
                                          * @param {Object} target
                                          * @return {Boolean} `true` if the object has an @@iterator function.
                                          */(e,t,r);case"DataView":return d(new Uint8Array(e.buffer),new Uint8Array(t.buffer),r);case"ArrayBuffer":return d(new Uint8Array(e),new Uint8Array(t),r);case"Set":case"Map":return function(e,t,n){if(e.size!==t.size)return!1;if(0===e.size)return!0;var r=[],o=[];return e.forEach((function(e,t){r.push([e,t])})),t.forEach((function(e,t){o.push([e,t])})),d(r.sort(),o.sort(),n);
/*!
                                  * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
                                  *
                                  * @param {Iterable} leftHandOperand
                                  * @param {Iterable} rightHandOperand
                                  * @param {Object} [options] (Optional)
                                  * @return {Boolean} result
                                  */}(e,t,r);default:
/*!
                                          * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
                                          * for each enumerable key in the object.
                                          *
                                          * @param {Mixed} leftHandOperand
                                          * @param {Mixed} rightHandOperand
                                          * @param {Object} [options] (Optional)
                                          * @return {Boolean} result
                                          */
return function(e,t,n){var r=f(e),o=f(t);if(r.length&&r.length===o.length)return r.sort(),o.sort(),!1!==d(r,o)&&
/*!
                                                 * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
                                                 * each key. If any value of the given key is not equal, the function will return false (early).
                                                 *
                                                 * @param {Mixed} leftHandOperand
                                                 * @param {Mixed} rightHandOperand
                                                 * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
                                                 * @param {Object} [options] (Optional)
                                                 * @return {Boolean} result
                                                 */
function(e,t,n,r){var o=n.length;if(0===o)return!0;for(var s=0;s<o;s+=1)if(!1===c(e[n[s]],t[n[s]],r))return!1;return!0}(e,t,r,n);var s=p(e),i=p(t);return s.length&&s.length===i.length?(s.sort(),i.sort(),d(s,i,n)):0===r.length&&0===s.length&&0===o.length&&0===i.length}
/*!
                                          * Returns true if the argument is a primitive.
                                          *
                                          * This intentionally returns true for all objects that can be compared by reference,
                                          * including functions and symbols.
                                          *
                                          * @param {Mixed} value
                                          * @return {Boolean} result
                                          */(e,t,r)}}(e,t,g,n);return a(e,t,n.memoize,w),w}function d(e,t,n){var r=e.length;if(r!==t.length)return!1;if(0===r)return!0;for(var o=-1;++o<r;)if(!1===c(e[o],t[o],n))return!1;return!0}
/*!
              * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
              * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
              *
              * @param {Object} target
              * @returns {Array} an array of entries from the @@iterator function
              */function p(e){if(function(e){return"undefined"!=typeof Symbol&&"object"==typeof e&&void 0!==Symbol.iterator&&"function"==typeof e[Symbol.iterator]}(e))try{return h(e[Symbol.iterator]())}catch(e){return[]}return[]}
/*!
              * Gets all entries from a Generator. This will consume the generator - which could have side effects.
              *
              * @param {Generator} target
              * @returns {Array} an array of entries from the Generator.
              */function h(e){for(var t=e.next(),n=[t.value];!1===t.done;)t=e.next(),n.push(t.value);return n}
/*!
              * Gets all own and inherited enumerable keys from a target.
              *
              * @param {Object} target
              * @returns {Array} an array of own and inherited enumerable keys from the target.
              */function f(e){var t=[];for(var n in e)t.push(n);return t}function y(e){return null===e||"object"!=typeof e}e.exports=c,e.exports.MemoizeMap=s},function(e,t,n){
/*!
              * Chai - addProperty utility
              * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
              * MIT Licensed
              */
var r=n(16),o=n(15),s=n(19),i=n(17);e.exports=function(e,t,n){n=void 0===n?function(){}:n,Object.defineProperty(e,t,{get:function e(){s()||o(this,"lockSsfi")||o(this,"ssfi",e);var t=n.call(this);if(void 0!==t)return t;var a=new r.Assertion;return i(this,a),a},configurable:!0})}},function(e,t,n){
/*!
              * Chai - addMethod utility
              * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
              * MIT Licensed
              */
var r=n(20),o=n(16),s=n(15),i=n(21),a=n(17);e.exports=function(e,t,n){var c=function(){s(this,"lockSsfi")||s(this,"ssfi",c);var e=n.apply(this,arguments);if(void 0!==e)return e;var t=new o.Assertion;return a(this,t),t};r(c,t,!1),e[t]=i(c,t)}},function(e,t,n){
/*!
              * Chai - overwriteProperty utility
              * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
              * MIT Licensed
              */
var r=n(16),o=n(15),s=n(19),i=n(17);e.exports=function(e,t,n){var a=Object.getOwnPropertyDescriptor(e,t),c=function(){};a&&"function"==typeof a.get&&(c=a.get),Object.defineProperty(e,t,{get:function e(){s()||o(this,"lockSsfi")||o(this,"ssfi",e);var t=o(this,"lockSsfi");o(this,"lockSsfi",!0);var a=n(c).call(this);if(o(this,"lockSsfi",t),void 0!==a)return a;var u=new r.Assertion;return i(this,u),u},configurable:!0})}},function(e,t,n){
/*!
              * Chai - overwriteMethod utility
              * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
              * MIT Licensed
              */
var r=n(20),o=n(16),s=n(15),i=n(21),a=n(17);e.exports=function(e,t,n){var c=e[t],u=function(){throw new Error(t+" is not a function")};c&&"function"==typeof c&&(u=c);var l=function(){s(this,"lockSsfi")||s(this,"ssfi",l);var e=s(this,"lockSsfi");s(this,"lockSsfi",!0);var t=n(u).apply(this,arguments);if(s(this,"lockSsfi",e),void 0!==t)return t;var r=new o.Assertion;return a(this,r),r};r(l,t,!1),e[t]=i(l,t)}},function(e,t,n){
/*!
              * Chai - addChainingMethod utility
              * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
              * MIT Licensed
              */
/*!
              * Module dependencies
              */
var r=n(20),o=n(16),s=n(15),i=n(21),a=n(17),c="function"==typeof Object.setPrototypeOf,u=function(){},l=Object.getOwnPropertyNames(u).filter((function(e){var t=Object.getOwnPropertyDescriptor(u,e);return"object"!=typeof t||!t.configurable})),d=Function.prototype.call,p=Function.prototype.apply;e.exports=function(e,t,n,u){"function"!=typeof u&&(u=function(){});var h={method:n,chainingBehavior:u};e.__methods||(e.__methods={}),e.__methods[t]=h,Object.defineProperty(e,t,{get:function(){h.chainingBehavior.call(this);var n=function(){s(this,"lockSsfi")||s(this,"ssfi",n);var e=h.method.apply(this,arguments);if(void 0!==e)return e;var t=new o.Assertion;return a(this,t),t};if(r(n,t,!0),c){var u=Object.create(this);u.call=d,u.apply=p,Object.setPrototypeOf(n,u)}else Object.getOwnPropertyNames(e).forEach((function(t){if(-1===l.indexOf(t)){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r)}}));return a(this,n),i(n)},configurable:!0})}},function(e,t,n){
/*!
              * Chai - overwriteChainableMethod utility
              * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
              * MIT Licensed
              */
var r=n(16),o=n(17);e.exports=function(e,t,n,s){var i=e.__methods[t],a=i.chainingBehavior;i.chainingBehavior=function(){var e=s(a).call(this);if(void 0!==e)return e;var t=new r.Assertion;return o(this,t),t};var c=i.method;i.method=function(){var e=n(c).apply(this,arguments);if(void 0!==e)return e;var t=new r.Assertion;return o(this,t),t}}},function(e,t,n){
/*!
              * Chai - compareByInspect utility
              * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
              * MIT Licensed
              */
/*!
              * Module dependencies
              */
var r=n(26);e.exports=function(e,t){return r(e)<r(t)?-1:1}},function(e,t,n){
/*!
              * Chai - getOwnEnumerableProperties utility
              * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
              * MIT Licensed
              */
/*!
              * Module dependencies
              */
var r=n(36);e.exports=function(e){return Object.keys(e).concat(r(e))}},function(e,t,n){"use strict";var r=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\(\/]+)/;function o(e){var t="";if(void 0===e.name){var n=String(e).match(r);n&&(t=n[1])}else t=e.name;return t}e.exports={compatibleInstance:function(e,t){return t instanceof Error&&e===t},compatibleConstructor:function(e,t){return t instanceof Error?e.constructor===t.constructor||e instanceof t.constructor:(t.prototype instanceof Error||t===Error)&&(e.constructor===t||e instanceof t)},compatibleMessage:function(e,t){var n="string"==typeof e?e:e.message;return t instanceof RegExp?t.test(n):"string"==typeof t&&-1!==n.indexOf(t)},getMessage:function(e){var t="";return e&&e.message?t=e.message:"string"==typeof e&&(t=e),t},getConstructorName:function(e){var t=e;return e instanceof Error?t=o(e.constructor):"function"==typeof e&&(t=o(e).trim()||o(new e)),t}}},function(e,t){e.exports=Number.isNaN||
/*!
              * Chai - isNaN utility
              * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
              * MIT Licensed
              */
function(e){return e!=e}},function(e,t,n){
/*!
              * chai
              * http://chaijs.com
              * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
              * MIT Licensed
              */
var r=n(18);e.exports=function(e,t){
/*!
                       * Module dependencies.
                       */
var n=e.AssertionError,o=t.flag;
/*!
                       * Module export.
                       */
/*!
                       * Assertion Constructor
                       *
                       * Creates object for chaining.
                       *
                       * `Assertion` objects contain metadata in the form of flags. Three flags can
                       * be assigned during instantiation by passing arguments to this constructor:
                       *
                       * - `object`: This flag contains the target of the assertion. For example, in
                       *   the assertion `expect(numKittens).to.equal(7);`, the `object` flag will
                       *   contain `numKittens` so that the `equal` assertion can reference it when
                       *   needed.
                       *
                       * - `message`: This flag contains an optional custom error message to be
                       *   prepended to the error message that's generated by the assertion when it
                       *   fails.
                       *
                       * - `ssfi`: This flag stands for "start stack function indicator". It
                       *   contains a function reference that serves as the starting point for
                       *   removing frames from the stack trace of the error that's created by the
                       *   assertion when it fails. The goal is to provide a cleaner stack trace to
                       *   end users by removing Chai's internal functions. Note that it only works
                       *   in environments that support `Error.captureStackTrace`, and only when
                       *   `Chai.config.includeStack` hasn't been set to `false`.
                       *
                       * - `lockSsfi`: This flag controls whether or not the given `ssfi` flag
                       *   should retain its current value, even as assertions are chained off of
                       *   this object. This is usually set to `true` when creating a new assertion
                       *   from within another assertion. It's also temporarily set to `true` before
                       *   an overwritten assertion gets called by the overwriting assertion.
                       *
                       * @param {Mixed} obj target of the assertion
                       * @param {String} msg (optional) custom error message
                       * @param {Function} ssfi (optional) starting point for removing stack frames
                       * @param {Boolean} lockSsfi (optional) whether or not the ssfi flag is locked
                       * @api private
                       */function s(e,n,r,i){return o(this,"ssfi",r||s),o(this,"lockSsfi",i),o(this,"object",e),o(this,"message",n),t.proxify(this)}e.Assertion=s,Object.defineProperty(s,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack},set:function(e){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack=e}}),Object.defineProperty(s,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff},set:function(e){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff=e}}),s.addProperty=function(e,n){t.addProperty(this.prototype,e,n)},s.addMethod=function(e,n){t.addMethod(this.prototype,e,n)},s.addChainableMethod=function(e,n,r){t.addChainableMethod(this.prototype,e,n,r)},s.overwriteProperty=function(e,n){t.overwriteProperty(this.prototype,e,n)},s.overwriteMethod=function(e,n){t.overwriteMethod(this.prototype,e,n)},s.overwriteChainableMethod=function(e,n,r){t.overwriteChainableMethod(this.prototype,e,n,r)},s.prototype.assert=function(e,s,i,a,c,u){var l=t.test(this,arguments);if(!1!==u&&(u=!0),void 0===a&&void 0===c&&(u=!1),!0!==r.showDiff&&(u=!1),!l){s=t.getMessage(this,arguments);var d=t.getActual(this,arguments);throw new n(s,{actual:d,expected:a,showDiff:u},r.includeStack?this.assert:o(this,"ssfi"))}},
/*!
                       * ### ._obj
                       *
                       * Quick reference to stored `actual` value for plugin developers.
                       *
                       * @api private
                       */
Object.defineProperty(s.prototype,"_obj",{get:function(){return o(this,"object")},set:function(e){o(this,"object",e)}})}},function(e,t){
/*!
              * chai
              * http://chaijs.com
              * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
              * MIT Licensed
              */
e.exports=function(e,t){var n=e.Assertion,r=e.AssertionError,o=t.flag;function s(e,n){n&&o(this,"message",n),e=e.toLowerCase();var r=o(this,"object"),s=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an ":"a ";this.assert(e===t.type(r).toLowerCase(),"expected #{this} to be "+s+e,"expected #{this} not to be "+s+e)}function i(e,n){return t.isNaN(e)&&t.isNaN(n)||e===n}function a(){o(this,"contains",!0)}function c(e,s){s&&o(this,"message",s);var a=o(this,"object"),c=t.type(a).toLowerCase(),u=o(this,"message"),l=o(this,"negate"),d=o(this,"ssfi"),p=o(this,"deep"),h=p?"deep ":"";u=u?u+": ":"";var f=!1;switch(c){case"string":f=-1!==a.indexOf(e);break;case"weakset":if(p)throw new r(u+"unable to use .deep.include with WeakSet",void 0,d);f=a.has(e);break;case"map":var y=p?t.eql:i;a.forEach((function(t){f=f||y(t,e)}));break;case"set":p?a.forEach((function(n){f=f||t.eql(n,e)})):f=a.has(e);break;case"array":f=p?a.some((function(n){return t.eql(n,e)})):-1!==a.indexOf(e);break;default:if(e!==Object(e))throw new r(u+"object tested must be an array, a map, an object, a set, a string, or a weakset, but "+c+" given",void 0,d);var m=Object.keys(e),b=null,g=0;if(m.forEach((function(s){var i=new n(a);if(t.transferFlags(this,i,!0),o(i,"lockSsfi",!0),l&&1!==m.length)try{i.property(s,e[s])}catch(e){if(!t.checkError.compatibleConstructor(e,r))throw e;null===b&&(b=e),g++}else i.property(s,e[s])}),this),l&&m.length>1&&g===m.length)throw b;return}this.assert(f,"expected #{this} to "+h+"include "+t.inspect(e),"expected #{this} to not "+h+"include "+t.inspect(e))}function u(){var e=o(this,"object"),n=t.type(e);this.assert("Arguments"===n,"expected #{this} to be arguments but got "+n,"expected #{this} to not be arguments")}function l(e,t){t&&o(this,"message",t);var n=o(this,"object");if(o(this,"deep")){var r=o(this,"lockSsfi");o(this,"lockSsfi",!0),this.eql(e),o(this,"lockSsfi",r)}else this.assert(e===n,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",e,this._obj,!0)}function d(e,n){n&&o(this,"message",n),this.assert(t.eql(e,o(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",e,this._obj,!0)}function p(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to above must be a number":i=l+"the argument to above must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y>e,"expected #{this} to have a "+m+" above #{exp} but got #{act}","expected #{this} to not have a "+m+" above #{exp}",e,y)}else this.assert(a>e,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",e)}function h(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to least must be a number":i=l+"the argument to least must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y>=e,"expected #{this} to have a "+m+" at least #{exp} but got #{act}","expected #{this} to have a "+m+" below #{exp}",e,y)}else this.assert(a>=e,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",e)}function f(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to below must be a number":i=l+"the argument to below must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y<e,"expected #{this} to have a "+m+" below #{exp} but got #{act}","expected #{this} to not have a "+m+" below #{exp}",e,y)}else this.assert(a<e,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",e)}function y(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to most must be a number":i=l+"the argument to most must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y<=e,"expected #{this} to have a "+m+" at most #{exp} but got #{act}","expected #{this} to have a "+m+" above #{exp}",e,y)}else this.assert(a<=e,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",e)}function m(e,n){n&&o(this,"message",n);var s=o(this,"object"),i=o(this,"ssfi"),a=o(this,"message");try{var c=s instanceof e}catch(n){if(n instanceof TypeError)throw new r((a=a?a+": ":"")+"The instanceof assertion needs a constructor but "+t.type(e)+" was given.",void 0,i);throw n}var u=t.getName(e);null===u&&(u="an unnamed constructor"),this.assert(c,"expected #{this} to be an instance of "+u,"expected #{this} to not be an instance of "+u)}function b(e,n,s){s&&o(this,"message",s);var i=o(this,"nested"),a=o(this,"own"),c=o(this,"message"),u=o(this,"object"),l=o(this,"ssfi"),d=typeof e;if(c=c?c+": ":"",i){if("string"!==d)throw new r(c+"the argument to property must be a string when using nested syntax",void 0,l)}else if("string"!==d&&"number"!==d&&"symbol"!==d)throw new r(c+"the argument to property must be a string, number, or symbol",void 0,l);if(i&&a)throw new r(c+'The "nested" and "own" flags cannot be combined.',void 0,l);if(null==u)throw new r(c+"Target cannot be null or undefined.",void 0,l);var p,h=o(this,"deep"),f=o(this,"negate"),y=i?t.getPathInfo(u,e):null,m=i?y.value:u[e],b="";h&&(b+="deep "),a&&(b+="own "),i&&(b+="nested "),b+="property ",p=a?Object.prototype.hasOwnProperty.call(u,e):i?y.exists:t.hasProperty(u,e),f&&1!==arguments.length||this.assert(p,"expected #{this} to have "+b+t.inspect(e),"expected #{this} to not have "+b+t.inspect(e)),arguments.length>1&&this.assert(p&&(h?t.eql(n,m):n===m),"expected #{this} to have "+b+t.inspect(e)+" of #{exp}, but got #{act}","expected #{this} to not have "+b+t.inspect(e)+" of #{act}",n,m),o(this,"object",m)}function g(e,t,n){o(this,"own",!0),b.apply(this,arguments)}function w(e,n,r){"string"==typeof n&&(r=n,n=null),r&&o(this,"message",r);var s=o(this,"object"),i=Object.getOwnPropertyDescriptor(Object(s),e);i&&n?this.assert(t.eql(n,i),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to match "+t.inspect(n)+", got "+t.inspect(i),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to not match "+t.inspect(n),n,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+t.inspect(e),"expected #{this} to not have an own property descriptor for "+t.inspect(e)),o(this,"object",i)}function v(){o(this,"doLength",!0)}function _(e,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=t.type(i).toLowerCase(),c=o(this,"message"),u=o(this,"ssfi"),l="length";switch(a){case"map":case"set":l="size",s=i.size;break;default:new n(i,c,u,!0).to.have.property("length"),s=i.length}this.assert(s==e,"expected #{this} to have a "+l+" of #{exp} but got #{act}","expected #{this} to not have a "+l+" of #{act}",e,s)}function x(e,t){t&&o(this,"message",t);var n=o(this,"object");this.assert(e.exec(n),"expected #{this} to match "+e,"expected #{this} not to match "+e)}function E(e){var n,s,i=o(this,"object"),a=t.type(i),c=t.type(e),u=o(this,"ssfi"),l=o(this,"deep"),d="",p=!0,h=o(this,"message"),f=(h=h?h+": ":"")+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if("Map"===a||"Set"===a)d=l?"deeply ":"",s=[],i.forEach((function(e,t){s.push(t)})),"Array"!==c&&(e=Array.prototype.slice.call(arguments));else{switch(s=t.getOwnEnumerableProperties(i),c){case"Array":if(arguments.length>1)throw new r(f,void 0,u);break;case"Object":if(arguments.length>1)throw new r(f,void 0,u);e=Object.keys(e);break;default:e=Array.prototype.slice.call(arguments)}e=e.map((function(e){return"symbol"==typeof e?e:String(e)}))}if(!e.length)throw new r(h+"keys required",void 0,u);var y=e.length,m=o(this,"any"),b=o(this,"all"),g=e;if(m||b||(b=!0),m&&(p=g.some((function(e){return s.some((function(n){return l?t.eql(e,n):e===n}))}))),b&&(p=g.every((function(e){return s.some((function(n){return l?t.eql(e,n):e===n}))})),o(this,"contains")||(p=p&&e.length==s.length)),y>1){var w=(e=e.map((function(e){return t.inspect(e)}))).pop();b&&(n=e.join(", ")+", and "+w),m&&(n=e.join(", ")+", or "+w)}else n=t.inspect(e[0]);n=(y>1?"keys ":"key ")+n,n=(o(this,"contains")?"contain ":"have ")+n,this.assert(p,"expected #{this} to "+d+n,"expected #{this} to not "+d+n,g.slice(0).sort(t.compareByInspect),s.sort(t.compareByInspect),!0)}function S(e,r,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"ssfi"),u=o(this,"message"),l=o(this,"negate")||!1;new n(a,u,c,!0).is.a("function"),(e instanceof RegExp||"string"==typeof e)&&(r=e,e=null);try{a()}catch(e){i=e}var d=void 0===e&&void 0===r,p=Boolean(e&&r),h=!1,f=!1;if(d||!d&&!l){var y="an error";e instanceof Error?y="#{exp}":e&&(y=t.checkError.getConstructorName(e)),this.assert(i,"expected #{this} to throw "+y,"expected #{this} to not throw an error but #{act} was thrown",e&&e.toString(),i instanceof Error?i.toString():"string"==typeof i?i:i&&t.checkError.getConstructorName(i))}if(e&&i&&(e instanceof Error&&t.checkError.compatibleInstance(i,e)===l&&(p&&l?h=!0:this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i&&!l?" but #{act} was thrown":""),e.toString(),i.toString())),t.checkError.compatibleConstructor(i,e)===l&&(p&&l?h=!0:this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&t.checkError.getConstructorName(e),i instanceof Error?i.toString():i&&t.checkError.getConstructorName(i)))),i&&null!=r){var m="including";r instanceof RegExp&&(m="matching"),t.checkError.compatibleMessage(i,r)===l&&(p&&l?f=!0:this.assert(l,"expected #{this} to throw error "+m+" #{exp} but got #{act}","expected #{this} to throw error not "+m+" #{exp}",r,t.checkError.getMessage(i)))}h&&f&&this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&t.checkError.getConstructorName(e),i instanceof Error?i.toString():i&&t.checkError.getConstructorName(i)),o(this,"object",i)}function O(e,n){n&&o(this,"message",n);var r=o(this,"object"),s=o(this,"itself"),i="function"!=typeof r||s?r[e]:r.prototype[e];this.assert("function"==typeof i,"expected #{this} to respond to "+t.inspect(e),"expected #{this} to not respond to "+t.inspect(e))}function P(e,n){n&&o(this,"message",n);var r=e(o(this,"object"));this.assert(r,"expected #{this} to satisfy "+t.objDisplay(e),"expected #{this} to not satisfy"+t.objDisplay(e),!o(this,"negate"),r)}function k(e,t,s){s&&o(this,"message",s);var i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");if(new n(i,a,c,!0).is.a("number"),"number"!=typeof e||"number"!=typeof t)throw new r((a=a?a+": ":"")+"the arguments to closeTo or approximately must be numbers",void 0,c);this.assert(Math.abs(i-e)<=t,"expected #{this} to be close to "+e+" +/- "+t,"expected #{this} not to be close to "+e+" +/- "+t)}function j(e,t,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),s=e[t]):(new n(e,a,c,!0).is.a("function"),s=e()),i();var u=null==t?e():e[t],l=null==t?s:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",s),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","change"),o(this,"realDelta",u!==s),this.assert(s!==u,"expected "+l+" to change","expected "+l+" to not change")}function q(e,t,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),s=e[t]):(new n(e,a,c,!0).is.a("function"),s=e()),new n(s,a,c,!0).is.a("number"),i();var u=null==t?e():e[t],l=null==t?s:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",s),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","increase"),o(this,"realDelta",u-s),this.assert(u-s>0,"expected "+l+" to increase","expected "+l+" to not increase")}function T(e,t,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),s=e[t]):(new n(e,a,c,!0).is.a("function"),s=e()),new n(s,a,c,!0).is.a("number"),i();var u=null==t?e():e[t],l=null==t?s:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",s),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","decrease"),o(this,"realDelta",s-u),this.assert(u-s<0,"expected "+l+" to decrease","expected "+l+" to not decrease")}["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still"].forEach((function(e){n.addProperty(e)})),n.addProperty("not",(function(){o(this,"negate",!0)})),n.addProperty("deep",(function(){o(this,"deep",!0)})),n.addProperty("nested",(function(){o(this,"nested",!0)})),n.addProperty("own",(function(){o(this,"own",!0)})),n.addProperty("ordered",(function(){o(this,"ordered",!0)})),n.addProperty("any",(function(){o(this,"any",!0),o(this,"all",!1)})),n.addProperty("all",(function(){o(this,"all",!0),o(this,"any",!1)})),n.addChainableMethod("an",s),n.addChainableMethod("a",s),n.addChainableMethod("include",c,a),n.addChainableMethod("contain",c,a),n.addChainableMethod("contains",c,a),n.addChainableMethod("includes",c,a),n.addProperty("ok",(function(){this.assert(o(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")})),n.addProperty("true",(function(){this.assert(!0===o(this,"object"),"expected #{this} to be true","expected #{this} to be false",!o(this,"negate"))})),n.addProperty("false",(function(){this.assert(!1===o(this,"object"),"expected #{this} to be false","expected #{this} to be true",!!o(this,"negate"))})),n.addProperty("null",(function(){this.assert(null===o(this,"object"),"expected #{this} to be null","expected #{this} not to be null")})),n.addProperty("undefined",(function(){this.assert(void 0===o(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")})),n.addProperty("NaN",(function(){this.assert(t.isNaN(o(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")})),n.addProperty("exist",(function(){var e=o(this,"object");this.assert(null!=e,"expected #{this} to exist","expected #{this} to not exist")})),n.addProperty("empty",(function(){var e,n=o(this,"object"),s=o(this,"ssfi"),i=o(this,"message");switch(i=i?i+": ":"",t.type(n).toLowerCase()){case"array":case"string":e=n.length;break;case"map":case"set":e=n.size;break;case"weakmap":case"weakset":throw new r(i+".empty was passed a weak collection",void 0,s);case"function":var a=i+".empty was passed a function "+t.getName(n);throw new r(a.trim(),void 0,s);default:if(n!==Object(n))throw new r(i+".empty was passed non-string primitive "+t.inspect(n),void 0,s);e=Object.keys(n).length}this.assert(0===e,"expected #{this} to be empty","expected #{this} not to be empty")})),n.addProperty("arguments",u),n.addProperty("Arguments",u),n.addMethod("equal",l),n.addMethod("equals",l),n.addMethod("eq",l),n.addMethod("eql",d),n.addMethod("eqls",d),n.addMethod("above",p),n.addMethod("gt",p),n.addMethod("greaterThan",p),n.addMethod("least",h),n.addMethod("gte",h),n.addMethod("below",f),n.addMethod("lt",f),n.addMethod("lessThan",f),n.addMethod("most",y),n.addMethod("lte",y),n.addMethod("within",(function(e,s,i){i&&o(this,"message",i);var a,c=o(this,"object"),u=o(this,"doLength"),l=o(this,"message"),d=l?l+": ":"",p=o(this,"ssfi"),h=t.type(c).toLowerCase(),f=t.type(e).toLowerCase(),y=t.type(s).toLowerCase(),m=!0,b="date"===f&&"date"===y?e.toUTCString()+".."+s.toUTCString():e+".."+s;if(u&&"map"!==h&&"set"!==h&&new n(c,l,p,!0).to.have.property("length"),u||"date"!==h||"date"===f&&"date"===y?"number"===f&&"number"===y||!u&&"number"!==h?u||"date"===h||"number"===h?m=!1:a=d+"expected "+("string"===h?"'"+c+"'":c)+" to be a number or a date":a=d+"the arguments to within must be numbers":a=d+"the arguments to within must be dates",m)throw new r(a,void 0,p);if(u){var g,w="length";"map"===h||"set"===h?(w="size",g=c.size):g=c.length,this.assert(g>=e&&g<=s,"expected #{this} to have a "+w+" within "+b,"expected #{this} to not have a "+w+" within "+b)}else this.assert(c>=e&&c<=s,"expected #{this} to be within "+b,"expected #{this} to not be within "+b)})),n.addMethod("instanceof",m),n.addMethod("instanceOf",m),n.addMethod("property",b),n.addMethod("ownProperty",g),n.addMethod("haveOwnProperty",g),n.addMethod("ownPropertyDescriptor",w),n.addMethod("haveOwnPropertyDescriptor",w),n.addChainableMethod("length",_,v),n.addChainableMethod("lengthOf",_,v),n.addMethod("match",x),n.addMethod("matches",x),n.addMethod("string",(function(e,r){r&&o(this,"message",r);var s=o(this,"object"),i=o(this,"message"),a=o(this,"ssfi");new n(s,i,a,!0).is.a("string"),this.assert(~s.indexOf(e),"expected #{this} to contain "+t.inspect(e),"expected #{this} to not contain "+t.inspect(e))})),n.addMethod("keys",E),n.addMethod("key",E),n.addMethod("throw",S),n.addMethod("throws",S),n.addMethod("Throw",S),n.addMethod("respondTo",O),n.addMethod("respondsTo",O),n.addProperty("itself",(function(){o(this,"itself",!0)})),n.addMethod("satisfy",P),n.addMethod("satisfies",P),n.addMethod("closeTo",k),n.addMethod("approximately",k),n.addMethod("members",(function(e,r){r&&o(this,"message",r);var s=o(this,"object"),i=o(this,"message"),a=o(this,"ssfi");new n(s,i,a,!0).to.be.an("array"),new n(e,i,a,!0).to.be.an("array");var c,u,l,d=o(this,"contains"),p=o(this,"ordered");d?(u="expected #{this} to be "+(c=p?"an ordered superset":"a superset")+" of #{exp}",l="expected #{this} to not be "+c+" of #{exp}"):(u="expected #{this} to have the same "+(c=p?"ordered members":"members")+" as #{exp}",l="expected #{this} to not have the same "+c+" as #{exp}");var h=o(this,"deep")?t.eql:void 0;this.assert(function(e,t,n,r,o){if(!r){if(e.length!==t.length)return!1;t=t.slice()}return e.every((function(e,s){if(o)return n?n(e,t[s]):e===t[s];if(!n){var i=t.indexOf(e);return-1!==i&&(r||t.splice(i,1),!0)}return t.some((function(o,s){return!!n(e,o)&&(r||t.splice(s,1),!0)}))}))}(e,s,h,d,p),u,l,e,s,!0)})),n.addMethod("oneOf",(function(e,t){t&&o(this,"message",t);var r=o(this,"object"),s=o(this,"message"),i=o(this,"ssfi");new n(e,s,i,!0).to.be.an("array"),this.assert(e.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",e,r)})),n.addMethod("change",j),n.addMethod("changes",j),n.addMethod("increase",q),n.addMethod("increases",q),n.addMethod("decrease",T),n.addMethod("decreases",T),n.addMethod("by",(function(e,t){t&&o(this,"message",t);var n,r=o(this,"deltaMsgObj"),s=o(this,"initialDeltaValue"),i=o(this,"finalDeltaValue"),a=o(this,"deltaBehavior"),c=o(this,"realDelta");n="change"===a?Math.abs(i-s)===Math.abs(e):c===Math.abs(e),this.assert(n,"expected "+r+" to "+a+" by "+e,"expected "+r+" to not "+a+" by "+e)})),n.addProperty("extensible",(function(){var e=o(this,"object"),t=e===Object(e)&&Object.isExtensible(e);this.assert(t,"expected #{this} to be extensible","expected #{this} to not be extensible")})),n.addProperty("sealed",(function(){var e=o(this,"object"),t=e!==Object(e)||Object.isSealed(e);this.assert(t,"expected #{this} to be sealed","expected #{this} to not be sealed")})),n.addProperty("frozen",(function(){var e=o(this,"object"),t=e!==Object(e)||Object.isFrozen(e);this.assert(t,"expected #{this} to be frozen","expected #{this} to not be frozen")})),n.addProperty("finite",(function(e){var t=o(this,"object");this.assert("number"==typeof t&&isFinite(t),"expected #{this} to be a finite number","expected #{this} to not be a finite number")}))}},function(e,t){
/*!
              * chai
              * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
              * MIT Licensed
              */
e.exports=function(e,t){e.expect=function(t,n){return new e.Assertion(t,n)},e.expect.fail=function(t,n,r,o){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new e.AssertionError(r,{actual:t,expected:n,operator:o},e.expect.fail)}}},function(e,t){
/*!
              * chai
              * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
              * MIT Licensed
              */
e.exports=function(e,t){var n=e.Assertion;function r(){Object.defineProperty(Object.prototype,"should",{set:function(e){Object.defineProperty(this,"should",{value:e,enumerable:!0,configurable:!0,writable:!0})},get:function e(){return this instanceof String||this instanceof Number||this instanceof Boolean||"function"==typeof Symbol&&this instanceof Symbol?new n(this.valueOf(),null,e):new n(this,null,e)},configurable:!0});var t={fail:function(n,r,o,s){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new e.AssertionError(o,{actual:n,expected:r,operator:s},t.fail)},equal:function(e,t,r){new n(e,r).to.equal(t)},Throw:function(e,t,r,o){new n(e,o).to.Throw(t,r)},exist:function(e,t){new n(e,t).to.exist},not:{}};return t.not.equal=function(e,t,r){new n(e,r).to.not.equal(t)},t.not.Throw=function(e,t,r,o){new n(e,o).to.not.Throw(t,r)},t.not.exist=function(e,t){new n(e,t).to.not.exist},t.throw=t.Throw,t.not.throw=t.not.Throw,t}e.should=r,e.Should=r}},function(e,t){
/*!
              * chai
              * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
              * MIT Licensed
              */
e.exports=function(e,t){
/*!
                       * Chai dependencies.
                       */
var n=e.Assertion,r=t.flag,o=e.assert=function(t,r){new n(null,null,e.assert,!0).assert(t,r,"[ negation message unavailable ]")};
/*!
                       * Module export.
                       */o.fail=function(t,n,r,s){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new e.AssertionError(r,{actual:t,expected:n,operator:s},o.fail)},o.isOk=function(e,t){new n(e,t,o.isOk,!0).is.ok},o.isNotOk=function(e,t){new n(e,t,o.isNotOk,!0).is.not.ok},o.equal=function(e,t,s){var i=new n(e,s,o.equal,!0);i.assert(t==r(i,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",t,e,!0)},o.notEqual=function(e,t,s){var i=new n(e,s,o.notEqual,!0);i.assert(t!=r(i,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",t,e,!0)},o.strictEqual=function(e,t,r){new n(e,r,o.strictEqual,!0).to.equal(t)},o.notStrictEqual=function(e,t,r){new n(e,r,o.notStrictEqual,!0).to.not.equal(t)},o.deepEqual=o.deepStrictEqual=function(e,t,r){new n(e,r,o.deepEqual,!0).to.eql(t)},o.notDeepEqual=function(e,t,r){new n(e,r,o.notDeepEqual,!0).to.not.eql(t)},o.isAbove=function(e,t,r){new n(e,r,o.isAbove,!0).to.be.above(t)},o.isAtLeast=function(e,t,r){new n(e,r,o.isAtLeast,!0).to.be.least(t)},o.isBelow=function(e,t,r){new n(e,r,o.isBelow,!0).to.be.below(t)},o.isAtMost=function(e,t,r){new n(e,r,o.isAtMost,!0).to.be.most(t)},o.isTrue=function(e,t){new n(e,t,o.isTrue,!0).is.true},o.isNotTrue=function(e,t){new n(e,t,o.isNotTrue,!0).to.not.equal(!0)},o.isFalse=function(e,t){new n(e,t,o.isFalse,!0).is.false},o.isNotFalse=function(e,t){new n(e,t,o.isNotFalse,!0).to.not.equal(!1)},o.isNull=function(e,t){new n(e,t,o.isNull,!0).to.equal(null)},o.isNotNull=function(e,t){new n(e,t,o.isNotNull,!0).to.not.equal(null)},o.isNaN=function(e,t){new n(e,t,o.isNaN,!0).to.be.NaN},o.isNotNaN=function(e,t){new n(e,t,o.isNotNaN,!0).not.to.be.NaN},o.exists=function(e,t){new n(e,t,o.exists,!0).to.exist},o.notExists=function(e,t){new n(e,t,o.notExists,!0).to.not.exist},o.isUndefined=function(e,t){new n(e,t,o.isUndefined,!0).to.equal(void 0)},o.isDefined=function(e,t){new n(e,t,o.isDefined,!0).to.not.equal(void 0)},o.isFunction=function(e,t){new n(e,t,o.isFunction,!0).to.be.a("function")},o.isNotFunction=function(e,t){new n(e,t,o.isNotFunction,!0).to.not.be.a("function")},o.isObject=function(e,t){new n(e,t,o.isObject,!0).to.be.a("object")},o.isNotObject=function(e,t){new n(e,t,o.isNotObject,!0).to.not.be.a("object")},o.isArray=function(e,t){new n(e,t,o.isArray,!0).to.be.an("array")},o.isNotArray=function(e,t){new n(e,t,o.isNotArray,!0).to.not.be.an("array")},o.isString=function(e,t){new n(e,t,o.isString,!0).to.be.a("string")},o.isNotString=function(e,t){new n(e,t,o.isNotString,!0).to.not.be.a("string")},o.isNumber=function(e,t){new n(e,t,o.isNumber,!0).to.be.a("number")},o.isNotNumber=function(e,t){new n(e,t,o.isNotNumber,!0).to.not.be.a("number")},o.isFinite=function(e,t){new n(e,t,o.isFinite,!0).to.be.finite},o.isBoolean=function(e,t){new n(e,t,o.isBoolean,!0).to.be.a("boolean")},o.isNotBoolean=function(e,t){new n(e,t,o.isNotBoolean,!0).to.not.be.a("boolean")},o.typeOf=function(e,t,r){new n(e,r,o.typeOf,!0).to.be.a(t)},o.notTypeOf=function(e,t,r){new n(e,r,o.notTypeOf,!0).to.not.be.a(t)},o.instanceOf=function(e,t,r){new n(e,r,o.instanceOf,!0).to.be.instanceOf(t)},o.notInstanceOf=function(e,t,r){new n(e,r,o.notInstanceOf,!0).to.not.be.instanceOf(t)},o.include=function(e,t,r){new n(e,r,o.include,!0).include(t)},o.notInclude=function(e,t,r){new n(e,r,o.notInclude,!0).not.include(t)},o.deepInclude=function(e,t,r){new n(e,r,o.deepInclude,!0).deep.include(t)},o.notDeepInclude=function(e,t,r){new n(e,r,o.notDeepInclude,!0).not.deep.include(t)},o.nestedInclude=function(e,t,r){new n(e,r,o.nestedInclude,!0).nested.include(t)},o.notNestedInclude=function(e,t,r){new n(e,r,o.notNestedInclude,!0).not.nested.include(t)},o.deepNestedInclude=function(e,t,r){new n(e,r,o.deepNestedInclude,!0).deep.nested.include(t)},o.notDeepNestedInclude=function(e,t,r){new n(e,r,o.notDeepNestedInclude,!0).not.deep.nested.include(t)},o.ownInclude=function(e,t,r){new n(e,r,o.ownInclude,!0).own.include(t)},o.notOwnInclude=function(e,t,r){new n(e,r,o.notOwnInclude,!0).not.own.include(t)},o.deepOwnInclude=function(e,t,r){new n(e,r,o.deepOwnInclude,!0).deep.own.include(t)},o.notDeepOwnInclude=function(e,t,r){new n(e,r,o.notDeepOwnInclude,!0).not.deep.own.include(t)},o.match=function(e,t,r){new n(e,r,o.match,!0).to.match(t)},o.notMatch=function(e,t,r){new n(e,r,o.notMatch,!0).to.not.match(t)},o.property=function(e,t,r){new n(e,r,o.property,!0).to.have.property(t)},o.notProperty=function(e,t,r){new n(e,r,o.notProperty,!0).to.not.have.property(t)},o.propertyVal=function(e,t,r,s){new n(e,s,o.propertyVal,!0).to.have.property(t,r)},o.notPropertyVal=function(e,t,r,s){new n(e,s,o.notPropertyVal,!0).to.not.have.property(t,r)},o.deepPropertyVal=function(e,t,r,s){new n(e,s,o.deepPropertyVal,!0).to.have.deep.property(t,r)},o.notDeepPropertyVal=function(e,t,r,s){new n(e,s,o.notDeepPropertyVal,!0).to.not.have.deep.property(t,r)},o.ownProperty=function(e,t,r){new n(e,r,o.ownProperty,!0).to.have.own.property(t)},o.notOwnProperty=function(e,t,r){new n(e,r,o.notOwnProperty,!0).to.not.have.own.property(t)},o.ownPropertyVal=function(e,t,r,s){new n(e,s,o.ownPropertyVal,!0).to.have.own.property(t,r)},o.notOwnPropertyVal=function(e,t,r,s){new n(e,s,o.notOwnPropertyVal,!0).to.not.have.own.property(t,r)},o.deepOwnPropertyVal=function(e,t,r,s){new n(e,s,o.deepOwnPropertyVal,!0).to.have.deep.own.property(t,r)},o.notDeepOwnPropertyVal=function(e,t,r,s){new n(e,s,o.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(t,r)},o.nestedProperty=function(e,t,r){new n(e,r,o.nestedProperty,!0).to.have.nested.property(t)},o.notNestedProperty=function(e,t,r){new n(e,r,o.notNestedProperty,!0).to.not.have.nested.property(t)},o.nestedPropertyVal=function(e,t,r,s){new n(e,s,o.nestedPropertyVal,!0).to.have.nested.property(t,r)},o.notNestedPropertyVal=function(e,t,r,s){new n(e,s,o.notNestedPropertyVal,!0).to.not.have.nested.property(t,r)},o.deepNestedPropertyVal=function(e,t,r,s){new n(e,s,o.deepNestedPropertyVal,!0).to.have.deep.nested.property(t,r)},o.notDeepNestedPropertyVal=function(e,t,r,s){new n(e,s,o.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(t,r)},o.lengthOf=function(e,t,r){new n(e,r,o.lengthOf,!0).to.have.lengthOf(t)},o.hasAnyKeys=function(e,t,r){new n(e,r,o.hasAnyKeys,!0).to.have.any.keys(t)},o.hasAllKeys=function(e,t,r){new n(e,r,o.hasAllKeys,!0).to.have.all.keys(t)},o.containsAllKeys=function(e,t,r){new n(e,r,o.containsAllKeys,!0).to.contain.all.keys(t)},o.doesNotHaveAnyKeys=function(e,t,r){new n(e,r,o.doesNotHaveAnyKeys,!0).to.not.have.any.keys(t)},o.doesNotHaveAllKeys=function(e,t,r){new n(e,r,o.doesNotHaveAllKeys,!0).to.not.have.all.keys(t)},o.hasAnyDeepKeys=function(e,t,r){new n(e,r,o.hasAnyDeepKeys,!0).to.have.any.deep.keys(t)},o.hasAllDeepKeys=function(e,t,r){new n(e,r,o.hasAllDeepKeys,!0).to.have.all.deep.keys(t)},o.containsAllDeepKeys=function(e,t,r){new n(e,r,o.containsAllDeepKeys,!0).to.contain.all.deep.keys(t)},o.doesNotHaveAnyDeepKeys=function(e,t,r){new n(e,r,o.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(t)},o.doesNotHaveAllDeepKeys=function(e,t,r){new n(e,r,o.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(t)},o.throws=function(e,t,s,i){("string"==typeof t||t instanceof RegExp)&&(s=t,t=null);var a=new n(e,i,o.throws,!0).to.throw(t,s);return r(a,"object")},o.doesNotThrow=function(e,t,r,s){("string"==typeof t||t instanceof RegExp)&&(r=t,t=null),new n(e,s,o.doesNotThrow,!0).to.not.throw(t,r)},o.operator=function(s,i,a,c){var u;switch(i){case"==":u=s==a;break;case"===":u=s===a;break;case">":u=s>a;break;case">=":u=s>=a;break;case"<":u=s<a;break;case"<=":u=s<=a;break;case"!=":u=s!=a;break;case"!==":u=s!==a;break;default:throw c=c?c+": ":c,new e.AssertionError(c+'Invalid operator "'+i+'"',void 0,o.operator)}var l=new n(u,c,o.operator,!0);l.assert(!0===r(l,"object"),"expected "+t.inspect(s)+" to be "+i+" "+t.inspect(a),"expected "+t.inspect(s)+" to not be "+i+" "+t.inspect(a))},o.closeTo=function(e,t,r,s){new n(e,s,o.closeTo,!0).to.be.closeTo(t,r)},o.approximately=function(e,t,r,s){new n(e,s,o.approximately,!0).to.be.approximately(t,r)},o.sameMembers=function(e,t,r){new n(e,r,o.sameMembers,!0).to.have.same.members(t)},o.notSameMembers=function(e,t,r){new n(e,r,o.notSameMembers,!0).to.not.have.same.members(t)},o.sameDeepMembers=function(e,t,r){new n(e,r,o.sameDeepMembers,!0).to.have.same.deep.members(t)},o.notSameDeepMembers=function(e,t,r){new n(e,r,o.notSameDeepMembers,!0).to.not.have.same.deep.members(t)},o.sameOrderedMembers=function(e,t,r){new n(e,r,o.sameOrderedMembers,!0).to.have.same.ordered.members(t)},o.notSameOrderedMembers=function(e,t,r){new n(e,r,o.notSameOrderedMembers,!0).to.not.have.same.ordered.members(t)},o.sameDeepOrderedMembers=function(e,t,r){new n(e,r,o.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(t)},o.notSameDeepOrderedMembers=function(e,t,r){new n(e,r,o.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(t)},o.includeMembers=function(e,t,r){new n(e,r,o.includeMembers,!0).to.include.members(t)},o.notIncludeMembers=function(e,t,r){new n(e,r,o.notIncludeMembers,!0).to.not.include.members(t)},o.includeDeepMembers=function(e,t,r){new n(e,r,o.includeDeepMembers,!0).to.include.deep.members(t)},o.notIncludeDeepMembers=function(e,t,r){new n(e,r,o.notIncludeDeepMembers,!0).to.not.include.deep.members(t)},o.includeOrderedMembers=function(e,t,r){new n(e,r,o.includeOrderedMembers,!0).to.include.ordered.members(t)},o.notIncludeOrderedMembers=function(e,t,r){new n(e,r,o.notIncludeOrderedMembers,!0).to.not.include.ordered.members(t)},o.includeDeepOrderedMembers=function(e,t,r){new n(e,r,o.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(t)},o.notIncludeDeepOrderedMembers=function(e,t,r){new n(e,r,o.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(t)},o.oneOf=function(e,t,r){new n(e,r,o.oneOf,!0).to.be.oneOf(t)},o.changes=function(e,t,r,s){3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.changes,!0).to.change(t,r)},o.changesBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.changesBy,!0).to.change(t,r).by(s)},o.doesNotChange=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.doesNotChange,!0).to.not.change(t,r)},o.changesButNotBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.changesButNotBy,!0).to.change(t,r).but.not.by(s)},o.increases=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.increases,!0).to.increase(t,r)},o.increasesBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.increasesBy,!0).to.increase(t,r).by(s)},o.doesNotIncrease=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.doesNotIncrease,!0).to.not.increase(t,r)},o.increasesButNotBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.increasesButNotBy,!0).to.increase(t,r).but.not.by(s)},o.decreases=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.decreases,!0).to.decrease(t,r)},o.decreasesBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.decreasesBy,!0).to.decrease(t,r).by(s)},o.doesNotDecrease=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.doesNotDecrease,!0).to.not.decrease(t,r)},o.doesNotDecreaseBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);return new n(e,i,o.doesNotDecreaseBy,!0).to.not.decrease(t,r).by(s)},o.decreasesButNotBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.decreasesButNotBy,!0).to.decrease(t,r).but.not.by(s)}
/*!
                       * ### .ifError(object)
                       *
                       * Asserts if value is not a false value, and throws if it is a true value.
                       * This is added to allow for chai to be a drop-in replacement for Node's
                       * assert class.
                       *
                       *     var err = new Error('I am a custom error');
                       *     assert.ifError(err); // Rethrows err!
                       *
                       * @name ifError
                       * @param {Object} object
                       * @namespace Assert
                       * @api public
                       */,o.ifError=function(e){if(e)throw e},o.isExtensible=function(e,t){new n(e,t,o.isExtensible,!0).to.be.extensible},o.isNotExtensible=function(e,t){new n(e,t,o.isNotExtensible,!0).to.not.be.extensible},o.isSealed=function(e,t){new n(e,t,o.isSealed,!0).to.be.sealed},o.isNotSealed=function(e,t){new n(e,t,o.isNotSealed,!0).to.not.be.sealed},o.isFrozen=function(e,t){new n(e,t,o.isFrozen,!0).to.be.frozen},o.isNotFrozen=function(e,t){new n(e,t,o.isNotFrozen,!0).to.not.be.frozen},o.isEmpty=function(e,t){new n(e,t,o.isEmpty,!0).to.be.empty},o.isNotEmpty=function(e,t){new n(e,t,o.isNotEmpty,!0).to.not.be.empty},
/*!
                       * Aliases.
                       */
function e(t,n){return o[n]=o[t],e}("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")}},function(e,t,n){var r=n(22),o=n(37),s=n(24);e.exports=function(e){var t={};return"function"==typeof e&&(e=s.createServer(e)),r.forEach((function(n){t[n]=function(t){return new o(e,n,t)}})),t.del=t.delete,t},e.exports.Test=o,e.exports.agent=n(90)},function(e,t){e.exports=n(67)},function(e,t,n){var r=n(69).IncomingForm;r.IncomingForm=r,e.exports=r},function(e,t,n){var r;global.GENTLY&&(r=GENTLY.hijack(n(70)));var o=r("crypto"),s=r("fs"),i=r("util"),a=r("path"),c=r("./file"),u=r("./multipart_parser").MultipartParser,l=r("./querystring_parser").QuerystringParser,d=r("./octet_parser").OctetParser,p=r("./json_parser").JSONParser,h=r("string_decoder").StringDecoder,f=r("events").EventEmitter,y=r("stream").Stream,m=r("os");function b(e){return this instanceof b?(f.call(this),e=e||{},this.error=null,this.ended=!1,this.maxFields=e.maxFields||1e3,this.maxFieldsSize=e.maxFieldsSize||20971520,this.maxFileSize=e.maxFileSize||209715200,this.keepExtensions=e.keepExtensions||!1,this.uploadDir=e.uploadDir||m.tmpdir&&m.tmpdir()||m.tmpDir(),this.encoding=e.encoding||"utf-8",this.headers=null,this.type=null,this.hash=e.hash||!1,this.multiples=e.multiples||!1,this.bytesReceived=null,this.bytesExpected=null,this._parser=null,this._flushing=0,this._fieldsSize=0,this._fileSize=0,this.openedFiles=[],this):new b(e)}i.inherits(b,f),t.IncomingForm=b,b.prototype.parse=function(e,t){if(this.pause=function(){try{e.pause()}catch(e){return this.ended||this._error(e),!1}return!0},this.resume=function(){try{e.resume()}catch(e){return this.ended||this._error(e),!1}return!0},t){var n={},r={};this.on("field",(function(e,t){n[e]=t})).on("file",(function(e,t){this.multiples&&r[e]?(Array.isArray(r[e])||(r[e]=[r[e]]),r[e].push(t)):r[e]=t})).on("error",(function(e){t(e,n,r)})).on("end",(function(){t(null,n,r)}))}this.writeHeaders(e.headers);var o=this;return e.on("error",(function(e){o._error(e)})).on("aborted",(function(){o.emit("aborted"),o._error(new Error("Request aborted"))})).on("data",(function(e){o.write(e)})).on("end",(function(){if(!o.error){var e=o._parser.end();e&&o._error(e)}})),this},b.prototype.writeHeaders=function(e){this.headers=e,this._parseContentLength(),this._parseContentType()},b.prototype.write=function(e){if(!this.error){if(this._parser){this.bytesReceived+=e.length,this.emit("progress",this.bytesReceived,this.bytesExpected);var t=this._parser.write(e);return t!==e.length&&this._error(new Error("parser error, "+t+" of "+e.length+" bytes parsed")),t}this._error(new Error("uninitialized parser"))}},b.prototype.pause=function(){return!1},b.prototype.resume=function(){return!1},b.prototype.onPart=function(e){this.handlePart(e)},b.prototype.handlePart=function(e){var t=this;if(void 0===e.filename){var n="",r=new h(this.encoding);return e.on("data",(function(e){t._fieldsSize+=e.length,t._fieldsSize>t.maxFieldsSize?t._error(new Error("maxFieldsSize exceeded, received "+t._fieldsSize+" bytes of field data")):n+=r.write(e)})),void e.on("end",(function(){t.emit("field",e.name,n)}))}this._flushing++;var o=new c({path:this._uploadPath(e.filename),name:e.filename,type:e.mime,hash:t.hash});this.emit("fileBegin",e.name,o),o.open(),this.openedFiles.push(o),e.on("data",(function(e){t._fileSize+=e.length,t._fileSize>t.maxFileSize?t._error(new Error("maxFileSize exceeded, received "+t._fileSize+" bytes of file data")):0!=e.length&&(t.pause(),o.write(e,(function(){t.resume()})))})),e.on("end",(function(){o.end((function(){t._flushing--,t.emit("file",e.name,o),t._maybeEnd()}))}))},b.prototype._parseContentType=function(){if(0!==this.bytesExpected)if(this.headers["content-type"])if(this.headers["content-type"].match(/octet-stream/i))this._initOctetStream();else if(this.headers["content-type"].match(/urlencoded/i))this._initUrlencoded();else if(this.headers["content-type"].match(/multipart/i)){var e=this.headers["content-type"].match(/boundary=(?:"([^"]+)"|([^;]+))/i);e?this._initMultipart(e[1]||e[2]):this._error(new Error("bad content-type header, no multipart boundary"))}else this.headers["content-type"].match(/json/i)?this._initJSONencoded():this._error(new Error("bad content-type header, unknown content-type: "+this.headers["content-type"]));else this._error(new Error("bad content-type header, no content-type"));else this._parser=function(e){return{end:function(){return e.ended=!0,e._maybeEnd(),null}}}(this)},b.prototype._error=function(e){this.error||this.ended||(this.error=e,this.emit("error",e),Array.isArray(this.openedFiles)&&this.openedFiles.forEach((function(e){e._writeStream.destroy(),setTimeout(s.unlink,0,e.path,(function(e){}))})))},b.prototype._parseContentLength=function(){this.bytesReceived=0,this.headers["content-length"]?this.bytesExpected=parseInt(this.headers["content-length"],10):void 0===this.headers["transfer-encoding"]&&(this.bytesExpected=0),null!==this.bytesExpected&&this.emit("progress",this.bytesReceived,this.bytesExpected)},b.prototype._newParser=function(){return new u},b.prototype._initMultipart=function(e){this.type="multipart";var t,n,r,o=new u,s=this;o.initWithBoundary(e),o.onPartBegin=function(){(r=new y).readable=!0,r.headers={},r.name=null,r.filename=null,r.mime=null,r.transferEncoding="binary",r.transferBuffer="",t="",n=""},o.onHeaderField=function(e,n,r){t+=e.toString(s.encoding,n,r)},o.onHeaderValue=function(e,t,r){n+=e.toString(s.encoding,t,r)},o.onHeaderEnd=function(){t=t.toLowerCase(),r.headers[t]=n;var e=n.match(/\bname=("([^"]*)"|([^\(\)<>@,;:\\"\/\[\]\?=\{\}\s\t/]+))/i);"content-disposition"==t?(e&&(r.name=e[2]||e[3]||""),r.filename=s._fileName(n)):"content-type"==t?r.mime=n:"content-transfer-encoding"==t&&(r.transferEncoding=n.toLowerCase()),t="",n=""},o.onHeadersEnd=function(){switch(r.transferEncoding){case"binary":case"7bit":case"8bit":o.onPartData=function(e,t,n){r.emit("data",e.slice(t,n))},o.onPartEnd=function(){r.emit("end")};break;case"base64":o.onPartData=function(e,t,n){r.transferBuffer+=e.slice(t,n).toString("ascii");var o=4*parseInt(r.transferBuffer.length/4,10);r.emit("data",new Buffer(r.transferBuffer.substring(0,o),"base64")),r.transferBuffer=r.transferBuffer.substring(o)},o.onPartEnd=function(){r.emit("data",new Buffer(r.transferBuffer,"base64")),r.emit("end")};break;default:return s._error(new Error("unknown transfer-encoding"))}s.onPart(r)},o.onEnd=function(){s.ended=!0,s._maybeEnd()},this._parser=o},b.prototype._fileName=function(e){var t=e.match(/\bfilename=("(.*?)"|([^\(\)<>@,;:\\"\/\[\]\?=\{\}\s\t/]+))($|;\s)/i);if(t){var n=t[2]||t[3]||"",r=n.substr(n.lastIndexOf("\\")+1);return(r=r.replace(/%22/g,'"')).replace(/&#([\d]{4});/g,(function(e,t){return String.fromCharCode(t)}))}},b.prototype._initUrlencoded=function(){this.type="urlencoded";var e=new l(this.maxFields),t=this;e.onField=function(e,n){t.emit("field",e,n)},e.onEnd=function(){t.ended=!0,t._maybeEnd()},this._parser=e},b.prototype._initOctetStream=function(){this.type="octet-stream";var e=this.headers["x-file-name"],t=this.headers["content-type"],n=new c({path:this._uploadPath(e),name:e,type:t});this.emit("fileBegin",e,n),n.open(),this.openedFiles.push(n),this._flushing++;var r=this;r._parser=new d;var o=0;r._parser.on("data",(function(e){r.pause(),o++,n.write(e,(function(){o--,r.resume(),r.ended&&r._parser.emit("doneWritingFile")}))})),r._parser.on("end",(function(){r._flushing--,r.ended=!0;var e=function(){n.end((function(){r.emit("file","file",n),r._maybeEnd()}))};0===o?e():r._parser.once("doneWritingFile",e)}))},b.prototype._initJSONencoded=function(){this.type="json";var e=new p(this),t=this;e.onField=function(e,n){t.emit("field",e,n)},e.onEnd=function(){t.ended=!0,t._maybeEnd()},this._parser=e},b.prototype._uploadPath=function(e){var t="upload_"+o.randomBytes(16).toString("hex");if(this.keepExtensions){var n=a.extname(e);t+=n=n.replace(/(\.[a-z0-9]+).*/i,"$1")}return a.join(this.uploadDir,t)},b.prototype._maybeEnd=function(){!this.ended||this._flushing||this.error||this.emit("end")}},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=70},function(e,t){e.exports=n(71)},function(e,t,n){"use strict";const r=n(28),o=n(29),s=n(73);function i(e){o.call(this);const t=this.res=e.res;this.request=e,this.req=e.req,this.text=t.text,this.body=void 0!==t.body?t.body:{},this.files=t.files||{},this.buffered="string"==typeof this.text,this.header=this.headers=t.headers,this._setStatusProperties(t.statusCode),this._setHeaderProperties(this.header),this.setEncoding=t.setEncoding.bind(t),t.on("data",this.emit.bind(this,"data")),t.on("end",this.emit.bind(this,"end")),t.on("close",this.emit.bind(this,"close")),t.on("error",this.emit.bind(this,"error"))}e.exports=i,r.inherits(i,o),s(i.prototype),i.prototype.destroy=function(e){this.res.destroy(e)},i.prototype.pause=function(){this.res.pause()},i.prototype.resume=function(){this.res.resume()},i.prototype.toError=function(){const e=this.req,t=e.method,n=e.path,r=`cannot ${t} ${n} (${this.status})`,o=new Error(r);return o.status=this.status,o.text=this.text,o.method=t,o.path=n,o},i.prototype.setStatusProperties=function(e){return console.warn("In superagent 2.x setStatusProperties is a private method"),this._setStatusProperties(e)},i.prototype.toJSON=function(){return{req:this.request.toJSON(),header:this.header,status:this.status,text:this.text}}},function(e,t,n){"use strict";var r=n(38);function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}e.exports=o,o.prototype.get=function(e){return this.header[e.toLowerCase()]},o.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=r.type(t);var n=r.params(t);for(var o in n)this[o]=n[o];this.links={};try{e.link&&(this.links=r.parseLinks(e.link))}catch(e){}},o.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}},function(e,t,n){"use strict";const r=n(75).StringDecoder,o=n(29),s=n(39);t.unzip=(e,t)=>{const n=s.createUnzip(),i=new o;let a;i.req=e,n.on("error",e=>{e&&"Z_BUF_ERROR"===e.code?i.emit("end"):i.emit("error",e)}),t.pipe(n),t.setEncoding=e=>{a=new r(e)},n.on("data",e=>{if(a){const t=a.write(e);t.length&&i.emit("data",t)}else i.emit("data",e)}),n.on("end",()=>{i.emit("end")});const c=t.on;t.on=function(e,n){return"data"==e||"end"==e?i.on(e,n):"error"==e?(i.on(e,n),c.call(t,e,n)):c.call(t,e,n),this}}},function(e,t){e.exports=n(75)},function(e,t){e.exports=n(76)},function(e,t){e.exports=n(77)},function(e,t){e.exports=n(78)},function(e){e.exports=JSON.parse('{"name":"superagent","version":"3.8.3","description":"elegant & feature rich browser / node HTTP with a fluent API","scripts":{"prepare":"make all","test":"make test"},"keywords":["http","ajax","request","agent"],"license":"MIT","author":"TJ Holowaychuk <tj@vision-media.ca>","contributors":["Kornel Lesiński <kornel@geekhood.net>","Peter Lyons <pete@peterlyons.com>","Hunter Loftis <hunter@hunterloftis.com>"],"repository":{"type":"git","url":"git://github.com/visionmedia/superagent.git"},"dependencies":{"component-emitter":"^1.2.0","cookiejar":"^2.1.0","debug":"^3.1.0","extend":"^3.0.0","form-data":"^2.3.1","formidable":"^1.2.0","methods":"^1.1.1","mime":"^1.4.1","qs":"^6.5.1","readable-stream":"^2.3.5"},"devDependencies":{"Base64":"^1.0.1","basic-auth-connect":"^1.0.0","body-parser":"^1.18.2","browserify":"^14.1.0","cookie-parser":"^1.4.3","express":"^4.16.3","express-session":"^1.15.6","marked":"0.3.12","mocha":"^3.5.3","multer":"^1.3.0","should":"^11.2.0","should-http":"^0.1.1","zuul":"^3.11.1"},"browser":{"./lib/node/index.js":"./lib/client.js","./test/support/server.js":"./test/support/blank.js"},"component":{"scripts":{"superagent":"lib/client.js"}},"main":"./lib/node/index.js","engines":{"node":">= 4.0"}}')},function(e,t,n){"use strict";var r=n(81);function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}e.exports=o,o.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},o.prototype.parse=function(e){return this._parser=e,this},o.prototype.responseType=function(e){return this._responseType=e,this},o.prototype.serialize=function(e){return this._serializer=e,this},o.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},o.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var s=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];o.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(e,t);if(!0===n)return!0;if(!1===n)return!1}catch(e){console.error(e)}if(t&&t.status&&t.status>=500&&501!=t.status)return!0;if(e){if(e.code&&~s.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},o.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},o.prototype.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(e,t){n.end((function(n,r){n?t(n):e(r)}))}))}return this._fullfilledPromise.then(e,t)},o.prototype.catch=function(e){return this.then(void 0,e)},o.prototype.use=function(e){return e(this),this},o.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},o.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},o.prototype.get=function(e){return this._header[e.toLowerCase()]},o.prototype.getHeader=o.prototype.get,o.prototype.set=function(e,t){if(r(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},o.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},o.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),r(e)){for(var n in e)this.field(n,e[n]);return this}if(Array.isArray(t)){for(var o in t)this.field(e,t[o]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},o.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},o.prototype._auth=function(e,t,n,r){switch(n.type){case"basic":this.set("Authorization","Basic "+r(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},o.prototype.withCredentials=function(e){return null==e&&(e=!0),this._withCredentials=e,this},o.prototype.redirects=function(e){return this._maxRedirects=e,this},o.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},o.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},o.prototype.send=function(e){var t=r(e),n=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&r(this._data))for(var o in e)this._data[o]=e[o];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(n||this.type("json"),this)},o.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},o.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var n=this.url.substring(t+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,t)+"?"+n.join("&")}}},o.prototype._appendQueryString=function(){console.trace("Unsupported")},o.prototype._timeoutError=function(e,t,n){if(!this._aborted){var r=new Error(e+t+"ms exceeded");r.timeout=t,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},o.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))}},function(e,t,n){"use strict";e.exports=function(e){return null!==e&&"object"==typeof e}},function(e,t,n){"use strict";const r=n(30).CookieJar,o=n(30).CookieAccessInfo,s=n(23).parse,i=n(27),a=n(83);let c=n(22);function u(e){if(!(this instanceof u))return new u(e);a.call(this),this.jar=new r,e&&(e.ca&&this.ca(e.ca),e.key&&this.key(e.key),e.pfx&&this.pfx(e.pfx),e.cert&&this.cert(e.cert))}e.exports=u,u.prototype=Object.create(a.prototype),u.prototype._saveCookies=function(e){const t=e.headers["set-cookie"];t&&this.jar.setCookies(t)},u.prototype._attachCookies=function(e){const t=s(e.url),n=o(t.hostname,t.pathname,"https:"==t.protocol),r=this.jar.getCookies(n).toValueString();e.cookies=r},c.forEach(e=>{const t=e.toUpperCase();u.prototype[e]=function(e,n){const r=new i.Request(t,e);return r.on("response",this._saveCookies.bind(this)),r.on("redirect",this._saveCookies.bind(this)),r.on("redirect",this._attachCookies.bind(this,r)),this._attachCookies(r),this._setDefaults(r),n&&r.end(n),r}}),u.prototype.del=u.prototype.delete},function(e,t){function n(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach((function(e){n.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}})),n.prototype._setDefaults=function(e){this._defaults.forEach((function(t){e[t.fn].apply(e,t.arguments)}))},e.exports=n},function(e,t,n){"use strict";t["application/x-www-form-urlencoded"]=n(85),t["application/json"]=n(86),t.text=n(87);const r=n(88);t["application/octet-stream"]=r,t["application/pdf"]=r,t.image=r},function(e,t,n){"use strict";const r=n(41);e.exports=function(e,t){e.text="",e.setEncoding("ascii"),e.on("data",t=>{e.text+=t}),e.on("end",()=>{try{t(null,r.parse(e.text))}catch(e){t(e)}})}},function(e,t,n){"use strict";e.exports=function(e,t){e.text="",e.setEncoding("utf8"),e.on("data",t=>{e.text+=t}),e.on("end",()=>{try{var n=e.text&&JSON.parse(e.text)}catch(t){var r=t;r.rawResponse=e.text||null,r.statusCode=e.statusCode}finally{t(r,n)}})}},function(e,t,n){"use strict";e.exports=function(e,t){e.text="",e.setEncoding("utf8"),e.on("data",t=>{e.text+=t}),e.on("end",t)}},function(e,t,n){"use strict";e.exports=(e,t)=>{const n=[];e.on("data",e=>{n.push(e)}),e.on("end",()=>{t(null,Buffer.concat(n))})}},function(e,t){e.exports=n(89)},function(e,t,n){var r=n(27).agent,o=n(22),s=n(24),i=n(37);function a(e,t){if(!(this instanceof a))return new a(e,t);"function"==typeof e&&(e=s.createServer(e)),t&&(this._ca=t.ca,this._key=t.key,this._cert=t.cert),r.call(this),this.app=e}e.exports=a,Object.setPrototypeOf(a.prototype,r.prototype),a.prototype.host=function(e){return this._host=e,this},o.forEach((function(e){a.prototype[e]=function(t,n){var r=new i(this.app,e.toUpperCase(),t,this._host);return r.ca(this._ca),r.cert(this._cert),r.key(this._key),r.on("response",this._saveCookies.bind(this)),r.on("redirect",this._saveCookies.bind(this)),r.on("redirect",this._attachCookies.bind(this,r)),this._attachCookies(r),this._setDefaults(r),r}})),a.prototype.del=a.prototype.delete},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(14).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(42),f=n.n(h),y=n(1),m=n.n(y),b={createArticle:{body:{user_id:m.a.number().required(),article_title:m.a.string().required(),article_tag:m.a.string().required(),article_content:m.a.string().min(20).required()}},createUser:{body:{user_name:m.a.string().required(),user_mail:m.a.string().email().trim().required(),user_password:m.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const g=o.a.Router();g.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),g.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),g.get("/supertest",f.a);var w=g,v=n(6),_=n.n(v),x=n(7),E=n.n(x);class S extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var O={LoginError1:class extends S{constructor(e="信箱尚未註冊！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends S{constructor(e="您輸入的密碼有誤！",t=E.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const P=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),k=o.a.Router();k.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{P.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(b.createUser),(e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:_.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{P.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),k.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{P.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new O.LoginError1);else{const r=s[0].user_password,o=e.user_password;_.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new O.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var j=k;const q=o.a.Router();q.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),q.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),q.use("/article",w),q.use("/user",j);var T=q,M=n(8),N=n.n(M),C=n(10),A=n.n(C),L=n(11),D=n.n(L);const R=o()();R.use(N.a.json()),R.use(N.a.urlencoded({extended:!0})),R.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new O.APIError(o,i,!0,s))):r(e)}),R.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),R.use(A()()),R.use(D()("dev")),R.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),R.use("/api",T),t.a=R},function(e,t){e.exports=n(10)},function(e,t){e.exports=n(11)},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(9);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(13)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(14)},function(e,t){
/*!
                       * Chai - flag utility
                       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
                       * MIT Licensed
                       */
e.exports=function(e,t,n){var r=e.__flags||(e.__flags=Object.create(null));if(3!==arguments.length)return r[t];r[t]=n}},function(e,t,n){
/*!
                       * chai
                       * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
                       * MIT Licensed
                       */
var r=[];
/*!
                       * Chai version
                       */t.version="4.2.0",
/*!
                       * Assertion Error
                       */
t.AssertionError=n(31);
/*!
                       * Utils for plugins (not exported)
                       */
var o=n(44);t.use=function(e){return~r.indexOf(e)||(e(t,o),r.push(e)),t},
/*!
                       * Utility Functions
                       */
t.util=o;
/*!
                       * Configuration
                       */
var s=n(18);t.config=s;
/*!
                       * Primary `Assertion` prototype
                       */
var i=n(61);t.use(i);
/*!
                       * Core Assertions
                       */
var a=n(62);t.use(a);
/*!
                       * Expect interface
                       */
var c=n(63);t.use(c);
/*!
                       * Should interface
                       */
var u=n(64);t.use(u);
/*!
                       * Assert interface
                       */
var l=n(65);t.use(l)},function(e,t){
/*!
                       * Chai - transferFlags utility
                       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
                       * MIT Licensed
                       */
e.exports=function(e,t,n){var r=e.__flags||(e.__flags=Object.create(null));for(var o in t.__flags||(t.__flags=Object.create(null)),n=3!==arguments.length||n,r)(n||"object"!==o&&"ssfi"!==o&&"lockSsfi"!==o&&"message"!=o)&&(t.__flags[o]=r[o])}},function(e,t){e.exports={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"]}},function(e,t,n){var r=n(18);
/*!
                       * Chai - isProxyEnabled helper
                       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
                       * MIT Licensed
                       */e.exports=function(){return r.useProxy&&"undefined"!=typeof Proxy&&"undefined"!=typeof Reflect}},function(e,t){var n=Object.getOwnPropertyDescriptor((function(){}),"length");
/*!
                       * Chai - addLengthGuard utility
                       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
                       * MIT Licensed
                       */e.exports=function(e,t,r){return n.configurable?(Object.defineProperty(e,"length",{get:function(){if(r)throw Error("Invalid Chai property: "+t+'.length. Due to a compatibility issue, "length" cannot directly follow "'+t+'". Use "'+t+'.lengthOf" instead.');throw Error("Invalid Chai property: "+t+'.length. See docs for proper usage of "'+t+'".')}}),e):e}},function(e,t,n){var r=n(18),o=n(15),s=n(35),i=n(19),a=["__flags","__methods","_obj","assert"];e.exports=function(e,t){return i()?new Proxy(e,{get:function e(n,i){if("string"==typeof i&&-1===r.proxyExcludedKeys.indexOf(i)&&!Reflect.has(n,i)){if(t)throw Error("Invalid Chai property: "+t+"."+i+'. See docs for proper usage of "'+t+'".');var c=null,u=4;throw s(n).forEach((function(e){if(!Object.prototype.hasOwnProperty(e)&&-1===a.indexOf(e)){var t=function(e,t,n){if(Math.abs(e.length-t.length)>=n)return n;for(var r=[],o=0;o<=e.length;o++)r[o]=Array(t.length+1).fill(0),r[o][0]=o;for(var s=0;s<t.length;s++)r[0][s]=s;for(o=1;o<=e.length;o++){var i=e.charCodeAt(o-1);for(s=1;s<=t.length;s++)Math.abs(o-s)>=n?r[o][s]=n:r[o][s]=Math.min(r[o-1][s]+1,r[o][s-1]+1,r[o-1][s-1]+(i===t.charCodeAt(s-1)?0:1))}return r[e.length][t.length]}(i,e,u);t<u&&(c=e,u=t)}})),null!==c?Error("Invalid Chai property: "+i+'. Did you mean "'+c+'"?'):Error("Invalid Chai property: "+i)}return-1!==a.indexOf(i)||o(n,"lockSsfi")||o(n,"ssfi",e),Reflect.get(n,i)}}):e}},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t,n){var r;r=function(){"use strict";var e="function"==typeof Promise,t="object"==typeof self?self:global,n="undefined"!=typeof Symbol,r="undefined"!=typeof Map,o="undefined"!=typeof Set,s="undefined"!=typeof WeakMap,i="undefined"!=typeof WeakSet,a="undefined"!=typeof DataView,c=n&&void 0!==Symbol.iterator,u=n&&void 0!==Symbol.toStringTag,l=o&&"function"==typeof Set.prototype.entries,d=r&&"function"==typeof Map.prototype.entries,p=l&&Object.getPrototypeOf((new Set).entries()),h=d&&Object.getPrototypeOf((new Map).entries()),f=c&&"function"==typeof Array.prototype[Symbol.iterator],y=f&&Object.getPrototypeOf([][Symbol.iterator]()),m=c&&"function"==typeof String.prototype[Symbol.iterator],b=m&&Object.getPrototypeOf(""[Symbol.iterator]());return function(n){var c=typeof n;if("object"!==c)return c;if(null===n)return"null";if(n===t)return"global";if(Array.isArray(n)&&(!1===u||!(Symbol.toStringTag in n)))return"Array";if("object"==typeof window&&null!==window){if("object"==typeof window.location&&n===window.location)return"Location";if("object"==typeof window.document&&n===window.document)return"Document";if("object"==typeof window.navigator){if("object"==typeof window.navigator.mimeTypes&&n===window.navigator.mimeTypes)return"MimeTypeArray";if("object"==typeof window.navigator.plugins&&n===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"==typeof window.HTMLElement)&&n instanceof window.HTMLElement){if("BLOCKQUOTE"===n.tagName)return"HTMLQuoteElement";if("TD"===n.tagName)return"HTMLTableDataCellElement";if("TH"===n.tagName)return"HTMLTableHeaderCellElement"}}var l=u&&n[Symbol.toStringTag];if("string"==typeof l)return l;var d=Object.getPrototypeOf(n);return d===RegExp.prototype?"RegExp":d===Date.prototype?"Date":e&&d===Promise.prototype?"Promise":o&&d===Set.prototype?"Set":r&&d===Map.prototype?"Map":i&&d===WeakSet.prototype?"WeakSet":s&&d===WeakMap.prototype?"WeakMap":a&&d===DataView.prototype?"DataView":r&&d===h?"Map Iterator":o&&d===p?"Set Iterator":f&&d===y?"Array Iterator":m&&d===b?"String Iterator":null===d?"Object":Object.prototype.toString.call(n).slice(8,-1)}},e.exports=r()},function(e,t,n){var r=n(34),o=n(35),s=n(49),i=n(18);e.exports=function(e,t,n,r){return c({showHidden:t,seen:[],stylize:function(e){return e}},e,void 0===n?2:n)};var a=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&"nodeType"in e&&1===e.nodeType&&"string"==typeof e.nodeName};function c(e,n,y){if(n&&"function"==typeof n.inspect&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var m=n.inspect(y,e);return"string"!=typeof m&&(m=c(e,m,y)),m}var b=function(e,t){switch(typeof t){case"undefined":return e.stylize("undefined","undefined");case"string":var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string");case"number":return 0===t&&1/t==-1/0?e.stylize("-0","number"):e.stylize(""+t,"number");case"boolean":return e.stylize(""+t,"boolean");case"symbol":return e.stylize(t.toString(),"symbol")}if(null===t)return e.stylize("null","null")}(e,n);if(b)return b;if(a(n)){if("outerHTML"in n)return n.outerHTML;try{if(document.xmlVersion)return(new XMLSerializer).serializeToString(n);var g=document.createElementNS("http://www.w3.org/1999/xhtml","_");g.appendChild(n.cloneNode(!1));var w=g.innerHTML.replace("><",">"+n.innerHTML+"<");return g.innerHTML="",w}catch(e){}}var v,_,x=s(n),E=e.showHidden?o(n):x;if(0===E.length||h(n)&&(1===E.length&&"stack"===E[0]||2===E.length&&"description"===E[0]&&"stack"===E[1])){if("function"==typeof n)return _=(v=r(n))?": "+v:"",e.stylize("[Function"+_+"]","special");if(d(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(p(n))return e.stylize(Date.prototype.toUTCString.call(n),"date");if(h(n))return u(n)}var S,O,P="",k=!1,j=!1,q=["{","}"];if("object"==typeof(S=n)&&/\w+Array]$/.test(f(S))&&(j=!0,q=["[","]"]),function(e){return Array.isArray(e)||"object"==typeof e&&"[object Array]"===f(e)}(n)&&(k=!0,q=["[","]"]),"function"==typeof n&&(P=" [Function"+(_=(v=r(n))?": "+v:"")+"]"),d(n)&&(P=" "+RegExp.prototype.toString.call(n)),p(n)&&(P=" "+Date.prototype.toUTCString.call(n)),h(n))return u(n);if(0===E.length&&(!k||0==n.length))return q[0]+P+q[1];if(y<0)return d(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");if(e.seen.push(n),k)O=function(e,t,n,r,o){for(var s=[],i=0,a=t.length;i<a;++i)Object.prototype.hasOwnProperty.call(t,String(i))?s.push(l(e,t,n,r,String(i),!0)):s.push("");return o.forEach((function(o){o.match(/^\d+$/)||s.push(l(e,t,n,r,o,!0))})),s}(e,n,y,x,E);else{if(j)return function(e){for(var t="[ ",n=0;n<e.length;++n){if(t.length>=i.truncateThreshold-7){t+="...";break}t+=e[n]+", "}return-1!==(t+=" ]").indexOf(",  ]")&&(t=t.replace(",  ]"," ]")),t}(n);O=E.map((function(t){return l(e,n,y,x,t,k)}))}return e.seen.pop(),function(e,t,n){return e.reduce((function(e,t){return e+t.length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(O,P,q)}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,n,r,o,s){var i,a,u=Object.getOwnPropertyDescriptor(t,o);if(u&&(u.get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special"))),r.indexOf(o)<0&&(i="["+o+"]"),a||(e.seen.indexOf(t[o])<0?(a=c(e,t[o],null===n?null:n-1)).indexOf("\n")>-1&&(a=s?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),void 0===i){if(s&&o.match(/^\d+$/))return a;(i=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+a}function d(e){return"object"==typeof e&&"[object RegExp]"===f(e)}function p(e){return"object"==typeof e&&"[object Date]"===f(e)}function h(e){return"object"==typeof e&&"[object Error]"===f(e)}function f(e){return Object.prototype.toString.call(e)}},function(e,t,n){"use strict";const r=n(67)("superagent"),o=n(68),s=n(71),i=n(72),a=n(23).parse,c=n(23).format,u=n(23).resolve;let l=n(22);const d=n(29),p=n(38),h=n(74).unzip,f=n(76),y=n(77),m=n(40),b=n(24),g=n(78),w=n(41),v=n(39),_=n(28),x=n(79),E=n(80),S=n(30);function O(e,n){return"function"==typeof n?new t.Request("GET",e).end(n):1==arguments.length?new t.Request("GET",e):new t.Request(e,n)}function P(){}function k(e){const t=`node-superagent/${x.version}`;e._header={"user-agent":t},e.header={"User-Agent":t}}function j(e,t){d.call(this),"string"!=typeof t&&(t=c(t)),this._agent=!1,this._formData=null,this.method=e,this.url=t,k(this),this.writable=!0,this._redirects=0,this.redirects("HEAD"===e?0:5),this.cookies="",this.qs={},this._query=[],this.qsRaw=this._query,this._redirectList=[],this._streamRequest=!1,this.once("end",this.clearTimeout.bind(this))}function q(e){return/[\/+]json($|[^-\w])/.test(e)}function T(e){return~[301,302,303,305,307,308].indexOf(e)}(t=e.exports=O).Request=j,t.agent=n(82),t.Response=i,y.define({"application/x-www-form-urlencoded":["form","urlencoded","form-data"]},!0),t.protocols={"http:":b,"https:":m},t.serialize={"application/x-www-form-urlencoded":w.stringify,"application/json":JSON.stringify},t.parse=n(84),_.inherits(j,d),E(j.prototype),j.prototype.attach=function(e,t,n){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");let o=n||{};"string"==typeof n&&(o={filename:n}),"string"==typeof t?(o.filename||(o.filename=t),r("creating `fs.ReadStream` instance for file: %s",t),t=g.createReadStream(t)):!o.filename&&t.path&&(o.filename=t.path),this._getFormData().append(e,t,o)}return this},j.prototype._getFormData=function(){return this._formData||(this._formData=new s,this._formData.on("error",e=>{this.emit("error",e),this.abort()})),this._formData},j.prototype.agent=function(e){return arguments.length?(this._agent=e,this):this._agent},j.prototype.type=function(e){return this.set("Content-Type",~e.indexOf("/")?e:y.lookup(e))},j.prototype.accept=function(e){return this.set("Accept",~e.indexOf("/")?e:y.lookup(e))},j.prototype.query=function(e){return"string"==typeof e?this._query.push(e):f(this.qs,e),this},j.prototype.write=function(e,t){const n=this.request();return this._streamRequest||(this._streamRequest=!0),n.write(e,t)},j.prototype.pipe=function(e,t){return this.piped=!0,this.buffer(!1),this.end(),this._pipeContinue(e,t)},j.prototype._pipeContinue=function(e,t){return this.req.once("response",n=>{if(T(n.statusCode)&&this._redirects++!=this._maxRedirects)return this._redirect(n)._pipeContinue(e,t);if(this.res=n,this._emitResponse(),!this._aborted){if(this._shouldUnzip(n)){const r=v.createUnzip();r.on("error",t=>{t&&"Z_BUF_ERROR"===t.code?e.emit("end"):e.emit("error",t)}),n.pipe(r).pipe(e,t)}else n.pipe(e,t);n.once("end",()=>{this.emit("end")})}}),e},j.prototype.buffer=function(e){return this._buffer=!1!==e,this},j.prototype._redirect=function(e){let t=e.headers.location;if(!t)return this.callback(new Error("No location header for redirect"),e);r("redirect %s -> %s",this.url,t),t=u(this.url,t),e.resume();let n=this.req._headers;const o=a(t).host!==a(this.url).host;return 301!=e.statusCode&&302!=e.statusCode||(n=p.cleanHeader(this.req._headers,o),this.method="HEAD"==this.method?"HEAD":"GET",this._data=null),303==e.statusCode&&(n=p.cleanHeader(this.req._headers,o),this.method="GET",this._data=null),delete n.host,delete this.req,delete this._formData,k(this),this._endCalled=!1,this.url=t,this.qs={},this._query.length=0,this.set(n),this.emit("redirect",e),this._redirectList.push(this.url),this.end(this._callback),this},j.prototype.auth=function(e,t,n){1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(n=t,t=""),n||(n={type:"basic"});var r=function(e){return new Buffer(e).toString("base64")};return this._auth(e,t,n,r)},j.prototype.ca=function(e){return this._ca=e,this},j.prototype.key=function(e){return this._key=e,this},j.prototype.pfx=function(e){return"object"!=typeof e||Buffer.isBuffer(e)?this._pfx=e:(this._pfx=e.pfx,this._passphrase=e.passphrase),this},j.prototype.cert=function(e){return this._cert=e,this},j.prototype.request=function(){if(this.req)return this.req;const e={};try{const e=w.stringify(this.qs,{indices:!1,strictNullHandling:!0});e&&(this.qs={},this._query.push(e)),this._finalizeQueryString()}catch(e){return this.emit("error",e)}let n=this.url;const r=this._retries;if(0!=n.indexOf("http")&&(n=`http://${n}`),n=a(n),!0===/^https?\+unix:/.test(n.protocol)){n.protocol=`${n.protocol.split("+")[0]}:`;const t=n.path.match(/^([^/]+)(.+)$/);e.socketPath=t[1].replace(/%2F/g,"/"),n.path=t[2]}e.method=this.method,e.port=n.port,e.path=n.path,e.host=n.hostname,e.ca=this._ca,e.key=this._key,e.pfx=this._pfx,e.cert=this._cert,e.passphrase=this._passphrase,e.agent=this._agent;const o=t.protocols[n.protocol],s=this.req=o.request(e);if(s.setNoDelay(!0),"HEAD"!=e.method&&s.setHeader("Accept-Encoding","gzip, deflate"),this.protocol=n.protocol,this.host=n.host,s.once("drain",()=>{this.emit("drain")}),s.once("error",e=>{this._aborted||this._retries===r&&(this.response||this.callback(e))}),n.auth){const e=n.auth.split(":");this.auth(e[0],e[1])}this.username&&this.password&&this.auth(this.username,this.password);for(const e in this.header)this.header.hasOwnProperty(e)&&s.setHeader(e,this.header[e]);if(this.cookies)if(this.header.hasOwnProperty("cookie")){const e=new S.CookieJar;e.setCookies(this.header.cookie.split(";")),e.setCookies(this.cookies.split(";")),s.setHeader("Cookie",e.getCookies(S.CookieAccessInfo.All).toValueString())}else s.setHeader("Cookie",this.cookies);return s},j.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();const n=this._callback||P;if(this.clearTimeout(),this.called)return console.warn("superagent: double callback bug");if(this.called=!0,!e)try{if(!this._isResponseOK(t)){let n="Unsuccessful HTTP response";t&&(n=b.STATUS_CODES[t.status]||n),(e=new Error(n)).status=t?t.status:void 0}}catch(t){e=t}if(!e)return n(null,t);e.response=t,this._maxRetries&&(e.retries=this._retries-1),e&&this.listeners("error").length>0&&this.emit("error",e),n(e,t)},j.prototype._isHost=function(e){return Buffer.isBuffer(e)||e instanceof d||e instanceof s},j.prototype._emitResponse=function(e,t){const n=new i(this);return this.response=n,n.redirects=this._redirectList,void 0!==e&&(n.body=e),n.files=t,this.emit("response",n),n},j.prototype.end=function(e){return this.request(),r("%s %s",this.method,this.url),this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||P,this._end()},j.prototype._end=function(){let e=this._data;const n=this.req;let s=this._buffer;const i=this.method;if(this._setTimeouts(),"HEAD"!=i&&!n._headerSent){if("string"!=typeof e){let r=n.getHeader("Content-Type");r&&(r=r.split(";")[0]);let o=t.serialize[r];!o&&q(r)&&(o=t.serialize["application/json"]),o&&(e=o(e))}e&&!n.getHeader("Content-Length")&&n.setHeader("Content-Length",Buffer.isBuffer(e)?e.length:Buffer.byteLength(e))}n.once("response",e=>{if(r("%s %s -> %s",this.method,this.url,e.statusCode),this._responseTimeoutTimer&&clearTimeout(this._responseTimeoutTimer),this.piped)return;const i=this._maxRedirects,a=p.type(e.headers["content-type"]||"")||"text/plain",c=a.split("/")[0],u="multipart"==c,l=T(e.statusCode);let d=this._parser;const f=this._responseType;if(this.res=e,l&&this._redirects++!=i)return this._redirect(e);if("HEAD"==this.method)return this.emit("end"),void this.callback(null,this._emitResponse());if(this._shouldUnzip(e)&&h(n,e),!d)if(f)d=t.parse.image,s=!0;else if(u){const e=new o.IncomingForm;d=e.parse.bind(e),s=!0}else!function(e){const t=e.split("/")[0];return"image"==t||"video"==t}(a)?t.parse[a]?d=t.parse[a]:"text"==c?(d=t.parse.text,s=!1!==s):q(a)?(d=t.parse["application/json"],s=!1!==s):s&&(d=t.parse.text):(d=t.parse.image,s=!0);(void 0===s&&function(e){const t=e.split("/"),n=t[0],r=t[1];return"text"==n||"x-www-form-urlencoded"==r}(a)||q(a))&&(s=!0);let y=!1;if(s){let t=this._maxResponseSize||2e8;e.on("data",n=>{if((t-=n.byteLength||n.length)<0){const t=Error("Maximum response size reached");t.code="ETOOLARGE",y=!1,e.destroy(t)}})}if(d)try{y=s,d(e,(e,t,n)=>{if(!this.timedout)return e&&!this._aborted?this.callback(e):void(y&&(this.emit("end"),this.callback(null,this._emitResponse(t,n))))})}catch(e){return void this.callback(e)}if(this.res=e,s)e.once("error",e=>{y=!1,this.callback(e,null)}),y||e.once("end",()=>{r("end %s %s",this.method,this.url),this.emit("end"),this.callback(null,this._emitResponse())});else{if(r("unbuffered %s %s",this.method,this.url),this.callback(null,this._emitResponse()),u)return;e.once("end",()=>{r("end %s %s",this.method,this.url),this.emit("end")})}}),this.emit("request",this);const a=()=>{const e=n.getHeader("Content-Length");let t=0;const r=new d.Transform;return r._transform=(n,r,o)=>{t+=n.length,this.emit("progress",{direction:"upload",lengthComputable:!0,loaded:t,total:e}),o(null,n)},r},c=this._formData;if(c){const e=c.getHeaders();for(const t in e)r('setting FormData header: "%s: %s"',t,e[t]),n.setHeader(t,e[t]);c.getLength((e,t)=>{r("got FormData Content-Length: %s",t),"number"==typeof t&&n.setHeader("Content-Length",t),c.pipe(a()).pipe(n)})}else Buffer.isBuffer(e)?(e=>{const t=new d.Readable,n=e.length,r=n%16384,o=n-r;for(let n=0;n<o;n+=16384){const r=e.slice(n,n+16384);t.push(r)}if(r>0){const n=e.slice(-r);t.push(n)}return t.push(null),t})(e).pipe(a()).pipe(n):n.end(e);return this},j.prototype._shouldUnzip=e=>204!==e.statusCode&&304!==e.statusCode&&"0"!==e.headers["content-length"]&&/^\s*(?:deflate|gzip)\s*$/.test(e.headers["content-encoding"]),-1==l.indexOf("del")&&(l=l.slice(0)).push("del"),l.forEach(e=>{const t=e;e=(e="del"==e?"delete":e).toUpperCase(),O[t]=(t,n,r)=>{const o=O(e,t);return"function"==typeof n&&(r=n,n=null),n&&("GET"===e||"HEAD"===e?o.query(n):o.send(n)),r&&o.end(r),o}})},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){!function(){"use strict";function e(t,n,r,o){return this instanceof e?(this.domain=t||void 0,this.path=n||"/",this.secure=!!r,this.script=!!o,this):new e(t,n,r,o)}function n(e,t,r){return e instanceof n?e:this instanceof n?(this.name=null,this.value=null,this.expiration_date=1/0,this.path=String(r||"/"),this.explicit_path=!1,this.domain=t||null,this.explicit_domain=!1,this.secure=!1,this.noscript=!1,e&&this.parse(e,t,r),this):new n(e,t,r)}e.All=Object.freeze(Object.create(null)),t.CookieAccessInfo=e,t.Cookie=n,n.prototype.toString=function(){var e=[this.name+"="+this.value];return this.expiration_date!==1/0&&e.push("expires="+new Date(this.expiration_date).toGMTString()),this.domain&&e.push("domain="+this.domain),this.path&&e.push("path="+this.path),this.secure&&e.push("secure"),this.noscript&&e.push("httponly"),e.join("; ")},n.prototype.toValueString=function(){return this.name+"="+this.value};var r=/[:](?=\s*[a-zA-Z0-9_\-]+\s*[=])/g;function o(){var e,t;return this instanceof o?(e=Object.create(null),this.setCookie=function(r,o,s){var i,a;if(i=(r=new n(r,o,s)).expiration_date<=Date.now(),void 0!==e[r.name]){for(t=e[r.name],a=0;a<t.length;a+=1)if(t[a].collidesWith(r))return i?(t.splice(a,1),0===t.length&&delete e[r.name],!1):(t[a]=r,r);return!i&&(t.push(r),r)}return!i&&(e[r.name]=[r],e[r.name])},this.getCookie=function(n,r){var o,s;if(t=e[n])for(s=0;s<t.length;s+=1)if((o=t[s]).expiration_date<=Date.now())0===t.length&&delete e[o.name];else if(o.matches(r))return o},this.getCookies=function(t){var n,r,o=[];for(n in e)(r=this.getCookie(n,t))&&o.push(r);return o.toString=function(){return o.join(":")},o.toValueString=function(){return o.map((function(e){return e.toValueString()})).join(";")},o},this):new o}n.prototype.parse=function(e,t,r){if(this instanceof n){var o,s=e.split(";").filter((function(e){return!!e})),i=s[0].match(/([^=]+)=([\s\S]*)/);if(!i)return void console.warn("Invalid cookie header encountered. Header: '"+e+"'");var a=i[1],c=i[2];if("string"!=typeof a||0===a.length||"string"!=typeof c)return void console.warn("Unable to extract values from cookie header. Cookie: '"+e+"'");for(this.name=a,this.value=c,o=1;o<s.length;o+=1)switch(a=(i=s[o].match(/([^=]+)(?:=([\s\S]*))?/))[1].trim().toLowerCase(),c=i[2],a){case"httponly":this.noscript=!0;break;case"expires":this.expiration_date=c?Number(Date.parse(c)):1/0;break;case"path":this.path=c?c.trim():"",this.explicit_path=!0;break;case"domain":this.domain=c?c.trim():"",this.explicit_domain=!!this.domain;break;case"secure":this.secure=!0}return this.explicit_path||(this.path=r||"/"),this.explicit_domain||(this.domain=t),this}return(new n).parse(e,t,r)},n.prototype.matches=function(t){return t===e.All||!(this.noscript&&t.script||this.secure&&!t.secure||!this.collidesWith(t))},n.prototype.collidesWith=function(e){if(this.path&&!e.path||this.domain&&!e.domain)return!1;if(this.path&&0!==e.path.indexOf(this.path))return!1;if(this.explicit_path&&0!==e.path.indexOf(this.path))return!1;var t=e.domain&&e.domain.replace(/^[\.]/,""),n=this.domain&&this.domain.replace(/^[\.]/,"");if(n===t)return!0;if(n){if(!this.explicit_domain)return!1;var r=t.indexOf(n);return-1!==r&&r===t.length-n.length}return!0},t.CookieJar=o,o.prototype.setCookies=function(e,t,o){var s,i,a=[];for(e=(e=Array.isArray(e)?e:e.split(r)).map((function(e){return new n(e,t,o)})),s=0;s<e.length;s+=1)i=e[s],this.setCookie(i,t,o)&&a.push(i);return a}}()},function(e,t){
/*!
                       * assertion-error
                       * Copyright(c) 2013 Jake Luer <jake@qualiancy.com>
                       * MIT Licensed
                       */
/*!
                       * Return a function that will copy properties from
                       * one object to another excluding any originally
                       * listed. Returned function will create a new `{}`.
                       *
                       * @param {String} excluded properties ...
                       * @return {Function}
                       */
function n(){var e=[].slice.call(arguments);function t(t,n){Object.keys(n).forEach((function(r){~e.indexOf(r)||(t[r]=n[r])}))}return function(){for(var e=[].slice.call(arguments),n=0,r={};n<e.length;n++)t(r,e[n]);return r}}function r(e,t,o){var s=n("name","message","stack","constructor","toJSON")(t||{});for(var i in this.message=e||"Unspecified AssertionError",this.showDiff=!1,s)this[i]=s[i];if(o=o||r,Error.captureStackTrace)Error.captureStackTrace(this,o);else try{throw new Error}catch(e){this.stack=e.stack}}
/*!
                       * Inherit from Error.prototype
                       */
/*!
                       * Primary Exports
                       */e.exports=r,r.prototype=Object.create(Error.prototype),
/*!
                       * Statically set name
                       */
r.prototype.name="AssertionError",
/*!
                       * Ensure correct constructor
                       */
r.prototype.constructor=r,r.prototype.toJSON=function(e){var t=n("constructor","toJSON","stack")({name:this.name},this);return!1!==e&&this.stack&&(t.stack=this.stack),t}},function(e,t){
/*!
                       * Chai - getActual utility
                       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
                       * MIT Licensed
                       */
e.exports=function(e,t){return t.length>4?t[4]:e._obj}},function(e,t,n){
/*!
                       * Chai - flag utility
                       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
                       * MIT Licensed
                       */
/*!
                       * Module dependencies
                       */
var r=n(26),o=n(18);e.exports=function(e){var t=r(e),n=Object.prototype.toString.call(e);if(o.truncateThreshold&&t.length>=o.truncateThreshold){if("[object Function]"===n)return e.name&&""!==e.name?"[Function: "+e.name+"]":"[Function]";if("[object Array]"===n)return"[ Array("+e.length+") ]";if("[object Object]"===n){var s=Object.keys(e);return"{ Object ("+(s.length>2?s.splice(0,2).join(", ")+", ...":s.join(", "))+") }"}return t}return t}},function(e,t,n){"use strict";var r=Function.prototype.toString,o=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\s\(\/]+)/;e.exports=function(e){if("function"!=typeof e)return null;var t="";if(void 0===Function.prototype.name&&void 0===e.name){var n=r.call(e).match(o);n&&(t=n[1])}else t=e.name;return t}},function(e,t){
/*!
                       * Chai - getProperties utility
                       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
                       * MIT Licensed
                       */
e.exports=function(e){var t=Object.getOwnPropertyNames(e);function n(e){-1===t.indexOf(e)&&t.push(e)}for(var r=Object.getPrototypeOf(e);null!==r;)Object.getOwnPropertyNames(r).forEach(n),r=Object.getPrototypeOf(r);return t}},function(e,t){
/*!
                       * Chai - getOwnEnumerablePropertySymbols utility
                       * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
                       * MIT Licensed
                       */
e.exports=function(e){return"function"!=typeof Object.getOwnPropertySymbols?[]:Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))}},function(e,t,n){var r=n(27),o=n(28),s=n(24),i=n(40),a=n(89),c=r.Request;function u(e,t,n,r){c.call(this,t.toUpperCase(),n),this.redirects(0),this.buffer(),this.app=e,this._asserts=[],this.url="string"==typeof e?e+n:this.serverAddress(e,n,r)}function l(e,t,n){var r=new Error(e);return r.expected=t,r.actual=n,r.showDiff=!0,r}e.exports=u,Object.setPrototypeOf(u.prototype,c.prototype),u.prototype.serverAddress=function(e,t,n){var r;return e.address()||(this._server=e.listen(0)),r=e.address().port,(e instanceof i.Server?"https":"http")+"://"+(n||"127.0.0.1")+":"+r+t},u.prototype.expect=function(e,t,n){return"function"==typeof e?(this._asserts.push(e),this):("function"==typeof t&&this.end(t),"function"==typeof n&&this.end(n),"number"==typeof e?(this._asserts.push(this._assertStatus.bind(this,e)),"function"!=typeof t&&arguments.length>1&&this._asserts.push(this._assertBody.bind(this,t)),this):"string"==typeof t||"number"==typeof t||t instanceof RegExp?(this._asserts.push(this._assertHeader.bind(this,{name:""+e,value:t})),this):(this._asserts.push(this._assertBody.bind(this,e)),this))},u.prototype.end=function(e){var t=this,n=this._server;return c.prototype.end.call(this,(function(r,o){if(n&&n._handle)return n.close(s);function s(){t.assert(r,o,e)}s()})),this},u.prototype.assert=function(e,t,n){var r,o,s={ECONNREFUSED:"Connection refused",ECONNRESET:"Connection reset by peer",EPIPE:"Broken pipe",ETIMEDOUT:"Operation timed out"};for(!t&&e&&(r=e instanceof Error&&"connect"===e.syscall&&Object.getOwnPropertyNames(s).indexOf(e.code)>=0?new Error(e.code+": "+s[e.code]):e),o=0;o<this._asserts.length&&!r;o+=1)r=this._assertFunction(this._asserts[o],t);r||!(e instanceof Error)||t&&e.status===t.status||(r=e),n.call(this,r||null,t)},u.prototype._assertBody=function(e,t){var n,r,s=e instanceof RegExp;if("object"!=typeof e||s){if(e!==t.text){if(n=o.inspect(e),r=o.inspect(t.text),!s)return l("expected "+n+" response body, got "+r,e,t.body);if(!e.test(t.text))return l("expected body "+r+" to match "+e,e,t.body)}}else try{a.deepStrictEqual(e,t.body)}catch(s){return l("expected "+(n=o.inspect(e))+" response body, got "+(r=o.inspect(t.body)),e,t.body)}},u.prototype._assertHeader=function(e,t){var n=e.name,r=t.header[n.toLowerCase()],o=e.value;return void 0===r?new Error('expected "'+n+'" header field'):Array.isArray(r)&&r.toString()===o||o===r?void 0:o instanceof RegExp?o.test(r)?void 0:new Error('expected "'+n+'" matching '+o+', got "'+r+'"'):new Error('expected "'+n+'" of "'+o+'", got "'+r+'"')},u.prototype._assertStatus=function(e,t){var n,r;if(t.status!==e)return n=s.STATUS_CODES[e],r=s.STATUS_CODES[t.status],new Error("expected "+e+' "'+n+'", got '+t.status+' "'+r+'"')},u.prototype._assertFunction=function(e,t){var n;try{n=e(t)}catch(e){n=e}if(n instanceof Error)return n}},function(e,t,n){"use strict";t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){return e.split(/ *; */).reduce((function(e,t){var n=t.split(/ *= */),r=n.shift(),o=n.shift();return r&&o&&(e[r]=o),e}),{})},t.parseLinks=function(e){return e.split(/ *, */).reduce((function(e,t){var n=t.split(/ *; */),r=n[0].slice(1,-1);return e[n[1].split(/ *= */)[1].slice(1,-1)]=r,e}),{})},t.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},function(e,t){e.exports=n(39)},function(e,t){e.exports=n(40)},function(e,t){e.exports=n(41)},function(e,t,n){const{expect:r}=n(43),o=n(66);n(91);const s=o("http://localhost:3000/api");let i;before(e=>{s.post("/user/login").set("Accept","application/json").send({user_mail:"andy@gmail.com",user_password:"password10"}).expect(200).end((t,n)=>{i=n.body.token,e()})}),describe("Article",()=>{it("Article should be an object with keys and values",e=>{s.get("/article").expect(200).end((t,n)=>{t&&e(t),r(n.body[0]).to.have.property("article_id"),r(n.body[0].article_id).to.be.a("number"),r(n.body[0]).to.have.property("user_id"),r(n.body[0].user_id).to.be.a("number"),r(n.body[0]).to.have.property("article_title"),r(n.body[0].article_title).to.be.a("string"),r(n.body[0]).to.have.property("article_tag"),r(n.body[0].article_tag).to.be.a("string"),r(n.body[0]).to.have.property("article_content"),r(n.body[0].article_content).to.be.a("string"),e()})}),it("should return a 200 response",e=>{s.get("/article/personal").set("Authorization",`Bearer ${i}`).expect(200,e)})})},function(e,t,n){e.exports=n(16)},function(e,t,n){
/*!
                       * chai
                       * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
                       * MIT Licensed
                       */
/*!
                       * Dependencies that are used for multiple exports are required here only once
                       */
var r=n(45);
/*!
                       * test utility
                       */t.test=n(46),
/*!
                       * type utility
                       */
t.type=n(25),
/*!
                       * expectTypes utility
                       */
t.expectTypes=n(47),
/*!
                       * message utility
                       */
t.getMessage=n(48),
/*!
                       * actual utility
                       */
t.getActual=n(32),
/*!
                       * Inspect util
                       */
t.inspect=n(26),
/*!
                       * Object Display util
                       */
t.objDisplay=n(33),
/*!
                       * Flag utility
                       */
t.flag=n(15),
/*!
                       * Flag transferring utility
                       */
t.transferFlags=n(17),
/*!
                       * Deep equal utility
                       */
t.eql=n(50),
/*!
                       * Deep path info
                       */
t.getPathInfo=r.getPathInfo,
/*!
                       * Check if a property exists
                       */
t.hasProperty=r.hasProperty,
/*!
                       * Function name
                       */
t.getName=n(34),
/*!
                       * add Property
                       */
t.addProperty=n(51),
/*!
                       * add Method
                       */
t.addMethod=n(52),
/*!
                       * overwrite Property
                       */
t.overwriteProperty=n(53),
/*!
                       * overwrite Method
                       */
t.overwriteMethod=n(54),
/*!
                       * Add a chainable method
                       */
t.addChainableMethod=n(55),
/*!
                       * Overwrite chainable method
                       */
t.overwriteChainableMethod=n(56),
/*!
                       * Compare by inspect method
                       */
t.compareByInspect=n(57),
/*!
                       * Get own enumerable property symbols method
                       */
t.getOwnEnumerablePropertySymbols=n(36),
/*!
                       * Get own enumerable properties method
                       */
t.getOwnEnumerableProperties=n(58),
/*!
                       * Checks error against a given set of criteria
                       */
t.checkError=n(59),
/*!
                       * Proxify util
                       */
t.proxify=n(21),
/*!
                       * addLengthGuard util
                       */
t.addLengthGuard=n(20),
/*!
                       * isProxyEnabled helper
                       */
t.isProxyEnabled=n(19),
/*!
                       * isNaN method
                       */
t.isNaN=n(60)},function(e,t,n){"use strict";function r(e,t){return null!=e&&t in Object(e)}function o(e){return e.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map((function(e){var t=/^\[(\d+)\]$/.exec(e);return t?{i:parseFloat(t[1])}:{p:e.replace(/\\([.\[\]])/g,"$1")}}))}function s(e,t,n){var r=e,o=null;n=void 0===n?t.length:n;for(var s=0;s<n;s++){var i=t[s];r&&(r=void 0===i.p?r[i.i]:r[i.p],s===n-1&&(o=r))}return o}function i(e,t){var n=o(t),i=n[n.length-1],a={parent:n.length>1?s(e,n,n.length-1):e,name:i.p||i.i,value:s(e,n)};return a.exists=r(a.parent,a.name),a}e.exports={hasProperty:r,getPathInfo:i,getPathValue:function(e,t){return i(e,t).value},setPathValue:function(e,t,n){return function(e,t,n){for(var r=e,o=n.length,s=null,i=0;i<o;i++){var a=null,c=null;if(s=n[i],i===o-1)r[a=void 0===s.p?s.i:s.p]=t;else if(void 0!==s.p&&r[s.p])r=r[s.p];else if(void 0!==s.i&&r[s.i])r=r[s.i];else{var u=n[i+1];a=void 0===s.p?s.i:s.p,c=void 0===u.p?[]:{},r[a]=c,r=r[a]}}}(e,n,o(t)),e}}},function(e,t,n){
/*!
                       * Chai - test utility
                       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
                       * MIT Licensed
                       */
/*!
                       * Module dependencies
                       */
var r=n(15);e.exports=function(e,t){var n=r(e,"negate"),o=t[0];return n?!o:o}},function(e,t,n){
/*!
                       * Chai - expectTypes utility
                       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
                       * MIT Licensed
                       */
var r=n(31),o=n(15),s=n(25);e.exports=function(e,t){var n=o(e,"message"),i=o(e,"ssfi");n=n?n+": ":"",e=o(e,"object"),(t=t.map((function(e){return e.toLowerCase()}))).sort();var a=t.map((function(e,n){var r=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an":"a";return(t.length>1&&n===t.length-1?"or ":"")+r+" "+e})).join(", "),c=s(e).toLowerCase();if(!t.some((function(e){return c===e})))throw new r(n+"object tested must be "+a+", but "+c+" given",void 0,i)}},function(e,t,n){
/*!
                       * Chai - message composition utility
                       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
                       * MIT Licensed
                       */
/*!
                       * Module dependencies
                       */
var r=n(15),o=n(32),s=n(33);e.exports=function(e,t){var n=r(e,"negate"),i=r(e,"object"),a=t[3],c=o(e,t),u=n?t[2]:t[1],l=r(e,"message");return"function"==typeof u&&(u=u()),u=(u=u||"").replace(/#\{this\}/g,(function(){return s(i)})).replace(/#\{act\}/g,(function(){return s(c)})).replace(/#\{exp\}/g,(function(){return s(a)})),l?l+": "+u:u}},function(e,t){
/*!
                       * Chai - getEnumerableProperties utility
                       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
                       * MIT Licensed
                       */
e.exports=function(e){var t=[];for(var n in e)t.push(n);return t}},function(e,t,n){"use strict";
/*!
                       * deep-eql
                       * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
                       * MIT Licensed
                       */var r=n(25);function o(){this._key="chai/deep-eql__"+Math.random()+Date.now()}o.prototype={get:function(e){return e[this._key]},set:function(e,t){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:t,configurable:!0})}};var s="function"==typeof WeakMap?WeakMap:o;
/*!
                       * Check to see if the MemoizeMap has recorded a result of the two operands
                       *
                       * @param {Mixed} leftHandOperand
                       * @param {Mixed} rightHandOperand
                       * @param {MemoizeMap} memoizeMap
                       * @returns {Boolean|null} result
                      */function i(e,t,n){if(!n||y(e)||y(t))return null;var r=n.get(e);if(r){var o=r.get(t);if("boolean"==typeof o)return o}return null}
/*!
                       * Set the result of the equality into the MemoizeMap
                       *
                       * @param {Mixed} leftHandOperand
                       * @param {Mixed} rightHandOperand
                       * @param {MemoizeMap} memoizeMap
                       * @param {Boolean} result
                      */function a(e,t,n,r){if(n&&!y(e)&&!y(t)){var o=n.get(e);o?o.set(t,r):((o=new s).set(t,r),n.set(e,o))}}
/*!
                       * Primary Export
                       */function c(e,t,n){if(n&&n.comparator)return l(e,t,n);var r=u(e,t);return null!==r?r:l(e,t,n)}function u(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t||!y(e)&&!y(t)&&null}
/*!
                       * The main logic of the `deepEqual` function.
                       *
                       * @param {Mixed} leftHandOperand
                       * @param {Mixed} rightHandOperand
                       * @param {Object} [options] (optional) Additional options
                       * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
                       * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
                          complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
                          references to blow the stack.
                       * @return {Boolean} equal match
                      */function l(e,t,n){(n=n||{}).memoize=!1!==n.memoize&&(n.memoize||new s);var o=n&&n.comparator,l=i(e,t,n.memoize);if(null!==l)return l;var y=i(t,e,n.memoize);if(null!==y)return y;if(o){var m=o(e,t);if(!1===m||!0===m)return a(e,t,n.memoize,m),m;var b=u(e,t);if(null!==b)return b}var g=r(e);if(g!==r(t))return a(e,t,n.memoize,!1),!1;a(e,t,n.memoize,!0);var w=function(e,t,n,r){switch(n){case"String":case"Number":case"Boolean":case"Date":return c(e.valueOf(),t.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":case"Error":return e===t;case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return d(e,t,r);case"RegExp":
/*!
                                                           * Compare two Regular Expressions for equality.
                                                           *
                                                           * @param {RegExp} leftHandOperand
                                                           * @param {RegExp} rightHandOperand
                                                           * @return {Boolean} result
                                                           */
return function(e,t){return e.toString()===t.toString()}
/*!
                                                           * Compare two Sets/Maps for equality. Faster than other equality functions.
                                                           *
                                                           * @param {Set} leftHandOperand
                                                           * @param {Set} rightHandOperand
                                                           * @param {Object} [options] (Optional)
                                                           * @return {Boolean} result
                                                           */(e,t);case"Generator":
/*!
                                                           * Simple equality for generator objects such as those returned by generator functions.
                                                           *
                                                           * @param {Iterable} leftHandOperand
                                                           * @param {Iterable} rightHandOperand
                                                           * @param {Object} [options] (Optional)
                                                           * @return {Boolean} result
                                                           */
return function(e,t,n){return d(h(e),h(t),n)}
/*!
                                                           * Determine if the given object has an @@iterator function.
                                                           *
                                                           * @param {Object} target
                                                           * @return {Boolean} `true` if the object has an @@iterator function.
                                                           */(e,t,r);case"DataView":return d(new Uint8Array(e.buffer),new Uint8Array(t.buffer),r);case"ArrayBuffer":return d(new Uint8Array(e),new Uint8Array(t),r);case"Set":case"Map":return function(e,t,n){if(e.size!==t.size)return!1;if(0===e.size)return!0;var r=[],o=[];return e.forEach((function(e,t){r.push([e,t])})),t.forEach((function(e,t){o.push([e,t])})),d(r.sort(),o.sort(),n);
/*!
                                                          * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
                                                          *
                                                          * @param {Iterable} leftHandOperand
                                                          * @param {Iterable} rightHandOperand
                                                          * @param {Object} [options] (Optional)
                                                          * @return {Boolean} result
                                                          */}(e,t,r);default:
/*!
                                                           * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
                                                           * for each enumerable key in the object.
                                                           *
                                                           * @param {Mixed} leftHandOperand
                                                           * @param {Mixed} rightHandOperand
                                                           * @param {Object} [options] (Optional)
                                                           * @return {Boolean} result
                                                           */
return function(e,t,n){var r=f(e),o=f(t);if(r.length&&r.length===o.length)return r.sort(),o.sort(),!1!==d(r,o)&&
/*!
                                                                    * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
                                                                    * each key. If any value of the given key is not equal, the function will return false (early).
                                                                    *
                                                                    * @param {Mixed} leftHandOperand
                                                                    * @param {Mixed} rightHandOperand
                                                                    * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
                                                                    * @param {Object} [options] (Optional)
                                                                    * @return {Boolean} result
                                                                    */
function(e,t,n,r){var o=n.length;if(0===o)return!0;for(var s=0;s<o;s+=1)if(!1===c(e[n[s]],t[n[s]],r))return!1;return!0}(e,t,r,n);var s=p(e),i=p(t);return s.length&&s.length===i.length?(s.sort(),i.sort(),d(s,i,n)):0===r.length&&0===s.length&&0===o.length&&0===i.length}
/*!
                                                           * Returns true if the argument is a primitive.
                                                           *
                                                           * This intentionally returns true for all objects that can be compared by reference,
                                                           * including functions and symbols.
                                                           *
                                                           * @param {Mixed} value
                                                           * @return {Boolean} result
                                                           */(e,t,r)}}(e,t,g,n);return a(e,t,n.memoize,w),w}function d(e,t,n){var r=e.length;if(r!==t.length)return!1;if(0===r)return!0;for(var o=-1;++o<r;)if(!1===c(e[o],t[o],n))return!1;return!0}
/*!
                       * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
                       * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
                       *
                       * @param {Object} target
                       * @returns {Array} an array of entries from the @@iterator function
                       */function p(e){if(function(e){return"undefined"!=typeof Symbol&&"object"==typeof e&&void 0!==Symbol.iterator&&"function"==typeof e[Symbol.iterator]}(e))try{return h(e[Symbol.iterator]())}catch(e){return[]}return[]}
/*!
                       * Gets all entries from a Generator. This will consume the generator - which could have side effects.
                       *
                       * @param {Generator} target
                       * @returns {Array} an array of entries from the Generator.
                       */function h(e){for(var t=e.next(),n=[t.value];!1===t.done;)t=e.next(),n.push(t.value);return n}
/*!
                       * Gets all own and inherited enumerable keys from a target.
                       *
                       * @param {Object} target
                       * @returns {Array} an array of own and inherited enumerable keys from the target.
                       */function f(e){var t=[];for(var n in e)t.push(n);return t}function y(e){return null===e||"object"!=typeof e}e.exports=c,e.exports.MemoizeMap=s},function(e,t,n){
/*!
                       * Chai - addProperty utility
                       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
                       * MIT Licensed
                       */
var r=n(16),o=n(15),s=n(19),i=n(17);e.exports=function(e,t,n){n=void 0===n?function(){}:n,Object.defineProperty(e,t,{get:function e(){s()||o(this,"lockSsfi")||o(this,"ssfi",e);var t=n.call(this);if(void 0!==t)return t;var a=new r.Assertion;return i(this,a),a},configurable:!0})}},function(e,t,n){
/*!
                       * Chai - addMethod utility
                       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
                       * MIT Licensed
                       */
var r=n(20),o=n(16),s=n(15),i=n(21),a=n(17);e.exports=function(e,t,n){var c=function(){s(this,"lockSsfi")||s(this,"ssfi",c);var e=n.apply(this,arguments);if(void 0!==e)return e;var t=new o.Assertion;return a(this,t),t};r(c,t,!1),e[t]=i(c,t)}},function(e,t,n){
/*!
                       * Chai - overwriteProperty utility
                       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
                       * MIT Licensed
                       */
var r=n(16),o=n(15),s=n(19),i=n(17);e.exports=function(e,t,n){var a=Object.getOwnPropertyDescriptor(e,t),c=function(){};a&&"function"==typeof a.get&&(c=a.get),Object.defineProperty(e,t,{get:function e(){s()||o(this,"lockSsfi")||o(this,"ssfi",e);var t=o(this,"lockSsfi");o(this,"lockSsfi",!0);var a=n(c).call(this);if(o(this,"lockSsfi",t),void 0!==a)return a;var u=new r.Assertion;return i(this,u),u},configurable:!0})}},function(e,t,n){
/*!
                       * Chai - overwriteMethod utility
                       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
                       * MIT Licensed
                       */
var r=n(20),o=n(16),s=n(15),i=n(21),a=n(17);e.exports=function(e,t,n){var c=e[t],u=function(){throw new Error(t+" is not a function")};c&&"function"==typeof c&&(u=c);var l=function(){s(this,"lockSsfi")||s(this,"ssfi",l);var e=s(this,"lockSsfi");s(this,"lockSsfi",!0);var t=n(u).apply(this,arguments);if(s(this,"lockSsfi",e),void 0!==t)return t;var r=new o.Assertion;return a(this,r),r};r(l,t,!1),e[t]=i(l,t)}},function(e,t,n){
/*!
                       * Chai - addChainingMethod utility
                       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
                       * MIT Licensed
                       */
/*!
                       * Module dependencies
                       */
var r=n(20),o=n(16),s=n(15),i=n(21),a=n(17),c="function"==typeof Object.setPrototypeOf,u=function(){},l=Object.getOwnPropertyNames(u).filter((function(e){var t=Object.getOwnPropertyDescriptor(u,e);return"object"!=typeof t||!t.configurable})),d=Function.prototype.call,p=Function.prototype.apply;e.exports=function(e,t,n,u){"function"!=typeof u&&(u=function(){});var h={method:n,chainingBehavior:u};e.__methods||(e.__methods={}),e.__methods[t]=h,Object.defineProperty(e,t,{get:function(){h.chainingBehavior.call(this);var n=function(){s(this,"lockSsfi")||s(this,"ssfi",n);var e=h.method.apply(this,arguments);if(void 0!==e)return e;var t=new o.Assertion;return a(this,t),t};if(r(n,t,!0),c){var u=Object.create(this);u.call=d,u.apply=p,Object.setPrototypeOf(n,u)}else Object.getOwnPropertyNames(e).forEach((function(t){if(-1===l.indexOf(t)){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r)}}));return a(this,n),i(n)},configurable:!0})}},function(e,t,n){
/*!
                       * Chai - overwriteChainableMethod utility
                       * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
                       * MIT Licensed
                       */
var r=n(16),o=n(17);e.exports=function(e,t,n,s){var i=e.__methods[t],a=i.chainingBehavior;i.chainingBehavior=function(){var e=s(a).call(this);if(void 0!==e)return e;var t=new r.Assertion;return o(this,t),t};var c=i.method;i.method=function(){var e=n(c).apply(this,arguments);if(void 0!==e)return e;var t=new r.Assertion;return o(this,t),t}}},function(e,t,n){
/*!
                       * Chai - compareByInspect utility
                       * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
                       * MIT Licensed
                       */
/*!
                       * Module dependencies
                       */
var r=n(26);e.exports=function(e,t){return r(e)<r(t)?-1:1}},function(e,t,n){
/*!
                       * Chai - getOwnEnumerableProperties utility
                       * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
                       * MIT Licensed
                       */
/*!
                       * Module dependencies
                       */
var r=n(36);e.exports=function(e){return Object.keys(e).concat(r(e))}},function(e,t,n){"use strict";var r=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\(\/]+)/;function o(e){var t="";if(void 0===e.name){var n=String(e).match(r);n&&(t=n[1])}else t=e.name;return t}e.exports={compatibleInstance:function(e,t){return t instanceof Error&&e===t},compatibleConstructor:function(e,t){return t instanceof Error?e.constructor===t.constructor||e instanceof t.constructor:(t.prototype instanceof Error||t===Error)&&(e.constructor===t||e instanceof t)},compatibleMessage:function(e,t){var n="string"==typeof e?e:e.message;return t instanceof RegExp?t.test(n):"string"==typeof t&&-1!==n.indexOf(t)},getMessage:function(e){var t="";return e&&e.message?t=e.message:"string"==typeof e&&(t=e),t},getConstructorName:function(e){var t=e;return e instanceof Error?t=o(e.constructor):"function"==typeof e&&(t=o(e).trim()||o(new e)),t}}},function(e,t){e.exports=Number.isNaN||
/*!
                       * Chai - isNaN utility
                       * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
                       * MIT Licensed
                       */
function(e){return e!=e}},function(e,t,n){
/*!
                       * chai
                       * http://chaijs.com
                       * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
                       * MIT Licensed
                       */
var r=n(18);e.exports=function(e,t){
/*!
                                  * Module dependencies.
                                  */
var n=e.AssertionError,o=t.flag;
/*!
                                  * Module export.
                                  */
/*!
                                  * Assertion Constructor
                                  *
                                  * Creates object for chaining.
                                  *
                                  * `Assertion` objects contain metadata in the form of flags. Three flags can
                                  * be assigned during instantiation by passing arguments to this constructor:
                                  *
                                  * - `object`: This flag contains the target of the assertion. For example, in
                                  *   the assertion `expect(numKittens).to.equal(7);`, the `object` flag will
                                  *   contain `numKittens` so that the `equal` assertion can reference it when
                                  *   needed.
                                  *
                                  * - `message`: This flag contains an optional custom error message to be
                                  *   prepended to the error message that's generated by the assertion when it
                                  *   fails.
                                  *
                                  * - `ssfi`: This flag stands for "start stack function indicator". It
                                  *   contains a function reference that serves as the starting point for
                                  *   removing frames from the stack trace of the error that's created by the
                                  *   assertion when it fails. The goal is to provide a cleaner stack trace to
                                  *   end users by removing Chai's internal functions. Note that it only works
                                  *   in environments that support `Error.captureStackTrace`, and only when
                                  *   `Chai.config.includeStack` hasn't been set to `false`.
                                  *
                                  * - `lockSsfi`: This flag controls whether or not the given `ssfi` flag
                                  *   should retain its current value, even as assertions are chained off of
                                  *   this object. This is usually set to `true` when creating a new assertion
                                  *   from within another assertion. It's also temporarily set to `true` before
                                  *   an overwritten assertion gets called by the overwriting assertion.
                                  *
                                  * @param {Mixed} obj target of the assertion
                                  * @param {String} msg (optional) custom error message
                                  * @param {Function} ssfi (optional) starting point for removing stack frames
                                  * @param {Boolean} lockSsfi (optional) whether or not the ssfi flag is locked
                                  * @api private
                                  */function s(e,n,r,i){return o(this,"ssfi",r||s),o(this,"lockSsfi",i),o(this,"object",e),o(this,"message",n),t.proxify(this)}e.Assertion=s,Object.defineProperty(s,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack},set:function(e){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack=e}}),Object.defineProperty(s,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff},set:function(e){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff=e}}),s.addProperty=function(e,n){t.addProperty(this.prototype,e,n)},s.addMethod=function(e,n){t.addMethod(this.prototype,e,n)},s.addChainableMethod=function(e,n,r){t.addChainableMethod(this.prototype,e,n,r)},s.overwriteProperty=function(e,n){t.overwriteProperty(this.prototype,e,n)},s.overwriteMethod=function(e,n){t.overwriteMethod(this.prototype,e,n)},s.overwriteChainableMethod=function(e,n,r){t.overwriteChainableMethod(this.prototype,e,n,r)},s.prototype.assert=function(e,s,i,a,c,u){var l=t.test(this,arguments);if(!1!==u&&(u=!0),void 0===a&&void 0===c&&(u=!1),!0!==r.showDiff&&(u=!1),!l){s=t.getMessage(this,arguments);var d=t.getActual(this,arguments);throw new n(s,{actual:d,expected:a,showDiff:u},r.includeStack?this.assert:o(this,"ssfi"))}},
/*!
                                  * ### ._obj
                                  *
                                  * Quick reference to stored `actual` value for plugin developers.
                                  *
                                  * @api private
                                  */
Object.defineProperty(s.prototype,"_obj",{get:function(){return o(this,"object")},set:function(e){o(this,"object",e)}})}},function(e,t){
/*!
                       * chai
                       * http://chaijs.com
                       * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
                       * MIT Licensed
                       */
e.exports=function(e,t){var n=e.Assertion,r=e.AssertionError,o=t.flag;function s(e,n){n&&o(this,"message",n),e=e.toLowerCase();var r=o(this,"object"),s=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an ":"a ";this.assert(e===t.type(r).toLowerCase(),"expected #{this} to be "+s+e,"expected #{this} not to be "+s+e)}function i(e,n){return t.isNaN(e)&&t.isNaN(n)||e===n}function a(){o(this,"contains",!0)}function c(e,s){s&&o(this,"message",s);var a=o(this,"object"),c=t.type(a).toLowerCase(),u=o(this,"message"),l=o(this,"negate"),d=o(this,"ssfi"),p=o(this,"deep"),h=p?"deep ":"";u=u?u+": ":"";var f=!1;switch(c){case"string":f=-1!==a.indexOf(e);break;case"weakset":if(p)throw new r(u+"unable to use .deep.include with WeakSet",void 0,d);f=a.has(e);break;case"map":var y=p?t.eql:i;a.forEach((function(t){f=f||y(t,e)}));break;case"set":p?a.forEach((function(n){f=f||t.eql(n,e)})):f=a.has(e);break;case"array":f=p?a.some((function(n){return t.eql(n,e)})):-1!==a.indexOf(e);break;default:if(e!==Object(e))throw new r(u+"object tested must be an array, a map, an object, a set, a string, or a weakset, but "+c+" given",void 0,d);var m=Object.keys(e),b=null,g=0;if(m.forEach((function(s){var i=new n(a);if(t.transferFlags(this,i,!0),o(i,"lockSsfi",!0),l&&1!==m.length)try{i.property(s,e[s])}catch(e){if(!t.checkError.compatibleConstructor(e,r))throw e;null===b&&(b=e),g++}else i.property(s,e[s])}),this),l&&m.length>1&&g===m.length)throw b;return}this.assert(f,"expected #{this} to "+h+"include "+t.inspect(e),"expected #{this} to not "+h+"include "+t.inspect(e))}function u(){var e=o(this,"object"),n=t.type(e);this.assert("Arguments"===n,"expected #{this} to be arguments but got "+n,"expected #{this} to not be arguments")}function l(e,t){t&&o(this,"message",t);var n=o(this,"object");if(o(this,"deep")){var r=o(this,"lockSsfi");o(this,"lockSsfi",!0),this.eql(e),o(this,"lockSsfi",r)}else this.assert(e===n,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",e,this._obj,!0)}function d(e,n){n&&o(this,"message",n),this.assert(t.eql(e,o(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",e,this._obj,!0)}function p(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to above must be a number":i=l+"the argument to above must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y>e,"expected #{this} to have a "+m+" above #{exp} but got #{act}","expected #{this} to not have a "+m+" above #{exp}",e,y)}else this.assert(a>e,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",e)}function h(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to least must be a number":i=l+"the argument to least must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y>=e,"expected #{this} to have a "+m+" at least #{exp} but got #{act}","expected #{this} to have a "+m+" below #{exp}",e,y)}else this.assert(a>=e,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",e)}function f(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to below must be a number":i=l+"the argument to below must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y<e,"expected #{this} to have a "+m+" below #{exp} but got #{act}","expected #{this} to not have a "+m+" below #{exp}",e,y)}else this.assert(a<e,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",e)}function y(e,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",d=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==p&&"set"!==p&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==p||"date"===h?"number"===h||!c&&"number"!==p?c||"date"===p||"number"===p?f=!1:i=l+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to most must be a number":i=l+"the argument to most must be a date",f)throw new r(i,void 0,d);if(c){var y,m="length";"map"===p||"set"===p?(m="size",y=a.size):y=a.length,this.assert(y<=e,"expected #{this} to have a "+m+" at most #{exp} but got #{act}","expected #{this} to have a "+m+" above #{exp}",e,y)}else this.assert(a<=e,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",e)}function m(e,n){n&&o(this,"message",n);var s=o(this,"object"),i=o(this,"ssfi"),a=o(this,"message");try{var c=s instanceof e}catch(n){if(n instanceof TypeError)throw new r((a=a?a+": ":"")+"The instanceof assertion needs a constructor but "+t.type(e)+" was given.",void 0,i);throw n}var u=t.getName(e);null===u&&(u="an unnamed constructor"),this.assert(c,"expected #{this} to be an instance of "+u,"expected #{this} to not be an instance of "+u)}function b(e,n,s){s&&o(this,"message",s);var i=o(this,"nested"),a=o(this,"own"),c=o(this,"message"),u=o(this,"object"),l=o(this,"ssfi"),d=typeof e;if(c=c?c+": ":"",i){if("string"!==d)throw new r(c+"the argument to property must be a string when using nested syntax",void 0,l)}else if("string"!==d&&"number"!==d&&"symbol"!==d)throw new r(c+"the argument to property must be a string, number, or symbol",void 0,l);if(i&&a)throw new r(c+'The "nested" and "own" flags cannot be combined.',void 0,l);if(null==u)throw new r(c+"Target cannot be null or undefined.",void 0,l);var p,h=o(this,"deep"),f=o(this,"negate"),y=i?t.getPathInfo(u,e):null,m=i?y.value:u[e],b="";h&&(b+="deep "),a&&(b+="own "),i&&(b+="nested "),b+="property ",p=a?Object.prototype.hasOwnProperty.call(u,e):i?y.exists:t.hasProperty(u,e),f&&1!==arguments.length||this.assert(p,"expected #{this} to have "+b+t.inspect(e),"expected #{this} to not have "+b+t.inspect(e)),arguments.length>1&&this.assert(p&&(h?t.eql(n,m):n===m),"expected #{this} to have "+b+t.inspect(e)+" of #{exp}, but got #{act}","expected #{this} to not have "+b+t.inspect(e)+" of #{act}",n,m),o(this,"object",m)}function g(e,t,n){o(this,"own",!0),b.apply(this,arguments)}function w(e,n,r){"string"==typeof n&&(r=n,n=null),r&&o(this,"message",r);var s=o(this,"object"),i=Object.getOwnPropertyDescriptor(Object(s),e);i&&n?this.assert(t.eql(n,i),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to match "+t.inspect(n)+", got "+t.inspect(i),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to not match "+t.inspect(n),n,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+t.inspect(e),"expected #{this} to not have an own property descriptor for "+t.inspect(e)),o(this,"object",i)}function v(){o(this,"doLength",!0)}function _(e,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=t.type(i).toLowerCase(),c=o(this,"message"),u=o(this,"ssfi"),l="length";switch(a){case"map":case"set":l="size",s=i.size;break;default:new n(i,c,u,!0).to.have.property("length"),s=i.length}this.assert(s==e,"expected #{this} to have a "+l+" of #{exp} but got #{act}","expected #{this} to not have a "+l+" of #{act}",e,s)}function x(e,t){t&&o(this,"message",t);var n=o(this,"object");this.assert(e.exec(n),"expected #{this} to match "+e,"expected #{this} not to match "+e)}function E(e){var n,s,i=o(this,"object"),a=t.type(i),c=t.type(e),u=o(this,"ssfi"),l=o(this,"deep"),d="",p=!0,h=o(this,"message"),f=(h=h?h+": ":"")+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if("Map"===a||"Set"===a)d=l?"deeply ":"",s=[],i.forEach((function(e,t){s.push(t)})),"Array"!==c&&(e=Array.prototype.slice.call(arguments));else{switch(s=t.getOwnEnumerableProperties(i),c){case"Array":if(arguments.length>1)throw new r(f,void 0,u);break;case"Object":if(arguments.length>1)throw new r(f,void 0,u);e=Object.keys(e);break;default:e=Array.prototype.slice.call(arguments)}e=e.map((function(e){return"symbol"==typeof e?e:String(e)}))}if(!e.length)throw new r(h+"keys required",void 0,u);var y=e.length,m=o(this,"any"),b=o(this,"all"),g=e;if(m||b||(b=!0),m&&(p=g.some((function(e){return s.some((function(n){return l?t.eql(e,n):e===n}))}))),b&&(p=g.every((function(e){return s.some((function(n){return l?t.eql(e,n):e===n}))})),o(this,"contains")||(p=p&&e.length==s.length)),y>1){var w=(e=e.map((function(e){return t.inspect(e)}))).pop();b&&(n=e.join(", ")+", and "+w),m&&(n=e.join(", ")+", or "+w)}else n=t.inspect(e[0]);n=(y>1?"keys ":"key ")+n,n=(o(this,"contains")?"contain ":"have ")+n,this.assert(p,"expected #{this} to "+d+n,"expected #{this} to not "+d+n,g.slice(0).sort(t.compareByInspect),s.sort(t.compareByInspect),!0)}function S(e,r,s){s&&o(this,"message",s);var i,a=o(this,"object"),c=o(this,"ssfi"),u=o(this,"message"),l=o(this,"negate")||!1;new n(a,u,c,!0).is.a("function"),(e instanceof RegExp||"string"==typeof e)&&(r=e,e=null);try{a()}catch(e){i=e}var d=void 0===e&&void 0===r,p=Boolean(e&&r),h=!1,f=!1;if(d||!d&&!l){var y="an error";e instanceof Error?y="#{exp}":e&&(y=t.checkError.getConstructorName(e)),this.assert(i,"expected #{this} to throw "+y,"expected #{this} to not throw an error but #{act} was thrown",e&&e.toString(),i instanceof Error?i.toString():"string"==typeof i?i:i&&t.checkError.getConstructorName(i))}if(e&&i&&(e instanceof Error&&t.checkError.compatibleInstance(i,e)===l&&(p&&l?h=!0:this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i&&!l?" but #{act} was thrown":""),e.toString(),i.toString())),t.checkError.compatibleConstructor(i,e)===l&&(p&&l?h=!0:this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&t.checkError.getConstructorName(e),i instanceof Error?i.toString():i&&t.checkError.getConstructorName(i)))),i&&null!=r){var m="including";r instanceof RegExp&&(m="matching"),t.checkError.compatibleMessage(i,r)===l&&(p&&l?f=!0:this.assert(l,"expected #{this} to throw error "+m+" #{exp} but got #{act}","expected #{this} to throw error not "+m+" #{exp}",r,t.checkError.getMessage(i)))}h&&f&&this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&t.checkError.getConstructorName(e),i instanceof Error?i.toString():i&&t.checkError.getConstructorName(i)),o(this,"object",i)}function O(e,n){n&&o(this,"message",n);var r=o(this,"object"),s=o(this,"itself"),i="function"!=typeof r||s?r[e]:r.prototype[e];this.assert("function"==typeof i,"expected #{this} to respond to "+t.inspect(e),"expected #{this} to not respond to "+t.inspect(e))}function P(e,n){n&&o(this,"message",n);var r=e(o(this,"object"));this.assert(r,"expected #{this} to satisfy "+t.objDisplay(e),"expected #{this} to not satisfy"+t.objDisplay(e),!o(this,"negate"),r)}function k(e,t,s){s&&o(this,"message",s);var i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");if(new n(i,a,c,!0).is.a("number"),"number"!=typeof e||"number"!=typeof t)throw new r((a=a?a+": ":"")+"the arguments to closeTo or approximately must be numbers",void 0,c);this.assert(Math.abs(i-e)<=t,"expected #{this} to be close to "+e+" +/- "+t,"expected #{this} not to be close to "+e+" +/- "+t)}function j(e,t,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),s=e[t]):(new n(e,a,c,!0).is.a("function"),s=e()),i();var u=null==t?e():e[t],l=null==t?s:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",s),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","change"),o(this,"realDelta",u!==s),this.assert(s!==u,"expected "+l+" to change","expected "+l+" to not change")}function q(e,t,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),s=e[t]):(new n(e,a,c,!0).is.a("function"),s=e()),new n(s,a,c,!0).is.a("number"),i();var u=null==t?e():e[t],l=null==t?s:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",s),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","increase"),o(this,"realDelta",u-s),this.assert(u-s>0,"expected "+l+" to increase","expected "+l+" to not increase")}function T(e,t,r){r&&o(this,"message",r);var s,i=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),s=e[t]):(new n(e,a,c,!0).is.a("function"),s=e()),new n(s,a,c,!0).is.a("number"),i();var u=null==t?e():e[t],l=null==t?s:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",s),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","decrease"),o(this,"realDelta",s-u),this.assert(u-s<0,"expected "+l+" to decrease","expected "+l+" to not decrease")}["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still"].forEach((function(e){n.addProperty(e)})),n.addProperty("not",(function(){o(this,"negate",!0)})),n.addProperty("deep",(function(){o(this,"deep",!0)})),n.addProperty("nested",(function(){o(this,"nested",!0)})),n.addProperty("own",(function(){o(this,"own",!0)})),n.addProperty("ordered",(function(){o(this,"ordered",!0)})),n.addProperty("any",(function(){o(this,"any",!0),o(this,"all",!1)})),n.addProperty("all",(function(){o(this,"all",!0),o(this,"any",!1)})),n.addChainableMethod("an",s),n.addChainableMethod("a",s),n.addChainableMethod("include",c,a),n.addChainableMethod("contain",c,a),n.addChainableMethod("contains",c,a),n.addChainableMethod("includes",c,a),n.addProperty("ok",(function(){this.assert(o(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")})),n.addProperty("true",(function(){this.assert(!0===o(this,"object"),"expected #{this} to be true","expected #{this} to be false",!o(this,"negate"))})),n.addProperty("false",(function(){this.assert(!1===o(this,"object"),"expected #{this} to be false","expected #{this} to be true",!!o(this,"negate"))})),n.addProperty("null",(function(){this.assert(null===o(this,"object"),"expected #{this} to be null","expected #{this} not to be null")})),n.addProperty("undefined",(function(){this.assert(void 0===o(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")})),n.addProperty("NaN",(function(){this.assert(t.isNaN(o(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")})),n.addProperty("exist",(function(){var e=o(this,"object");this.assert(null!=e,"expected #{this} to exist","expected #{this} to not exist")})),n.addProperty("empty",(function(){var e,n=o(this,"object"),s=o(this,"ssfi"),i=o(this,"message");switch(i=i?i+": ":"",t.type(n).toLowerCase()){case"array":case"string":e=n.length;break;case"map":case"set":e=n.size;break;case"weakmap":case"weakset":throw new r(i+".empty was passed a weak collection",void 0,s);case"function":var a=i+".empty was passed a function "+t.getName(n);throw new r(a.trim(),void 0,s);default:if(n!==Object(n))throw new r(i+".empty was passed non-string primitive "+t.inspect(n),void 0,s);e=Object.keys(n).length}this.assert(0===e,"expected #{this} to be empty","expected #{this} not to be empty")})),n.addProperty("arguments",u),n.addProperty("Arguments",u),n.addMethod("equal",l),n.addMethod("equals",l),n.addMethod("eq",l),n.addMethod("eql",d),n.addMethod("eqls",d),n.addMethod("above",p),n.addMethod("gt",p),n.addMethod("greaterThan",p),n.addMethod("least",h),n.addMethod("gte",h),n.addMethod("below",f),n.addMethod("lt",f),n.addMethod("lessThan",f),n.addMethod("most",y),n.addMethod("lte",y),n.addMethod("within",(function(e,s,i){i&&o(this,"message",i);var a,c=o(this,"object"),u=o(this,"doLength"),l=o(this,"message"),d=l?l+": ":"",p=o(this,"ssfi"),h=t.type(c).toLowerCase(),f=t.type(e).toLowerCase(),y=t.type(s).toLowerCase(),m=!0,b="date"===f&&"date"===y?e.toUTCString()+".."+s.toUTCString():e+".."+s;if(u&&"map"!==h&&"set"!==h&&new n(c,l,p,!0).to.have.property("length"),u||"date"!==h||"date"===f&&"date"===y?"number"===f&&"number"===y||!u&&"number"!==h?u||"date"===h||"number"===h?m=!1:a=d+"expected "+("string"===h?"'"+c+"'":c)+" to be a number or a date":a=d+"the arguments to within must be numbers":a=d+"the arguments to within must be dates",m)throw new r(a,void 0,p);if(u){var g,w="length";"map"===h||"set"===h?(w="size",g=c.size):g=c.length,this.assert(g>=e&&g<=s,"expected #{this} to have a "+w+" within "+b,"expected #{this} to not have a "+w+" within "+b)}else this.assert(c>=e&&c<=s,"expected #{this} to be within "+b,"expected #{this} to not be within "+b)})),n.addMethod("instanceof",m),n.addMethod("instanceOf",m),n.addMethod("property",b),n.addMethod("ownProperty",g),n.addMethod("haveOwnProperty",g),n.addMethod("ownPropertyDescriptor",w),n.addMethod("haveOwnPropertyDescriptor",w),n.addChainableMethod("length",_,v),n.addChainableMethod("lengthOf",_,v),n.addMethod("match",x),n.addMethod("matches",x),n.addMethod("string",(function(e,r){r&&o(this,"message",r);var s=o(this,"object"),i=o(this,"message"),a=o(this,"ssfi");new n(s,i,a,!0).is.a("string"),this.assert(~s.indexOf(e),"expected #{this} to contain "+t.inspect(e),"expected #{this} to not contain "+t.inspect(e))})),n.addMethod("keys",E),n.addMethod("key",E),n.addMethod("throw",S),n.addMethod("throws",S),n.addMethod("Throw",S),n.addMethod("respondTo",O),n.addMethod("respondsTo",O),n.addProperty("itself",(function(){o(this,"itself",!0)})),n.addMethod("satisfy",P),n.addMethod("satisfies",P),n.addMethod("closeTo",k),n.addMethod("approximately",k),n.addMethod("members",(function(e,r){r&&o(this,"message",r);var s=o(this,"object"),i=o(this,"message"),a=o(this,"ssfi");new n(s,i,a,!0).to.be.an("array"),new n(e,i,a,!0).to.be.an("array");var c,u,l,d=o(this,"contains"),p=o(this,"ordered");d?(u="expected #{this} to be "+(c=p?"an ordered superset":"a superset")+" of #{exp}",l="expected #{this} to not be "+c+" of #{exp}"):(u="expected #{this} to have the same "+(c=p?"ordered members":"members")+" as #{exp}",l="expected #{this} to not have the same "+c+" as #{exp}");var h=o(this,"deep")?t.eql:void 0;this.assert(function(e,t,n,r,o){if(!r){if(e.length!==t.length)return!1;t=t.slice()}return e.every((function(e,s){if(o)return n?n(e,t[s]):e===t[s];if(!n){var i=t.indexOf(e);return-1!==i&&(r||t.splice(i,1),!0)}return t.some((function(o,s){return!!n(e,o)&&(r||t.splice(s,1),!0)}))}))}(e,s,h,d,p),u,l,e,s,!0)})),n.addMethod("oneOf",(function(e,t){t&&o(this,"message",t);var r=o(this,"object"),s=o(this,"message"),i=o(this,"ssfi");new n(e,s,i,!0).to.be.an("array"),this.assert(e.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",e,r)})),n.addMethod("change",j),n.addMethod("changes",j),n.addMethod("increase",q),n.addMethod("increases",q),n.addMethod("decrease",T),n.addMethod("decreases",T),n.addMethod("by",(function(e,t){t&&o(this,"message",t);var n,r=o(this,"deltaMsgObj"),s=o(this,"initialDeltaValue"),i=o(this,"finalDeltaValue"),a=o(this,"deltaBehavior"),c=o(this,"realDelta");n="change"===a?Math.abs(i-s)===Math.abs(e):c===Math.abs(e),this.assert(n,"expected "+r+" to "+a+" by "+e,"expected "+r+" to not "+a+" by "+e)})),n.addProperty("extensible",(function(){var e=o(this,"object"),t=e===Object(e)&&Object.isExtensible(e);this.assert(t,"expected #{this} to be extensible","expected #{this} to not be extensible")})),n.addProperty("sealed",(function(){var e=o(this,"object"),t=e!==Object(e)||Object.isSealed(e);this.assert(t,"expected #{this} to be sealed","expected #{this} to not be sealed")})),n.addProperty("frozen",(function(){var e=o(this,"object"),t=e!==Object(e)||Object.isFrozen(e);this.assert(t,"expected #{this} to be frozen","expected #{this} to not be frozen")})),n.addProperty("finite",(function(e){var t=o(this,"object");this.assert("number"==typeof t&&isFinite(t),"expected #{this} to be a finite number","expected #{this} to not be a finite number")}))}},function(e,t){
/*!
                       * chai
                       * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
                       * MIT Licensed
                       */
e.exports=function(e,t){e.expect=function(t,n){return new e.Assertion(t,n)},e.expect.fail=function(t,n,r,o){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new e.AssertionError(r,{actual:t,expected:n,operator:o},e.expect.fail)}}},function(e,t){
/*!
                       * chai
                       * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
                       * MIT Licensed
                       */
e.exports=function(e,t){var n=e.Assertion;function r(){Object.defineProperty(Object.prototype,"should",{set:function(e){Object.defineProperty(this,"should",{value:e,enumerable:!0,configurable:!0,writable:!0})},get:function e(){return this instanceof String||this instanceof Number||this instanceof Boolean||"function"==typeof Symbol&&this instanceof Symbol?new n(this.valueOf(),null,e):new n(this,null,e)},configurable:!0});var t={fail:function(n,r,o,s){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new e.AssertionError(o,{actual:n,expected:r,operator:s},t.fail)},equal:function(e,t,r){new n(e,r).to.equal(t)},Throw:function(e,t,r,o){new n(e,o).to.Throw(t,r)},exist:function(e,t){new n(e,t).to.exist},not:{}};return t.not.equal=function(e,t,r){new n(e,r).to.not.equal(t)},t.not.Throw=function(e,t,r,o){new n(e,o).to.not.Throw(t,r)},t.not.exist=function(e,t){new n(e,t).to.not.exist},t.throw=t.Throw,t.not.throw=t.not.Throw,t}e.should=r,e.Should=r}},function(e,t){
/*!
                       * chai
                       * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
                       * MIT Licensed
                       */
e.exports=function(e,t){
/*!
                                  * Chai dependencies.
                                  */
var n=e.Assertion,r=t.flag,o=e.assert=function(t,r){new n(null,null,e.assert,!0).assert(t,r,"[ negation message unavailable ]")};
/*!
                                  * Module export.
                                  */o.fail=function(t,n,r,s){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new e.AssertionError(r,{actual:t,expected:n,operator:s},o.fail)},o.isOk=function(e,t){new n(e,t,o.isOk,!0).is.ok},o.isNotOk=function(e,t){new n(e,t,o.isNotOk,!0).is.not.ok},o.equal=function(e,t,s){var i=new n(e,s,o.equal,!0);i.assert(t==r(i,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",t,e,!0)},o.notEqual=function(e,t,s){var i=new n(e,s,o.notEqual,!0);i.assert(t!=r(i,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",t,e,!0)},o.strictEqual=function(e,t,r){new n(e,r,o.strictEqual,!0).to.equal(t)},o.notStrictEqual=function(e,t,r){new n(e,r,o.notStrictEqual,!0).to.not.equal(t)},o.deepEqual=o.deepStrictEqual=function(e,t,r){new n(e,r,o.deepEqual,!0).to.eql(t)},o.notDeepEqual=function(e,t,r){new n(e,r,o.notDeepEqual,!0).to.not.eql(t)},o.isAbove=function(e,t,r){new n(e,r,o.isAbove,!0).to.be.above(t)},o.isAtLeast=function(e,t,r){new n(e,r,o.isAtLeast,!0).to.be.least(t)},o.isBelow=function(e,t,r){new n(e,r,o.isBelow,!0).to.be.below(t)},o.isAtMost=function(e,t,r){new n(e,r,o.isAtMost,!0).to.be.most(t)},o.isTrue=function(e,t){new n(e,t,o.isTrue,!0).is.true},o.isNotTrue=function(e,t){new n(e,t,o.isNotTrue,!0).to.not.equal(!0)},o.isFalse=function(e,t){new n(e,t,o.isFalse,!0).is.false},o.isNotFalse=function(e,t){new n(e,t,o.isNotFalse,!0).to.not.equal(!1)},o.isNull=function(e,t){new n(e,t,o.isNull,!0).to.equal(null)},o.isNotNull=function(e,t){new n(e,t,o.isNotNull,!0).to.not.equal(null)},o.isNaN=function(e,t){new n(e,t,o.isNaN,!0).to.be.NaN},o.isNotNaN=function(e,t){new n(e,t,o.isNotNaN,!0).not.to.be.NaN},o.exists=function(e,t){new n(e,t,o.exists,!0).to.exist},o.notExists=function(e,t){new n(e,t,o.notExists,!0).to.not.exist},o.isUndefined=function(e,t){new n(e,t,o.isUndefined,!0).to.equal(void 0)},o.isDefined=function(e,t){new n(e,t,o.isDefined,!0).to.not.equal(void 0)},o.isFunction=function(e,t){new n(e,t,o.isFunction,!0).to.be.a("function")},o.isNotFunction=function(e,t){new n(e,t,o.isNotFunction,!0).to.not.be.a("function")},o.isObject=function(e,t){new n(e,t,o.isObject,!0).to.be.a("object")},o.isNotObject=function(e,t){new n(e,t,o.isNotObject,!0).to.not.be.a("object")},o.isArray=function(e,t){new n(e,t,o.isArray,!0).to.be.an("array")},o.isNotArray=function(e,t){new n(e,t,o.isNotArray,!0).to.not.be.an("array")},o.isString=function(e,t){new n(e,t,o.isString,!0).to.be.a("string")},o.isNotString=function(e,t){new n(e,t,o.isNotString,!0).to.not.be.a("string")},o.isNumber=function(e,t){new n(e,t,o.isNumber,!0).to.be.a("number")},o.isNotNumber=function(e,t){new n(e,t,o.isNotNumber,!0).to.not.be.a("number")},o.isFinite=function(e,t){new n(e,t,o.isFinite,!0).to.be.finite},o.isBoolean=function(e,t){new n(e,t,o.isBoolean,!0).to.be.a("boolean")},o.isNotBoolean=function(e,t){new n(e,t,o.isNotBoolean,!0).to.not.be.a("boolean")},o.typeOf=function(e,t,r){new n(e,r,o.typeOf,!0).to.be.a(t)},o.notTypeOf=function(e,t,r){new n(e,r,o.notTypeOf,!0).to.not.be.a(t)},o.instanceOf=function(e,t,r){new n(e,r,o.instanceOf,!0).to.be.instanceOf(t)},o.notInstanceOf=function(e,t,r){new n(e,r,o.notInstanceOf,!0).to.not.be.instanceOf(t)},o.include=function(e,t,r){new n(e,r,o.include,!0).include(t)},o.notInclude=function(e,t,r){new n(e,r,o.notInclude,!0).not.include(t)},o.deepInclude=function(e,t,r){new n(e,r,o.deepInclude,!0).deep.include(t)},o.notDeepInclude=function(e,t,r){new n(e,r,o.notDeepInclude,!0).not.deep.include(t)},o.nestedInclude=function(e,t,r){new n(e,r,o.nestedInclude,!0).nested.include(t)},o.notNestedInclude=function(e,t,r){new n(e,r,o.notNestedInclude,!0).not.nested.include(t)},o.deepNestedInclude=function(e,t,r){new n(e,r,o.deepNestedInclude,!0).deep.nested.include(t)},o.notDeepNestedInclude=function(e,t,r){new n(e,r,o.notDeepNestedInclude,!0).not.deep.nested.include(t)},o.ownInclude=function(e,t,r){new n(e,r,o.ownInclude,!0).own.include(t)},o.notOwnInclude=function(e,t,r){new n(e,r,o.notOwnInclude,!0).not.own.include(t)},o.deepOwnInclude=function(e,t,r){new n(e,r,o.deepOwnInclude,!0).deep.own.include(t)},o.notDeepOwnInclude=function(e,t,r){new n(e,r,o.notDeepOwnInclude,!0).not.deep.own.include(t)},o.match=function(e,t,r){new n(e,r,o.match,!0).to.match(t)},o.notMatch=function(e,t,r){new n(e,r,o.notMatch,!0).to.not.match(t)},o.property=function(e,t,r){new n(e,r,o.property,!0).to.have.property(t)},o.notProperty=function(e,t,r){new n(e,r,o.notProperty,!0).to.not.have.property(t)},o.propertyVal=function(e,t,r,s){new n(e,s,o.propertyVal,!0).to.have.property(t,r)},o.notPropertyVal=function(e,t,r,s){new n(e,s,o.notPropertyVal,!0).to.not.have.property(t,r)},o.deepPropertyVal=function(e,t,r,s){new n(e,s,o.deepPropertyVal,!0).to.have.deep.property(t,r)},o.notDeepPropertyVal=function(e,t,r,s){new n(e,s,o.notDeepPropertyVal,!0).to.not.have.deep.property(t,r)},o.ownProperty=function(e,t,r){new n(e,r,o.ownProperty,!0).to.have.own.property(t)},o.notOwnProperty=function(e,t,r){new n(e,r,o.notOwnProperty,!0).to.not.have.own.property(t)},o.ownPropertyVal=function(e,t,r,s){new n(e,s,o.ownPropertyVal,!0).to.have.own.property(t,r)},o.notOwnPropertyVal=function(e,t,r,s){new n(e,s,o.notOwnPropertyVal,!0).to.not.have.own.property(t,r)},o.deepOwnPropertyVal=function(e,t,r,s){new n(e,s,o.deepOwnPropertyVal,!0).to.have.deep.own.property(t,r)},o.notDeepOwnPropertyVal=function(e,t,r,s){new n(e,s,o.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(t,r)},o.nestedProperty=function(e,t,r){new n(e,r,o.nestedProperty,!0).to.have.nested.property(t)},o.notNestedProperty=function(e,t,r){new n(e,r,o.notNestedProperty,!0).to.not.have.nested.property(t)},o.nestedPropertyVal=function(e,t,r,s){new n(e,s,o.nestedPropertyVal,!0).to.have.nested.property(t,r)},o.notNestedPropertyVal=function(e,t,r,s){new n(e,s,o.notNestedPropertyVal,!0).to.not.have.nested.property(t,r)},o.deepNestedPropertyVal=function(e,t,r,s){new n(e,s,o.deepNestedPropertyVal,!0).to.have.deep.nested.property(t,r)},o.notDeepNestedPropertyVal=function(e,t,r,s){new n(e,s,o.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(t,r)},o.lengthOf=function(e,t,r){new n(e,r,o.lengthOf,!0).to.have.lengthOf(t)},o.hasAnyKeys=function(e,t,r){new n(e,r,o.hasAnyKeys,!0).to.have.any.keys(t)},o.hasAllKeys=function(e,t,r){new n(e,r,o.hasAllKeys,!0).to.have.all.keys(t)},o.containsAllKeys=function(e,t,r){new n(e,r,o.containsAllKeys,!0).to.contain.all.keys(t)},o.doesNotHaveAnyKeys=function(e,t,r){new n(e,r,o.doesNotHaveAnyKeys,!0).to.not.have.any.keys(t)},o.doesNotHaveAllKeys=function(e,t,r){new n(e,r,o.doesNotHaveAllKeys,!0).to.not.have.all.keys(t)},o.hasAnyDeepKeys=function(e,t,r){new n(e,r,o.hasAnyDeepKeys,!0).to.have.any.deep.keys(t)},o.hasAllDeepKeys=function(e,t,r){new n(e,r,o.hasAllDeepKeys,!0).to.have.all.deep.keys(t)},o.containsAllDeepKeys=function(e,t,r){new n(e,r,o.containsAllDeepKeys,!0).to.contain.all.deep.keys(t)},o.doesNotHaveAnyDeepKeys=function(e,t,r){new n(e,r,o.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(t)},o.doesNotHaveAllDeepKeys=function(e,t,r){new n(e,r,o.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(t)},o.throws=function(e,t,s,i){("string"==typeof t||t instanceof RegExp)&&(s=t,t=null);var a=new n(e,i,o.throws,!0).to.throw(t,s);return r(a,"object")},o.doesNotThrow=function(e,t,r,s){("string"==typeof t||t instanceof RegExp)&&(r=t,t=null),new n(e,s,o.doesNotThrow,!0).to.not.throw(t,r)},o.operator=function(s,i,a,c){var u;switch(i){case"==":u=s==a;break;case"===":u=s===a;break;case">":u=s>a;break;case">=":u=s>=a;break;case"<":u=s<a;break;case"<=":u=s<=a;break;case"!=":u=s!=a;break;case"!==":u=s!==a;break;default:throw c=c?c+": ":c,new e.AssertionError(c+'Invalid operator "'+i+'"',void 0,o.operator)}var l=new n(u,c,o.operator,!0);l.assert(!0===r(l,"object"),"expected "+t.inspect(s)+" to be "+i+" "+t.inspect(a),"expected "+t.inspect(s)+" to not be "+i+" "+t.inspect(a))},o.closeTo=function(e,t,r,s){new n(e,s,o.closeTo,!0).to.be.closeTo(t,r)},o.approximately=function(e,t,r,s){new n(e,s,o.approximately,!0).to.be.approximately(t,r)},o.sameMembers=function(e,t,r){new n(e,r,o.sameMembers,!0).to.have.same.members(t)},o.notSameMembers=function(e,t,r){new n(e,r,o.notSameMembers,!0).to.not.have.same.members(t)},o.sameDeepMembers=function(e,t,r){new n(e,r,o.sameDeepMembers,!0).to.have.same.deep.members(t)},o.notSameDeepMembers=function(e,t,r){new n(e,r,o.notSameDeepMembers,!0).to.not.have.same.deep.members(t)},o.sameOrderedMembers=function(e,t,r){new n(e,r,o.sameOrderedMembers,!0).to.have.same.ordered.members(t)},o.notSameOrderedMembers=function(e,t,r){new n(e,r,o.notSameOrderedMembers,!0).to.not.have.same.ordered.members(t)},o.sameDeepOrderedMembers=function(e,t,r){new n(e,r,o.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(t)},o.notSameDeepOrderedMembers=function(e,t,r){new n(e,r,o.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(t)},o.includeMembers=function(e,t,r){new n(e,r,o.includeMembers,!0).to.include.members(t)},o.notIncludeMembers=function(e,t,r){new n(e,r,o.notIncludeMembers,!0).to.not.include.members(t)},o.includeDeepMembers=function(e,t,r){new n(e,r,o.includeDeepMembers,!0).to.include.deep.members(t)},o.notIncludeDeepMembers=function(e,t,r){new n(e,r,o.notIncludeDeepMembers,!0).to.not.include.deep.members(t)},o.includeOrderedMembers=function(e,t,r){new n(e,r,o.includeOrderedMembers,!0).to.include.ordered.members(t)},o.notIncludeOrderedMembers=function(e,t,r){new n(e,r,o.notIncludeOrderedMembers,!0).to.not.include.ordered.members(t)},o.includeDeepOrderedMembers=function(e,t,r){new n(e,r,o.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(t)},o.notIncludeDeepOrderedMembers=function(e,t,r){new n(e,r,o.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(t)},o.oneOf=function(e,t,r){new n(e,r,o.oneOf,!0).to.be.oneOf(t)},o.changes=function(e,t,r,s){3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.changes,!0).to.change(t,r)},o.changesBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.changesBy,!0).to.change(t,r).by(s)},o.doesNotChange=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.doesNotChange,!0).to.not.change(t,r)},o.changesButNotBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.changesButNotBy,!0).to.change(t,r).but.not.by(s)},o.increases=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.increases,!0).to.increase(t,r)},o.increasesBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.increasesBy,!0).to.increase(t,r).by(s)},o.doesNotIncrease=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.doesNotIncrease,!0).to.not.increase(t,r)},o.increasesButNotBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.increasesButNotBy,!0).to.increase(t,r).but.not.by(s)},o.decreases=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.decreases,!0).to.decrease(t,r)},o.decreasesBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.decreasesBy,!0).to.decrease(t,r).by(s)},o.doesNotDecrease=function(e,t,r,s){return 3===arguments.length&&"function"==typeof t&&(s=r,r=null),new n(e,s,o.doesNotDecrease,!0).to.not.decrease(t,r)},o.doesNotDecreaseBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);return new n(e,i,o.doesNotDecreaseBy,!0).to.not.decrease(t,r).by(s)},o.decreasesButNotBy=function(e,t,r,s,i){if(4===arguments.length&&"function"==typeof t){var a=s;s=r,i=a}else 3===arguments.length&&(s=r,r=null);new n(e,i,o.decreasesButNotBy,!0).to.decrease(t,r).but.not.by(s)}
/*!
                                  * ### .ifError(object)
                                  *
                                  * Asserts if value is not a false value, and throws if it is a true value.
                                  * This is added to allow for chai to be a drop-in replacement for Node's
                                  * assert class.
                                  *
                                  *     var err = new Error('I am a custom error');
                                  *     assert.ifError(err); // Rethrows err!
                                  *
                                  * @name ifError
                                  * @param {Object} object
                                  * @namespace Assert
                                  * @api public
                                  */,o.ifError=function(e){if(e)throw e},o.isExtensible=function(e,t){new n(e,t,o.isExtensible,!0).to.be.extensible},o.isNotExtensible=function(e,t){new n(e,t,o.isNotExtensible,!0).to.not.be.extensible},o.isSealed=function(e,t){new n(e,t,o.isSealed,!0).to.be.sealed},o.isNotSealed=function(e,t){new n(e,t,o.isNotSealed,!0).to.not.be.sealed},o.isFrozen=function(e,t){new n(e,t,o.isFrozen,!0).to.be.frozen},o.isNotFrozen=function(e,t){new n(e,t,o.isNotFrozen,!0).to.not.be.frozen},o.isEmpty=function(e,t){new n(e,t,o.isEmpty,!0).to.be.empty},o.isNotEmpty=function(e,t){new n(e,t,o.isNotEmpty,!0).to.not.be.empty},
/*!
                                  * Aliases.
                                  */
function e(t,n){return o[n]=o[t],e}("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")}},function(e,t,n){var r=n(22),o=n(37),s=n(24);e.exports=function(e){var t={};return"function"==typeof e&&(e=s.createServer(e)),r.forEach((function(n){t[n]=function(t){return new o(e,n,t)}})),t.del=t.delete,t},e.exports.Test=o,e.exports.agent=n(90)},function(e,t){e.exports=n(67)},function(e,t,n){var r=n(69).IncomingForm;r.IncomingForm=r,e.exports=r},function(e,t,n){var r;global.GENTLY&&(r=GENTLY.hijack(n(70)));var o=r("crypto"),s=r("fs"),i=r("util"),a=r("path"),c=r("./file"),u=r("./multipart_parser").MultipartParser,l=r("./querystring_parser").QuerystringParser,d=r("./octet_parser").OctetParser,p=r("./json_parser").JSONParser,h=r("string_decoder").StringDecoder,f=r("events").EventEmitter,y=r("stream").Stream,m=r("os");function b(e){return this instanceof b?(f.call(this),e=e||{},this.error=null,this.ended=!1,this.maxFields=e.maxFields||1e3,this.maxFieldsSize=e.maxFieldsSize||20971520,this.maxFileSize=e.maxFileSize||209715200,this.keepExtensions=e.keepExtensions||!1,this.uploadDir=e.uploadDir||m.tmpdir&&m.tmpdir()||m.tmpDir(),this.encoding=e.encoding||"utf-8",this.headers=null,this.type=null,this.hash=e.hash||!1,this.multiples=e.multiples||!1,this.bytesReceived=null,this.bytesExpected=null,this._parser=null,this._flushing=0,this._fieldsSize=0,this._fileSize=0,this.openedFiles=[],this):new b(e)}i.inherits(b,f),t.IncomingForm=b,b.prototype.parse=function(e,t){if(this.pause=function(){try{e.pause()}catch(e){return this.ended||this._error(e),!1}return!0},this.resume=function(){try{e.resume()}catch(e){return this.ended||this._error(e),!1}return!0},t){var n={},r={};this.on("field",(function(e,t){n[e]=t})).on("file",(function(e,t){this.multiples&&r[e]?(Array.isArray(r[e])||(r[e]=[r[e]]),r[e].push(t)):r[e]=t})).on("error",(function(e){t(e,n,r)})).on("end",(function(){t(null,n,r)}))}this.writeHeaders(e.headers);var o=this;return e.on("error",(function(e){o._error(e)})).on("aborted",(function(){o.emit("aborted"),o._error(new Error("Request aborted"))})).on("data",(function(e){o.write(e)})).on("end",(function(){if(!o.error){var e=o._parser.end();e&&o._error(e)}})),this},b.prototype.writeHeaders=function(e){this.headers=e,this._parseContentLength(),this._parseContentType()},b.prototype.write=function(e){if(!this.error){if(this._parser){this.bytesReceived+=e.length,this.emit("progress",this.bytesReceived,this.bytesExpected);var t=this._parser.write(e);return t!==e.length&&this._error(new Error("parser error, "+t+" of "+e.length+" bytes parsed")),t}this._error(new Error("uninitialized parser"))}},b.prototype.pause=function(){return!1},b.prototype.resume=function(){return!1},b.prototype.onPart=function(e){this.handlePart(e)},b.prototype.handlePart=function(e){var t=this;if(void 0===e.filename){var n="",r=new h(this.encoding);return e.on("data",(function(e){t._fieldsSize+=e.length,t._fieldsSize>t.maxFieldsSize?t._error(new Error("maxFieldsSize exceeded, received "+t._fieldsSize+" bytes of field data")):n+=r.write(e)})),void e.on("end",(function(){t.emit("field",e.name,n)}))}this._flushing++;var o=new c({path:this._uploadPath(e.filename),name:e.filename,type:e.mime,hash:t.hash});this.emit("fileBegin",e.name,o),o.open(),this.openedFiles.push(o),e.on("data",(function(e){t._fileSize+=e.length,t._fileSize>t.maxFileSize?t._error(new Error("maxFileSize exceeded, received "+t._fileSize+" bytes of file data")):0!=e.length&&(t.pause(),o.write(e,(function(){t.resume()})))})),e.on("end",(function(){o.end((function(){t._flushing--,t.emit("file",e.name,o),t._maybeEnd()}))}))},b.prototype._parseContentType=function(){if(0!==this.bytesExpected)if(this.headers["content-type"])if(this.headers["content-type"].match(/octet-stream/i))this._initOctetStream();else if(this.headers["content-type"].match(/urlencoded/i))this._initUrlencoded();else if(this.headers["content-type"].match(/multipart/i)){var e=this.headers["content-type"].match(/boundary=(?:"([^"]+)"|([^;]+))/i);e?this._initMultipart(e[1]||e[2]):this._error(new Error("bad content-type header, no multipart boundary"))}else this.headers["content-type"].match(/json/i)?this._initJSONencoded():this._error(new Error("bad content-type header, unknown content-type: "+this.headers["content-type"]));else this._error(new Error("bad content-type header, no content-type"));else this._parser=function(e){return{end:function(){return e.ended=!0,e._maybeEnd(),null}}}(this)},b.prototype._error=function(e){this.error||this.ended||(this.error=e,this.emit("error",e),Array.isArray(this.openedFiles)&&this.openedFiles.forEach((function(e){e._writeStream.destroy(),setTimeout(s.unlink,0,e.path,(function(e){}))})))},b.prototype._parseContentLength=function(){this.bytesReceived=0,this.headers["content-length"]?this.bytesExpected=parseInt(this.headers["content-length"],10):void 0===this.headers["transfer-encoding"]&&(this.bytesExpected=0),null!==this.bytesExpected&&this.emit("progress",this.bytesReceived,this.bytesExpected)},b.prototype._newParser=function(){return new u},b.prototype._initMultipart=function(e){this.type="multipart";var t,n,r,o=new u,s=this;o.initWithBoundary(e),o.onPartBegin=function(){(r=new y).readable=!0,r.headers={},r.name=null,r.filename=null,r.mime=null,r.transferEncoding="binary",r.transferBuffer="",t="",n=""},o.onHeaderField=function(e,n,r){t+=e.toString(s.encoding,n,r)},o.onHeaderValue=function(e,t,r){n+=e.toString(s.encoding,t,r)},o.onHeaderEnd=function(){t=t.toLowerCase(),r.headers[t]=n;var e=n.match(/\bname=("([^"]*)"|([^\(\)<>@,;:\\"\/\[\]\?=\{\}\s\t/]+))/i);"content-disposition"==t?(e&&(r.name=e[2]||e[3]||""),r.filename=s._fileName(n)):"content-type"==t?r.mime=n:"content-transfer-encoding"==t&&(r.transferEncoding=n.toLowerCase()),t="",n=""},o.onHeadersEnd=function(){switch(r.transferEncoding){case"binary":case"7bit":case"8bit":o.onPartData=function(e,t,n){r.emit("data",e.slice(t,n))},o.onPartEnd=function(){r.emit("end")};break;case"base64":o.onPartData=function(e,t,n){r.transferBuffer+=e.slice(t,n).toString("ascii");var o=4*parseInt(r.transferBuffer.length/4,10);r.emit("data",new Buffer(r.transferBuffer.substring(0,o),"base64")),r.transferBuffer=r.transferBuffer.substring(o)},o.onPartEnd=function(){r.emit("data",new Buffer(r.transferBuffer,"base64")),r.emit("end")};break;default:return s._error(new Error("unknown transfer-encoding"))}s.onPart(r)},o.onEnd=function(){s.ended=!0,s._maybeEnd()},this._parser=o},b.prototype._fileName=function(e){var t=e.match(/\bfilename=("(.*?)"|([^\(\)<>@,;:\\"\/\[\]\?=\{\}\s\t/]+))($|;\s)/i);if(t){var n=t[2]||t[3]||"",r=n.substr(n.lastIndexOf("\\")+1);return(r=r.replace(/%22/g,'"')).replace(/&#([\d]{4});/g,(function(e,t){return String.fromCharCode(t)}))}},b.prototype._initUrlencoded=function(){this.type="urlencoded";var e=new l(this.maxFields),t=this;e.onField=function(e,n){t.emit("field",e,n)},e.onEnd=function(){t.ended=!0,t._maybeEnd()},this._parser=e},b.prototype._initOctetStream=function(){this.type="octet-stream";var e=this.headers["x-file-name"],t=this.headers["content-type"],n=new c({path:this._uploadPath(e),name:e,type:t});this.emit("fileBegin",e,n),n.open(),this.openedFiles.push(n),this._flushing++;var r=this;r._parser=new d;var o=0;r._parser.on("data",(function(e){r.pause(),o++,n.write(e,(function(){o--,r.resume(),r.ended&&r._parser.emit("doneWritingFile")}))})),r._parser.on("end",(function(){r._flushing--,r.ended=!0;var e=function(){n.end((function(){r.emit("file","file",n),r._maybeEnd()}))};0===o?e():r._parser.once("doneWritingFile",e)}))},b.prototype._initJSONencoded=function(){this.type="json";var e=new p(this),t=this;e.onField=function(e,n){t.emit("field",e,n)},e.onEnd=function(){t.ended=!0,t._maybeEnd()},this._parser=e},b.prototype._uploadPath=function(e){var t="upload_"+o.randomBytes(16).toString("hex");if(this.keepExtensions){var n=a.extname(e);t+=n=n.replace(/(\.[a-z0-9]+).*/i,"$1")}return a.join(this.uploadDir,t)},b.prototype._maybeEnd=function(){!this.ended||this._flushing||this.error||this.emit("end")}},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=70},function(e,t){e.exports=n(71)},function(e,t,n){"use strict";const r=n(28),o=n(29),s=n(73);function i(e){o.call(this);const t=this.res=e.res;this.request=e,this.req=e.req,this.text=t.text,this.body=void 0!==t.body?t.body:{},this.files=t.files||{},this.buffered="string"==typeof this.text,this.header=this.headers=t.headers,this._setStatusProperties(t.statusCode),this._setHeaderProperties(this.header),this.setEncoding=t.setEncoding.bind(t),t.on("data",this.emit.bind(this,"data")),t.on("end",this.emit.bind(this,"end")),t.on("close",this.emit.bind(this,"close")),t.on("error",this.emit.bind(this,"error"))}e.exports=i,r.inherits(i,o),s(i.prototype),i.prototype.destroy=function(e){this.res.destroy(e)},i.prototype.pause=function(){this.res.pause()},i.prototype.resume=function(){this.res.resume()},i.prototype.toError=function(){const e=this.req,t=e.method,n=e.path,r=`cannot ${t} ${n} (${this.status})`,o=new Error(r);return o.status=this.status,o.text=this.text,o.method=t,o.path=n,o},i.prototype.setStatusProperties=function(e){return console.warn("In superagent 2.x setStatusProperties is a private method"),this._setStatusProperties(e)},i.prototype.toJSON=function(){return{req:this.request.toJSON(),header:this.header,status:this.status,text:this.text}}},function(e,t,n){"use strict";var r=n(38);function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}e.exports=o,o.prototype.get=function(e){return this.header[e.toLowerCase()]},o.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=r.type(t);var n=r.params(t);for(var o in n)this[o]=n[o];this.links={};try{e.link&&(this.links=r.parseLinks(e.link))}catch(e){}},o.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}},function(e,t,n){"use strict";const r=n(75).StringDecoder,o=n(29),s=n(39);t.unzip=(e,t)=>{const n=s.createUnzip(),i=new o;let a;i.req=e,n.on("error",e=>{e&&"Z_BUF_ERROR"===e.code?i.emit("end"):i.emit("error",e)}),t.pipe(n),t.setEncoding=e=>{a=new r(e)},n.on("data",e=>{if(a){const t=a.write(e);t.length&&i.emit("data",t)}else i.emit("data",e)}),n.on("end",()=>{i.emit("end")});const c=t.on;t.on=function(e,n){return"data"==e||"end"==e?i.on(e,n):"error"==e?(i.on(e,n),c.call(t,e,n)):c.call(t,e,n),this}}},function(e,t){e.exports=n(75)},function(e,t){e.exports=n(76)},function(e,t){e.exports=n(77)},function(e,t){e.exports=n(78)},function(e){e.exports=JSON.parse('{"name":"superagent","version":"3.8.3","description":"elegant & feature rich browser / node HTTP with a fluent API","scripts":{"prepare":"make all","test":"make test"},"keywords":["http","ajax","request","agent"],"license":"MIT","author":"TJ Holowaychuk <tj@vision-media.ca>","contributors":["Kornel Lesiński <kornel@geekhood.net>","Peter Lyons <pete@peterlyons.com>","Hunter Loftis <hunter@hunterloftis.com>"],"repository":{"type":"git","url":"git://github.com/visionmedia/superagent.git"},"dependencies":{"component-emitter":"^1.2.0","cookiejar":"^2.1.0","debug":"^3.1.0","extend":"^3.0.0","form-data":"^2.3.1","formidable":"^1.2.0","methods":"^1.1.1","mime":"^1.4.1","qs":"^6.5.1","readable-stream":"^2.3.5"},"devDependencies":{"Base64":"^1.0.1","basic-auth-connect":"^1.0.0","body-parser":"^1.18.2","browserify":"^14.1.0","cookie-parser":"^1.4.3","express":"^4.16.3","express-session":"^1.15.6","marked":"0.3.12","mocha":"^3.5.3","multer":"^1.3.0","should":"^11.2.0","should-http":"^0.1.1","zuul":"^3.11.1"},"browser":{"./lib/node/index.js":"./lib/client.js","./test/support/server.js":"./test/support/blank.js"},"component":{"scripts":{"superagent":"lib/client.js"}},"main":"./lib/node/index.js","engines":{"node":">= 4.0"}}')},function(e,t,n){"use strict";var r=n(81);function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}e.exports=o,o.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},o.prototype.parse=function(e){return this._parser=e,this},o.prototype.responseType=function(e){return this._responseType=e,this},o.prototype.serialize=function(e){return this._serializer=e,this},o.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},o.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var s=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];o.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(e,t);if(!0===n)return!0;if(!1===n)return!1}catch(e){console.error(e)}if(t&&t.status&&t.status>=500&&501!=t.status)return!0;if(e){if(e.code&&~s.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},o.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},o.prototype.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(e,t){n.end((function(n,r){n?t(n):e(r)}))}))}return this._fullfilledPromise.then(e,t)},o.prototype.catch=function(e){return this.then(void 0,e)},o.prototype.use=function(e){return e(this),this},o.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},o.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},o.prototype.get=function(e){return this._header[e.toLowerCase()]},o.prototype.getHeader=o.prototype.get,o.prototype.set=function(e,t){if(r(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},o.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},o.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),r(e)){for(var n in e)this.field(n,e[n]);return this}if(Array.isArray(t)){for(var o in t)this.field(e,t[o]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},o.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},o.prototype._auth=function(e,t,n,r){switch(n.type){case"basic":this.set("Authorization","Basic "+r(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},o.prototype.withCredentials=function(e){return null==e&&(e=!0),this._withCredentials=e,this},o.prototype.redirects=function(e){return this._maxRedirects=e,this},o.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},o.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},o.prototype.send=function(e){var t=r(e),n=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&r(this._data))for(var o in e)this._data[o]=e[o];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(n||this.type("json"),this)},o.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},o.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var n=this.url.substring(t+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,t)+"?"+n.join("&")}}},o.prototype._appendQueryString=function(){console.trace("Unsupported")},o.prototype._timeoutError=function(e,t,n){if(!this._aborted){var r=new Error(e+t+"ms exceeded");r.timeout=t,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},o.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))}},function(e,t,n){"use strict";e.exports=function(e){return null!==e&&"object"==typeof e}},function(e,t,n){"use strict";const r=n(30).CookieJar,o=n(30).CookieAccessInfo,s=n(23).parse,i=n(27),a=n(83);let c=n(22);function u(e){if(!(this instanceof u))return new u(e);a.call(this),this.jar=new r,e&&(e.ca&&this.ca(e.ca),e.key&&this.key(e.key),e.pfx&&this.pfx(e.pfx),e.cert&&this.cert(e.cert))}e.exports=u,u.prototype=Object.create(a.prototype),u.prototype._saveCookies=function(e){const t=e.headers["set-cookie"];t&&this.jar.setCookies(t)},u.prototype._attachCookies=function(e){const t=s(e.url),n=o(t.hostname,t.pathname,"https:"==t.protocol),r=this.jar.getCookies(n).toValueString();e.cookies=r},c.forEach(e=>{const t=e.toUpperCase();u.prototype[e]=function(e,n){const r=new i.Request(t,e);return r.on("response",this._saveCookies.bind(this)),r.on("redirect",this._saveCookies.bind(this)),r.on("redirect",this._attachCookies.bind(this,r)),this._attachCookies(r),this._setDefaults(r),n&&r.end(n),r}}),u.prototype.del=u.prototype.delete},function(e,t){function n(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach((function(e){n.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}})),n.prototype._setDefaults=function(e){this._defaults.forEach((function(t){e[t.fn].apply(e,t.arguments)}))},e.exports=n},function(e,t,n){"use strict";t["application/x-www-form-urlencoded"]=n(85),t["application/json"]=n(86),t.text=n(87);const r=n(88);t["application/octet-stream"]=r,t["application/pdf"]=r,t.image=r},function(e,t,n){"use strict";const r=n(41);e.exports=function(e,t){e.text="",e.setEncoding("ascii"),e.on("data",t=>{e.text+=t}),e.on("end",()=>{try{t(null,r.parse(e.text))}catch(e){t(e)}})}},function(e,t,n){"use strict";e.exports=function(e,t){e.text="",e.setEncoding("utf8"),e.on("data",t=>{e.text+=t}),e.on("end",()=>{try{var n=e.text&&JSON.parse(e.text)}catch(t){var r=t;r.rawResponse=e.text||null,r.statusCode=e.statusCode}finally{t(r,n)}})}},function(e,t,n){"use strict";e.exports=function(e,t){e.text="",e.setEncoding("utf8"),e.on("data",t=>{e.text+=t}),e.on("end",t)}},function(e,t,n){"use strict";e.exports=(e,t)=>{const n=[];e.on("data",e=>{n.push(e)}),e.on("end",()=>{t(null,Buffer.concat(n))})}},function(e,t){e.exports=n(89)},function(e,t,n){var r=n(27).agent,o=n(22),s=n(24),i=n(37);function a(e,t){if(!(this instanceof a))return new a(e,t);"function"==typeof e&&(e=s.createServer(e)),t&&(this._ca=t.ca,this._key=t.key,this._cert=t.cert),r.call(this),this.app=e}e.exports=a,Object.setPrototypeOf(a.prototype,r.prototype),a.prototype.host=function(e){return this._host=e,this},o.forEach((function(e){a.prototype[e]=function(t,n){var r=new i(this.app,e.toUpperCase(),t,this._host);return r.ca(this._ca),r.cert(this._cert),r.key(this._key),r.on("response",this._saveCookies.bind(this)),r.on("redirect",this._saveCookies.bind(this)),r.on("redirect",this._attachCookies.bind(this,r)),this._attachCookies(r),this._setDefaults(r),r}})),a.prototype.del=a.prototype.delete},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t,n){"use strict";var r=n(1),o=n.n(r);n(14).config();const s=o.a.object().keys({NODE_ENV:o.a.string().default("development").allow(["development","production"]),PORT:o.a.number().default(8080),MYSQL_PORT:o.a.number().default(3306),MYSQL_HOST:o.a.string().default("127.0.0.1"),MYSQL_USER:o.a.string(),MYSQL_PASS:o.a.string(),MYSQL_NAME:o.a.string(),VERSION:o.a.string()}).unknown().required(),{error:i,value:a}=o.a.validate(process.env,s);if(i)throw new Error(`Config validation error: ${i.message}`);const c={version:a.VERSION,env:a.NODE_ENV,port:a.PORT,mysqlPort:a.MYSQL_PORT,mysqlHost:a.MYSQL_HOST,mysqlUserName:a.MYSQL_USER,mysqlPass:a.MYSQL_PASS,mysqlDatabase:a.MYSQL_DATABASE};t.a=c},function(e,t){e.exports=n(1)},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(3)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(5)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(7)},function(e,t){e.exports=n(8)},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=n(0),i=n(3),a=n.n(i),c=n(4),u=n.n(c),l=n(5),d=n.n(l);const p=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase});var h=n(1),f=n.n(h),y={createArticle:{body:{user_id:f.a.number().required(),article_title:f.a.string().required(),article_tag:f.a.string().required(),article_content:f.a.string().min(20).required()}},createUser:{body:{user_name:f.a.string().required(),user_mail:f.a.string().email().trim().required(),user_password:f.a.string().regex(/[a-zA-Z0-9]{6,30}$/).required()}}};const m=o.a.Router();m.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{p.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            Article",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(y.createArticle),(e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO Article SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ article_id: ${r.insertId}`),o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>t.send(e))}),m.route("/:article_id").put((e,t)=>{const n=e.params.article_id;((e,t)=>new Promise((n,r)=>{p.getConnection((o,s)=>{o?r(o):s.query("UPDATE Article SET ? WHERE article_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{p.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM Article WHERE article_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.article_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),m.get("/personal",(e,t,n)=>{const r=e.headers.authorization;if(void 0!==r){const t=r.split(" ")[1];e.token=t,n()}else t.status(403).send(Object.assign({code:403},{message:"您尚未登入！"}))},(e,t)=>{(e=>new Promise((t,n)=>{d.a.verify(e,"my_secret_key",(e,r)=>{if(e)n(e);else{const e=r.payload.user_id;p.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM Article WHERE user_id = ?",[e],(e,r)=>{e?n(e):t(r),o.release()})}),t(payload)}})}))(e.token).then(e=>{t.send(e)}).catch(e=>t.status(401).send(e))}),m.use("/supertest");var b=m,g=n(6),w=n.n(g),v=n(7),_=n.n(v);class x extends Error{constructor(e,t,n,r){super(e),this.message=e,this.name=this.constructor.name,this.status=t,this.isPublic=n,this.code=r,this.isOperational=!0,Error.captureStackTrace(this,this.constructor.name)}}var E={LoginError1:class extends x{constructor(e="信箱尚未註冊！",t=_.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}},LoginError2:class extends x{constructor(e="您輸入的密碼有誤！",t=_.a.NOT_FOUND,n=!0,r=401){super(e,t,n,r),this.name="LoginError"}}};const S=a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}),O=o.a.Router();O.route("/").get((e,t)=>{(()=>new Promise((e,t)=>{S.getConnection((n,r)=>{n?t(n):r.query("SELECT\n            *\n          FROM\n            User",(n,o)=>{n?(console.error("SQL error: ",n),t(n)):e(o),r.release()})})}))().then(e=>{t.send(e)}).catch(e=>t.send(e))}).post(u()(y.createUser),(e,t)=>{(e=>new Promise((t,n)=>{S.getConnection((r,o)=>{r?n(r):o.query("INSERT INTO User SET ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows&&t(`新增成功！ user_id: ${r.insertId}`),o.release()})})}))({user_name:e.body.user_name,user_mail:e.body.user_mail,user_password:w.a.hashSync(e.body.user_password,10)}).then(e=>{t.send(e)}).catch(e=>t.send(e))}),O.route("/:user_id").put((e,t)=>{const n=e.params.user_id;((e,t)=>new Promise((n,r)=>{S.getConnection((o,s)=>{o?r(o):s.query("UPDATE User SET ? WHERE user_id = ?",[e,t],(e,t)=>{e?(console.error("SQL error: ",e),r(e)):0===t.affectedRows?n("請確認修改Id！"):t.message.match("Changed: 1")?n("資料修改成功"):n("資料無異動"),s.release()})})}))(e.body,n).then(e=>{t.send(e)}).catch(e=>t.send(e))}).delete((e,t)=>{(e=>new Promise((t,n)=>{S.getConnection((r,o)=>{r?n(r):o.query("DELETE FROM User WHERE user_id = ?",e,(e,r)=>{e?(console.error("SQL error: ",e),n(e)):1===r.affectedRows?t("刪除成功！"):t("刪除失敗！"),o.release()})})}))(e.params.user_id).then(e=>{t.send(e)}).catch(e=>t.send(e))}),O.route("/login").post((e,t,n)=>{(e=>new Promise((t,n)=>{S.getConnection((r,o)=>{r?n(r):o.query("SELECT * FROM User WHERE user_mail = ?",e.user_mail,(r,s)=>{if(r)console.error("SQL error: ",r),n(r);else if(0===Object.keys(s).length)n(new E.LoginError1);else{const r=s[0].user_password,o=e.user_password;w.a.compare(o,r).then(e=>{if(e){const e={user_id:s[0].user_id,user_name:s[0].user_name,user_mail:s[0].user_mail},n=d.a.sign({payload:e,exp:Math.floor(Date.now()/1e3)+900},"my_secret_key");t(Object.assign({code:200},{message:"登入成功",token:n}))}else n(new E.LoginError2)})}o.release()})})}))(e.body).then(e=>{t.send(e)}).catch(e=>{n(e)})});var P=O;const k=o.a.Router();k.get("/",(e,t)=>{t.send(`此路徑是: localhost:${s.a.port}/api`)}),k.get("/sqlTest",(e,t)=>{a.a.createPool({connectionLimit:10,host:s.a.mysqlHost,user:s.a.mysqlUserName,password:s.a.mysqlPass,database:s.a.mysqlDatabase}).getConnection((e,n)=>{e?(t.send(e),console.log("連線失敗！")):(t.send("連線成功！"),console.log(n))})}),k.use("/article",b),k.use("/user",P);var j=k,q=n(8),T=n.n(q),M=n(10),N=n.n(M),C=n(11),A=n.n(C);const L=o()();L.use(T.a.json()),L.use(T.a.urlencoded({extended:!0})),L.use((e,t,n,r)=>{let o,s,i;return e instanceof expressValidation.ValidationError?("query"!==e.errors[0].location&&"body"!==e.errors[0].location||(o=e.errors[0].messages,s=400,i=httpStatus.BAD_REQUEST),r(new E.APIError(o,i,!0,s))):r(e)}),L.use((e,t,n,r)=>{n.status(e.status).json({message:e.isPublic?e.message:httpStatus[e.status],code:e.code?e.code:httpStatus[e.status],stack:"development"===s.a.env?e.stack:{}}),r()}),L.use(N()()),L.use(A()("dev")),L.get("/",(e,t)=>{t.send(`server started on  port http://127.0.0.1:${s.a.port} (${s.a.env})`)}),L.use("/api",j),t.a=L},function(e,t){e.exports=n(10)},function(e,t){e.exports=n(11)},function(e,t,n){"use strict";n.r(t),function(e){var r=n(0),o=n(9);e.parent||o.a.listen(r.a.port,()=>{console.log(`server started on  port http://127.0.0.1:${r.a.port} (${r.a.env})`)}),t.default=o.a}.call(this,n(13)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=n(14)}])}])}])}])}])}])}])}])}])}])},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t){e.exports=n(27)},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(33)}])},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t){e.exports=n(27)},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(33)}])},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t){e.exports=n(27)},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(33)}])},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t){e.exports=n(27)},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(33)}])},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t){e.exports=n(27)},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(33)}])},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t){e.exports=n(27)},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(33)}])},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t){e.exports=n(27)},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(33)}])},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t){e.exports=n(27)},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(33)}])},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t){e.exports=n(27)},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(33)}])},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t){e.exports=n(27)},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(33)}])},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t){e.exports=n(27)},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(33)}])},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t){e.exports=n(27)},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(33)}])},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t){e.exports=n(27)},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(33)}])},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t){e.exports=n(27)},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(33)}])},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t){e.exports=n(27)},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(33)}])},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t){e.exports=n(27)},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(33)}])},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t){e.exports=n(27)},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(33)}])},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t){e.exports=n(27)},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(33)}])},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t){e.exports=n(27)},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(33)}])},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t){e.exports=n(27)},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(33)}])},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t){e.exports=n(27)},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(33)}])},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t){e.exports=n(27)},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(33)}])},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t){e.exports=n(27)},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(33)}])},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t){e.exports=n(27)},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(33)}])},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t){e.exports=n(27)},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(33)}])},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t){e.exports=n(27)},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(33)}])},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t){e.exports=n(27)},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(33)}])},function(e,t){e.exports=n(19)},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(21)},function(e,t){e.exports=n(22)},function(e,t){e.exports=n(23)},function(e,t){e.exports=n(24)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(26)},function(e,t){e.exports=n(27)},function(e,t){e.exports=n(28)},function(e,t){e.exports=n(29)},function(e,t){e.exports=n(30)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(33)}])},function(e,t){e.exports=require("methods")},function(e,t){e.exports=require("url")},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("util")},function(e,t){e.exports=require("stream")},function(e,t){e.exports=require("zlib")},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("qs")},function(e,t){e.exports=require("debug")},function(e,t){e.exports=require("form-data")},function(e,t){e.exports=require("string_decoder")},function(e,t){e.exports=require("extend")},function(e,t){e.exports=require("mime")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("assert")}]);